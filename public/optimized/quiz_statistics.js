require(["i18n!quizzes.statistics","jquery","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.templateData"],function(a,b){b.scrollSidebar(),b(".essay_answer").live("click",function(a){a.preventDefault(),b(this).addClass("expanded")}),b(".download_submissions_link").click(function(a){a.preventDefault(),INST.downloadSubmissions(b(this).attr("href"))}),b(".answer,.number_answer").live("click",function(c){var d=b(this).getTemplateData({textValues:["user_ids"],dataValues:["responses"]}),e=d.user_ids,f=parseInt(d.responses,10)||0;if(e!=null&&f>0){var g=b("#submitted_users_dialog");g.find(".user:not(.blank)").remove();var h=[],i=b(this).find(".answer_text").text(),j=b(this).parents("tr");while(j.length&&j.find("td .question_name").length==0)j=j.prev();var k=j.find("td .question_name").text();e=e.split(",");var l=f-e.length,m=b.unique(e);for(var n in m){var o=m[n],p=b.grep(e,function(a){return a==o}).length,q=b("#submitted_users .user.user_"+o).text();p>1&&(q=q+" ("+a.t("count_attempts","attempt",{count:p})+")");if(q){var r=g.find(".user.blank:first").clone(!0).removeClass("blank");r.fillTemplateData({data:{name:q}}),g.find(".users").append(r.show())}else l++}if(l>0){var r=g.find(".user.blank:first").clone(!0).removeClass("blank");r.fillTemplateData({data:{name:a.t("uncounted_submissions",{one:"1 other submission",other:"%{count} other submissions"},{count:l})}}),r.addClass("uncounted"),g.find(".users").append(r.show())}g.fillTemplateData({data:{answer_text:i,question_name:k}}),g.dialog({title:a.t("titles.submitted_users_for_quesiton","Submitted Users for %{user}",{user:k}),width:500,height:300})}})})