require(["i18n!accounts","jquery","user_sortable_name","jquery.instructure_forms","jqueryui/dialog","compiled/jquery/fixDialogButtons","compiled/jquery.rails_flash_notifications"],function(a,b){b(".add_user_link").click(function(c){c.preventDefault(),b("#add_user_form :text").val("");var d=b("#add_user_dialog"),e=b("<a>",{href:"http://www.instructure.com/privacy-policy",style:"padding-left: 1em; line-height: 3em","class":"privacy_policy_link",target:"_blank"}),f;d.dialog({title:a.t("add_user_dialog_title","Add a New User"),width:500}).fixDialogButtons(),f=d.closest(".ui-dialog").find(".ui-dialog-buttonpane"),f.find(".privacy_policy_link").length||(e.text(a.t("#site.view_privacy_policy","View Privacy Policy")),d.closest(".ui-dialog").find(".ui-dialog-buttonpane").append(e)),b("#add_user_form :text:visible:first").focus().select()}),b("#add_user_form").formSubmit({required:["user[name]"],beforeSubmit:function(c){b(this).find("button").attr("disabled",!0).filter(".submit_button").text(a.t("adding_user_message","Adding User..."))},success:function(c){b(this).find("button").attr("disabled",!1).filter(".submit_button").text(a.t("add_user_button","Add User"));var d=c.user.user||c.user,e="<a href='/users/"+d.id+"'>$1</a>",f="";c.message_sent?f=a.t("user_added_message_sent_message","*%{user}* successfully added! They should receive an email confirmation shortly.",{user:d.name,wrapper:e}):f=a.t("user_added_message","*%{user}* successfully added!",{user:d.name,wrapper:e}),b.flashMessage(f),b("#add_user_dialog").dialog("close")},error:function(c){b(this).find("button").attr("disabled",!1).filter(".submit_button").text(a.t("user_add_failed_message","Adding User Failed, please try again"))}}),b("#add_user_dialog .cancel_button").click(function(){b("#add_user_dialog").dialog("close")})})