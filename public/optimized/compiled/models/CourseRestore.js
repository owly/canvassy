(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["Backbone","jquery","i18n!course_restore","jquery.instructure_forms"],function(b,d,e){var f,g;return f=function(b){function f(){return this.restore=a(this.restore,this),g=f.__super__.constructor.apply(this,arguments),g}return c(f,b),f.prototype.baseUrl=function(){return"/api/v1/accounts/"+this.get("account_id")+"/courses"},f.prototype.searchUrl=function(){return""+this.baseUrl()+"/"+this.get("id")+"?include[]=all_courses"},f.prototype.search=function(a){var b=this;return this.trigger("searching"),this.set("id",a,{silent:!0}),this.fetch({url:this.searchUrl(),success:function(a){return a.trigger("doneSearching")},error:function(a,c){var e,f;return e=b.get("account_id"),b.clear({silent:!0}),b.set("account_id",e,{silent:!0}),f=d.parseJSON(c.responseText),b.set(f)}})},f.prototype.parse=function(a){return a.account_id=this.get("account_id"),this.clear({silent:!0}),a},f.prototype.restore=function(){var a,b,c,f,g,h,i=this;return this.trigger("restoring"),b=d.Deferred(),h=!1,g=function(){return h=!0},setTimeout(g,6e4),a=function(a,b){return b==null&&(b="GET"),d.ajax({url:a,type:b,success:f,error:c})},c=function(a){return a==null&&(a={}),d.flashError(e.t("restore_error","There was an error attempting to restore the course. Course was not restored.")),b.reject()},f=function(d){if(h)return c();switch(d.workflow_state){case"queued":case"running":return setTimeout(function(){return a(d.url)},1e3);case"completed":return i.set({workflow_state:"unpublished",restored:!0}),i.trigger("doneRestoring"),b.resolve();case"failed":return c()}},a(""+this.baseUrl()+"/?course_ids[]="+this.get("id")+"&event=undelete","PUT"),b},f}(b.Model)})}).call(this)