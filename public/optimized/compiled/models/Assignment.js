(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["jquery","underscore","Backbone","compiled/models/TurnitinSettings","compiled/collections/AssignmentOverrideCollection"],function(d,e,f,g,h){var i,j,k;return j=f.Model,i=function(d){function f(){return this.setNullDates=a(this.setNullDates,this),this._filterFrozenAttributes=a(this._filterFrozenAttributes,this),this._getAssignmentType=a(this._getAssignmentType,this),this._hasOnlyType=a(this._hasOnlyType,this),this._submissionTypes=a(this._submissionTypes,this),this.toView=a(this.toView,this),this.isLetterGraded=a(this.isLetterGraded,this),this.isSimple=a(this.isSimple,this),this.externalToolNewTab=a(this.externalToolNewTab,this),this.externalToolUrl=a(this.externalToolUrl,this),this.gradingStandardId=a(this.gradingStandardId,this),this.groupCategoryId=a(this.groupCategoryId,this),this.turnitinEnabled=a(this.turnitinEnabled,this),this.gradeGroupStudentsIndividually=a(this.gradeGroupStudentsIndividually,this),this.turnitinAvailable=a(this.turnitinAvailable,this),this.allowedExtensions=a(this.allowedExtensions,this),this.restrictFileExtensions=a(this.restrictFileExtensions,this),this.notifyOfUpdate=a(this.notifyOfUpdate,this),this.peerReviewsAssignAt=a(this.peerReviewsAssignAt,this),this.peerReviewCount=a(this.peerReviewCount,this),this.automaticPeerReviews=a(this.automaticPeerReviews,this),this.peerReviews=a(this.peerReviews,this),this.isOnlineSubmission=a(this.isOnlineSubmission,this),this.acceptsOnlineTextEntries=a(this.acceptsOnlineTextEntries,this),this.acceptsMediaRecording=a(this.acceptsMediaRecording,this),this.acceptsOnlineURL=a(this.acceptsOnlineURL,this),this.acceptsOnlineUpload=a(this.acceptsOnlineUpload,this),this.submissionType=a(this.submissionType,this),this.submissionTypes=a(this.submissionTypes,this),this.courseID=a(this.courseID,this),this.gradingType=a(this.gradingType,this),this.frozenAttributes=a(this.frozenAttributes,this),this.frozen=a(this.frozen,this),this.freezeOnCopy=a(this.freezeOnCopy,this),this.canFreeze=a(this.canFreeze,this),this.assignmentGroupId=a(this.assignmentGroupId,this),this.pointsPossible=a(this.pointsPossible,this),this.name=a(this.name,this),this.description=a(this.description,this),this.lockAt=a(this.lockAt,this),this.unlockAt=a(this.unlockAt,this),this.dueAt=a(this.dueAt,this),this.assignmentType=a(this.assignmentType,this),this.isAssignment=a(this.isAssignment,this),this.isNotGraded=a(this.isNotGraded,this),this.isExternalTool=a(this.isExternalTool,this),this.isDiscussionTopic=a(this.isDiscussionTopic,this),this.isQuiz=a(this.isQuiz,this),k=f.__super__.constructor.apply(this,arguments),k}return c(f,d),f.prototype.resourceName="assignments",f.prototype.initialize=function(){var a;return a=this.get("assignment_overrides"),this.set("assignment_overrides",new h(a)),this.set("turnitin_settings",new g(this.get("turnitin_settings")),{silent:!0})},f.prototype.isQuiz=function(){return this._hasOnlyType("online_quiz")},f.prototype.isDiscussionTopic=function(){return this._hasOnlyType("discussion_topic")},f.prototype.isExternalTool=function(){return this._hasOnlyType("external_tool")},f.prototype.isNotGraded=function(){return this._hasOnlyType("not_graded")},f.prototype.isAssignment=function(){return!e.include(this._submissionTypes(),"online_quiz","discussion_topic","not_graded","external_tool")},f.prototype.assignmentType=function(a){return arguments.length>0?a==="assignment"?this.set("submission_types",["none"]):this.set("submission_types",[a]):this._getAssignmentType()},f.prototype.dueAt=function(a){return arguments.length>0?this.set("due_at",a):this.get("due_at")},f.prototype.unlockAt=function(a){return arguments.length>0?this.set("unlock_at",a):this.get("unlock_at")},f.prototype.lockAt=function(a){return arguments.length>0?this.set("lock_at",a):this.get("lock_at")},f.prototype.description=function(a){return arguments.length>0?this.set("description",a):this.get("description")},f.prototype.name=function(a){return arguments.length>0?this.set("name",a):this.get("name")},f.prototype.pointsPossible=function(a){return arguments.length>0?this.set("points_possible",a):this.get("points_possible")||0},f.prototype.assignmentGroupId=function(a){return a?this.set("assignment_group_id",a):this.get("assignment_group_id")},f.prototype.canFreeze=function(){return this.get("frozen_attributes")!=null&&!this.frozen()},f.prototype.freezeOnCopy=function(){return this.get("freeze_on_copy")},f.prototype.frozen=function(){return this.get("frozen")},f.prototype.frozenAttributes=function(){return this.get("frozen_attributes")||[]},f.prototype.gradingType=function(a){return a?this.set("grading_type",a):this.get("grading_type")||"points"},f.prototype.courseID=function(){return this.get("course_id")},f.prototype.submissionTypes=function(a){return arguments.length>0?this.set("submission_types",a):this._submissionTypes()},f.prototype.submissionType=function(){var a;return a=this._submissionTypes(),e.include(a,"none")||a.length===0?"none":e.include(a,"on_paper")?"on_paper":e.include(a,"external_tool")?"external_tool":"online"},f.prototype.acceptsOnlineUpload=function(){return!!e.include(this._submissionTypes(),"online_upload")},f.prototype.acceptsOnlineURL=function(){return!!e.include(this._submissionTypes(),"online_url")},f.prototype.acceptsMediaRecording=function(){return!!e.include(this._submissionTypes(),"media_recording")},f.prototype.acceptsOnlineTextEntries=function(){return!!e.include(this._submissionTypes(),"online_text_entry")},f.prototype.isOnlineSubmission=function(){return e.any(this._submissionTypes(),function(a){return a==="online"||a==="online_text_entry"||a==="media_recording"||a==="online_url"||a==="online_upload"})},f.prototype.peerReviews=function(a){return arguments.length>0?this.set("peer_reviews",a):this.get("peer_reviews")},f.prototype.automaticPeerReviews=function(a){return arguments.length>0?this.set("automatic_peer_reviews",a):this.get("automatic_peer_reviews")},f.prototype.peerReviewCount=function(a){return arguments.length>0?this.set("peer_review_count",a):this.get("peer_review_count")||0},f.prototype.peerReviewsAssignAt=function(a){return arguments.length>0?this.set("peer_reviews_assign_at",a):this.get("peer_reviews_assign_at")||null},f.prototype.notifyOfUpdate=function(a){return arguments.length>0?this.set("notify_of_update",a):this.get("notify_of_update")},f.prototype.restrictFileExtensions=function(){return!!this.allowedExtensions()},f.prototype.allowedExtensions=function(a){return arguments.length>0?this.set("allowed_extensions",a):this.get("allowed_extensions")},f.prototype.turnitinAvailable=function(){return typeof this.get("turnitin_enabled")!="undefined"},f.prototype.gradeGroupStudentsIndividually=function(a){return arguments.length>0?this.set("grade_group_students_individually",a):this.get("grade_group_students_individually")},f.prototype.turnitinEnabled=function(a){return arguments.length===0?this.get("turnitin_enabled")===void 0?!1:!!this.get("turnitin_enabled"):this.set("turnitin_enabled",a)},f.prototype.groupCategoryId=function(a){return arguments.length>0?this.set("group_category_id",a):this.get("group_category_id")},f.prototype.gradingStandardId=function(a){return arguments.length>0?this.set("grading_standard_id",a):this.get("grading_standard_id")},f.prototype.externalToolUrl=function(a){var b;return b=this.get("external_tool_tag_attributes")||{},arguments.length>0?(b.url=a,this.set("external_tool_tag_attributes",b)):b.url},f.prototype.externalToolNewTab=function(a){var b;return b=this.get("external_tool_tag_attributes")||{},arguments.length>0?(b.new_tab=a,this.set("external_tool_tag_attributes",b)):b.new_tab},f.prototype.isSimple=function(){return this.gradingType()==="points"&&this.submissionType()==="none"&&!this.groupCategoryId()&&!this.peerReviews()&&!this.frozen()&&this.get("assignment_overrides").isSimple()},f.prototype.isLetterGraded=function(){return this.gradingType()==="letter_grade"},f.prototype.toView=function(){var a,b,c,d,e;b=["name","dueAt","description","pointsPossible","lockAt","unlockAt","gradingType","notifyOfUpdate","peerReviews","automaticPeerReviews","peerReviewCount","peerReviewsAssignAt","acceptsOnlineUpload","acceptsMediaRecording","submissionType","acceptsOnlineTextEntries","acceptsOnlineURL","allowedExtensions","restrictFileExtensions","isOnlineSubmission","isNotGraded","isExternalTool","externalToolUrl","externalToolNewTab","turnitinAvailable","turnitinEnabled","gradeGroupStudentsIndividually","groupCategoryId","frozen","frozenAttributes","freezeOnCopy","canFreeze","isSimple","gradingStandardId","isLetterGraded","assignmentGroupId"],c={};for(d=0,e=b.length;d<e;d++)a=b[d],c[a]=this[a]();return c},f.prototype.toJSON=function(){var a;return a=f.__super__.toJSON.apply(this,arguments),a=this._filterFrozenAttributes(a),this.alreadyScoped?a:{assignment:a}},f.prototype.parse=function(a){var b;return b=a.assignment_overrides,b!=null?a.assignment_overrides=new h(b):a.assignment_overrides=new h,a.turnitin_settings=new g(a.turnitin_settings),a},f.prototype._submissionTypes=function(){return this.get("submission_types")||[]},f.prototype._hasOnlyType=function(a){var b;return b=this._submissionTypes(),b.length===1&&b[0]===a},f.prototype._getAssignmentType=function(){return this.isDiscussionTopic()?"discussion_topic":this.isQuiz()?"online_quiz":this.isExternalTool()?"external_tool":this.isNotGraded()?"not_graded":"assignment"},f.prototype._filterFrozenAttributes=function(a){var c,d,f;f=this.attributes;for(c in f){if(!b.call(f,c))continue;d=f[c],e.contains(this.frozenAttributes(),c)&&delete a[c]}return e.contains(this.frozenAttributes(),"title")&&delete a.name,e.contains(this.frozenAttributes(),"group_category_id")&&delete a.grade_group_students_individually,e.contains(this.frozenAttributes(),"peer_reviews")&&(delete a.automatic_peer_reviews,delete a.peer_review_count,delete a.peer_reviews_assign_at),delete a.frozen,delete a.frozen_attributes,a},f.prototype.setNullDates=function(){return this.dueAt(null),this.lockAt(null),this.unlockAt(null),this},f}(j)})}).call(this)