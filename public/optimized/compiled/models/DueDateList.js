(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define(["Backbone","underscore","i18n!overrides","compiled/models/AssignmentOverride","compiled/models/Section"],function(c,d,e,f,g){var h,i;return i=c.Model,h=function(){function c(b,c,d){var e;this.overrides=b,this.sections=c,this.assignment=d,this.toJSON=a(this.toJSON,this),this.sectionsWithoutOverrides=a(this.sectionsWithoutOverrides,this),this.sectionsWithOverrides=a(this.sectionsWithOverrides,this),this.blankOverrides=a(this.blankOverrides,this),this.containsBlankOverrides=a(this.containsBlankOverrides,this),this.sectionIDs=a(this.sectionIDs,this),this._sectionsLength=a(this._sectionsLength,this),this.containsSectionsWithoutOverrides=a(this.containsSectionsWithoutOverrides,this),this.overrideSectionIDs=a(this.overrideSectionIDs,this),this.removeOverride=a(this.removeOverride,this),this.addOverride=a(this.addOverride,this),this.availableSectionsPlusOverride=a(this.availableSectionsPlusOverride,this),this.availableSections=a(this.availableSections,this),this.getDefaultDueDate=a(this.getDefaultDueDate,this),this.findDefaultDueDateSection=a(this.findDefaultDueDateSection,this),this.updateDefaultDueDateSection=a(this.updateDefaultDueDateSection,this),this.assignment!=null&&(this.overrides.length<this.sections.length&&(e=f.defaultDueDate({due_at:this.assignment.get("due_at"),lock_at:this.assignment.get("lock_at"),unlock_at:this.assignment.get("unlock_at")}),this.overrides.add(e)),this.sections.add(g.defaultDueDateSection())),this.updateDefaultDueDateSection(),this.overrides.on("add",this.updateDefaultDueDateSection),this.overrides.on("remove",this.updateDefaultDueDateSection)}return c.prototype.updateDefaultDueDateSection=function(){var a;a=this.findDefaultDueDateSection();if(a!=null)return this.overrides.length<=1?a.set("name",e.t("overrides.everyone","Everyone"),{silent:!0}):a.set("name",e.t("overrides.everyone_else","Everyone Else"),{silent:!0})},c.prototype.findDefaultDueDateSection=function(){return this.sections.detect(function(a){return a.id===g.defaultDueDateSectionID})},c.prototype.getDefaultDueDate=function(){return this.overrides.getDefaultDueDate()},c.prototype.availableSections=function(){var a;return a=this.overrideSectionIDs(),this.sections.reject(function(c){var d;return d=c.id,b.call(a,d)>=0})},c.prototype.availableSectionsPlusOverride=function(a,b){var c;return b==null&&(b=this.availableSections()),c=this.sections.detect(function(b){return b.id===a.get("course_section_id")}),c!=null?b.concat(c):b},c.prototype.addOverride=function(a){return this.overrides.add(a)},c.prototype.removeOverride=function(a){return this.overrides.remove(a)},c.prototype.overrideSectionIDs=function(){return this.overrides.courseSectionIDs()},c.prototype.containsSectionsWithoutOverrides=function(){return this.overrides.containsDefaultDueDate()?!1:this.sectionsWithOverrides().length!==this._sectionsLength()},c.prototype._sectionsLength=function(){return this.assignment!=null?this.sections.length-1:this.sections.length},c.prototype.sectionIDs=function(){return this.sections.ids()},c.prototype.containsBlankOverrides=function(){return this.blankOverrides().length>0},c.prototype.blankOverrides=function(){return this.overrides.blank()},c.prototype.sectionsWithOverrides=function(){var a=this;return this.sections.select(function(c){var d;return(d=c.id,b.call(a.overrideSectionIDs(),d)>=0)&&c.id!==g.defaultDueDateSectionID})},c.prototype.sectionsWithoutOverrides=function(){var a=this;return this.sections.select(function(c){var d;return(d=c.id,b.call(a.overrideSectionIDs(),d)<0)&&c.id!==g.defaultDueDateSectionID})},c.prototype.toJSON=function(){return{overrides:this.overrides.toJSON(),sections:this.sections.toJSON()}},c}()})}).call(this)