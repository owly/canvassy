(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["jquery","underscore"],function(b,c){var d;return d=function(){function d(d,e){e==null&&(e={}),this._loadScript=a(this._loadScript,this),this._onMove=a(this._onMove,this),this.options=c.extend({},this.defaultOptions,e),this._cacheElements(d),this.deferred=b.Deferred().then(this._loadScript);if(!this.$el.length)return;this._attachEvents()}return d.prototype.defaultOptions={callback:b.noop,delay:200,dependencies:[],threshold:150},d.prototype._cacheElements=function(a){return this.$el=b(a),this.$body=b("body")},d.prototype._attachEvents=function(){return this.$body.on(this._eventName(),c.throttle(this._onMove,this.options.delay))},d.prototype._eventName=function(){return"mousemove.proximity."+this.$el.guid},d.prototype._dimensions=function(){return this.__dimensions||(this.__dimensions={bottom:this.$el.offset().top+this.$el.height()+this.options.threshold,left:this.$el.offset().left-this.options.threshold,right:this.$el.offset().left+this.$el.width()+this.options.threshold,top:this.$el.offset().top-this.options.threshold,centerX:this.$el.offset().left+this.$el.width()/2,centerY:this.$el.offset().top+this.$el.height()/2})},d.prototype._onMove=function(a){return this._isBounded(a.pageX,a.pageY)&&this._hasVelocity(a.pageX,a.pageY)&&this.deferred.resolve(),this.pageX=a.pageX,this.pageY=a.pageY,a},d.prototype._loadScript=function(){return this.$body.off(this._eventName()),require(this.options.dependencies,this.options.callback)},d.prototype._isBounded=function(a,b){return this._dimensions().left<a&&this._dimensions().right>a&&this._dimensions().top<b&&this._dimensions().bottom>b},d.prototype._hasVelocity=function(a,b){return Math.abs(this.pageX-this._dimensions().centerX)>Math.abs(a-this._dimensions().centerX)&&Math.abs(this.pageY-this._dimensions().centerY)>Math.abs(b-this._dimensions().centerY)},d}()})}).call(this)