(function(){define(["i18n!instructure","jquery","underscore","str/htmlEscape"],function(a,b,c,d){var e,f;return e={year:function(a,c){var d,e,f;f=a.startYear<a.endYear?1:-1,d=b("<select />",c),a.includeBlank&&d.append("<option />"),e=a.startYear;while(e*f<=a.endYear*f)e+=f,d.append(b('<option value="'+e+'">'+e+"</option>"));return d},month:function(a,c,e){var f,g,i,j;i=e.month_names,f=b("<select />",c),a.includeBlank&&f.append("<option />");for(g=j=1;j<=12;g=++j)f.append(b('<option value="'+g+'">'+d(i[g])+"</option>"));return f},day:function(a,c){var d,e,f;d=b("<select />",c),a.includeBlank&&d.append("<option />");for(e=f=1;f<=31;e=++f)d.append(b('<option value="'+e+'">'+e+"</option>"));return d}},f=function(d,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u;g==null&&(g=c.clone(f)),o=["type","startYear","endYear","includeBlank","order"];for(q=0,s=o.length;q<s;q++)k=o[q],delete g[k];(t=g["class"])==null&&(g["class"]=""),g["class"]+=" date-select",p=(new Date).getFullYear(),l={year:1,month:2,day:3},i=a.lookup("#date"),f.type==="birthdate"&&c.defaults(f,{startYear:p-1,endYear:p-125,includeBlank:!0}),c.defaults(f,{startYear:p-5,endYear:p+5,order:i.order||["year","month","day"]}),h=b("<span>");for(j=r=0,u=f.order.length;0<=u?r<u:r>u;j=0<=u?++r:--r)n=f.order[j],m=d.replace(/(\]?)$/,"("+l[n]+"i)$1"),h.append(e[n](f,c.extend({name:m},g),i)),delete g.id;return h}})}).call(this)