(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["i18n!discussions","Backbone","underscore","jqueryui/button"],function(b,d,e){var f,g,h;return g=d.View,f=function(b){function d(){return this.clearInputs=a(this.clearInputs,this),h=d.__super__.constructor.apply(this,arguments),h}return c(d,b),d.prototype.els={"#discussion-search":"$searchInput","#onlyUnread":"$unread",".disableWhileFiltering":"$disableWhileFiltering"},d.prototype.events={"keyup #discussion-search":"filterBySearch","change #onlyUnread":"toggleUnread","click #collapseAll":"collapseAll","click #expandAll":"expandAll","click .mark_all_as_read":"markAllAsRead","click .mark_all_as_unread":"markAllAsUnread"},d.prototype.initialize=function(){return this.model.on("change",this.clearInputs)},d.prototype.afterRender=function(){return this.$unread.button()},d.prototype.filter=d.prototype.afterRender,d.prototype.clearInputs=function(){if(this.model.hasFilter())return;return this.$searchInput.val(""),this.$unread.prop("checked",!1),this.$unread.button("refresh"),this.maybeDisableFields()},d.prototype.filterBySearch=e.debounce(function(){var a;return a=this.$searchInput.val(),a===""&&(a=null),this.model.set("query",a),this.maybeDisableFields()},250),d.prototype.toggleUnread=function(){var a=this;return setTimeout(function(){return a.model.set("unread",a.$unread.prop("checked")),a.maybeDisableFields()},50)},d.prototype.collapseAll=function(){return this.model.set("collapsed",!0),this.trigger("collapseAll")},d.prototype.expandAll=function(){return this.model.set("collapsed",!1),this.trigger("expandAll")},d.prototype.markAllAsRead=function(a){return a.preventDefault(),this.trigger("markAllAsRead")},d.prototype.markAllAsUnread=function(a){return a.preventDefault(),this.trigger("markAllAsUnread")},d.prototype.maybeDisableFields=function(){return this.$disableWhileFiltering.attr("disabled",this.model.hasFilter())},d}(g)})}).call(this)