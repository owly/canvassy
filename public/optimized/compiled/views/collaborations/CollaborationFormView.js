(function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define(["i18n!collaborations","Backbone","compiled/views/collaborations/CollaboratorPickerView"],function(a,c,d){var e,f,g;return f=c.View,e=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments),g}return b(e,c),e.prototype.translations={errors:{noName:a.t("errors.no_name","Please enter a name for this collaboration."),titleTooLong:a.t("errors.title_too_long","Please use %{maxLength} characters or less for the name. Use the description for additional content.",{maxLength:ENV.TITLE_MAX_LEN})}},e.prototype.events={submit:"onSubmit","click .cancel_button":"onCancel"},e.prototype.initialize=function(){return this.cacheElements(),this.picker=new d({el:this.$collaborators}),this.titleMaxLength=ENV.TITLE_MAX_LEN},e.prototype.cacheElements=function(){return this.$titleInput=this.$el.find("#collaboration_title"),this.$collaborators=this.$el.find(".collaborator_list")},e.prototype.render=function(a){return a==null&&(a=!0),this.$el.show(),a&&this.$el.find("h2").focus(),this.$collaborators.is(":empty")&&this.picker.render(),this},e.prototype.onSubmit=function(a){var b;return b=this.$el.getFormData(),b["collaboration[title]"]?this.titleMaxLength&&b["collaboration[title]"].length>this.titleMaxLength?(a.preventDefault(),a.stopPropagation(),this.raiseTitleLengthError()):setTimeout(function(){return window.location=window.location.pathname},2500):(a.preventDefault(),a.stopPropagation(),this.raiseTitleError())},e.prototype.onCancel=function(a){return a.preventDefault(),this.$el.hide(),this.trigger("hide")},e.prototype.raiseTitleError=function(){return this.trigger("error",this.$titleInput,this.translations.errors.noName),!1},e.prototype.raiseTitleLengthError=function(){return this.trigger("error",this.$titleInput,this.translations.errors.titleTooLong),!1},e}(f)})}).call(this)