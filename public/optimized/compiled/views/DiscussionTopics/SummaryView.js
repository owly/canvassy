(function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define(["i18n!discussion_topics","Backbone","underscore","jst/DiscussionTopics/SummaryView","jst/_api_avatar"],function(a,c,d,e){var f,g;return f=function(c){function f(){return g=f.__super__.constructor.apply(this,arguments),g}return b(f,c),f.prototype.template=e,f.prototype.attributes=function(){return{"class":"discussion-topic "+this.model.get("read_state")+" "+(this.model.selected?"selected":""),"data-id":this.model.id}},f.prototype.events={"change .toggleSelected":"toggleSelected",click:"openOnClick"},f.prototype.initialize=function(){return this.model.on("change reset",this.render,this),this.model.on("destroy",this.remove,this)},f.prototype.toJSON=function(){var b;return b=f.__super__.toJSON.apply(this,arguments),d.extend(b,{permissions:d.extend(this.options.permissions,b.permissions),selected:this.model.selected,unread_count_tooltip:a.t("unread_count_tooltip",{zero:"No unread replies",one:"1 unread reply",other:"%{count} unread replies"},{count:this.model.get("unread_count")}),reply_count_tooltip:a.t("reply_count_tooltip",{zero:"No replies",one:"1 reply",other:"%{count} replies"},{count:this.model.get("discussion_subentry_count")}),summary:this.model.summary()})},f.prototype.render=function(){return f.__super__.render.apply(this,arguments),this.$el.attr(this.attributes()),this},f.prototype.toggleSelected=function(){return this.model.selected=!this.model.selected,this.model.trigger("change:selected"),this.$el.toggleClass("selected",this.model.selected)},f.prototype.openOnClick=function(a){if(!$(a.target).closest(":focusable, label").length)return window.location=this.model.get("html_url")},f}(c.View)})}).call(this)