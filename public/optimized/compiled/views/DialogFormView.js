(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["jquery","compiled/views/ValidatedFormView","jst/DialogFormWrapper","jqueryui/dialog"],function(b,d,e){var f,g;return f=function(d){function f(){return this.onSaveSuccess=a(this.onSaveSuccess,this),this.renderOutlet=a(this.renderOutlet,this),this.renderEl=a(this.renderEl,this),this.toggle=a(this.toggle,this),g=f.__super__.constructor.apply(this,arguments),g}return c(f,d),f.prototype.defaults={trigger:!1,title:null,width:null,height:null,fixDialogButtons:!0},f.prototype.$dialogAppendTarget=b("body"),f.prototype.className="dialogFormView",f.prototype.wrapperTemplate=e,f.prototype.initialize=function(){return f.__super__.initialize.apply(this,arguments),this.setTrigger()},f.prototype.open=function(){return this.firstOpen(),this.openAgain(),this.open=this.openAgain},f.prototype.close=function(){return this.dialog.close()},f.prototype.toggle=function(){var a;return((a=this.dialog)!=null?a.isOpen():void 0)?this.close():this.open()},f.prototype.remove=function(){var a;return f.__super__.remove.apply(this,arguments),(a=this.$trigger)!=null?a.off(".dialogFormView"):void 0},f.prototype.firstOpen=function(){return this.insert(),this.render(),this.setupDialog()},f.prototype.openAgain=function(){return this.dialog.open(),this.dialog.uiDialog.focus()},f.prototype.insert=function(){return this.$el.appendTo(this.$dialogAppendTarget)},f.prototype.setTrigger=function(a){a&&(this.options.trigger=a);if(!this.options.trigger)return;return this.$trigger=b(this.options.trigger),this.attachTrigger()},f.prototype.attachTrigger=function(){return this.$trigger.on("click.dialogFormView",this.toggle)},f.prototype.renderEl=function(){return this.$el.html(this.wrapperTemplate(this.toJSON())),this.renderOutlet(),this.renderEl=this.renderOutlet},f.prototype.renderOutlet=function(){var a;return a=this.template(this.toJSON()),this.$el.find(".outlet").html(a)},f.prototype.getDialogTitle=function(){return this.options.title||this.$trigger.attr("title")||this.getAriaTitle()},f.prototype.getAriaTitle=function(){var a;return a=this.$trigger.attr("aria-describedby"),b("#"+a).text()},f.prototype.setupDialog=function(){var a,b=this;return a={autoOpen:!1,title:this.getDialogTitle(),close:function(){return b.trigger("close")},open:function(){return b.trigger("open")}},a.width=this.options.width,a.height=this.options.height,this.$el.dialog(a),this.options.fixDialogButtons&&this.$el.fixDialogButtons(),this.dialog=this.$el.data("dialog")},f.prototype.onSaveSuccess=function(){return f.__super__.onSaveSuccess.apply(this,arguments),this.close()},f}(d)})}).call(this)