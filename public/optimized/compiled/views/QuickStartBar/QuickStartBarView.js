(function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};define(["Backbone","i18n!dashboard","underscore","jst/quickStartBar/QuickStartBarView","jquery.toJSON"],function(a,d,e,f){var g,h,i,j,k,l,m;return j=a.View,g=a.Model,k=function(a){return a.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},h=function(a){function c(){return l=c.__super__.constructor.apply(this,arguments),l}return b(c,a),c.prototype.defaults={expanded:!1},c}(g),i=function(a){function d(){return this.toggleExpanded=c(this.toggleExpanded,this),this.switchFormView=c(this.switchFormView,this),this.onSaveFail=c(this.onSaveFail,this),this.onSaveSuccess=c(this.onSaveSuccess,this),m=d.__super__.constructor.apply(this,arguments),m}return b(d,a),d.prototype.events={"click .nav a":"onNavClick","focus .expander":"onExpandClick"},d.prototype.initialize=function(){return this.model||(this.model=new h),this.model.on("change:modelName",this.switchFormView),this.model.on("change:expanded",this.toggleExpanded),this.models={},this.formViewsObj=e.reduce(this.options.formViews,function(a,b){return a[b.type]=b,a},{}),this.model.attributes.modelName=this.options.formViews[0].type},d.prototype.onSaveSuccess=function(a){return this.switchFormView(),this.trigger("save")},d.prototype.onSaveFail=function(a){return this.switchFormView(),this.trigger("saveFail")},d.prototype.onNavClick=function(a){var b;return a.preventDefault(),b=$(a.currentTarget).data("type"),this.model.set("modelName",b)},d.prototype.onExpandClick=function(a){return this.model.set("expanded",!0)},d.prototype.switchFormView=function(){var a,b,c,d=this;return this.modelName&&this.$el.removeClass(this.modelName),this.modelName=this.model.get("modelName"),this.$el.addClass(this.modelName),(c=this.currentFormView)!=null&&typeof c.teardown=="function"&&c.teardown(),this.currentFormView=(a=this.views)[b=this.modelName]||(a[b]=function(){var a;return a=new d.formViewsObj[d.modelName],a.on("save",d.onSaveSuccess),a.on("saveFail",d.onSaveFail)}()),this.currentFormView.render(),this.$newItemFormContainer.empty().append(this.currentFormView.el),this.model.set("expanded",!1),this.updateActiveTab(this.modelName)},d.prototype.toggleExpanded=function(a,b){return this.$el.toggleClass("expanded",b),this.$el.toggleClass("not-expanded",!b)},d.prototype.updateActiveTab=function(a){return this.$(".nav a").each(function(b,c){var d;return d=$(c),d.is("[data-type="+a+"]")?d.addClass("active"):d.removeClass("active")})},d.prototype.cacheElements=function(){return this.$newItemFormContainer=$(".newItemFormContainer")},d.prototype.render=function(){return this.$el.html(f({formViews:this.options.formViews})),this.cacheElements(),this.switchFormView(),d.__super__.render.apply(this,arguments)},d}(j)})}).call(this)