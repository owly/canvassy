(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["Backbone","jst/content_migrations/ContentCheckbox","jst/content_migrations/ContentCheckboxCollection","compiled/collections/content_migrations/ContentCheckboxCollection","compiled/views/CollectionView","compiled/str/TextHelper"],function(b,d,e,f,g,h){var i,j;return i=function(b){function h(){return this.toplevelCheckboxEvents=a(this.toplevelCheckboxEvents,this),this.uncheckAllChildren=a(this.uncheckAllChildren,this),this.checkAllChildren=a(this.checkAllChildren,this),j=h.__super__.constructor.apply(this,arguments),j}return c(h,b),h.prototype.template=d,h.prototype.els={"[data-content=sublevelCheckboxes]":"$sublevelCheckboxes",".showHide":"$showHide"},h.prototype.initialize=function(){h.__super__.initialize.apply(this,arguments),this.hasSubItemsUrl=!!this.model.get("sub_items_url"),this.hasSubItems=!!this.model.get("sub_items"),this.$el.on("click","#selectAll-"+this.cid,this.checkAllChildren),this.$el.on("click","#selectNone-"+this.cid,this.uncheckAllChildren);if(this.hasSubItemsUrl)return this.$el.on("change","#checkbox-"+this.cid,this.toplevelCheckboxEvents)},h.prototype.toJSON=function(){var a,b;return a=h.__super__.toJSON.apply(this,arguments),a.hasSubCheckboxes=this.hasSubItems||this.hasSubItemsUrl,a.onlyLabel=this.hasSubItems&&!this.hasSubItemsUrl,a.checked=(b=this.model.collection)!=null?b.isTopLevel:void 0,a.iconClass=this.getIconClass(),a.count=this.model.get("count"),a.showHide=this.model.get("count")||this.hasSubItems&&this.model.get("sub_items").length>2,a},h.prototype.iconClasses={course_settings:"icon-settings",syllabus_body:"icon-syllabus",context_modules:"icon-module",assignments:"icon-assignment",quizzes:"icon-quiz",assessment_question_banks:"icon-collection",discussion_topics:"icon-discussion",wiki_pages:"icon-note-light",context_external_tools:"icon-lti",announcements:"icon-announcement",calendar_events:"icon-calendar-days",rubrics:"icon-rubric",groups:"icon-group",learning_outcomes:"icon-standards",attachments:"icon-document",assignment_groups:"icon-gradebook",folders:"icon-folder"},h.prototype.getIconClass=function(){return this.iconClasses[this.model.get("type")]},h.prototype.afterRender=function(){if(this.hasSubItems)return this.sublevelCheckboxes=new f(this.model.get("sub_items")),this.renderSublevelCheckboxes()},h.prototype.checkAllChildren=function(a){var b;return a.preventDefault(),((b=this.model.collection)!=null?b.isTopLevel:void 0)?this.$el.find("[type=checkbox]").slice(1).prop("checked",!0):this.$el.find("[type=checkbox]").prop("checked",!0)},h.prototype.uncheckAllChildren=function(a){var b;return a.preventDefault(),((b=this.model.collection)!=null?b.isTopLevel:void 0)?this.$el.find("[type=checkbox]").slice(1).prop("checked",!1):this.$el.find("[type=checkbox]").prop("checked",!1)},h.prototype.toplevelCheckboxEvents=function(a){if(!this.hasSubItemsUrl)return;if($(a.target).is(":checked"))return this.$sublevelCheckboxes.hide(),this.$showHide.hide();this.$sublevelCheckboxes.show(),this.$showHide.show();if(!this.sublevelCheckboxes)return this.fetchSublevelCheckboxes(),this.renderSublevelCheckboxes()},h.prototype.fetchSublevelCheckboxes=function(){var a;return this.sublevelCheckboxes=new f,this.sublevelCheckboxes.url=this.model.get("sub_items_url"),a=this.sublevelCheckboxes.fetch(),this.$el.disableWhileLoading(a)},h.prototype.renderSublevelCheckboxes=function(){var a;return a=new g({collection:this.sublevelCheckboxes,itemView:h,el:this.$sublevelCheckboxes,template:e}),a.render()},h}(b.View)})}).call(this)