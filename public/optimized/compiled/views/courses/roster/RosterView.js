(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["i18n!roster","Backbone","jst/courses/roster/index","compiled/views/ValidatedMixin"],function(b,d,e,f){var g,h;return g=function(d){function g(){return this.onFail=a(this.onFail,this),this.fetch=a(this.fetch,this),this.fetchOnCreateUsersClose=a(this.fetchOnCreateUsersClose,this),h=g.__super__.constructor.apply(this,arguments),h}return c(g,d),g.mixin(f),g.child("usersView","[data-view=users]"),g.child("inputFilterView","[data-view=inputFilter]"),g.child("roleSelectView","[data-view=roleSelect]"),g.child("createUsersView","[data-view=createUsers]"),g.child("resendInvitationsView","[data-view=resendInvitations]"),g.optionProperty("roles"),g.optionProperty("permissions"),g.optionProperty("course"),g.prototype.template=e,g.prototype.els={"#addUsers":"$addUsersButton"},g.prototype.afterRender=function(){return this.createUsersView.hide(),this.createUsersView.setTrigger(this.$addUsersButton)},g.prototype.attach=function(){return this.collection.on("setParam deleteParam",this.fetch),this.createUsersView.on("close",this.fetchOnCreateUsersClose)},g.prototype.fetchOnCreateUsersClose=function(){if(this.createUsersView.hasUsers())return this.collection.fetch()},g.prototype.fetch=function(){var a;return(a=this.lastRequest)!=null&&a.abort(),this.lastRequest=this.collection.fetch().fail(this.onFail)},g.prototype.toJSON=function(){return this},g.prototype.onFail=function(a){var c,d;if(a.statusText==="abort")return;return d=$.parseJSON(a.responseText),c=(d!=null?d.message:void 0)==="search_term of 3 or more characters is required"?b.t("greater_than_three","Please enter a search term with three or more characters"):b.t("unknown_error","Something went wrong with your search, please try again."),this.showErrors({search_term:[{message:c}]})},g}(d.View)})}).call(this)