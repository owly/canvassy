(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["i18n!course_settings","jquery","underscore","compiled/views/DialogBaseView","jst/courses/roster/InvitationsView","compiled/jquery.rails_flash_notifications"],function(b,d,e,f,g){var h,i;return h=function(f){function h(){return this.resend=a(this.resend,this),i=h.__super__.constructor.apply(this,arguments),i}return c(h,f),h.prototype.dialogOptions=function(){return{id:"enrollment_dialog",title:b.t("re_send_invitation","Re-Send Invitation"),buttons:[{text:b.t("cancel","Cancel"),click:this.cancel},{text:b.t("re_send_invitation","Re-Send Invitation"),"class":"btn-primary",click:this.resend}]}},h.prototype.render=function(){var a,b,c;return this.showDialogButtons(),b=this.model.toJSON(),b.time=d.parseFromISO(e.last(this.model.get("enrollments")).updated_at).datetime_formatted,this.$el.html(g(b)),c=this.model.pending(),a=this.$el.parents(".teacher_enrollments,.ta_enrollments").length>0,this.$(".student_enrollment_re_send").showIf(c&&!a),this.$(".admin_enrollment_re_send").showIf(c&&a),this.$(".accepted_enrollment_re_send").showIf(!c),c&&!a&&!b.course.available&&this.hideDialogButtons(),this},h.prototype.showDialogButtons=function(){return this.$el.parent().next(".ui-dialog-buttonpane").show()},h.prototype.hideDialogButtons=function(){return this.$el.parent().next(".ui-dialog-buttonpane").hide()},h.prototype.resend=function(a){var c,e,f,g;a.preventDefault(),this.close(),g=this.model.get("enrollments");for(e=0,f=g.length;e<f;e++)a=g[e],c="/confirmations/"+this.model.get("id")+"/re_send?enrollment_id="+a.id,d.ajaxJSON(c);return d.flashMessage(b.t("flash.invitation","Invitation sent."))},h}(f)})}).call(this)