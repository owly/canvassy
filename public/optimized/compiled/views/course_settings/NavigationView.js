(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["jquery","Backbone"],function(b,d){var e,f;return e=function(d){function e(){return this.onKeyDown=a(this.onKeyDown,this),f=e.__super__.constructor.apply(this,arguments),f}return c(e,d),e.prototype.keyCodes={32:"Space",38:"UpArrow",40:"DownArrow"},e.prototype.els={"#nav_enabled_list":"$enabled_list","#nav_disabled_list":"$disabled_list"},e.prototype.afterRender=function(){return this.keyCodes=typeof Object.freeze=="function"?Object.freeze(this.keyCodes):void 0,b("li.navitem").on("keydown",this.onKeyDown)},e.prototype.onKeyDown=function(a){var c,d;c=b(a.target),d="on"+this.keyCodes[a.keyCode]+"Key";if(this[d])return this[d].call(this,a,c)&&a.preventDefault()},e.prototype.onUpArrowKey=function(a,b){var c;return c=b.prev("li.navitem"),this.empty(c)&&(c=b.children("li.navitem").first()),this.empty(c)&&this.disabled(b)&&(c=this.$enabled_list.children("li.navitem").last(),this.empty(c)&&(c=this.$enabled_list,c.attr("tabindex",0),c.bind("keydown",this.onKeyDown))),c.focus()},e.prototype.onDownArrowKey=function(a,b){var c;return c=b.next("li.navitem"),this.empty(c)&&(c=b.children("li.navitem").first()),this.empty(c)&&this.enabled(b)&&(c=this.$disabled_list.children("li.navitem").first(),this.empty(c)&&(c=this.$disabled_list,c.attr("tabindex",-1),c.bind("keydown",this.onKeyDown))),c.focus()},e.prototype.onSpaceKey=function(a,b){var c;if(c=this.$el.data("drag"))return b.is(c)||(b.is("li.navitem")?b.after(c):(b.append(c),b.attr("tabindex",-1),b.unbind("keydown"))),c.attr("aria-grabbed",!1),this.$el.data("drag",null),c.focus();if(b.is("li.navitem"))return b.attr("aria-grabbed",!0),c=b,this.$el.data("drag",c),c.blur(),c.focus()},e.prototype.empty=function(a){return a.length===0},e.prototype.enabled=function(a){return a.parent().attr("id")===this.$enabled_list.attr("id")},e.prototype.disabled=function(a){return a.parent().attr("id")===this.$disabled_list.attr("id")},e}(d.View)})}).call(this)