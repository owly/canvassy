(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["i18n!external_tools","jst/ExternalTools/EditView","compiled/views/ValidatedFormView","compiled/jquery/fixDialogButtons"],function(b,d,e){var f,g;return f=function(e){function f(){return this.onSaveFail=a(this.onSaveFail,this),g=f.__super__.constructor.apply(this,arguments),g}return c(f,e),f.prototype.template=d,f.prototype.tagName="form",f.prototype.id="external_tool_form",f.prototype.className="validated-form-view form-horizontal bootstrap-form",f.prototype.events={"change #external_tool_config_type":"onConfigTypeChange"},f.prototype.afterRender=function(){var a=this;return this.$el.dialog({title:b.t("dialog_title_edit_tool","Edit External Tool"),width:520,height:"auto",resizable:!0,close:function(){return a.$el.remove()},buttons:[{"class":"btn-primary",text:b.t("submit","Submit"),"data-text-while-loading":b.t("saving","Saving..."),click:function(){return a.submit()}}]}),this.onConfigTypeChange(),this.$el.submit(function(b){return a.submit(),!1}),this},f.prototype.submit=function(){return this.$el.parent().find(".btn-primary").removeClass("ui-state-hover"),f.__super__.submit.apply(this,arguments)},f.prototype.onConfigTypeChange=function(){var a;return a=this.$("#external_tool_config_type").val(),this.$(".config_type").hide().attr("aria-expanded",!1),this.$(".config_type."+a).show().attr("aria-expanded",!0)},f.prototype.showErrors=function(a){var b,c,d,e,f,g;this.removeErrors(),g=[];for(d in a)c=a[d],b=this.findField(d),e=function(){var a,b,d;d=[];for(a=0,b=c.length;a<b;a++)f=c[a].message,d.push(this.translations[f]||f);return d}.call(this).join("</p><p>"),g.push(this.addError(b,e));return g},f.prototype.removeErrors=function(){return this.$(".error .help-inline").remove(),this.$(".control-group").removeClass("error"),this.$(".alert.alert-error").remove()},f.prototype.addError=function(a,b){return a=$(a),a.parents(".control-group").addClass("error"),a.after("<span class='help-inline'>"+b+"</span>"),a.one("keypress",function(){return $(this).parents(".control-group").removeClass("error"),$(this).parents(".control-group").find(".help-inline").remove()})},f.prototype.onSaveFail=function(a){var c;return f.__super__.onSaveFail.apply(this,arguments),c=b.t("generic_error","There was an error in processing your request"),this.$el.prepend("<div class='alert alert-error'>"+c+"</span>")},f}(e)})}).call(this)