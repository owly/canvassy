(function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define(["i18n!editor","jquery","underscore","Backbone","jst/roles/newRole","compiled/models/Role","compiled/models/Account"],function(a,c,d,e,f,g,h){var i,j;return i=function(c){function d(){return j=d.__super__.constructor.apply(this,arguments),j}return b(d,c),d.prototype.template=f,d.prototype.els={"input[type=text]":"$role_name",select:"$base_role_type"},d.prototype.events={"click button":"createRole","submit form":"createRole"},d.prototype.initialize=function(){var a,b;return d.__super__.initialize.apply(this,arguments),this.base_role_types=(a=this.options)!=null?a.base_role_types:void 0,this.adminRoles=(b=this.options)!=null?b.admin_roles:void 0},d.prototype.toJSON=function(){var a;return a=d.__super__.toJSON.apply(this,arguments),a.base_role_types=this.base_role_types,a.adminRoles=this.adminRoles,a},d.prototype.createRole=function(b){var c,d,e,f=this;return b.preventDefault(),e=this.$role_name.val(),d=this.$base_role_type.val(),c={base_role_type:d,role:e,account:ENV.CURRENT_ACCOUNT.account},this.$el.find("a.dropdown-toggle").after('<img class="loading-icon" src="/images/ajax-reload-animated.gif">'),this.collection.create(c,{success:function(a){return f.clearForm()},error:function(){return alert(a.t("role.duplicate_role_error","Could not create this role because a role with this name already exists. Please try a different name")),f.clearForm()},wait:!0})},d.prototype.clearForm=function(){return this.$role_name.val(""),this.$base_role_type.val(""),this.$el.find(".loading-icon").remove()},d}(e.View)})}).call(this)