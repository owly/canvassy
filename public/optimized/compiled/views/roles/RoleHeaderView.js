(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["i18n!editor","jquery","underscore","Backbone","jst/roles/roleHeader"],function(b,d,e,f,g){var h,i;return h=function(d){function f(){return this.addLoadingHeader=a(this.addLoadingHeader,this),i=f.__super__.constructor.apply(this,arguments),i}return c(f,d),f.prototype.template=g,f.prototype.tagName="th",f.prototype.className="roleHeader",f.prototype.staticRoles=["AccountAdmin","AccountMembership","StudentEnrollment","TeacherEnrollment","TaEnrollment","ObserverEnrollment","DesignerEnrollment"],f.prototype.events={"click a":"removeRole"},f.prototype.initialize=function(){return this.model.on("destroying",this.addLoadingHeader)},f.prototype.addLoadingHeader=function(){return this.$el.find("a").replaceWith('<img class="loading-icon" src="/images/ajax-reload-animated.gif">')},f.prototype.deletable=function(){return!e.contains(this.staticRoles,this.model.get("role"))},f.prototype.toJSON=function(){var a;return a=f.__super__.toJSON.apply(this,arguments),a.deletable=this.deletable(),this.showBaseRoleType()&&(a.baseRoleTip=b.t("based_on_type","Based on %{base_type}",{base_type:this.model.get("base_role_type_label")})),a},f.prototype.removeRole=function(a){var c=this;a.preventDefault();if(confirm(b.t("role.remove_role_confirmation","If there are any users with this role, they will keep the current permissions but you will not be able to create new users with this role. Click ok to continue deleting this role.")))return this.model.destroy({error:function(a,b){return alert(""+a.role+" could not be remove, contact your site admin if this continues."),c.removeLoadingIcon()},wait:!0})},f.prototype.showBaseRoleType=function(){return!e.contains(this.staticRoles,this.model.get("role"))},f.prototype.afterRender=function(){return this.$el.attr("role","columnheader")},f.prototype.removeLoadingIcon=function(){return this.$el.find(".loading-icon").remove()},f}(f.View)})}).call(this)