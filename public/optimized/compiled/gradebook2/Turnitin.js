(function(){define(["i18n!turnitin","underscore"],function(a,b){var c,d,e;return e=b.max,d=b.invert,c={extractData:function(a){var b,c,f,g,h,i,j,k,l,m,n,o,p;if(a!=null?!a.turnitin_data:!void 0)return;c={items:[]};if(a.attachments&&a.submission_type==="online_upload"){m=a.attachments;for(k=0,l=m.length;k<l;k++)b=m[k],b=(n=b.attachment)!=null?n:b,(j=(o=a.turnitin_data)!=null?o["attachment_"+b.id]:void 0)&&c.items.push(j)}else a.submission_type==="online_text_entry"&&(j=(p=a.turnitin_data)!=null?p["submission_"+a.id]:void 0)&&c.items.push(j);if(!c.items.length)return;return g=["no","none","acceptable","warning","problem","failure"],h=d(g),i=function(){var a,b,d,e;d=c.items,e=[];for(a=0,b=d.length;a<b;a++)f=d[a],e.push(parseInt(h[f.state||"no"]));return e}(),c.state=g[e(i)],c},extractDataFor:function(b,c,d){var e;return e=b.turnitin_data,!e||!e[c]||e[c].similarity_score==null?{}:(e=e[c],e.state=""+(e.state||"no")+"_score",e.score=""+e.similarity_score+"%",e.reportUrl=""+d+"/assignments/"+b.assignment_id+"/submissions/"+b.user_id+"/turnitin/"+c,e.tooltip=a.t("tooltip.score","Turnitin Similarity Score - See detailed report"),e)}}})}).call(this)