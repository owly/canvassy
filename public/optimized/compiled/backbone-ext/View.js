(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].slice;define(["use!vendor/backbone","underscore","str/htmlEscape","compiled/util/mixin"],function(b,e,f,g){var h;return b.View=function(b){function i(){return this.renderView=a(this.renderView,this),this.createBindings=a(this.createBindings,this),this.render=a(this.render,this),h=i.__super__.constructor.apply(this,arguments),h}return c(i,b),i.prototype.defaults={},i.prototype.els=null,i.optionProperty=function(a){return this.__optionProperties__=(this.__optionProperties__||[]).concat([a])},i.optionProperty("template"),i.child=function(a,b){var c;return this.optionProperty(a),(c=this.__childViews__)==null&&(this.__childViews__=[]),this.__childViews__=this.__childViews__.concat([{name:a,selector:b}])},i.prototype.initialize=function(a){var b,c,d,f;this.options=e.extend({},this.defaults,this.options,a),this.setOptionProperties(),this.storeChildrenViews(),this.$el.data("view",this),this.model&&(this.model.view=this),this.collection&&(this.collection.view=this);if(this.__initialize__){f=this.__initialize__;for(c=0,d=f.length;c<d;c++)b=f[c],b.call(this)}return this.attach(),this},i.prototype.storeChildrenViews=function(){var a=this;if(!this.constructor.__childViews__)return;return this.children=e.map(this.constructor.__childViews__,function(b){return a[b.name]})},i.prototype.setOptionProperties=function(){var a,b,c,d,e;d=this.constructor.__optionProperties__,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],this.options[a]!=null?e.push(this[a]=this.options[a]):e.push(void 0);return e},i.prototype.render=function(){return this.renderEl(),this._afterRender(),this},i.prototype.renderEl=function(){if(this.template)return this.$el.html(this.template(this.toJSON()))},i.prototype.cacheEls=function(){var a,b,c,d;if(this.els){c=this.els,d=[];for(b in c)a=c[b],d.push(this[a]=this.$(b));return d}},i.prototype._afterRender=function(){return this.cacheEls(),this.createBindings(),this.options.views&&this.renderViews(),this.renderChildViews(),this.afterRender()},i.prototype.afterRender=function(){var a,b,c,d,e;if(this.__afterRender__){d=this.__afterRender__,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.call(this));return e}},i.prototype.attach=function(){var a,b,c,d,e;if(this.__attach__){d=this.__attach__,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.call(this));return e}},i.prototype.toJSON=function(){var a,b;return b=this.model||this.collection,a=b?b.present?b.present():b.toJSON():this.options,a.cid=this.cid,a},i.prototype.renderChildViews=function(){var a,b,c,d,e,f,g;if(!this.constructor.__childViews__)return;f=this.constructor.__childViews__;for(d=0,e=f.length;d<e;d++)g=f[d],a=g.name,b=g.selector,this[a]==null&&typeof console!="undefined"&&console!==null&&typeof console.warn=="function"&&console.warn("I need a child view '"+a+"' but one was not provided"),c=this.$(b),this[a].setElement(c),this[a].render();return null},i.prototype.createBindings=function(a,b){var c=this;return this.$("[data-bind]").each(function(a,b){var d,e;return d=$(b),e=d.data("bind"),c.model.on("change:"+e,function(a,b){return d.html(c.format(e,b))})})},i.prototype.format=function(a,b){return f(b)},i.prototype.stopPropagation=function(a){return a.stopPropagation()},i.mixin=function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],g.apply(null,[this].concat(d.call(a)))},i.prototype.renderViews=function(){return typeof console!="undefined"&&console!==null&&typeof console.warn=="function"&&console.warn("the `views` option is deprecated in favor of @child`"),e.each(this.options.views,this.renderView)},i.prototype.renderView=function(a,b){var c,d;return c=this.$("#"+b),c.length||(c=this.$("."+b)),a.setElement(c),a.render(),(d=this[b])!=null?d:this[b]=a},i.prototype.hide=function(){return this.$el.hide()},i.prototype.show=function(){return this.$el.show()},i.prototype.toggle=function(){return this.$el.toggle()},i}(b.View),b.View})}).call(this)