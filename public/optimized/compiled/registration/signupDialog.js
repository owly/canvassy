(function(){define(["underscore","i18n!registration","compiled/fn/preventDefault","compiled/registration/registrationErrors","jst/registration/teacherDialog","jst/registration/studentDialog","jst/registration/parentDialog","compiled/jquery/validate","jquery.instructure_forms","jquery.instructure_date_and_time"],function(a,b,c,d,e,f,g){var h,i,j;return h={},j={teacherDialog:e,studentDialog:f,parentDialog:g},i=function(a,b){var e,f,g,k,l=this;if(!j[a])return;return f=(k=h[a])!=null?k:h[a]=$("<div />"),f.html(j[a]({account:ENV.ACCOUNT.registration_settings,terms_url:"http://www.instructure.com/terms-of-use",privacy_url:"http://www.instructure.com/privacy-policy"})),f.find(".date-field").datetime_field(),f.find(".signup_link").click(c(function(){return f.dialog("close"),i($(this).data("template"),$(this).prop("title"))})),e=f.find("form"),e.formSubmit({required:function(){var a,b,c,d;c=e.find(":input[name]").not("[type=hidden]"),d=[];for(a=0,b=c.length;a<b;a++)g=c[a],d.push(g.name);return d}(),disableWhileLoading:"spin_on_success",errorFormatter:d,success:function(a){return a.course?window.location="/courses/"+a.course.course.id+"?registration_success=1":window.location="/?registration_success=1"}}),f.dialog({resizable:!1,title:b,width:550,open:function(){return $(this).find("a").eq(0).blur(),$(this).find(":input").eq(0).focus()},close:function(){return $(".error_box").filter(":visible").remove()}}),f.fixDialogButtons()},i.templates=j,i})}).call(this)