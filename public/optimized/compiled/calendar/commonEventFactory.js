(function(){define(["jquery","compiled/calendar/CommonEvent","compiled/calendar/CommonEvent.Assignment","compiled/calendar/CommonEvent.AssignmentOverride","compiled/calendar/CommonEvent.CalendarEvent","compiled/str/splitAssetString"],function(a,b,c,d,e,f){return function(a,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(a===null)return o=new b,o.allPossibleContexts=g,o;h=a.context_code,k=a.effective_context_code||h,q=a.assignment_overrides?"assignment_override":a.assignment||a.assignment_group_id?"assignment":"calendar_event",a=a.assignment_overrides?{assignment:a.assignment,assignment_override:a.assignment_overrides[0]}:a.assignment||a.calendar_event||a;if(a.hidden)return null;h==null&&(h=a.context_code),k==null&&(k=a.effective_context_code||a.context_code),l=null;for(r=0,s=g.length;r<s;r++){j=g[r];if(j.asset_string===k){l=j;break}}return l===null?null:(h!==k&&(p=f(h)),i=p&&(n=l[p[0]])?function(){var a,b,c;c=[];for(a=0,b=n.length;a<b;a++)m=n[a],m.id===p[1]&&c.push(m);return c}()[0]:void 0,q==="assignment"?o=new c(a,l):q==="assignment_override"?o=new d(a,l):o=new e(a,l,i),o.can_edit=!1,o.can_delete=!1,l.can_create_calendar_events&&(o.can_edit=!0,o.can_delete=!0),o.object.workflow_state==="locked"&&(o.can_edit=!1),o.object.appointment_group_id&&l.can_create_calendar_events&&(o.can_edit=!0),q==="assignment"&&(o.can_edit=!0),o)}})}).call(this)