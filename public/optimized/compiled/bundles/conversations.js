define("translations/conversations",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{buttons:{cancel:"إلغاء"},conversations:{attachment_error:"فشل في تحميل المرفق ، الرجاء المحاولة مرة أخرى",buttons:{add_people:"إضافة أشخاص",send_message:"إرسال"},cannot_be_empty:"لا يمكن أن تكون الرسالة فارغة",confirm:{delete_message:"هل تريد بالتأكيد حذف نسختك من هذه الرسالة؟ لن يمكن التراجع عن هذا الإجراء.",delete_messages:"هل تريد بالتأكيد حذف نسختك من هذه الرسائل؟ لن يمكن التراجع عن هذا الإجراء."},enrollments_everyone:"الجميع",errors:{field_is_required:"هذا الحقل مطلوب"},filter_by_course:"تصفية حسب هذا المساق",filter_by_group:"تصفية حسب هذه المجموعة",headings:{new_message:"رسالة جديدة"},no_recipients_choose_another_group:"لا يوجد مستلمون في هذه المجموعة. الرجاء اختيار مجموعة أخرى.",not_applicable:"لا يوجد",not_scored:"بلا نقاط",notes_to_self:"مونولوج",other:{one:"واحد آخر",other:"%{count} آخرين"},people_count:{one:"شخص واحد",other:"%{count} من الأشخاص"},recipient_error:"المجموعة أو المساق الذي حددته لا يحوي مستلمين صالحين",select_all:"تحديد الكل",title:{add_recipients:"إضافة مستلمين",forward_messages:"إعادة توجيه الرسائل"},titles:{expand_inline:"إظهار مزيد من التعليقات",view_submission:"فتح الإرسال في نافذة جديدة."},unknown_user:"مستخدم غير معروف",unspecified_error:"حدث خطأ غير متوقع، الرجاء إعادة المحاولة"}},es:{buttons:{cancel:"Cancelar"},conversations:{attachment_error:"No se pudo cargar el archivo adjunto. Por favor, inténtelo de nuevo.",buttons:{add_people:"Agregar personas",send_message:"Enviar"},cannot_be_empty:"El mensaje no puede estar vacío",confirm:{delete_message:"¿Está seguro de que quiere borrar su copia de este mensaje? Esta acción no se puede deshacer.",delete_messages:"¿Está seguro de que quiere borrar su copia de estos mensajes? Esta acción no se puede deshacer."},enrollments_everyone:"Todos",errors:{field_is_required:"Este campo es requerido"},filter_by_course:"Filtrar por este curso",filter_by_group:"Filtrar por este grupo",headings:{new_message:"Mensaje Nuevo"},no_recipients_choose_another_group:"No hay destinatarios en este grupo. Por favor, elija otro grupo.",not_applicable:"N/A",not_scored:"sin puntuación",notes_to_self:"Monólogo",other:{one:"1 más",other:"%{count} más"},people_count:{one:"1 persona",other:"%{count} personas"},recipient_error:"El curso o grupo que ha seleccionado no tiene destinatarios válidos",select_all:"Seleccionar Todo",title:{add_recipients:"Agregar destinatarios",forward_messages:"Reeviar Mensaje"},titles:{expand_inline:"Mostrar más comentarios",view_submission:"Abra el envío en una ventana nueva."},unknown_user:"Usuario desconocido",unspecified_error:"Ha ocurrido un error inesperado. Inténtelo de nuevo."}},fr:{buttons:{cancel:"Annuler"},conversations:{attachment_error:"Échec du chargement de la pièce jointe. Veuillez réessayer.",buttons:{add_people:"Ajouter des personnes",send_message:"Envoyer"},cannot_be_empty:"Le message ne doit pas être vide",confirm:{delete_message:"Voulez-vous vraiment supprimer le contenu de ce message ? Cette action est irréversible.",delete_messages:"Voulez-vous vraiment supprimer le contenu de ces messages ? Cette action est irréversible."},enrollments_everyone:"Tous",errors:{field_is_required:"Ce champ est obligatoire."},filter_by_course:"Filtrer selon ce cours",filter_by_group:"Filtrer selon ce groupe",headings:{new_message:"Nouveau message"},no_recipients_choose_another_group:"Ce groupe ne contient aucun destinataire. Veuillez choisir un autre groupe.",not_applicable:"NA",not_scored:"aucune note",notes_to_self:"Monologue",other:{one:"1 autre",other:"%{count} autres"},people_count:{one:"1 personne",other:"%{count} personnes"},recipient_error:"Le cours ou le groupe sélectionné ne contient pas de destinataires valides.",select_all:"Sélectionner tout",title:{add_recipients:"Ajouter des destinataires",forward_messages:"Transférer les messages"},titles:{expand_inline:"Afficher plus de commentaires",view_submission:"Ouvrir l’envoi dans une nouvelle fenêtre."},unknown_user:"Utilisateur inconnu",unspecified_error:"Une erreur inattendue s’est produite. Veuillez réessayer."}},ja:{buttons:{cancel:"キャンセル"},conversations:{attachment_error:"添付ファイルのアップロードが失敗しました。もう一度やり直してください。",buttons:{add_people:"メンバーの追加",send_message:"送信"},cannot_be_empty:"メッセージは空白にできません",confirm:{delete_message:"このメッセージのコピーを削除してもよろしいですか? この操作は取り消しできません。",delete_messages:"これらのメッセージのコピーを削除してもよろしいですか? この操作は取り消しできません。"},enrollments_everyone:"全員",errors:{field_is_required:"このフィールドは必須項目です"},filter_by_course:"このコースでフィルタ",filter_by_group:"このグループでフィルタ",headings:{new_message:"新しいメッセージ"},no_recipients_choose_another_group:"このグループには受信者がいません。別のグループを選択してください。",not_applicable:"N/A",not_scored:"スコアなし",notes_to_self:"モノローグ",other:{one:"その他 %{count} 件",other:"その他 %{count} 件"},people_count:{one:"%{count} 人のユーザ",other:"%{count} 人のユーザ"},recipient_error:"選択したコースまたはグループには有効な受信者がいません",select_all:"すべて選択",title:{add_recipients:"受信者の追加",forward_messages:"メッセージの転送"},titles:{expand_inline:"他のコメントを表示",view_submission:"提出物を新しいウィンドウに開きます。"},unknown_user:"不明なユーザ",unspecified_error:"予期しないエラーが発生しました。もう一度やり直してください"}},ko:{buttons:{cancel:"취소"},conversations:{attachment_error:"첨부를 업로드할 수 없습니다. 다시 시도하시기 바랍니다.",buttons:{add_people:"사람 추가",send_message:"보내기"},cannot_be_empty:"메시지 내용이 있어야 함",confirm:{delete_message:"이 메시지의 사본을 삭제하시겠습니까? 이 작업은 실행을 취소할 수 없습니다.",delete_messages:"이 메시지의 사본을 삭제하시겠습니까? 이 작업은 실행을 취소할 수 없습니다."},enrollments_everyone:"모두",errors:{field_is_required:"필수 필드임"},filter_by_course:"이 과목으로 필터링",filter_by_group:"이 그룹으로 필터링",headings:{new_message:"새 메시지"},no_recipients_choose_another_group:"이 그룹에 수신인이 없습니다. 다른 그룹을 선택하시기 바랍니다.",not_applicable:"해당 없음",not_scored:"점수 없음",notes_to_self:"독백",other:{one:"외 %{count}명",other:"외 %{count}명"},people_count:{one:"%{count}명",other:"%{count}명"},recipient_error:"선택한 과목이나 그룹에 유효한 수신인이 없음",select_all:"전부 선택",title:{add_recipients:"받는 사람 추가",forward_messages:"메시지 전달"},titles:{expand_inline:"추가 의견 표시",view_submission:"새 창에서 제출물을 엽니다."},unknown_user:"알 수 없는 사용자",unspecified_error:"예기치 않은 오류 발생"}},nl:{buttons:{cancel:"Annuleren"},conversations:{attachment_error:"Uploaden van bijlage mislukt, probeer het opnieuw.",buttons:{add_people:"Voeg personen toe",send_message:"Versturen"},cannot_be_empty:"Bericht kan niet leeg zijn",confirm:{delete_message:"Weet je zeker dat je jouw kopie van dit bericht wil verwijderen? Deze actie kan niet ongedaan worden gemaakt.",delete_messages:"Weet je zeker dat je jouw kopie van dit bericht wil verwijderen? Deze actie kan niet ongedaan worden gemaakt."},enrollments_everyone:"Iedereen",errors:{field_is_required:"Dit veld is verplicht"},filter_by_course:"Filter op deze cursus",filter_by_group:"Filter op deze groep",headings:{new_message:"Nieuw bericht"},no_recipients_choose_another_group:"Er bevinden zich geen ontvangers in deze groep. Kies een andere groep",not_applicable:"Niet beschikbaar",not_scored:"geen score",notes_to_self:"Monoloog",other:{one:"1 andere",other:"%{count} anderen"},people_count:{one:"1 persoon",other:"%{count} personen"},recipient_error:"De geselecteerde cursus of groep heeft geen geldige ontvangers",select_all:"Selecteer alles",title:{add_recipients:"Voeg ontvangers toe",forward_messages:"Stuur berichten door"},titles:{expand_inline:"Toon meer reacties",view_submission:"Bekijk inzending in een nieuw venster."},unknown_user:"Onbekende gebruiker",unspecified_error:"Er is een onverwachte fout opgetreden, probeer het opnieuw"}},pt:{buttons:{cancel:"Cancelar"},conversations:{attachment_error:"Falha ao carregar o anexo, tente novamente.",buttons:{add_people:"Adicionar pessoas",send_message:"Enviar"},cannot_be_empty:"A mensagem não pode ficar em branco",confirm:{delete_message:"Tem a certeza de que pretende eliminar a sua cópia desta mensagem? Esta ação não pode ser anulada.",delete_messages:"Tem a certeza de que pretende eliminar a sua cópia destas mensagens? Esta ação não pode ser anulada."},enrollments_everyone:"Todos",errors:{field_is_required:"Este campo é obrigatório"},filter_by_course:"Filtrar por esta disciplina",filter_by_group:"Filtrar por este grupo",headings:{new_message:"Nova mensagem"},no_recipients_choose_another_group:"Não existem destinatários neste grupo. Selecione outro grupo.",not_applicable:"ND",not_scored:"sem pontuação",notes_to_self:"Monólogo",other:{one:"mais 1",other:"mais %{count}"},people_count:{one:"1 pessoa",other:"%{count} pessoas"},recipient_error:"A disciplina ou o grupo que selecionou não tem destinatários válidos",select_all:"Selecionar tudo",title:{add_recipients:"Adicionar destinatários",forward_messages:"Reencaminhar mensagens"},titles:{expand_inline:"Mostrar mais comentários",view_submission:"Abrir envio em uma nova janela"},unknown_user:"Utilizador desconhecido",unspecified_error:"Ocorreu um erro inesperado, tente novamente"}},ru:{buttons:{cancel:"Отменить"},conversations:{attachment_error:"Не удалось загрузить вложение, попробуйте еще раз.",buttons:{add_people:"Добавить людей",send_message:"Отправить"},cannot_be_empty:"Сообщение не может быть пустым",confirm:{delete_message:"Вы уверены, что хотите удалить свою копию этого сообщения? Это действие не может быть отменено.",delete_messages:"Вы уверены, что хотите удалить свою копию этих сообщений? Это действие не может быть отменено."},enrollments_everyone:"Все",errors:{field_is_required:"Необходимо это поле"},filter_by_course:"Фильтровать по этому курсу",filter_by_group:"Фильтровать по этой группе",headings:{new_message:"Новое сообщение"},no_recipients_choose_another_group:"В данной группе нет получателей. Выберите другую группу.",not_applicable:"Н/Д (недоступно)",not_scored:"Оценка отсутствует",notes_to_self:"Монолог",other:{one:"1 другой",other:"%{count} других"},people_count:{one:"1 человек ",other:"%{count} человек(а)"},recipient_error:"Выбранный вами курс или группа не имеет действующих получателей",select_all:"Выбрать все",title:{add_recipients:"Добавить получателей",forward_messages:"Переслать сообщения"},titles:{expand_inline:"Показать больше комментариев",view_submission:"Открыть отправку в новом окне."},unknown_user:"Неизвестный юзер",unspecified_error:"Произошла непредвиденная ошибка, пожалуйста, попробуйте еще раз"}},zh:{buttons:{cancel:"取消"},conversations:{attachment_error:"加载附件失败，请重试。",buttons:{add_people:"填加人员",send_message:"发送"},cannot_be_empty:"消息不能为空",confirm:{delete_message:"是否确定要删除您拥有的此消息的副本? 此操作将不可恢复。",delete_messages:"是否确定要删除您拥有的这些消息的副本? 此操作将不可恢复。"},enrollments_everyone:"每个人",errors:{field_is_required:"此字段为必填字段"},filter_by_course:"以此课程筛选",filter_by_group:"以此组筛选",headings:{new_message:"新消息"},no_recipients_choose_another_group:"该组中没有收件人。请另选一组。",not_applicable:"不适用",not_scored:"没有分数",notes_to_self:"独白",other:{one:"%{count} 个其他",other:"%{count} 个其他"},people_count:{one:"%{count} 个人",other:"%{count} 个人"},recipient_error:"您选择的课程或小组没有有效的接收人",select_all:"全选",title:{add_recipients:"添加接收人",forward_messages:"转发消息"},titles:{expand_inline:"显示更多的评论",view_submission:"在新窗口中打开提交文件。"},unknown_user:"未知用户",unspecified_error:"发生意外错误，请重试。"}}}})}),define("translations/conversations_intro",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{conversations_intro:{slide1:{paragraph1:"ألقِ نظرة على صندوق البريد لديك!",paragraph2:"أخيرًا جاءت المحادثات! نظام المراسلة الجديد من Canvas!",paragraph3:"استخدم المحادثات لإرسال رسالة خاصة إلى رفيقك في الفصل أو استخدم المحادثات للتحدث مع مجموعة أشخاص كاملة.",paragraph4:"هل أنت مستعد لمقدمة قصيرة؟ انقر فوق السهم الأيمن للبدء."},slide2:{paragraph1:"يتم عرض كل محادثاتك على الجانب الأيسر.",paragraph2:"يمكنك أن ترى الشخص الذي معك في المحادثة، وعدد الرسائل الموجودة، وعددًا قليلاً من أسطر أحدث رسالة في كل محادثة."},slide3:{paragraph1:'يمكن وضع علامة على المحادثات مقروءة/مقروءة أو مميزة بنجمة أو مؤرشفة، أو مسماة حسب اللون باستخدام الزر "إجراءات" على الرسالة.',paragraph2:"لم يتم حذف الرسائل المؤرشفة، كل ما في الأمر أنها نُقلت من صندوق البريد لديك، وما زال بإمكانك الوصول إليها مرة أخرى عند الحاجة."},slide4:{paragraph1:"عندما تحدد محادثة، يتم عرض كل الرسائل الخاصة بهذه المحادثة في اللوحة على اليمين. وعندما تطول المحادثات، يمكنك في أي وقت التنقل لأسفل لرؤية الرسائل الأقدم."},slide5:{paragraph1:"لبدء رسالة، ابدأ بالنقر فوق الأيقونة إنشاء."},slide6:{paragraph1:"في مربع رسالة جديدة، ابدأ بكتابة اسم الشخص، أو اسم المجموعة، وسيظهر في القائمة المنسدلة. أو بدلاً من ذلك، يمكنك النقر فوق أيقونة دفتر العناوين للعثور على شخص ما إذا كنت لا تتذكر اسمه.",paragraph2:"اكتب رسالتك، ثم انقر فوق إرسال، وأبشر بالنجاح."},slide7:{paragraph1:"يمكنك إرسال رسائل إلى شخص واحد أو مجموعة من الأشخاص. وافتراضيًا ستكون كل رسائل المجموعة متاحة لكل شخص في هذه المجموعة.",paragraph2:'إذا أردت إرسال الرسالة بشكل خاص إلى كافة المستلمين، فقم بإلغاء تحديد "هذه مجموعة محادثة".'},slide8:{paragraph1:"يمكنك تحديد رسالة أو رسائل بالنقر فوق خانة الاختيار التي على الجانب الأيمن.",paragraph2:"بعد تحديدها، يمكنك إعادة توجيه الرسالة أو الرسائل إلى شخص آخر، أو حذفها."},slide9:{paragraph1:"نحن واثقون أنك ستجد المحادثات أداة بسيطة وسهلة الاستخدام.",paragraph2:"تفضل بتجريب هذا الفيديو القصير الذي يحوي مقدمة تريك المحادثات قيد العمل.",paragraph3:"تم تنظيم الرسائل القديمة في محادثات تيسيرًا لك. فماذا تنتظر؟ هيا ابدأ!"},titles:{slide1:"الشريحة 1",slide2:"الشريحة 2",slide3:"الشريحة 3",slide4:"الشريحة 4",slide5:"الشريحة 5",slide6:"الشريحة 6",slide7:"الشريحة 7",slide8:"الشريحة 8",slide9:"الشريحة 9"}}},es:{conversations_intro:{slide1:{paragraph1:"Revise su bandeja de correo.",paragraph2:"Conversations, el nuevo sistema de mensajería de Canvas, ha llegado.",paragraph3:"Use Conversations para enviar mensajes privados a un compañero o para contactar con un grupo de personas. ",paragraph4:"¿Listo para una introducción rápida? Haga clic en la flecha derecha para comenzar"},slide2:{paragraph1:"Todas las conversaciones se muestran en el lado izquierdo",paragraph2:"Puede ver con quién mantiene la conversación, cuántos mensajes hay y las primeras frases de los últimos mensajes de cada conversación."},slide3:{paragraph1:'Las conversaciones pueden marcarse como leídas/no leídas o archivadas, usando el botón de "acciones" en el mensaje.',paragraph2:"Los mensajes archivados no se borran, sino que se eliminan de su bandeja de entrada, aunque puede acceder a ellos en caso necesario."},slide4:{paragraph1:"Cuando seleccione una conversación, todos los mensajes de esa conversación se mostrarán en el panel de la derecha. Cuando las conversaciones son muy largas, siempre puede desplazarse para ver mensajes anteriores."},slide5:{paragraph1:"Para iniciar un mensaje, haga clic en el ícono de Escribir"},slide6:{paragraph1:"En el espacio de Mensaje nuevo, comience escribiendo el nombre de la persona o grupo, e inmediatamente aparecerán en el menú desplegable. Otra posibilidad es hacer clic en el ícono del libro de direcciones para encontrar a alguien si no recuerda su nombre.",paragraph2:"Escriba su mensaje, haga clic en Enviar y ya está listo"},slide7:{paragraph1:"Puede enviar mensajes a una persona o a un grupo de personas. Los mensajes a grupos están disponibles para todos los miembros de un grupo.",paragraph2:'Si desea enviar un mensaje privado a todos los destinatarios, no seleccione la opción "Esta es una conversación de grupo".'},slide8:{paragraph1:"Puede seleccionar uno o más mensajes haciendo clic en la casilla a la derecha del mensaje.",paragraph2:"Una vez seleccionado, puede reenviar un mensaje o borrarlo"},slide9:{paragraph1:"Verá que Conversations es un método sencillo y fácil de usar.",paragraph2:"Vea este corto video de introducción para ver cómo funciona Conversations.",paragraph3:"Sus mensajes antiguos se han organizado ahora en Conversations  para usted. ¿Qué está esperando? ¡Comencemos!"},titles:{slide1:"Diapositiva 1",slide2:"Diapositiva 2",slide3:"Diapositiva 3",slide4:"Diapositiva 4",slide5:"Diapositiva 5",slide6:"Diapositiva 6",slide7:"Diapositiva 7",slide8:"Diapositiva 8",slide9:"Diapositiva 9"}}},fr:{conversations_intro:{slide1:{paragraph1:"Consultez votre boîte de réception !",paragraph2:"Conversations - le nouveau système de messagerie Canvas - est arrivé !",paragraph3:"Utilisez « Conversations » pour envoyer un message privé à vos camarades ou pour vous adresser à un groupe de personnes.",paragraph4:"Prêt pour une présentation rapide ? Cliquez sur la flèche de droite pour commencer."},slide2:{paragraph1:"Toutes vos conversations sont affichées sur la gauche.",paragraph2:"Vous pouvez voir les interlocuteurs, le nombre de messages et quelques lignes des derniers messages de chaque conversation."},slide3:{paragraph1:"Vous pouvez marquer les conversations comme étant lues/non lues, archivées ou les identifier par un astérisque à l’aide du bouton « Actions » du message.",paragraph2:"Les messages archivés ne sont pas supprimés. Ils sont simplement déplacés hors de votre boîte de réception pour vous permettre d’y accéder de nouveau en cas de besoin."},slide4:{paragraph1:"Lorsque vous sélectionnez une conversation, tous les messages qui s’y rapportent s’affichent dans le volet de droite. Lorsque les conversations sont longues, vous pouvez les faire défiler vers le bas pour voir les messages plus anciens."},slide5:{paragraph1:"Pour commencer un message, cliquez sur l’icône Composer."},slide6:{paragraph1:"Dans la fenêtre Nouveau message, saisissez le nom de la personne ou du groupe ; ils s’afficheront dans la liste déroulante. Vous pouvez aussi cliquer sur l’icône du carnet d’adresses pour trouver une personne si vous avez oublié son nom.",paragraph2:"Saisissez votre message, cliquez sur Envoyer, c’est aussi simple que ça !"},slide7:{paragraph1:"Vous pouvez envoyer des messages à une personne ou à un groupe. Par défaut, tous les messages de groupe sont accessibles à chaque membre du groupe.",paragraph2:"Pour envoyer le message en privé à chacun des destinataires, désactivez la case à cocher « Ceci est une conversation de groupe »."},slide8:{paragraph1:"Vous pouvez sélectionner un ou plusieurs messages en cochant la case qui se trouve à droite.",paragraph2:"Une fois les messages sélectionnés, vous pouvez les transférer à une autre personne ou les supprimer."},slide9:{paragraph1:"L’outil Conversations  vous paraîtra certainement simple et facile à utiliser.",paragraph2:"Visionnez cette courte vidéo de présentation pour voir comment fonctionne l’outil Conversations.",paragraph3:"Vos anciens messages ont été classés dans Conversations. Alors, qu’attendez-vous ? Lancez-vous !"},titles:{slide1:"Diapositive 1",slide2:"Diapositive 2",slide3:"Diapositive 3",slide4:"Diapositive 4",slide5:"Diapositive 5",slide6:"Diapositive 6",slide7:"Diapositive 7",slide8:"Diapositive 8",slide9:"Diapositive 9"}}},ja:{conversations_intro:{slide1:{paragraph1:"受信箱を確認してください!",paragraph2:"Canvas の新しいメッセージング システムである Conversations が導入されました!",paragraph3:"Conversations を使用すると、クラスメートに個人的なメッセージを送信したり、グループのメンバー全員と話したりできます。",paragraph4:"簡単な紹介を見る準備ができましたか? 始めるには右の矢印をクリックしてください。"},slide2:{paragraph1:"すべての会話が左側に表示されます。",paragraph2:"会話の相手、メッセージの数、各会話の最新メッセージの数行を確認できます。"},slide3:{paragraph1:"会話は、メッセージの [処理] ボタンを使用して、既読/未読としてマークしたり、アーカイブしたり、色でラベル付けしたりできます。",paragraph2:"アーカイブしたメッセージは削除されません。受信箱から移動されるだけなので、必要に応じて再びアクセスできます。"},slide4:{paragraph1:"会話を選択すると、その会話のすべてのメッセージが右側のパネルに表示されます。会話が長い場合は、下にスクロールして以前のメッセージを見ることができます。"},slide5:{paragraph1:"メッセージを開始するには、[作成] アイコンをクリックして始めます。"},slide6:{paragraph1:"[新しいメッセージ] ボックスでユーザまたはグループの名前の入力を始めると、ドロップダウンに表示されます。または、名前を忘れた場合はアドレス帳アイコンをクリックして検索できます。",paragraph2:"メッセージを入力して、[送信] をクリックします。"},slide7:{paragraph1:"1 人のユーザまたはユーザのグループにメッセージを送信できます。デフォルトでは、すべてのグループ メッセージは、グループ内のすべてのユーザが使用できます。",paragraph2:"すべての受信者にプライベートにメッセージを送信したい場合は、[これはグループ会話です] チェックボックスをオフにします。"},slide8:{paragraph1:"右側のチェックボックスをクリックして、メッセージを 1 つ以上選択できます。",paragraph2:"選択したメッセージは、他のユーザに転送したり、削除したりできます。"},slide9:{paragraph1:"Conversations はシンプルで、簡単に使用できます。",paragraph2:"この短い紹介ビデオで Conversations の動作をご覧ください。",paragraph3:"古いメッセージは自動的に Conversations に整理されます。待つ必要はありません。すぐに始められます!"},titles:{slide1:"スライド 1",slide2:"スライド 2",slide3:"スライド 3",slide4:"スライド 4",slide5:"スライド 5",slide6:"スライド 6",slide7:"スライド 7",slide8:"スライド 8",slide9:"スライド 9"}}},ko:{conversations_intro:{slide1:{paragraph1:"받은 편지함을 확인해 보십시오!",paragraph2:"Canvas의 새로운 메시지 시스템인 대화가 도착했습니다!",paragraph3:"대화를 사용하면 급우에게 비공개 메시지를 보낼 수 있고 전체 그룹에게 이야기할 수도 있습니다.",paragraph4:"간단한 설명을 들을 준비가 되셨습니까? 오른쪽 화살표를 클릭하면 시작합니다."},slide2:{paragraph1:"모든 대화는 왼쪽에 표시됩니다.",paragraph2:"대화 상대가 누구이고 얼마나 많은 메시지가 있으며 각 대화의 최신 메시지 중 몇 줄을 볼 수 있습니다."},slide3:{paragraph1:'메시지에 있는 "동작" 버튼을 이용해서 대화를 읽음/읽지 않음, 별표, 보관으로 표시할 수 있습니다.',paragraph2:"보관된 메시지는 삭제된 것이 아니라 받은 편지함에서 옮긴 것이므로 필요할 때 다시 액세스할 수 있습니다."},slide4:{paragraph1:"대화를 선택하면 해당 대화의 모든 메시지가 왼쪽 패널에 표시됩니다. 대화가 길어지면 언제든지 아래로 스크롤해서 이전 메시지를 볼 수 있습니다."},slide5:{paragraph1:"메시지 보내기를 시작하려면 작성 아이콘을 클릭하십시오."},slide6:{paragraph1:"새 메시지 상자에서 사람이나 그룹 이름을 입력하기 시작하면 드롭다운에 표시됩니다. 이름을 기억하지 못한다면 사람을 찾기 위해서 주소록 아이콘을 클릭할 수 있습니다.",paragraph2:"메시지를 입력하고 보내기 버튼을 클릭하면 됩니다."},slide7:{paragraph1:"한 사람에게 메시지를 보내거나 여러 사람에게 보낼 수 있습니다. 기본 값으로 모든 그룹 메시지는 그룹에 있는 모든 사람에게 전달됩니다.",paragraph2:'모든 수신인에게 비공개로 메시지를 보내려면 "이는 그룹 대화임" 체크 상자를 선택 해제하십시오.'},slide8:{paragraph1:"오른쪽에 있는 체크 상자를 클릭해서 하나 이상의 메시지를 선택할 수 있습니다.",paragraph2:"선택하고 나면 다른 사람에게 전달하거나 삭제할 수 있습니다."},slide9:{paragraph1:"여러분이 대화가 사용하기에 간단하고 쉽다는 것을 알게 되리라 생각합니다.",paragraph2:"간단한 소개 비디오를 확인하면 대화가 동작하는 것을 볼 수 있습니다.",paragraph3:"이전 메시지는 여러분을 위해 대화로 구성됩니다. 그러므로 기다릴 필요가 없습니다. 시작하십시오!"},titles:{slide1:"슬라이드 1",slide2:"슬라이드 2",slide3:"슬라이드 3",slide4:"슬라이드 4",slide5:"슬라이드 5",slide6:"슬라이드 6",slide7:"슬라이드 7",slide8:"슬라이드 8",slide9:"슬라이드 9"}}},nl:{conversations_intro:{slide1:{paragraph1:"Controleer je inbox!",paragraph2:"Conversaties - het nieuwe berichtensysteem van Canvas - is gelanceerd!",paragraph3:"Gebruik conversaties om een privé-bericht te sturen naar een klasgenoot of om te discussiëren met een group.",paragraph4:"Klaar voor een korte introductie? Klik op de rechter pijl om door te gaan."},slide2:{paragraph1:"Alle conversaties worden aan de linkerkant getoond.",paragraph2:"Je kunt de deelnemers van de conversatie zien, hoeveel berichten er zijn en een paar regels van het nieuwste bericht in elke conversatie."},slide3:{paragraph1:'Conversaties kunnen gemarkeerd worden als gelezen/ongelezen, met ster, of gearchiveerd met behulp van de "actie" knop bij het bericht',paragraph2:"Gearchiveerde berichten worden niet verwijderd, ze worden verplaatst uit je inbox. Zo kun je altijd berichten opnieuw raadplegen."},slide4:{paragraph1:"Als je een conversatie selecteert, worden alle berichten voor die conversatie in het rechterpaneel getoond. Als conversaties lang worden, kun je eerdere berichten zien door te scrollen."},slide5:{paragraph1:"Om een bericht te schrijven kun je het Opstellen icoon gebruiken."},slide6:{paragraph1:"Start met het typen van een persoon- of groepsnaam en ze worden automatisch aangevuld. Je kunt ook het adresboek gebruiken als je een naam niet meer herinnert.",paragraph2:"Schrijf een bericht, klik op Verstuur, en het bericht wordt direct verstuurd."},slide7:{paragraph1:"Je kunt een bericht versturen naar één persoon of een groep. Standaard zijn groepsberichten toegankelijk voor iedereen in de groep.",paragraph2:'Als je het bericht privé wil sturen naar alle ontvangers, haal dan het vinkje "Dit is een groepsbericht" weg.'},slide8:{paragraph1:"Je kunt één of meerdere berichten selecteren door het vinkje aan de rechterkant te gebruiken.",paragraph2:"Na selectie kun je berichten doorsturen of verwijderen."},slide9:{paragraph1:"We hopen dat je conversaties gemakkelijk vindt om te gebruiken.",paragraph2:"Bekijk deze korte introductievideo om Conversaties in actie te zien.",paragraph3:"Je oude berichten zijn in conversaties omgezet. Waar wacht je nog op? Ga aan de slag!"},titles:{slide1:"Slide 1",slide2:"Slide 2",slide3:"Slide 3",slide4:"Slide 4",slide5:"Slide 5",slide6:"Slide 6",slide7:"Slide 7",slide8:"Slide 8",slide9:"Slide 9"}}},pt:{conversations_intro:{slide1:{paragraph1:"Dê uma vista de olhos na sua caixa de entrada!",paragraph2:"Conversas – o novo sistema de mensagens do Canvas – chegou!",paragraph3:"Utilize Conversas para enviar uma mensagem privada a um colega ou para falar com um grupo inteiro de pessoas.",paragraph4:"Pronto para uma pequena introdução? Clique na seta para a direita para começar."},slide2:{paragraph1:"Todas as suas conversas são colocadas no lado esquerdo.",paragraph2:"Pode ver com quem é a conversa, quantas mensagens existem e algumas linhas da mensagem mais recente em cada conversa."},slide3:{paragraph1:'As conversas podem ser marcadas como lidas/não lidas, classificadas com estrelas ou arquivadas utilizando o botão "Ações" na própria mensagem.',paragraph2:"As mensagens arquivadas não são eliminadas, são simplesmente movidas para fora da sua caixa de entrada, para que lhes possa aceder novamente se for necessário."},slide4:{paragraph1:'Quando seleciona uma conversa, todas as mensagens dessa conversa são mostradas no painel que se encontra no lado direito. Quando as conversas ficam muito longas, pode sempre usar o "scroll" para baixo e ver as mensagens anteriores.'},slide5:{paragraph1:"Para iniciar uma mensagem, comece por clicar no ícone de composição."},slide6:{paragraph1:"Na caixa de nova mensagem, comece a digitar o nome da pessoa ou do grupo e o nome aparece na lista pendente. Em alternativa, pode clicar no ícone do livro de endereços para encontrar alguém, se não se lembrar de um nome.",paragraph2:"Digite a sua mensagem, clique em Enviar e já está!"},slide7:{paragraph1:"Pode enviar mensagens a uma pessoa ou a um grupo de pessoas. Por predefinição, todas as mensagens do grupo estão disponíveis para todas as pessoas incluídas no grupo.",paragraph2:'Se quiser enviar uma mensagem privada a todos os destinatários, desmarque a opção "Esta é uma conversa de grupo".'},slide8:{paragraph1:"Pode selecionar uma ou mais mensagens clicando na caixa de seleção no lado direito.",paragraph2:"Uma vez selecionadas as mensagens, pode encaminhá-las para outra pessoa ou eliminá-las."},slide9:{paragraph1:'Pensamos que vai achar o sistema "Conversas" simples e fácil de utilizar.',paragraph2:'Visualize neste vídeo uma breve introdução, para ver "Conversas" em ação.',paragraph3:"As suas mensagens antigas foram organizadas em conversações. Então, de que está a espera? Vamos lá!"},titles:{slide1:"Slide 1",slide2:"Slide 2",slide3:"Slide 3",slide4:"Slide 4",slide5:"Slide 5",slide6:"Slide 6",slide7:"Slide 7",slide8:"Slide 8",slide9:"Slide 9"}}},ru:{conversations_intro:{slide1:{paragraph1:'Загляните в раздел "Входящие"!',paragraph2:"Разговоры — новая система передачи сообщений Canvas — теперь доступны!",paragraph3:"Используйте Беседы для отправки личного сообщения одноклассникам или используйте Беседы для разговора с целой группой людей.",paragraph4:"Готовы для краткого введения? Нажмите кнопку со стрелкой вправо, чтобы начать."},slide2:{paragraph1:"Все ваши разговоры показаны на левой стороне.",paragraph2:"Вы можете видеть, с кем вы разговариваете, количество сообщений и несколько строк из последнего сообщения в каждой беседе."},slide3:{paragraph1:'Разговоры могут быть помечены как прочитанные/непрочитанные, помечены звездочкой или заархивированы с помощью кнопки "Действия" в окне сообщения.',paragraph2:"Архив сообщений не удаляется, они только перемещаются из вашего почтового ящика, так что вы можете получить доступ к ним снова, если это необходимо."},slide4:{paragraph1:"Когда вы выбираете беседу, все сообщения для этой беседы показаны в панели справа. Когда беседа получается длинной, вы всегда можете прокрутить вниз, чтобы увидеть более ранние сообщения."},slide5:{paragraph1:"Для того, чтобы начать сообщение, нажмите на значок Набрать"},slide6:{paragraph1:"В новом окне сообщений, наберите имя человека, или название группы, и они будут отображаться в выпадающем меню. Кроме того, вы можете щелкнуть по значку адресной книги, чтобы найти кого-то, если вы не помните имя.",paragraph2:"Введите свое сообщение, нажмите кнопку Отправить"},slide7:{paragraph1:"Вы можете отправлять сообщения одному человеку или группе людей. По умолчанию все группы сообщений доступны для всех в группе.",paragraph2:'Если вы хотели отправить личное сообщение всем получателям, снимите флажок "Это групповая беседа".'},slide8:{paragraph1:"Вы можете выбрать одно или несколько сообщений, установив флажок на правой стороне.",paragraph2:"Выбрав, вы можете передать их кому-то другому, или удалить их."},slide9:{paragraph1:"Мы полагаем, что Беседы покажутся вам простыми и легкими в использовании.",paragraph2:"Посмотрите это короткое видео введение, чтобы увидеть Беседы в действии.",paragraph3:"Ваши старые сообщения были организованы в Беседы для вас. Так чего же вы ждете? Давайте начнем!"},titles:{slide1:"Слайд 1",slide2:"Слайд 2",slide3:"Слайд 3",slide4:"Слайд 4",slide5:"Слайд 5",slide6:"Слайд 6",slide7:"Слайд 7",slide8:"Слайд 8",slide9:"Слайд 9"}}},zh:{conversations_intro:{slide1:{paragraph1:"请查看收件箱!",paragraph2:"会话 - Canvas 的新消息系统 - 已经发布!",paragraph3:"使用会话向一名同学发送私人信息，或者使用会话与小组中的所有人交谈。",paragraph4:"准备好要做个简短的介绍了? 那就单击向右箭头开始吧。"},slide2:{paragraph1:"您的所有会话会在左侧显示",paragraph2:"您可以看到谁正在和您交流，一共有多少条消息，以及各会话中最新消息的部分内容。"},slide3:{paragraph1:"可以使用消息中的 “动作” 按钮将会话标记为已读、未读、已加星号标记或已归档。",paragraph2:"已保存的消息不能被删除，这些消息仅仅是从收件箱中移除，如果以后有需要，任然可以重新获取。"},slide4:{paragraph1:"当您选择一个会话的时候，会话的所有消息都在右侧的面板中显示。当会话内容过多的时候，您可以滚动鼠标查看早前的内容。"},slide5:{paragraph1:"要发送消息，先点击 “编写” 图标。"},slide6:{paragraph1:"在新消息收件箱中，输入人名，或者小组名称，他们会在下拉列表中显示。另外您也可以单击地址簿图标来寻找忘记姓名的人。",paragraph2:"输入消息，点击发送。搞定!"},slide7:{paragraph1:"您既可以向一个人发送消息，也可向一小组的人群发消息。默认情况下，小组中的每一个人都会接收到群发的消息。",paragraph2:'如果您想要将消息私密地发给所有接收者，请取消选中 "这是一个小组会话"复选框。'},slide8:{paragraph1:"您能够通过点击右侧的复选框来选择一条或多条消息。",paragraph2:"一旦选中，您可以将其转发给其他人，或者将其直接删除。"},slide9:{paragraph1:"我们觉得，您会发现会话功能简单易用。",paragraph2:"请先查看会话使用方式的简短视频介绍",paragraph3:"您的旧消息已被组织为会话。那您还在等什么呢? 开始吧!"},titles:{slide1:"第 1 页",slide2:"第 2 页",slide3:"第 3 页",slide4:"第 4 页",slide5:"第 5 页",slide6:"第 6 页",slide7:"第 7 页",slide8:"第 8 页",slide9:"第 9 页"}}}}})}),define("translations/slideshow",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{slideshow:{titles:{back:"عودة",close:"إغلاق",forward:"إعادة توجيه"}}},es:{slideshow:{titles:{back:"Volver",close:"Cerrar",forward:"Enviar Copia"}}},fr:{slideshow:{titles:{back:"Précédent",close:"Fermer",forward:"Transférer"}}},ja:{slideshow:{titles:{back:"戻る",close:"閉じる",forward:"早送り"}}},ko:{slideshow:{titles:{back:"뒤로",close:"닫기",forward:"앞으로"}}},nl:{slideshow:{titles:{back:"Terug",close:"Sluiten",forward:"Doorsturen"}}},pt:{slideshow:{titles:{back:"Voltar",close:"Fechar",forward:"Encaminhar"}}},ru:{slideshow:{titles:{back:"Назад",close:"Закрыть",forward:"Переслать"}}},zh:{slideshow:{titles:{back:"返回",close:"关闭",forward:"转发"}}}}})}),define("translations/conversations.conversations_pane",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{conversations:{conversations_pane:{confirm:{delete_conversation:"هل تريد بالتأكيد حذف نسختك من هذه المحادثة؟ لن يمكن التراجع عن هذا الإجراء."}}}},es:{conversations:{conversations_pane:{confirm:{delete_conversation:"¿Está seguro que quiere borrar su copia de esta conversación? Esta acción no puede deshacerse."}}}},fr:{conversations:{conversations_pane:{confirm:{delete_conversation:"Voulez-vous vraiment supprimer le contenu de cette conversation ? Cette action est irréversible."}}}},ja:{conversations:{conversations_pane:{confirm:{delete_conversation:"この会話のコピーを削除してもよろしいですか? この操作は取り消しできません。"}}}},ko:{conversations:{conversations_pane:{confirm:{delete_conversation:"이 대화의 사본을 삭제하시겠습니까? 이 작업은 실행을 취소할 수 없습니다."}}}},nl:{conversations:{conversations_pane:{confirm:{delete_conversation:"Weet je zeker dat je jouw kopie van de conversatie wil verwijderen? Deze actie is kan niet ongedaan worden gemaakt."}}}},pt:{conversations:{conversations_pane:{confirm:{delete_conversation:"Tem a certeza de que pretende eliminar a sua cópia desta conversa? Esta ação não pode ser anulada."}}}},ru:{conversations:{conversations_pane:{confirm:{delete_conversation:"Вы уверены, что хотите удалить свою копию этого разговора? Это действие не может быть отменено."}}}},zh:{conversations:{conversations_pane:{confirm:{delete_conversation:"是否确定要删除您拥有的此会话的副本? 此操作将不可恢复。"}}}}}})}),define("translations/conversations.conversations_list",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{conversations:{conversations_list:{no_archived_messages:"ليست لديك رسائل مؤرشفة",no_messages:"ليست لديك رسائل",no_sent_messages:"ليست لديك رسائل مرسلة",no_starred_messages:"ليست لديك رسائل تم وضع نجمة عليها",no_unread_messages:"ليست لديك رسائل غير مقروءة"}}},es:{conversations:{conversations_list:{no_archived_messages:"No ha archivado ningún mensaje",no_messages:"No tiene mensajes",no_sent_messages:"No tiene mensajes enviados",no_starred_messages:"No tiene mensajes destacados",no_unread_messages:"No tiene mensajes no leídos"}}},fr:{conversations:{conversations_list:{no_archived_messages:"Aucun message archivé",no_messages:"Aucun message",no_sent_messages:"Aucun message envoyé",no_starred_messages:"Aucun message marqué d’un astérisque",no_unread_messages:"Aucun message non lu"}}},ja:{conversations:{conversations_list:{no_archived_messages:"アーカイブされているメッセージはありません",no_messages:"メッセージはありません",no_sent_messages:"送信済みのメッセージはありません",no_starred_messages:"スターの付いたメッセージはありません",no_unread_messages:"未読のメッセージはありません"}}},ko:{conversations:{conversations_list:{no_archived_messages:"보관된 메시지가 없음",no_messages:"메시지가 없음",no_sent_messages:"보낸 메시지가 없음",no_starred_messages:"별표 표시된 메시지가 없음",no_unread_messages:"읽지 않은 메시지가 없음"}}},nl:{conversations:{conversations_list:{no_archived_messages:"Er zijn geen gearchiveerde berichten",no_messages:"Er zijn geen berichten",no_sent_messages:"Er zijn geen verzonden berichten",no_starred_messages:"Er zijn geen berichten met een ster",no_unread_messages:"Er zijn geen ongelezen berichten"}}},pt:{conversations:{conversations_list:{no_archived_messages:"Não tem mensagens arquivadas",no_messages:"Não tem mensagens",no_sent_messages:"Não tem mensagens enviadas",no_starred_messages:"Não tem mensagens marcadas",no_unread_messages:"Não tem mensagens não lidas"}}},ru:{conversations:{conversations_list:{no_archived_messages:"У вас отсутствуют архивированные сообщения",no_messages:"У вас отсутствуют сообщения",no_sent_messages:"У вас нет отправленных сообщений",no_starred_messages:"У вас нет помеченных сообщений",no_unread_messages:"У вас нет непрочитанных сообщений"}}},zh:{conversations:{conversations_list:{no_archived_messages:"您没有已保存的字条",no_messages:"您目前没有收到任何消息",no_sent_messages:"您没有已发送的字条",no_starred_messages:"您没有标记过的字条",no_unread_messages:"您暂时没有未读字条"}}}}})}),function(){define("compiled/jquery/scrollIntoView",["jquery"],function(a){return a.fn.scrollIntoView=function(b){var c,d,e,f,g,h;b==null&&(b={}),c=b.container||this.offsetParent(),e=c.scrollTop(),d=e+c.height(),g=this[0].offsetTop,f=g+a(this[0]).outerHeight();if((h=b.ignore)!=null?h.border:void 0)g+=parseInt(a(this[0]).css("border-top-width").replace("px","")),f-=parseInt(a(this[0]).css("border-bottom-width").replace("px",""));if(g<e||b.toTop)return c.scrollTop(g);if(f>d)return c.scrollTop(f-c.height())}})}.call(this),define("translations/conversations.conversation_item",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{conversations:{conversation_item:{has_attachments:"تشتمل هذه المحادثة على مرفق واحد أو مرفقات",has_media:"تشتمل هذه المحادثة على واحد أو أكثر من تعليقات الوسائط",inbox_actions:{action_star:"وضع نجمة",action_unstar:"إلغاء النجمة",archive:"أرشيف","delete":"حذف",mark_as_read:"وضع علامة كمقروء",mark_as_unread:"وضع علامة كغير مقروء",subscribe:"اشتراك",unarchive:"إلغاء الأرشفة",unstar:"نجمة",unsubscribe:"إلغاء الاشتراك"},inbox_actions_description:"قائمة إجراءات الرسالة",read_more:"المزيد..."}}},es:{conversations:{conversation_item:{has_attachments:"Esta conversación tiene uno o más elementos adjuntos",has_media:"Esta conversación tiene uno o más comentarios de contenido audiovisual.",inbox_actions:{action_star:"Destacar",action_unstar:"No destacar",archive:"Archivo","delete":"Borrar",mark_as_read:"Marcar como Leído",mark_as_unread:"Marcar como No Leído",subscribe:"Suscribirse",unarchive:"No archivar",unstar:"Destacar",unsubscribe:"Cancelar la suscripción"},inbox_actions_description:"Menú de acciones del mensaje",read_more:"más..."}}},fr:{conversations:{conversation_item:{has_attachments:"Cette conversation comporte une ou plusieurs pièces jointes.",has_media:"Cette conversation comporte un ou plusieurs commentaires multimédias.",inbox_actions:{action_star:"Marquer d’un astérisque",action_unstar:"Supprimer l’astérisque",archive:"Archiver","delete":"Supprimer",mark_as_read:"Marquer comme lu",mark_as_unread:"Marquer comme non lu",subscribe:"S’inscrire",unarchive:"Désarchiver",unstar:"Marquer d’un astérisque",unsubscribe:"Se désinscrire"},inbox_actions_description:"Menu d’actions relatives aux messages",read_more:"plus..."}}},ja:{conversations:{conversation_item:{has_attachments:"この会話には 1 個以上の添付ファイルがあります",has_media:"この会話には 1 個以上のメディア コメントがあります",inbox_actions:{action_star:"スター",action_unstar:"スター取り消し",archive:"アーカイブ","delete":"削除",mark_as_read:"既読にする",mark_as_unread:"未読にする",subscribe:"購読",unarchive:"アーカイブ解凍",unstar:"スター",unsubscribe:"購読中止"},inbox_actions_description:"メッセージ操作メニュー",read_more:"もっと読む..."}}},ko:{conversations:{conversation_item:{has_attachments:"이 대화에 하나 이상의 첨부가 있음",has_media:"이 대화에 하나 이상의 미디어 설명이 있음",inbox_actions:{action_star:"별표 표시",action_unstar:"별표 해제",archive:"보관","delete":"삭제",mark_as_read:"읽음으로 표시",mark_as_unread:"읽지 않음으로 표시",subscribe:"구독",unarchive:"보관 해제",unstar:"별표 표시",unsubscribe:"구독 해제"},inbox_actions_description:"메시지 동작 메뉴",read_more:"더 보기..."}}},nl:{conversations:{conversation_item:{has_attachments:"Deze conversatie heeft een of meerdere bijlagen",has_media:"Deze conversatie heeft een of meerdere mediareacties",inbox_actions:{action_star:"Ster",action_unstar:"Geen ster",archive:"Archief","delete":"Verwijder",mark_as_read:"Markeer als gelezen",mark_as_unread:"Markeer als ongelezen",subscribe:"Aanmelden",unarchive:"Archiveren ongedaan maken",unstar:"Ster",unsubscribe:"Uitschrijven"},inbox_actions_description:"Berichtenacties",read_more:"meer..."}}},pt:{conversations:{conversation_item:{has_attachments:"Esta conversa tem um ou mais anexos",has_media:"Esta conversa tem um ou mais comentários multimédia",inbox_actions:{action_star:"Marcar",action_unstar:"Desmarcar",archive:"Arquivar","delete":"Eliminar",mark_as_read:"Marcar como lido",mark_as_unread:"Marcar como não lido",subscribe:"Subscrever",unarchive:"Desarquivar",unstar:"Marcar",unsubscribe:"Cancelar subscrição"},inbox_actions_description:"Menu de ações de mensagem",read_more:"mais..."}}},ru:{conversations:{conversation_item:{has_attachments:"Данный разговор содержит одно или более вложенных файлов",has_media:"Данный разговор содержит один или более медиа комментариев",inbox_actions:{action_star:"Отметить звездочкой ",action_unstar:"Снять метку",archive:"Архив","delete":"Удалить",mark_as_read:"Отметить как прочитанное",mark_as_unread:"Отметить как непрочитанное",subscribe:"Подписаться",unarchive:"Разархивировать",unstar:"Отметить звездочкой ",unsubscribe:"Отменить подписку"},inbox_actions_description:"Меню «Действия над сообщениями»",read_more:"дополнительно..."}}},zh:{conversations:{conversation_item:{has_attachments:"这个会话有一个或多个附件",has_media:"这个会话有一条或多条媒体评论",inbox_actions:{action_star:"标记",action_unstar:"取消标记",archive:"存档","delete":"删除",mark_as_read:"标记为已读",mark_as_unread:"标记为未读",subscribe:"订阅",unarchive:"取消存档",unstar:"标记",unsubscribe:"取消订阅"},inbox_actions_description:"消息操作菜单",read_more:"更多..."}}}}})}),function(){var a=[].slice;define("compiled/util/shortcut",[],function(){return function(){var b,c,d,e,f,g,h;b=arguments[0],e=arguments[1],d=3<=arguments.length?a.call(arguments,2):[],h=[];for(f=0,g=d.length;f<g;f++)c=d[f],h.push(function(a){return b.prototype[a]=function(){return this[e][a].apply(this[e],arguments)}}(c));return h}})}.call(this),define("translations/conversations.message_form",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{conversations:{message_form:{buttons:{send_message:"إرسال"},headings:{new_message:"رسالة جديدة"},inbox_actions:{add_people:"إضافة أشخاص"},labels:{add_to_faculty_journal:"إضافة إدخال دفتر الكلية",group_conversation:"هذه محادثة مجموعة. سيشاهد المشاركون ردود كل الأشخاص",message:"الرسالة:",to:"إلى:"},links:{add_attachment:"إرفاق",media_comment:"تسجيل"},media_comment:"تعليق الوسائط",titles:{add_attachment:"إضافة مرفق",media_comment:"تعليق وسائط تم تسجيله",record_media_comment:"تسجيل تعليق صوتي أو فيديو",remove_media_comment:"إزالة تعليق الوسائط"}}}},es:{conversations:{message_form:{buttons:{send_message:"Enviar"},headings:{new_message:"Mensaje nuevo"},inbox_actions:{add_people:"Agregar personas"},labels:{add_to_faculty_journal:"Agregar con una entrada a la revista de los profesores",group_conversation:"Esta es una conversación de grupo. Los participantes verán todos los mensajes",message:"Mensaje:",to:"Para:"},links:{add_attachment:"Adjuntar",media_comment:"Grabar"},media_comment:"Comentario de Media",titles:{add_attachment:"Adjuntar un archivo",media_comment:"Comentario grabado de contenido audiovisual",record_media_comment:"Grabar un comentario de audio o vídeo",remove_media_comment:"Eliminar comentario de contenido audiovisual"}}}},fr:{conversations:{message_form:{buttons:{send_message:"Envoyer"},headings:{new_message:"Nouveau message"},inbox_actions:{add_people:"Ajouter des personnes"},labels:{add_to_faculty_journal:"Ajouter comme entrée du journal des enseignants",group_conversation:"Ceci est une conversation de groupe. Les participants verront les réponses de tout le monde",message:"Message :",to:"À :"},links:{add_attachment:"Joindre",media_comment:"Enregistrer"},media_comment:"Commentaire multimédia",titles:{add_attachment:"Ajouter une pièce jointe",media_comment:"Commentaire multimédia enregistré",record_media_comment:"Enregistrer un commentaire audio ou vidéo",remove_media_comment:"Supprimer le commentaire multimédia"}}}},ja:{conversations:{message_form:{buttons:{send_message:"送信"},headings:{new_message:"新しいメッセージ"},inbox_actions:{add_people:"メンバーの追加"},labels:{add_to_faculty_journal:"講師日誌へのエントリとして追加",group_conversation:"これはグループ会話です。参加者には全員の返信内容が表示されます",message:"メッセージ:",to:"至:"},links:{add_attachment:"添付",media_comment:"記録"},media_comment:"メディア コメント",titles:{add_attachment:"添付ファイルの追加",media_comment:"記録されたメディア コメント",record_media_comment:"オーディオまたはビデオ コメントを記録する",remove_media_comment:"メディア コメントを削除する"}}}},ko:{conversations:{message_form:{buttons:{send_message:"보내기"},headings:{new_message:"새 메시지"},inbox_actions:{add_people:"사람 추가"},labels:{add_to_faculty_journal:"교원 일지 항목으로 추가",group_conversation:"이는 그룹 대화입니다. 참가자는 모든 사람의 답장을 볼 수 있습니다.",message:"메시지:",to:"받는 사람:"},links:{add_attachment:"첨부",media_comment:"녹음/녹화"},media_comment:"미디어 설명",titles:{add_attachment:"첨부 추가",media_comment:"녹음/녹화된 미디어 설명",record_media_comment:"오디오나 비디오 의견을 녹음/녹화",remove_media_comment:"미디어 설명 제거"}}}},nl:{conversations:{message_form:{buttons:{send_message:"Versturen"},headings:{new_message:"Nieuw bericht"},inbox_actions:{add_people:"Voeg personen toe"},labels:{add_to_faculty_journal:"Voeg toe als een afdelingsnieuwsbericht",group_conversation:"Dit is een groepsgespek. Deelnemers zullen alle reacties zien.",message:"Bericht:",to:"Aan:"},links:{add_attachment:"Bijlage toevoegen",media_comment:"Opnemen"},media_comment:"Mediareactie",titles:{add_attachment:"Voeg bijlage toe",media_comment:"Ogenomen mediareactie",record_media_comment:"Neem audio- of videoreactie op",remove_media_comment:"Verwijder mediareactie"}}}},pt:{conversations:{message_form:{buttons:{send_message:"Enviar"},headings:{new_message:"Nova mensagem"},inbox_actions:{add_people:"Adicionar pessoas"},labels:{add_to_faculty_journal:"Adicionar como uma entrada do Diário da Faculdade",group_conversation:"Esta é uma conversa em grupo. Os participantes verão as respostas de todos",message:"Mensagem:",to:"Para:"},links:{add_attachment:"Anexar",media_comment:"Gravar"},media_comment:"Conteúdo de mídia",titles:{add_attachment:"Adicionar um anexo",media_comment:"Gravar comentário multimédia",record_media_comment:"Gravar comentário áudio ou vídeo",remove_media_comment:"Remover comentário multimédia"}}}},ru:{conversations:{message_form:{buttons:{send_message:"Отправить"},headings:{new_message:"Новое сообщение"},inbox_actions:{add_people:"Добавить людей"},labels:{add_to_faculty_journal:"Добавить как запись журнала преподавателей",group_conversation:"Этот групповой разговор. Участники будут видеть все ответы",message:"Сообщение:",to:"Кому:"},links:{add_attachment:"Вложить",media_comment:"Запись"},media_comment:"Мультимедийный комментарий",titles:{add_attachment:"Добавить вложение",media_comment:"Записанный мультимедийный комментарий",record_media_comment:"Записать аудио- или видеокомментарий",remove_media_comment:"Удалить мультимедийный комментарий"}}}},zh:{conversations:{message_form:{buttons:{send_message:"发送"},headings:{new_message:"新消息"},inbox_actions:{add_people:"填加人员"},labels:{add_to_faculty_journal:"添加为教师日志条目",group_conversation:"这是组会话。参与者将会看到每个人的回复",message:"消息:",to:"发送至:"},links:{add_attachment:"附加",media_comment:"记录"},media_comment:"媒体评论",titles:{add_attachment:"添加附件",media_comment:"已记录媒体评论",record_media_comment:"记录音频或视频评论",remove_media_comment:"移除媒体评论"}}}}}})}),define("translations/conversations.add_attachment",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{conversations:{add_attachment:{titles:{attachment:"الملف المراد إرفاقه",remove_attachment:"إزالة مرفق"}}}},es:{conversations:{add_attachment:{titles:{attachment:"Archivo para adjuntar",remove_attachment:"Remover el archivo adjunto"}}}},fr:{conversations:{add_attachment:{titles:{attachment:"Fichier à joindre",remove_attachment:"Supprimer les pièces jointes"}}}},ja:{conversations:{add_attachment:{titles:{attachment:"添付するファイル",remove_attachment:"添付ファイルの削除"}}}},ko:{conversations:{add_attachment:{titles:{attachment:"첨부할 파일",remove_attachment:"첨부 제거"}}}},nl:{conversations:{add_attachment:{titles:{attachment:"Bij te voegen bestand",remove_attachment:"Verwijder bijlage"}}}},pt:{conversations:{add_attachment:{titles:{attachment:"Arquivo para anexar",remove_attachment:"Remover anexo"}}}},ru:{conversations:{add_attachment:{titles:{attachment:"Файл для вложения",remove_attachment:"Удалить вложение"}}}},zh:{conversations:{add_attachment:{titles:{attachment:"要附加的文件",remove_attachment:"删除附件"}}}}}})}),define("translations/conversations.message_progress_bar_text",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{conversations:{message_progress_bar_text:{done_sending_message:"المُرسل *%{message_preview}* إلى *%{num_people}*",error_sending_message:"خطأ في إرسال الرسالة:",sending_message:"إرسال *%{message_preview}* إلى *%{num_people}*"}}},es:{conversations:{message_progress_bar_text:{done_sending_message:"Enviado *%{message_preview}* a *%{num_people}*",error_sending_message:"Error al enviar el mensaje:",sending_message:"Enviando *%{message_preview}* a *%{num_people}*"}}},fr:{conversations:{message_progress_bar_text:{done_sending_message:"Envoyé *%{message_preview}* à *%{num_people}*",error_sending_message:"Erreur lors de l’envoi du message :",sending_message:"Envoi de *%{message_preview}* à *%{num_people}*"}}},ja:{conversations:{message_progress_bar_text:{done_sending_message:"*%{message_preview}* を *%{num_people}* 人に送信しました",error_sending_message:"メッセージを送信する際にエラーが発生しました:",sending_message:"*%{message_preview}* を *%{num_people}* 人に送信しています"}}},ko:{conversations:{message_progress_bar_text:{done_sending_message:"*%{message_preview}*를 *%{num_people}*명에게 보냄",error_sending_message:"메시지 보내기 오류:",sending_message:"*%{message_preview}*를 *%{num_people}*명에게 보내는 중"}}},nl:{conversations:{message_progress_bar_text:{done_sending_message:"*%{message_preview}* verstuurd naar *%{num_people}*",error_sending_message:"Fout tijdens versturen bericht:",sending_message:"Bezig met versturen van *%{message_preview}* naar *%{num_people}*"}}},pt:{conversations:{message_progress_bar_text:{done_sending_message:"Enviou *%{message_preview}* para *%{num_people}*",error_sending_message:"Erro ao enviar a mensagem:",sending_message:"A enviar *%{message_preview}* para *%{num_people}*"}}},ru:{conversations:{message_progress_bar_text:{done_sending_message:"Отправить *%{message_preview}* *%{num_people}*",error_sending_message:"Ошибка при отправке сообщения:",sending_message:"Отправка *%{message_preview}* *%{num_people}*"}}},zh:{conversations:{message_progress_bar_text:{done_sending_message:"已将 *%{message_preview}* 发送至 *%{num_people}*",error_sending_message:"发送消息时出现错误:",sending_message:"正在发送 *%{message_preview}* 至 *%{num_people}*"}}}}})}),define("translations/recipient_input",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{recipient_input:{context_search_placeholder:"أدخل اسمًا أو المساق أو المجموعة",groups_count:{one:"مجموعة واحدة",other:"%{count} من المجموعات"},no_results:"لم يتم العثور على نتائج",people_count:{one:"شخص واحد",other:"%{count} من الأشخاص"},sections_count:{one:"قسم واحد",other:"%{count} من الأقسام"}}},es:{recipient_input:{context_search_placeholder:"Introduzca un nombre, curso o grupo",groups_count:{one:"1 grupo",other:"%{count} grupos"},no_results:"No se encontraron resultados",people_count:{one:"1 persona",other:"%{count} personas"},sections_count:{one:"1 sección",other:"%{count} secciones"}}},fr:{recipient_input:{context_search_placeholder:"Saisissez un nom, un cours ou un groupe",groups_count:{one:"1 groupe",other:"%{count} groupes"},no_results:"Aucun résultat trouvé",people_count:{one:"1 personne",other:"%{count} personnes"},sections_count:{one:"1 section",other:"%{count} sections"}}},ja:{recipient_input:{context_search_placeholder:"名前、コース、またはグループを入力してください",groups_count:{one:"%{count} 件のグループ",other:"%{count} 件のグループ"},no_results:"結果が見つかりません",people_count:{one:"%{count} 人のユーザ",other:"%{count} 人のユーザ"},sections_count:{one:"%{count} 件のセクション",other:"%{count} 件のセクション"}}},ko:{recipient_input:{context_search_placeholder:"이름, 과목, 그룹을 입력",groups_count:{one:"그룹 %{count}개",other:"그룹 %{count}개"},no_results:"결과가 없음",people_count:{one:"%{count}명",other:"%{count}명"},sections_count:{one:"섹션 %{count}개",other:"섹션 %{count}개"}}},nl:{recipient_input:{context_search_placeholder:"Voer naam, vak of groep in",groups_count:{one:"1 groep",other:"%{count} groepen"},no_results:"Geen resultaten gevonden",people_count:{one:"%{count} personen",other:"%{count} personen"},sections_count:{one:"1 sectie",other:"%{count} secties"}}},pt:{recipient_input:{context_search_placeholder:"Introduzir um nome, disciplina ou grupo",groups_count:{one:"1 grupo",other:"%{count} grupos"},no_results:"Sem resultados",people_count:{one:"1 pessoa",other:"%{count} pessoas"},sections_count:{one:"1 secção",other:"%{count} secções"}}},ru:{recipient_input:{context_search_placeholder:"Введите имя, курс или группу",groups_count:{one:"1 группа",other:"%{count} групп(ы)"},no_results:"Результаты не найдены",people_count:{one:"1 человек",other:" %{count} человек(а)"},sections_count:{one:"1 секция",other:" %{count} секции(й)"}}},zh:{recipient_input:{context_search_placeholder:"输入名称、课程或组",groups_count:{one:"%{count} 个组",other:"%{count} 个组"},no_results:"未找到结果",people_count:{one:"%{count} 个人",other:"%{count} 个人"},sections_count:{one:"%{count} 节",other:"%{count} 节"}}}}})}),function(){define("compiled/util/registerTemplateCss",[],function(){var a,b,c,d,e,f;return b=window.document,e={},c=function(a,b){return e[a]=b,d()},c.clear=function(){return e={},d()},d=function(){var c,d,f,g,h;f=[];for(h in e)d=e[h],f.push("/* From: "+h+" */"),f.push(d);return c=f.join("\n"),g=a(),"cssText"in g?g.cssText=c:g.appendChild(b.createTextNode(c))},f=null,a=function(){var a,c;if(f){while(a=f.firstChild)f.removeChild(a);return f}return b.createStyleSheet?f=b.createStyleSheet():(c=b.head||b.getElementsByTagName("head")[0],f=b.createElement("style"),c.appendChild(f))},c})}.call(this),define("translations/paginated_view",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{paginated_view:{loading_more_results:"تحميل مزيد من النتائج"}},es:{paginated_view:{loading_more_results:"Cargando más resultados"}},fr:{paginated_view:{loading_more_results:"Chargement de résultats supplémentaires"}},ja:{paginated_view:{loading_more_results:"より多くの結果を読み込んでいます"}},ko:{paginated_view:{loading_more_results:"더 많은 결과 로드"}},nl:{paginated_view:{loading_more_results:"Meer resultaten aan het laden"}},pt:{paginated_view:{loading_more_results:"Carregando mais resultados"}},ru:{paginated_view:{loading_more_results:"Загрузка других результатов"}},zh:{paginated_view:{loading_more_results:"正在加载其他结果"}}}})}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},e=[].slice;define("compiled/collections/PaginatedCollection",["Backbone","underscore"],function(b,f){var g,h,i;return h=function(a){return a==null&&(a=""),a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},g=function(b){function g(){return this._setStateAfterFetch=a(this._setStateAfterFetch,this),i=g.__super__.constructor.apply(this,arguments),i}return c(g,b),g.prototype.nameRegex=/rel="([a-z]+)/,g.prototype.linkRegex=/^<([^>]+)/,g.prototype.pageRegex=/\Wpage=(\d+)/,g.prototype.perPageRegex=/\per_page=(\d+)/,g.prototype.parse=function(a,b){var c,e,f;return(c=this._urlCache)==null&&(this._urlCache=[]),(e=this._lastFetchOptions)==null&&(this._lastFetchOptions={}),this._setStateAfterFetch(b,this._lastFetchOptions),(f=this._lastFetchOptions.url,d.call(this._urlCache,f)<0)&&this._urlCache.push(this._lastFetchOptions.url),delete this._lastFetchOptions,g.__super__.parse.apply(this,arguments)},g.prototype.fetch=function(a){var b,c=this;return a==null&&(a={}),b="fetching"+h(a.page)+"Page",this[b]=!0,a.page!=null&&(this.urls!=null&&(a.url=this.urls[a.page]),a.add==null&&(a.add=!0),a.data=""),this._lastFetchOptions=a,this.trigger("beforeFetch",this,a),a.page!=null&&this.trigger("beforeFetch:"+a.page,this,a),g.__super__.fetch.call(this,a).done(function(d,f,g){var h;c[b]=!1,c.trigger("fetch",c,d,a),a.page!=null&&c.trigger("fetch:"+a.page,c,d,a);if((h=c.urls)!=null?!h.next:!void 0)return c.trigger.apply(c,["fetched:last"].concat(e.call(arguments)))})},g.prototype.canFetch=function(a){return this.urls!=null&&this.urls[a]!=null},g.prototype._setStateAfterFetch=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p;return b==null&&(b={}),j=(l=b.url,d.call(this._urlCache,l)<0),c=this.urls==null,g=c||((m=b.page)==="next"||m==="bottom")&&j,h=c||((n=b.page)==="prev"||n==="top")&&j,e=this.urls,this.urls=this._parsePageLinks(a),g&&this.urls.next!=null?this.urls.bottom=this.urls.next:this.urls.next?this.urls.bottom=e.bottom:delete this.urls.bottom,h&&this.urls.prev!=null?this.urls.top=this.urls.prev:this.urls.prev?this.urls.top=e.top:delete this.urls.top,i=(o=this.urls.first)!=null?o:this.urls.next,i!=null&&(f=parseInt(i.match(this.perPageRegex)[1],10),((p=(k=this.options).params)!=null?p:k.params={}).per_page=f),this.urls.last&&(this.totalPages=parseInt(this.urls.last.match(this.pageRegex)[1],10)),this.atLeastOnePageFetched=!0},g.prototype._parsePageLinks=function(a){var b,c,d=this;return b=(c=a.getResponseHeader("link"))!=null?c.split(","):void 0,b==null&&(b=[]),f.reduce(b,function(a,b){var c,e;return c=b.match(d.nameRegex)[1],e=b.match(d.linkRegex)[1],a[c]=e,a},{})},g}(b.Collection)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/RecipientModel",["Backbone"],function(a){var c,d;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.resourceName="recipient",c}(a.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/collections/RecipientCollection",["compiled/collections/PaginatedCollection","compiled/models/RecipientModel"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments),e}return b(d,a),d.prototype.model=c,d.prototype.fetch=function(){return this.deferred=d.__super__.fetch.apply(this,arguments)},d}(a)})}.call(this),function(){var a=[].slice;define("compiled/util/ScrollableListDataSource",["jquery","jquery.ajaxJSON"],function(b){return function(){function c(a,b){var c,d,e,f,g,h,i,j,k;this.list=a,this.pageOffset=(c=b.pageOffset)!=null?c:1,this.perPage=(d=b.perPage)!=null?d:25,this.pageKey=(e=b.pageKey)!=null?e:"page",this.perPageKey=(f=b.perPageKey)!=null?f:"per_page",this.itemIdsKey=(g=b.itemIdsKey)!=null?g:"item_ids",this.itemsKey=(h=b.itemsKey)!=null?h:"items",this.sortKey=(i=b.sortKey)!=null?i:"id",this.sortDir=(j=b.sortDir)!=null?j:"asc",this.params=(k=b.params)!=null?k:{},this.baseUrl=b.baseUrl,this.model=b.model}return c.prototype.load=function(a,b){return this.initialized=!0,a.sortKey!=null&&(this.sortKey=a.sortKey),a.params!=null&&(this.params=a.params),this.itemIds=null,this.items=[],this.pages=[],this.resetRequests(),this.fetchPage(0,b)},c.prototype.addItem=function(a){return this._addItem(this.modelize(a)),this.recompute()},c.prototype.updateItems=function(a){var b,c,d,e;a=this.modelize(a),b=a.length<=1;for(d=0,e=a.length;d<e;d++)c=a[d],!c.get("visible")&&!c.get("defer_visibility_check")?this._removeItem(c,b):this.itemMap[c.id]!=null?this._updateItem(c,b):this._addItem(c,b);return this.recompute(!b)},c.prototype.removeItem=function(a){return this._removeItem(this.modelize(a)),this.recompute()},c.prototype.modelize=function(a){var b,c,d,e,f,g=this;c=function(a){return a=new g.model(a),a.list=g.list,a};if(a.length!=null){f=[];for(d=0,e=a.length;d<e;d++)b=a[d],f.push(c(b));return f}return c(a)},c.prototype.positionOrReload=function(a,b){var c,d;return c=this.positionFor(a,b),c!=null&&!this.deferredPositionChecks?c:((d=this.deferredPositionChecks)==null&&(this.deferredPositionChecks=[]),this.deferredPositionChecks.push(a.id),null)},c.prototype.positionFor=function(a,b){var c,d,e,f,g,h,i,j=this;c=this.sortDir==="asc"?function(a,b){return a.get(j.sortKey)<b.get(j.sortKey)}:function(a,b){return a.get(j.sortKey)>b.get(j.sortKey)};for(d=f=0,g=this.items.length-1;0<=g?f<g:f>g;d=0<=g?++f:--f)if(this.items[d]){e=b===d&&a.id===this.items[d].id&&a.get(this.sortKey)===this.items[d].get(this.sortKey);if(e||c(a,this.items[d]))return d>1&&!this.items[d-1]?null:d}if(this.items.length===((h=this.itemIds)!=null?h.length:void 0)||((i=this.itemIds)!=null?i.length:void 0)===0)return this.itemIds.length},c.prototype.refreshList=function(){var a,b,c,d,e;e=[];for(b=c=0,d=this.pages.length;0<=d?c<d:c>d;b=0<=d?++c:--c){if(this.pages[b]!=="loaded")continue;a=b*this.perPage,e.push(this.list.replaceItems(a,this.items.slice(a,Math.min(a+this.perPage,this.itemIds.length)),this.itemIds.length))}return e},c.prototype.fetchRange=function(a,b){var c,d,e,f;b==null&&(b=a);if(!this.itemIds)return[];e=Math.floor(a/this.perPage),c=Math.floor(b/this.perPage),c=Math.min(c,Math.floor(this.itemIds.length/this.perPage));for(d=f=e;e<=c?f<=c:f>=c;d=e<=c?++f:--f)this.pages[d]||this.fetchPage(d);return this.requests},c.prototype.fetchPage=function(a,c){var d,e,f=this;return d=b.extend({},this.params),d[this.perPageKey]=this.perPage,d[this.pageKey]=a+this.pageOffset,this.pages[a]="loading",(e=this.requests[a])!=null&&e.abort(),this.requests[a]=b.ajaxJSON(this.baseUrl,"GET",d,function(b){var d,e;return delete f.requests[a],e=f.modelize(b[f.itemsKey]),d=b[f.itemIdsKey],f.fetchedPage(a,d,e),typeof c=="function"?c(d.length):void 0})},c.prototype.fetchedPage=function(b,c,d){var e,f,g,h,i,j;return f=b*this.perPage,e=d.length,c.length<(b+1)*this.perPage&&(e=((h=[])!=null?h:this.itemIds).length-f),this.setItemIds(c,b),(i=(g=this.items)[f])==null&&(g[f]=null),(j=this.items).splice.apply(j,[f,e].concat(a.call(d))),this.pages[b]="loaded",this.list.replaceItems(f,d,this.itemIds.length)},c.prototype.resetRequests=function(){var a,b,c,d;if(this.requests){d=this.requests;for(b=0,c=d.length;b<c;b++)a=d[b],a!=null&&a.abort()}return this.requests=[]},c.prototype.setItemIds=function(a,b){var c;c=this.itemIds==null;if(!c&&this.itemIds.toString()===a.toString())return;this.itemIds=a,this.resetItemMap();if(!c)return this.refetchPages(b)},c.prototype.resetItemMap=function(){var a,b,c,d;this.itemMap={},d=[];for(a=b=0,c=this.itemIds.length;0<=c?b<c:b>c;a=0<=c?++b:--b)d.push(this.itemMap[this.itemIds[a]]=a);return d},c.prototype.recompute=function(a){var b,c,d,e=this;a==null&&(a=!1);if(this.deferredPositionChecks)return this.fetchPage(0,function(){var b,c,d,f;f=e.deferredPositionChecks;for(c=0,d=f.length;c<d;c++)b=f[c],e.fetchRange(e.itemMap[b]);delete e.deferredPositionChecks;if(a)return e.refreshList()});for(b=c=0,d=this.pages.length;0<=d?c<d:c>d;b=0<=d?++c:--c)this.pages[b]==="loaded"&&this.checkPage(b);if(a)return this.refreshList()},c.prototype.refetchPages=function(a){var b,c,d,e,f;f=[];for(b=c=0,d=this.pages.length;0<=d?c<d:c>d;b=0<=d?++c:--c)this.pages[b]==="loaded"&&b!==a&&(b*this.perPage<this.itemIds.length?f.push(this.fetchPage(b)):((e=this.requests[b])!=null&&e.abort(),f.push(delete this.pages[b])));return f},c.prototype.checkPage=function(a){var b,c,d,e;c=a*this.perPage;for(b=d=c,e=Math.min(c+this.perPage,this.itemIds.length);c<=e?d<e:d>e;b=c<=e?++d:--d)if(!this.items[b])return this.fetchPage(a)},c.prototype._addItem=function(a,b,c){var d;b==null&&(b=!0),c==null&&(c=null),d=c!=null?c:this.positionOrReload(a);if(d==null)return;return this.itemIds.splice(d,0,a.id),this.items.splice(d,0,a),b&&this.list.addedItem(a,d),this.resetItemMap()},c.prototype._updateItem=function(a,b,c){var d,e;b==null&&(b=!0),c==null&&(c=null),d=this.itemMap[a.id],e=c!=null?c:this.positionOrReload(a,d),this.items[d]&&(a=this.items[d].set(a.toJSON()));if(e==null)return;return e!==d&&this._moveItem(a,d,e),b&&this.list.updatedItem(a,d,e),this.resetItemMap()},c.prototype._moveItem=function(a,b,c){return c>b&&c--,this._removeItem(a,!1,b),this._addItem(a,!1,c)},c.prototype._removeItem=function(a,b,c){b==null&&(b=!0),c==null&&(c=null),c==null&&(c=this.itemMap[a.id]);if(c==null)return;return this.itemIds.splice(c,1),this.items.length>=c&&this.items.splice(c,1),b&&this.list.removedItem(a,c),this.resetItemMap()},c}()})}.call(this),function(){define("compiled/widget/ScrollableList",["compiled/util/ScrollableListDataSource","compiled/util/shortcut","compiled/jquery/scrollIntoView","jquery.disableWhileLoading"],function(a,b){return function(){function c(b,c){var d,e,f,g=this;this.$scroller=b,c==null&&(c={}),this.$scroller.css("overflow","auto"),this.ds=new a(this,c),this.$scroller.scroll(function(a){return g.scroll(a)}),this.$list=this.$scroller.find("ul").eq(0),this.$list.length||(this.$list=$("<ul>").appendTo(this.$scroller)),this.$list.addClass("scrollable-list"),this.itemTemplate=(d=c.itemTemplate)!=null?d:function(a){return"<li>"+a+"</li>"},this.elementHeight=(e=c.elementHeight)!=null?e:this.inferElementHeight(),this.fetchBuffer=(f=c.fetchBuffer)!=null?f:20,this.firstLoad=!0,c.noAutoLoad||this.load(),this.clicked&&this.$list.delegate(".scrollable-list > li","click",this.clicked)}return b(c,"ds","addItem","updateItems","removeItem"),c.prototype.item=function(a){return this.ds.items[this.positionFor(a)]},c.prototype.$item=function(a){var b;b=this.$itemAt(this.positionFor(a));if(b.length)return b},c.prototype.$itemAt=function(a){return this.$items().eq(a)},c.prototype.$items=function(){return this.$list.find("> li").not(".scrollable-list-item-deleting,.scrollable-list-item-moving")},c.prototype.addedItem=function(a,b){var c;return this.prepareItems(b-1),c=$(this.itemTemplate(a)),b===0?c.prependTo(this.$list):c.insertAfter(this.$itemAt(b-1)),this.setCount(this.ds.itemIds.length),typeof this.added=="function"?this.added(a,c):void 0},c.prototype.updateItem=function(a){return this.updateItems([a])},c.prototype.updatedItem=function(a,b,c){var d,e,f,g=this;return this.prepareItems(Math.max(c-1,b)),this.$itemAt(b).replaceWith(this.itemTemplate(a)),e=this.$items(),d=e.eq(b),b!==c&&(f=d.clone(),d.addClass("scrollable-list-item-moving").animate({opacity:"toggle",height:"toggle"},200,function(){return d.remove()}),c===0?f.prependTo(this.$list):f.insertAfter(e.eq(c-1)),f.animate({opacity:"toggle",height:"toggle"},0).animate({opacity:"toggle",height:"toggle"},200,function(){return f.scrollIntoView()})),typeof this.updated=="function"?this.updated(a,f!=null?f:d):void 0},c.prototype.removedItem=function(a,b){var c,d=this;return c=this.$itemAt(b),c.addClass("scrollable-list-item-deleting").fadeOut("fast",function(){return c.remove(),d.setCount(d.ds.itemIds.length),d.fetchVisible()}),typeof this.removed=="function"?this.removed(a,c):void 0},c.prototype.replaceItems=function(a,b,c){var d,e,f;this.setCount(c),this.prepareItems(a-1),d=this.$items().slice(a,a+b.length),f=[],d.length<b.length&&(f=b.slice(d.length),b=b.slice(0,d.length)),$(function(){var a,c,d;d=[];for(a=0,c=b.length;a<c;a++)e=b[a],d.push(this.itemTemplate(e));return d}.call(this).join("")).insertBefore(d.eq(0)),d.remove();if(f.length)return this.$list.append(function(){var a,b,c;c=[];for(a=0,b=f.length;a<b;a++)e=f[a],c.push(this.itemTemplate(e));return c}.call(this).join(""))},c.prototype.fetchVisible=function(){var a,b;return this.ds.itemIds?(b=Math.floor(this.$scroller.scrollTop()/this.elementHeight),a=Math.floor((this.$scroller.scrollTop()+this.$scroller.height()-1)/this.elementHeight)+this.fetchBuffer,a>=this.numItems&&(a=Math.max(this.numItems,1)-1),b=Math.max(0,b-this.fetchBuffer),this.prepareItems(a),this.ds.fetchRange(b,a)):[]},c.prototype.prepareItems=function(a){var b,c;c=a-this.$items().length;if(c>0)return this.$list.append(function(){var a,d;d=[];for(b=a=0;0<=c?a<=c:a>=c;b=0<=c?++a:--a)d.push("<li class='scrollable-list-item-loading' />");return d}().join(""))},c.prototype.scroll=function(){var a=this;return this.scrollCb&&clearTimeout(this.scrollCb),this.scrollCb=setTimeout(function(){return delete a.scrollCb,a.fetchVisible()},50)},c.prototype.inferElementHeight=function(){var a,b;return a=$(this.itemTemplate({})).appendTo(this.$list),b=a.height(),a.remove(),b},c.prototype.positionFor=function(a){return this.ds.itemMap[a]},c.prototype.loadItem=function(a){var b,c,d=this;return a!=null&&(c=this.positionFor(a))!=null&&(this.prepareItems(c),this.$item(a).scrollIntoView({toTop:this.firstLoad})),b=this.fetchVisible(),b.length||(b=[{}]),$.when.apply($,b).done(function(){var b,e,f;return c!=null&&(f=[d.ds.items[c],d.$item(a)],e=f[0],b=f[1]),typeof d.loaded=="function"?d.loaded(a,e,b):void 0})},c.prototype.load=function(a){var b,c,d,e=this;return a==null&&(a={}),d=a.sortKey&&a.sortKey!==this.ds.sortKey,c=a.params&&JSON.stringify(a.params)!==JSON.stringify(this.ds.params),d||c||!this.ds.initialized||a.force?(this.fetchThrough=0,this.$list.empty(),this.$list.css("min-height","0px"),b=this.ds.load(a,function(b){return e.setCount(b),e.loadItem(a.loadId),typeof a.cb=="function"&&a.cb(),e.firstLoad=!1}),this.$scroller.disableWhileLoading(b)):(this.loadItem(a.loadId),this.firstLoad=!1)},c.prototype.setCount=function(a){var b;this.numItems=a,this.$list.css("min-height",this.elementHeight*this.numItems+"px"),b=this.$items();if(b.length>this.numItems)return b.slice(this.numItems).remove()},c}()})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/conversations/Conversation",["Backbone","jquery.ajaxJSON","jquery.disableWhileLoading"],function(a){var c,d;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.defaults={audience:[]},c.prototype.inboxAction=function(a){var b,c,d,e,f=this;return c={url:this.url(),method:"POST",success:function(a){return f.list.updateItem(a)}},a=$.extend(!0,{},c,a),a.data=$.extend(this.list.baseData(),(d=a.data)!=null?d:{}),b=$.ajaxJSON(a.url,a.method,a.data,function(b){return typeof a.success=="function"&&a.success(b),f.list.updateItem(b)}),(e=this.list.$item(this.id))!=null?e.disableWhileLoading(b):void 0},c.prototype.url=function(a){return a==null&&(a=""),"/conversations/"+this.id+"/"+a+"?"+$.param(this.list.baseData())},c}(a.Model)})}.call(this),function(){define("compiled/jquery/offsetFrom",["jquery"],function(a){return a.fn.offsetFrom=function(b){var c,d;return d=a(this).offset(),c=b.offset(),{top:d.top-c.top,left:d.left-c.left}}})}.call(this),define("vendor/jquery.elastic",["jquery"],function(a){a.fn.extend({elastic:function(b){var c=a.extend({},b),d=["paddingTop","paddingRight","paddingBottom","paddingLeft","borderLeftWidth","borderLeftStyle","borderRightWidth","borderRightStyle","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function j(a,c){var d=Math.floor(parseInt(a,10));b.height()!=d&&b.css({height:d+"px",overflow:c})}function k(){var d=b.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),i=e.html().replace(/<br>/ig,"<br />");if(d+"&nbsp;"!=i){e[0].innerHTML=d+"&nbsp;",e.width(b.width());var k=e.height();if(Math.abs(k+f-b.height())>3){var l=k+f;l>=h?j(h,"auto"):l<=g?j(g,"hidden"):j(l,"hidden"),a.isFunction(c.callback)&&c.callback()}}}if(this.type!="textarea")return!1;var b=a(this),e=a("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}).prependTo(b.parent()),f=parseInt(b.css("line-height"),10)||parseInt(b.css("font-size"),"10"),g=parseInt(b.css("height"),10)||f*3,h=parseInt(b.css("max-height"),10)||Number.MAX_VALUE,i=0;h<0&&(h=Number.MAX_VALUE),a.each(d,function(a,c){e.css(c,b.css(c))}),b.css({overflow:"hidden"}).bind("keyup change cut paste",k).bind("input paste",function(a){setTimeout(k,250)}),k()})}})}),function(){define("compiled/widget/slideshow",["i18n!slideshow","jquery","str/htmlEscape","jqueryui/dialog","jquery.instructure_misc_helpers"],function(a,b,c){var d,e;return d=function(){function a(a,d){var e,f;this.title=a,this.slideshow=d,this.body=b("<li/>").addClass("slide"),this.slideshow.slides.append(this.body),this.prevSlide=this.slideshow.slideObjects[this.slideshow.slideObjects.length-1],(f=this.prevSlide)!=null&&(f.nextSlide=this),this.nextSlide=null,this.indicator=b("<a/>").addClass("slide").attr("href","#").attr("title",c(this.title)).html("&nbsp;"),this.indicator.data("slide",this),this.slideshow.navigation.append(this.indicator),e=this,this.indicator.click(function(){return d.showSlide(e),!1}),this.hide()}return a.prototype.addParagraph=function(a,d){var e;return e=b("<p/>"),d!=null&&e.addClass(d),e.html(c(a)),this.body.append(e)},a.prototype.addImage=function(a,c,d){var e,f;return e=b("<img/>").attr("src",a),c!=null&&e.addClass(c),d?(f=b("<a/>").attr("href",d).attr("target","_blank"),f.append(e),this.body.append(f)):this.body.append(e)},a.prototype.show=function(){return this.body.show(),this.indicator.addClass("current_slide")},a.prototype.hide=function(){return this.indicator.removeClass("current_slide"),this.body.hide()},a}(),e=function(){function e(d){var e;e=this,this.dom=b("<div/>").attr("id",d),this.slides=b("<ul/>").addClass("slides"),this.dom.append(this.slides),this.separator=b("<div/>").addClass("separator"),this.dom.append(this.separator),this.navigation=b("<div/>").addClass("navigation"),this.dom.append(this.navigation),this.backButton=b("<a/>").addClass("back").attr("href","#").attr("title",c(a.t("titles.back","Back"))).html("&nbsp;"),this.navigation.append(this.backButton),this.backButton.click(function(){return e.showPrevSlide(),!1}),this.forwardButton=b("<a/>").addClass("forward").attr("href","#").attr("title",c(a.t("titles.forward","Forward"))).html("&nbsp;"),this.navigation.append(this.forwardButton),this.forwardButton.click(function(){return e.showNextSlide(),!1}),this.closeButton=b("<a/>").addClass("close").attr("href","#").attr("title",c(a.t("titles.close","Close"))).html("&nbsp;"),this.navigation.append(this.closeButton),this.closeButton.click(function(){return e.close(),!1}),this.slideObjects=[],this.slideShown=null}return e.prototype.addSlide=function(a,b){var c;return c=new d(a,this),this.slideObjects.push(c),b(c)},e.prototype.start=function(){return this.showSlide(this.slideObjects[0]),this.dialog=this.dom.dialog({dialogClass:"slideshow_dialog",height:529,width:700,modal:!0,draggable:!1,resizable:!1})},e.prototype.showSlide=function(a){var b;if(a){if(!this.slideShown||a!==this.slideShown)(b=this.slideShown)!=null&&b.hide(),this.slideShown=a,this.slideShown.show();return this.slideShown.prevSlide?this.backButton.removeClass("inactive"):this.backButton.addClass("inactive"),this.slideShown.nextSlide?this.forwardButton.removeClass("inactive"):this.forwardButton.addClass("inactive")}},e.prototype.showPrevSlide=function(){var a;return this.showSlide((a=this.slideShown)!=null?a.prevSlide:void 0)},e.prototype.showNextSlide=function(){var a;return this.showSlide((a=this.slideShown)!=null?a.nextSlide:void 0)},e.prototype.close=function(){var a;return this.dom.dialog("close"),this.dom.hide(),(a=this.slideShown)!=null&&a.hide(),this.slideShown=null},e}(),e})}.call(this),function(){define("compiled/conversations/introSlideshow",["i18n!conversations_intro","compiled/widget/slideshow","jquery.ajaxJSON"],function(a,b){return function(){var c;return c=new b("conversations_intro"),c.addSlide(a.t("titles.slide1","Slide 1"),function(b){return b.addImage("/images/conversations/intro/icon.png","icon"),b.addParagraph(a.t("slide1.paragraph1","Take a look at your Inbox!"),"large"),b.addParagraph(a.t("slide1.paragraph2","Conversations—the new Canvas messaging system—has arrived!"),"large"),b.addParagraph(a.t("slide1.paragraph3","Use Conversations to send a private message to a classmate or use Conversations to talk to an entire group of people."),"large_and_blue"),b.addParagraph(a.t("slide1.paragraph4","Ready for a short intro? Click the right arrow to get started."),"large")}),c.addSlide(a.t("titles.slide2","Slide 2"),function(b){return b.addImage("/images/conversations/intro/image2.png","screenshot"),b.addParagraph(a.t("slide2.paragraph1","All your conversations are shown on the left side.")),b.addParagraph(a.t("slide2.paragraph2","You can see who the conversation is with, how many messages there are, and a few lines from the newest message in each conversation."))}),c.addSlide(a.t("titles.slide3","Slide 3"),function(b){return b.addImage("/images/conversations/intro/image3.png","screenshot"),b.addParagraph(a.t("slide3.paragraph1",'Conversations can be marked as read/unread, starred, or archived using the "actions" button on the message.')),b.addParagraph(a.t("slide3.paragraph2","Archived messages aren't deleted, they're just moved out of your inbox, so you can access them again if needed."))}),c.addSlide(a.t("titles.slide4","Slide 4"),function(b){return b.addImage("/images/conversations/intro/image4.png","screenshot"),b.addParagraph(a.t("slide4.paragraph1","When you select a conversation, all the messages for that conversation are shown in the panel on the right. When conversations get long, you can always scroll down to see earlier messages."))}),c.addSlide(a.t("titles.slide5","Slide 5"),function(b){return b.addImage("/images/conversations/intro/image5.png","screenshot"),b.addParagraph(a.t("slide5.paragraph1","To begin a message, start by clicking the Compose icon."))}),c.addSlide(a.t("titles.slide6","Slide 6"),function(b){return b.addImage("/images/conversations/intro/image6.png","screenshot"),b.addParagraph(a.t("slide6.paragraph1","In the New Message box, start typing the person, or group's name, and they'll show up in the dropdown. Alternatively, you can click the address book icon to find someone if you don't remember a name.")),b.addParagraph(a.t("slide6.paragraph2","Type your message, click Send, and you're golden."))}),c.addSlide(a.t("titles.slide7","Slide 7"),function(b){return b.addImage("/images/conversations/intro/image7.png","screenshot"),b.addParagraph(a.t("slide7.paragraph1","You can send messages to one person or to a group of people. By default all group messages are available to everyone in the group.")),b.addParagraph(a.t("slide7.paragraph2",'If you wanted to send the message privately to all the recipients, uncheck the "This is a group conversation" checkbox.'))}),c.addSlide(a.t("titles.slide8","Slide 8"),function(b){return b.addImage("/images/conversations/intro/image8.png","screenshot"),b.addParagraph(a.t("slide8.paragraph1","You can select one or more messages by clicking the checkbox on the right hand side.")),b.addParagraph(a.t("slide8.paragraph2","Once selected, you can forward them to someone else, or delete them."))}),c.addSlide(a.t("titles.slide9","Slide 9"),function(b){return b.addImage("/images/conversations/intro/image9.png","screenshot","http://www.youtube.com/watch?v=NWqIaEyVWZM"),b.addParagraph(a.t("slide9.paragraph1","We think you'll find Conversations simple and easy to use.")),b.addParagraph(a.t("slide9.paragraph2","Check out this short introduction video to see Conversations in action.")),b.addParagraph(a.t("slide9.paragraph3","Your old messages have been organized into Conversations for you. So what are you waiting for? Get started!"))}),c.dom.bind("dialogclose",function(){return $.ajaxJSON("/conversations/watched_intro","POST",{})}),c.start()}})}.call(this),define("jst/conversations/conversationItem",["compiled/handlebars_helpers","i18n!conversations.conversation_item"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["conversations/conversationItem"]=b(function(a,b,c,d,e){function r(a,b){var d="",e;return d+='<img src="',k=c.avatar_url,e=k||a.avatar_url,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"avatar_url",{hash:{}})),d+=q(e)+'" class="avatar" />',d}function s(a,b){return' style="display:none"'}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<li data-id="',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'" class="',k=c.classes,g=k||b.classes,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"classes",{hash:{}})),f+=q(g)+' admin-link-hover-area">\n  ',k=c.avatar_url,g=k||b.avatar_url,h=c["if"],l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n  <a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[workflow_state]=unread"\n     class="action_mark_as_unread standard_action"\n     data-track-category="Thread Actions"\n     data-track-action="Individual Left Side"\n     data-track-category="Mark as Unread"\n     role="button"\n     title="',g="Mark as Unread",h="inbox_actions.mark_as_unread",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">',g="Mark as Unread",h="inbox_actions.mark_as_unread",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</a>\n  <a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[workflow_state]=read"\n     class="action_mark_as_read standard_action"\n     data-track-category="Thread Actions"\n     data-track-action="Individual Left Side"\n     data-track-category="Mark as Read"\n     role="button"\n     title="',g="Mark as Read",h="inbox_actions.mark_as_read",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">',g="Mark as Read",h="inbox_actions.mark_as_read",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</a>\n  <a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[starred]=true"\n     class="action_star standard_action"\n     data-track-category="Thread Actions"\n     data-track-action="Individual Left Side"\n     data-track-category="Star"\n     role="button"\n     title="',g="Star",h="inbox_actions.action_star",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">',g="Star",h="inbox_actions.action_star",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</a>\n  <a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[starred]=false"\n     class="action_unstar standard_action"\n     data-track-category="Thread Actions"\n     data-track-action="Individual Left Side"\n     data-track-category="Unstar"\n     role="button"\n     title="',g="Unstar",h="inbox_actions.action_unstar",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">',g="Unstar",h="inbox_actions.action_unstar",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</a>\n\n  <span class="date">',k=c.lastMessageAt,g=k||b.lastMessageAt,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"lastMessageAt",{hash:{}})),f+=q(g)+'</span>\n\n  <div class="conversation-summary">\n    <img class="attachments" src="/images/messages/attach-gray.png" title="',g="This conversation has one or more attachments",h="has_attachments",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">\n    <img class="media_objects" src="/images/messages/media-gray.png" title="',g="This conversation has one or more media comments",h="has_media",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">\n    <span class="audience">',k=c.audienceHtml,g=k||b.audienceHtml,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"audienceHtml",{hash:{}}));if(g||g===0)f+=g;f+='</span>\n  </div>\n\n  <span class="count"',k=c.hideCount,g=k||b.hideCount,h=c["if"],l=m.program(3,s,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+=">",k=c.message_count,g=k||b.message_count,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"message_count",{hash:{}})),f+=q(g)+"</span>\n\n  <p>",k=c.lastMessage,g=k||b.lastMessage,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"lastMessage",{hash:{}})),f+=q(g)+'</p>\n\n  <div class="admin-links">\n    <button class="al-trigger btn btn-mini" data-kyle-menu-options=\'{"appendMenuTo": "#menu-wrapper", "notifyMenuActiveOnParent": "li.admin-link-hover-area"}\'>\n      <i class="icon-settings"></i><i class="icon-mini-arrow-down"></i>\n      <div class="screenreader-only">',g="Message Actions Menu",h="inbox_actions_description",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</div>\n    </button>\n    <ul class="al-options" data-id="',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'">\n      <li><a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[workflow_state]=unread"\n             class="action_mark_as_unread standard_action"\n             data-track-category="Thread Actions"\n             data-track-action="Individual Gear"\n             data-track-label="Mark as Unread">\n        ',g="Mark as Unread",h="inbox_actions.mark_as_unread",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n      </a></li>\n      <li><a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[workflow_state]=read"\n             class="action_mark_as_read standard_action"\n             data-track-category="Thread Actions"\n             data-track-action="Individual Gear"\n             data-track-label="Mark as Read">\n        ',g="Mark as Read",h="inbox_actions.mark_as_read",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n      </a></li>\n      <li><a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[starred]=false"\n             class="action_unstar standard_action"\n             data-track-category="Thread Actions"\n             data-track-action="Individual Gear"\n             data-track-label="Unstar">\n        ',g="Unstar",h="inbox_actions.action_unstar",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n      </a></li>\n      <li><a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[starred]=true"\n             class="action_star standard_action"\n             data-track-category="Thread Actions"\n             data-track-action="Individual Gear"\n             data-track-label="Star">\n        ',g="Star",h="inbox_actions.unstar",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n      </a></li>\n      <li><a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[subscribed]=0"\n             class="action_unsubscribe standard_action"\n             data-track-category="Thread Actions"\n             data-track-action="Individual Gear"\n             data-track-label="Unsubscribe">\n        ',g="Unsubscribe",h="inbox_actions.unsubscribe",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n      </a></li>\n      <li><a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[subscribed]=1"\n             class="action_subscribe standard_action"\n             data-track-category="Thread Actions"\n             data-track-action="Individual Gear"\n             data-track-label="Subscribe">\n        ',g="Subscribe",h="inbox_actions.subscribe",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n      </a></li>\n      <li><a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[workflow_state]=archived"\n             class="action_archive standard_action"\n             data-track-category="Thread Actions"\n             data-track-action="Individual Gear"\n             data-track-label="Archive">\n        ',g="Archive",h="inbox_actions.archive",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n      </a></li>\n      <li><a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'?conversation[workflow_state]=read"\n             class="action_unarchive standard_action"\n             data-track-category="Thread Actions"\n             data-track-action="Individual Gear"\n             data-track-label="Unarchive">\n        ',g="Unarchive",h="inbox_actions.unarchive",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n      </a></li>\n      <li><a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'"\n             class="action_delete_all">\n        ',g="Delete",h="inbox_actions.delete",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n      </a></li>\n    </ul>\n  </div>\n  <a href="/conversations/',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'" class="details_link">',g="more...",h="read_more",i={},j="conversations.conversation_item",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</a>\n</li>\n",f}),c["conversations/conversationItem"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/conversations/ConversationsList",["i18n!conversations.conversations_list","compiled/widget/ScrollableList","compiled/conversations/Conversation","jst/conversations/conversationItem","jquery.instructure_date_and_time"],function(b,d,e,f){return function(d){function g(b,c){var d=this;this.pane=b,this.conversationItem=a(this.conversationItem,this),this.clicked=a(this.clicked,this),this.loaded=a(this.loaded,this),this.triggerConversationAction=a(this.triggerConversationAction,this),this.app=this.pane.app,this.$empty=this.pane.$pane.find("#no_messages"),g.__super__.constructor.call(this,c,{model:e,itemTemplate:this.conversationItem,elementHeight:76,itemIdsKey:"conversation_ids",itemsKey:"conversations",sortKey:"last_message_at",sortDir:"desc",baseUrl:"/conversations?include_all_conversation_ids=1",noAutoLoad:!0}),$("#menu-wrapper").on("click","a.standard_action",this.triggerConversationAction),this.$list.on("click","li[data-id] > a.standard_action",this.triggerConversationAction),this.$list.on("click","button.al-trigger",this.pane.filterMenu.bind(this.pane)),$(window).unload(function(){return clearTimeout(d.markAsUnread)})}return c(g,d),g.prototype.triggerConversationAction=function(a){return a.preventDefault(),this.pane.action($(a.currentTarget),{method:"PUT"})},g.prototype.baseData=function(){return{scope:this.scope,filter:this.filters}},g.prototype.load=function(a,b){var c,d=this;return this.scope=a.scope,this.filters=(c=a.filter)!=null?c:[],g.__super__.load.call(this,{sortKey:""+this.lastMessageKey()+"_at",params:this.baseData(),force:a.force,loadId:a.id,cb:function(){return d.emptyCheck(),typeof b=="function"?b():void 0}})},g.prototype.loaded=function(a,b,c){return a&&b==null?this.app.updateHashData({id:null}):this.activate(b,c)},g.prototype.added=function(a,b){return this.$empty.hide()},g.prototype.updated=function(a,b){var c=this;this.emptyCheck();if(this.isActive(a.id)&&a.get("workflow_state")==="unread")return this.markAsUnread=setTimeout(function(){if(!c.isActive(a.id)||!c.$item(a.id))return;return a.inboxAction({method:"PUT",data:{conversation:{workflow_state:"read"}},success:function(a){return a.defer_visibility_check=!0}})},2e3)},g.prototype.removed=function(a,b){this.emptyCheck();if(this.isActive(a.id))return this.activate(null)},g.prototype.clicked=function(a){if(!$(a.target).closest(".admin-links").length)return this.select($(a.currentTarget).data("id"))},g.prototype.lastMessageKey=function(){return this.scope==="sent"?"last_authored_message":"last_message"},g.prototype.emptyCheck=function(){var a,c,d,e;return d=this.app.filterNameMap,e=function(){switch(this.scope){case"unread":return b.t("no_unread_messages","You have no unread messages");case"starred":return b.t("no_starred_messages","You have no starred messages");case"sent":return b.t("no_sent_messages","You have no sent messages");case"archived":return b.t("no_archived_messages","You have no archived messages");default:return b.t("no_messages","You have no messages")}}.call(this),a=function(){var a,b,e,f;e=this.filters,f=[];for(a=0,b=e.length;a<b;a++)c=e[a],d[c]&&f.push(d[c]);return f}.call(this),a.length&&(e+=" ("+a.join(", ")+")"),this.$empty.text(e),this.$empty.showIf(!this.$items().length)},g.prototype.select=function(a,b){b==null&&(b=!0),this.ensureSelected(a,b);if(b)return this.app.updateHashData({id:a})},g.prototype.isActive=function(a){return this.active&&this.active.id===a},g.prototype.deactivate=function(){var a,b;if(!this.active||!(a=this.item(this.active.id)))return;return delete this.active,(b=this.$item(a.id))!=null&&b.removeClass("selected"),a.get("visible")||this.removeItem(a),clearTimeout(this.markAsUnread)},g.prototype.ensureSelected=function(a,b){var c;b==null&&(b=!0),b?(this.selected=[],this.$items().removeClass("selected"),this.isActive(a)||this.deactivate()):(c=this.selected)==null&&(this.selected=[]);if(a!=null)return this.$item(a).addClass("selected"),this.selected.push(a)},g.prototype.activate=function(a,b){var c=this;if(a&&this.isActive(a!=null?a.id:void 0)){this.app.deselectMessages();return}return this.ensureSelected(a!=null?a.id:void 0),this.active=a,this.app.loadConversation(this.active,b,function(){if(b!=null?b.hasClass("unread"):void 0)return b.removeClass("read unread archived").addClass("read")})},g.prototype.conversationItem=function(a){var b,c,d,e,g,h,i;c=$.extend({},a.toJSON());if(c.participants){i=c.participants;for(g=0,h=i.length;g<h;g++)e=i[g],this.app.userCache[e.id]||(this.app.userCache[e.id]=e)}return c.audience&&(c.audienceHtml=this.app.htmlAudience(c,{highlightFilters:!0}),this.isActive(c.id)&&this.app.formPane.refresh()),c.lastMessage=c[this.lastMessageKey()],c.lastMessageAt=$.friendlyDatetime($.parseFromISO(c[this.lastMessageKey()+"_at"]).datetime),c.hideCount=c.message_count===1,b=function(){var a,b,e,f;e=c.properties,f=[];for(a=0,b=e.length;a<b;a++)d=e[a],f.push(d);return f}(),b.push(c.workflow_state),c["private"]&&b.push("private"),c.starred&&b.push("starred"),c.subscribed||b.push("unsubscribed"),$.inArray(c.id,this.selected)>=0&&b.push("selected"),c.classes=b.join(" "),f(c)},g}(d)})}.call(this),function(){define("compiled/conversations/ConversationsPane",["i18n!conversations.conversations_pane","compiled/conversations/ConversationsList","str/htmlEscape","compiled/util/shortcut","compiled/jquery/offsetFrom"],function(a,b,c,d){return function(){function c(a,c){this.app=a,this.$pane=c,this.list=new b(this,this.$pane.find("> div.conversations")),this.selected=[],this.initializeActions()}return d(c,"list","baseData","updateItems","isActive"),c.prototype.initializeActions=function(){var b=this;return $("#menu-wrapper").on("click","a.action_delete_all",function(c){c.preventDefault();if(confirm(a.t("confirm.delete_conversation","Are you sure you want to delete your copy of this conversation? This action cannot be undone.")))return b.action($(c.currentTarget),{method:"DELETE"})})},c.prototype.updateView=function(a){return this.list.load(a)},c.prototype.action=function(a,b){var c,d,e,f=this;return d=b.conversationId||a.closest("div.conversations li").data("id")||a.parents("ul[data-id]:first").data("id"),c=this.list.item(d),b=$.extend(!0,{},{url:this.actionUrlFor(a,d)},b),e=b.success,b.success=function(a){var b;return((b=a.messages)!=null?b.length:void 0)&&f.app.addMessage(a.messages[0]),typeof e=="function"?e(a):void 0},c.inboxAction(b)},c.prototype.actionUrlFor=function(a,b){var c;return c=$.replaceTags(a.attr("href"),"id",b),c+(c.match(/\?/)?"&":"?")+$.param(this.baseData())},c.prototype.active=function(){return this.list.active},c.prototype.filterMenu=function(a){var b,c,d,e,f,g,h;b=$(a.currentTarget).parents("li:first"),c=$(a.currentTarget).siblings("ul:first"),c.find("li").show(),f=b.hasClass("read"),g=b.hasClass("starred"),e=b.hasClass("private"),h=!b.hasClass("unsubscribed"),d=b.hasClass("archived"),f&&c.find(".action_mark_as_read").parent().remove(),f||c.find(".action_mark_as_unread").parent().remove(),g&&c.find(".action_star").parent().remove(),g||c.find(".action_unstar").parent().remove(),d&&c.find(".action_archive").parent().remove(),d||c.find(".action_unarchive").parent().remove(),d&&(c.find(".action_mark_as_read").parent().remove(),c.find(".action_mark_as_unread").parent().remove());if(e)return c.find(".action_subscribe, .action_unsubscribe").parent().remove();h&&c.find(".action_subscribe").parent().remove();if(!h)return c.find(".action_unsubscribe").parent().remove()},c.prototype.resize=function(a){return this.list.$scroller.height(a-$("#actions").outerHeight(!0)),this.list.fetchVisible()},c}()})}.call(this),define("jst/conversations/MessageForm",["compiled/handlebars_helpers","i18n!conversations.message_form"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["conversations/MessageForm"]=b(function(a,b,c,d,e){function r(a,b){var d="",e;return d+='\n<form method="post" action="/conversations/',k=c.conversation,e=k||a.conversation,e=e===null||e===undefined||e===!1?e:e.id,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"conversation.id",{hash:{}})),d+=q(e)+'/add_message">\n',d}function s(a,b){return'\n<form method="post" action="/conversations" class="new">\n'}function t(a,b){var d="",e;d+="\n          ",k=c.audience,e=k||a.audience,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"audience",{hash:{}}));if(e||e===0)d+=e;return d+="\n        ",d}function u(a,b){var d="",e,f,g,h;d+="\n          ",e="New Message",f="headings.new_message",g={},h="conversations.message_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="\n        ",d}function v(a,b){var d="",e,f,g,h;d+='\n        <a href="/conversations/',k=c.id,e=k||a.id,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"id",{hash:{}})),d+=q(e)+'/add_recipients" class="action_add_recipients">',e="Add People",f="inbox_actions.add_people",g={},h="conversations.message_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</a>\n      ",d}function w(a,b){var d="",e,f,g,h;d+='\n    <tr class="recipient_info">\n      <th><label>',e="To:",f="labels.to",g={},h="conversations.message_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+='</th>\n      <td><input type="text" name="recipients" data-finder_url="/conversations/find_recipients" class="recipients"></td>\n    </tr>\n    ',d}function x(a,b){var d="",e,f,g,h;d+='\n    <tr class="group_conversation_info" style="display:none">\n      <th></th>\n      <td>\n        <label>\n          <input type="checkbox" name="group_conversation" value="1" class="group_conversation">\n          ',e="This is a group conversation. Participants will see everyone's replies",f="labels.group_conversation",g={},h="conversations.message_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="\n        </label>\n      </td>\n    </tr>\n    ",d}function y(a,b){var d="",e,f,g,h;d+='\n          <div class="media_comment" style="display: none;" title="',e="Recorded media comment",f="titles.media_comment",g={},h="conversations.message_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;d+='">\n            <img src="/images/messages/media-gray.png">\n            ',e="Media Comment",f="media_comment",g={},h="conversations.message_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;d+='\n            <a href="#" class="remove_link icon-end black" style="float: right;" title="',e="Remove media comment",f="titles.remove_media_comment",g={},h="conversations.message_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+='"></a>\n            <div class="clear"></div>\n          </div>\n          <input type="hidden" name="media_comment_id">\n          <input type="hidden" name="media_comment_type">\n        ',d}function z(a,b){var d="",e,f,g,h;d+='\n          <a class="action_media_comment icon-media"\n             href="#"\n             data-track-category="Compose Message"\n             data-track-action="Edit"\n             data-track-label="Audio Recording"\n             title="',e="Record an audio or video comment",f="titles.record_media_comment",g={},h="conversations.message_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;d+='"> ',e="Record",f="links.media_comment",g={},h="conversations.message_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</a>\n        ",d}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;k=c.conversation,g=k||b.conversation,h=c["if"],l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.program(3,s,e),g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n  <ul class="conversations">\n    <li>\n      <span class="audience">\n        ',k=c.conversation,g=k||b.conversation,h=c["if"],l=m.program(5,t,e),l.hash={},l.fn=l,l.inverse=m.program(7,u,e),g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n      </span>\n      ",k=c.addRecipientsEnabled,g=k||b.addRecipientsEnabled,h=c["if"],l=m.program(9,v,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n    </li>\n  </ul>\n  <table>\n    ",k=c.conversation,g=k||b.conversation,h=c.unless,l=m.program(11,w,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n    <tr>\n      <th><label>",g="Message:",h="labels.message",i={},j="conversations.message_form",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label></th>\n      <td>\n        <textarea name="body"\n                  data-track-category="Compose Message"\n                  data-track-action="Edit"\n                  data-track-label="Body"\n                  class="conversation_body">',k=c.message,g=k||b.message,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"message",{hash:{}})),f+=q(g)+"</textarea>\n      </td>\n    </tr>\n    ",k=c.conversation,g=k||b.conversation,h=c.unless,l=m.program(13,x,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n    <tr class="user_note_info" style="display:none">\n      <th></th>\n      <td>\n        <label>\n          <input type="checkbox"\n                 name="user_note"\n                 value="1"\n                  data-track-category="Compose Message"\n                  data-track-action="Edit"\n                  data-track-label="Faculty Journal"\n                 class="user_note" />\n          ',g="Add as a Faculty Journal entry",h="labels.add_to_faculty_journal",i={},j="conversations.message_form",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="\n        </label>\n      </td>\n    </tr>\n    <tr>\n      <th>&nbsp;</th>\n      <td>\n        ",k=c.mediaCommentsEnabled,g=k||b.mediaCommentsEnabled,h=c["if"],l=m.program(15,y,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n        <ul class="attachment_list"></ul>\n        <a class="icon-paperclip action_add_attachment"\n           href="#"\n           data-track-category="Compose Message"\n           data-track-action="Edit"\n           data-track-label="Attach File"\n           title="',g="Add an attachment",h="titles.add_attachment",i={},j="conversations.message_form",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">',g="Attach",h="links.add_attachment",i={},j="conversations.message_form",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="</a>\n        ",k=c.mediaCommentsEnabled,g=k||b.mediaCommentsEnabled,h=c["if"],l=m.program(17,z,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n        <div style="float: right">\n          <input type="hidden" name="from_conversation_id" value="',k=c.from_conversation_id,g=k||b.from_conversation_id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"from_conversation_id",{hash:{}})),f+=q(g)+'">\n          <input type="hidden" name="mode" value="async">\n          <input type="hidden" name="scope" value="',k=c.scope,g=k||b.scope,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"scope",{hash:{}})),f+=q(g)+'">\n          <input type="hidden" name="filter" value="',k=c.filter,g=k||b.filter,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"filter",{hash:{}})),f+=q(g)+'">\n          <button type="submit"\n                  data-track-category="Compose Message"\n                  data-track-action="Edit"\n                  data-track-label="Send"\n                  class="btn btn-primary">',g="Send",h="buttons.send_message",i={},j="conversations.message_form",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</button>\n        </div>\n      </td>\n    </tr>\n  </table>\n</form>\n",f}),c["conversations/MessageForm"]}),define("jst/conversations/addAttachment",["compiled/handlebars_helpers","i18n!conversations.add_attachment"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["conversations/addAttachment"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+='<li class="attachment clearfix"\n    title="',g="File to attach",h="titles.attachment",i={},j="conversations.add_attachment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">\n  <div class="row-fluid">\n    <div class="span8">\n      <i class="icon-paperclip"></i>\n\n      <input type="file"\n             class="file_input"\n             name="attachments[]">\n    </div>\n\n    <div class="span1 offset3">\n      <a href="#"\n         class="remove_link icon-end black pull-right"\n         title="',g="Remove attachment",h="titles.remove_attachment",i={},j="conversations.add_attachment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+='"></a>\n    </div>\n  </div>\n</li>\n',f}),c["conversations/addAttachment"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/conversations/MessageForm",["i18n!conversations","underscore","compiled/util/shortcut","jst/conversations/MessageForm","jst/conversations/addAttachment"],function(b,c,d,e,f){var g;return g=function(){function g(b,c,d){this.pane=b,this.canAddNotesFor=c,this.options=d,this.recipientIdsChanged=a(this.recipientIdsChanged,this),this.$form=$(e(this.options)),this.$mediaComment=this.$form.find(".media_comment"),this.$mediaCommentId=this.$form.find("input[name=media_comment_id]"),this.$mediaCommentType=this.$form.find("input[name=media_comment_type]"),this.$addMediaComment=this.$form.find(".action_media_comment"),this.$attachments=this.$form.find(".attachment_list")}return d(g,"pane","resize"),g.prototype.initialize=function(){var a,b=this;if(this.tokenInput=this.$form.find(".recipients").data("token_input"))this.tokenInput.$fakeInput.css("width","100%"),this.options.user_id&&(a={user_id:this.options.user_id,from_conversation_id:this.options.from_conversation_id},$.ajaxJSON(this.tokenInput.selector.url,"GET",a,function(a){if(a.length)return b.tokenInput.addToken({value:a[0].id,text:a[0].name,data:a[0]})}));this.initializeActions();if(!$(document.activeElement).filter(":input").length&&window.location.hash!=="")return this.$form.find(":input:visible:first").focus()},g.prototype.initializeActions=function(){var a=this;return this.tokenInput&&(this.tokenInput.change=this.recipientIdsChanged),this.$form.formSubmit({fileUpload:function(){return a.$form.find(".file_input:visible").length>0},preparedFileUpload:!0,context_code:"user_"+ENV.current_user_id,folder_id:this.options.folderId,intent:"message",formDataTarget:"url",disableWhileLoading:!0,required:["body"],property_validations:{token_capture:function(){if(a.tokenInput&&!a.tokenInput.tokenValues().length)return b.t("errors.field_is_required","This field is required")}},handle_files:function(a,b){var c;return b.attachment_ids=function(){var b,d,e;e=[];for(b=0,d=a.length;b<d;b++)c=a[b],e.push(c.attachment.id);return e}(),b},onSubmit:function(b,c){return a.request=b,a.pane.addingMessage(a.messageData(c),a.request)}})},g.prototype.recipientIdsChanged=function(a){var b;return a.length>1||((b=a[0])!=null?b.match(/^(course|group)_/):void 0)?this.toggleOptions({user_note:!1,group_conversation:!0}):this.toggleOptions({user_note:this.canAddNotesFor(a[0]),group_conversation:!1}),this.resize()},g.prototype.addAttachment=function(){var a,b=this;return a=$(f()),this.$attachments.append(a),a.slideDown("fast",function(){return b.resize()})},g.prototype.removeAttachment=function(a){var b,c=this;return b=a.closest(".attachment"),b.slideUp("fast",function(){return c.resize(),b.remove()})},g.prototype.addToken=function(a){var b;b=this.$form.find(".recipients").data("token_input");if(b)return b.addToken(a)},g.prototype.addMediaComment=function(){var a=this;return this.$mediaComment.mediaComment("create","any",function(b,c){return a.$mediaCommentId.val(b),a.$mediaCommentType.val(c),a.$mediaComment.show(),a.$addMediaComment.hide()})},g.prototype.removeMediaComment=function(){return this.$mediaCommentId.val(""),this.$mediaCommentType.val(""),this.$mediaComment.hide(),this.$addMediaComment.show()},g.prototype.messageData=function(a){var b;return b=this.options.conversation?Math.max(this.options.conversation.get("audience").length,1):c.reduce(this.tokenInput.$tokens.find('input[name="recipients[]"]'),function(a,b){var c;return a+((c=$(b).closest("li").data("user_count"))!=null?c:1)},0),{recipient_count:b,message:{body:a.body}}},g.prototype.resetForParticipant=function(a){if(this.canAddNotesFor(a))return this.toggleOptions({user_note:!0})},g.prototype.toggleOptions=function(a){var b,c,d,e;e=[];for(d in a)c=a[d],b=this.$form.find("."+d+"_info"),b.showIf(c),c?e.push(void 0):e.push(b.find("input[name="+d+"]").prop("checked",!1));return e},g.prototype.toggle=function(a){return this.$form[a?"addClass":"removeClass"]("disabled")},g.prototype.height=function(){return this.$form.outerHeight(!0)},g.prototype.refresh=function(a){return this.$form.find(".audience").html(a),this.resize()},g.prototype.destroy=function(){var a=this;return this.$form.hideErrors(),this.$form.css({position:"absolute",zIndex:-1}),$.when(this.request).then(function(){return a.$form.remove()})},g}()})}.call(this),define("jst/conversations/MessageProgressBarText",["compiled/handlebars_helpers","i18n!conversations.message_progress_bar_text"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["conversations/MessageProgressBarText"]=b(function(a,b,c,d,e){function r(a,b){var d="",e,f,g,h;d+="\n  ",e="Error sending message:",f="error_sending_message",g={},h="conversations.message_progress_bar_text",g.scope=h,j=c.t,h=j||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n  <em>\n    ",j=c.error,e=j||a.error,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"error",{hash:{}})),d+=p(e)+"\n  </em>\n",d}function s(a,b){var d="",e,f,g;d+="\n  ",e="complete",j=c.status,f=j||a.status,j=c.ifEqual,g=j||a.ifEqual,k=l.program(4,t,b),k.hash={},k.fn=k,k.inverse=l.program(6,u,b),j&&typeof g===m?e=g.call(a,f,e,k):e=q.call(a,g,f,e,k);if(e||e===0)d+=e;return d+="\n",d}function t(a,b){var d="",e,f,g,h;d+="\n    ",e="Sent *%{message_preview}* to *%{num_people}*",f="done_sending_message",g={},h="conversations.message_progress_bar_text",g.scope=h,h="<b>$1</b>",g.w0=h,j=c.t,h=j||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n  ",d}function u(a,b){var d="",e,f,g,h;d+="\n    ",e="Sending *%{message_preview}* to *%{num_people}*",f="sending_message",g={},h="conversations.message_progress_bar_text",g.scope=h,h="<b>$1</b>",g.w0=h,j=c.t,h=j||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n  ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression,q=c.blockHelperMissing;g="error",j=c.status,h=j||b.status,j=c.ifEqual,i=j||b.ifEqual,k=l.program(1,r,e),k.hash={},k.fn=k,k.inverse=l.program(3,s,e),j&&typeof i===m?g=i.call(b,h,g,k):g=q.call(b,i,h,g,k);if(g||g===0)f+=g;return f+="\n",f}),c["conversations/MessageProgressBarText"]}),function(){define("compiled/conversations/MessageProgressBar",["i18n!conversations","underscore","jst/conversations/MessageProgressBarText","compiled/str/TextHelper","jquery.ajaxJSON"],function(a,b,c,d){var e,f;return f=d.truncateText,e=function(){function d(a,c){var d;this.tracker=a,this.data=c,this.$node=$('<li class="progress-bar" />'),d=b.uniqueId("progress_"),this.$message=$("<span />",{id:d}),this.$bar=$("<div />",{tabIndex:-1,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":this.data.completion,"aria-describedby":d}),this.$completion=$("<b />").appendTo(this.$bar),this.$node.append(this.$message,this.$bar),this.update(this.data)}return d.prototype.update=function(b){var d,e;return this.data=b,this.data.status=this.data.error?"error":this.data.completion!=null?this.data.completion===1?"complete":"determinate":"indeterminate",this.data.num_people=a.t("people_count","person",{count:this.data.recipient_count}),this.data.message_preview=f(this.data.message.body,{max:20}),this.$node.attr("class","progress-bar progress-bar-"+this.data.status),this.$message.html(c(this.data)),this.$message.attr({title:this.data.message_preview}),this.$bar.showIf(this.data.status!=="error"),d=parseInt(100*((e=this.data.completion)!=null?e:0))+"%",this.$bar.attr("aria-valuenow",this.data.completion),this.$completion.css({width:d})},d.prototype.error=function(a){return this.update(b.extend(this.data,{error:a,completion:1})),this.destroy()},d.prototype.complete=function(){return this.update(b.extend(this.data,{completion:1})),this.destroy()},d.prototype.destroy=function(){var a=this;return setTimeout(function(){return a.$node.fadeTo("fast",0).animate({width:0},"fast",function(){return a.$node.remove()})},5e3)},d}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/conversations/MessageProgressTracker",["i18n!conversations","underscore","compiled/conversations/MessageProgressBar","jquery.ajaxJSON"],function(b,c,d){var e;return e=function(){function e(b){this.app=b,this.batchPoller=a(this.batchPoller,this),this.batchItems={},this.$list=$("#message_status")}return e.prototype.track=function(a,c){var e,f=this;return e=new d(this,a),this.$list.append(e.$node),e.$bar.focus(),c&&$.when(c).then(function(a,b,c){var d;if(c.status!==202)return e.complete();if(d=c.getResponseHeader("X-Conversation-Batch-Id"))f.batchItems[d]=e;if(!f.polling)return f.batchPoller()},function(a){var c,d,f;return(typeof a.isRejected=="function"?a.isRejected():void 0)?e.complete():(c=((d=a[0])!=null?d.attribute:void 0)==="recipients"&&a[0].message==="invalid"?b.t("recipient_error","The course or group you have selected has no valid recipients"):((f=a[0])!=null?f.attribute:void 0)==="attachment"&&a[0].message==="upload failed"?b.t("attachment_error","Attachment failed to upload, please try again."):b.t("unspecified_error","An unexpected error occurred, please try again"),e.error(c))}),e},e.prototype.batchPoller=function(){var a=this;return this.polling=!0,$.ajaxJSON("/conversations/batches","GET",{},function(b){return a.updateItems(b),b.length>0?setTimeout(a.batchPoller,3e3):a.polling=!1})},e.prototype.updateItems=function(a){var b,d,e,f,g,h;d=c.reduce(a,function(a,b){return a[b.id]=b,a},{});for(e in d)a=d[e],(g=(h=this.batchItems[e])!=null?h.update(a):void 0)!=null?g:this.batchItems[e]=this.track(a);b=function(){var a,b;a=this.batchItems,b=[];for(e in a){f=a[e];if(!!d[e])continue;f.complete(),b.push(delete this.batchItems[e])}return b}.call(this);if(b.length)return this.app.updateView(!0)},e.prototype.height=function(){return this.$list.outerHeight(!0)},e}()})}.call(this),function(){define("compiled/conversations/MessageFormPane",["i18n!conversations","underscore","compiled/util/shortcut","compiled/conversations/MessageForm","compiled/conversations/MessageProgressTracker","compiled/fn/preventDefault"],function(a,b,c,d,e,f){var g;return g=function(){function a(a,b){this.app=a,this.formOptions=b,this.$node=$("#create_message_form"),this.initializeActions(),this.tracker=new e(this.app),this.tracker.batchPoller()}return c(a,"form","refresh","toggle","resetForParticipant"),c(a,"app","resize"),a.prototype.height=function(){var a,b;return((a=(b=this.form)!=null?b.height():void 0)!=null?a:0)+this.tracker.height()},a.prototype.reset=function(a){var c;return this.options=a,(c=this.form)!=null&&c.destroy(),this.form=new d(this,this.app.canAddNotesFor,b.defaults(this.options,this.formOptions)),this.$node.append(this.form.$form),this.app.addedMessageForm(this.form.$form),this.form.initialize()},a.prototype.initializeActions=function(){var a=this;return this.$node.click(function(){return a.app.toggleMessageActions(!1)}),this.$node.on("click",".action_add_attachment",f(function(){return a.form.addAttachment()})),this.$node.on("click",".attachment a.remove_link",f(function(b){return a.form.removeAttachment($(b.currentTarget))})),this.$node.on("click",".action_media_comment",f(function(){return a.form.addMediaComment()})),this.$node.on("click",".media_comment a.remove_link",f(function(){return a.form.removeMediaComment})),this.$node.on("click",".action_add_recipients",f(function(b){return a.app.addRecipients($(b.currentTarget))}))},a.prototype.addingMessage=function(a,b){var c=this;return this.reset(this.options),this.tracker.track(a,b),$.when(b).then(function(a){return a.length==null&&(a=[a]),c.app.updatedConversation(a)})},a}()})}.call(this),define("jst/PaginatedView",["compiled/handlebars_helpers","compiled/util/registerTemplateCss","i18n!paginated_view"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.PaginatedView=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+='<div class="paginatedView-loading" role="status" aria-live="polite">\n  ',g="Loading more results",h="loading_more_results",i={},j="paginated_view",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="\n</div>",f}),arguments[1]("PaginatedView",'.paginatedView-loading {\n  text-align: center;\n  color: #e9e9e9;\n  font-size: 26px;\n  background: url("/images/load.gif") no-repeat 50% 80%;\n  padding-bottom: 56px; }\n'),c.PaginatedView}),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/views/PaginatedView",["underscore","jquery","Backbone","jst/PaginatedView"],function(a,c,d,e){var f,g;return f=function(d){function f(){return g=f.__super__.constructor.apply(this,arguments),g}return b(f,d),f.prototype.paginationLoaderTemplate=e,f.prototype.paginationScrollContainer=window,f.prototype.distanceTillFetchNextPage=100,f.prototype.initialize=function(a){var b;return b=f.__super__.initialize.call(this,a),this.fetchOptions=a.fetchOptions,this.startPaginationListener(),this.bindPaginationEvents(),b},f.prototype.render=function(){var a;return a=f.__super__.render.apply(this,arguments),this.collection.fetchingNextPage&&this.showPaginationLoader(),a},f.prototype.showPaginationLoader=function(){var a;return(a=this.$paginationLoader)==null&&(this.$paginationLoader=c(this.paginationLoaderTemplate())),this.placePaginationLoader()},f.prototype.placePaginationLoader=function(){var a;return(a=this.$paginationLoader)!=null?a.insertAfter(this.el):void 0},f.prototype.hidePaginationLoader=function(){var a;return(a=this.$paginationLoader)!=null?a.remove():void 0},f.prototype.distanceToBottom=function(){var a,b;return a=c(this.paginationScrollContainer),b=a[0]===window?c(document).height():a[0].scrollHeight,b-a.scrollTop()-a.height()},f.prototype.startPaginationListener=function(){return c(this.paginationScrollContainer).on("scroll.pagination"+this.cid+", resize.pagination"+this.cid,c.proxy(this.fetchNextPageIfNeeded,this)),this.fetchNextPageIfNeeded()},f.prototype.stopPaginationListener=function(){return c(this.paginationScrollContainer).off(".pagination"+this.cid)},f.prototype.fetchNextPageIfNeeded=function(){var b=this;if(this.collection.fetchingNextPage)return;if(!this.collection.urls||!this.collection.urls.next){this.collection.length&&this.stopPaginationListener();return}return setTimeout(function(){if(c(b.paginationScrollContainer).is(":visible")&&b.distanceToBottom()<b.distanceTillFetchNextPage)return b.collection.fetch(a.extend({page:"next"},b.fetchOptions))},0)},f.prototype.bindPaginationEvents=function(){return this.collection.on("beforeFetch:next",this.showPaginationLoader,this),this.collection.on("fetch:next",this.hidePaginationLoader,this),this.collection.on("all",this.fetchNextPageIfNeeded,this)},f}(d.View)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/widget/TokenSelectorList",["underscore","compiled/views/PaginatedView","jquery.disableWhileLoading"],function(b,d){var e,f;return e=function(d){function e(){return this.showPaginationLoader=a(this.showPaginationLoader,this),this.addOne=a(this.addOne,this),this.render=a(this.render,this),f=e.__super__.constructor.apply(this,arguments),f}return c(e,d),e.prototype.tagName="div",e.prototype.className="list",e.prototype.paginationLoaderTemplate=function(){return'<div class="pagination-loader" style="height: 60px;">&nbsp;</div>'},e.prototype.events={"blur li":"onBlur","focus li":"onFocus","keydown li":"onKeydown"},e.prototype.keyCodes={13:"Enter",16:"Shift",17:"Control",18:"Alt",27:"Escape",32:"Space",37:"LeftArrow",38:"UpArrow",39:"RightArrow",40:"DownArrow",91:"Command"},e.prototype.initialize=function(a){return this.selector=this.options.selector,this.parent=this.options.parent,this.ancestors=this.options.ancestors,this.query=this.options.query,this.$heading=$("<ul />",{"class":"heading"}).appendTo(this.$el),this.paginationScrollContainer=$("<ul />",{role:"menu"}),this.$body=this.paginationScrollContainer.appendTo(this.$el),this.$el.find("ul").on("mousemove",this.selector.mouseMove).on("mousedown",this.selector.mouseDown).on("click",this.selector.click),this.collection.on("beforeFetch",this.showPaginationLoader,this),this.collection.on("fetch",this.render),e.__super__.initialize.apply(this,arguments)},e.prototype.render=function(){var a,b,c,d,f,g,h,i,j,k,l,m;return c=this.paginationScrollContainer.children(".active").index(),this.clear(),this.$selectAll=null,this.parent?(a=this.parent.clone(),a.addClass("expanded").removeClass("active first last"),this.$heading.append(a).show()):this.$heading.hide(),this.query.search||(this.collection.length>0&&(f=typeof (h=this.selector.options).includeFilterOption=="function"?h.includeFilterOption(this.query):void 0,f&&this.addFilterOption(f)),this.collection.length>1&&(d=typeof (i=this.selector.options).includeEveryoneOption=="function"?i.includeEveryoneOption(this.query,this.parent):void 0,g=typeof (j=this.selector.options).includeSelectAllOption=="function"?j.includeSelectAllOption(this.query,this.parent):void 0,d&&this.addEveryoneOption(d),g&&this.addSelectAllOption(g))),this.collection.each(this.addOne),(this.selectAllActive()||((k=this.parent)!=null?typeof k.hasClass=="function"?k.hasClass("on"):void 0:void 0))&&this.$body.find("li.toggleable").addClass("on"),this.$el.toggleClass("with-toggles",this.selector.options.showToggles&&this.$body.find("li.toggleable").length>0),this.selector.select($(this.paginationScrollContainer.children()[c])),this.collection.fetchingPage||this.collection.fetchingNextPage?this.showPaginationLoader():this.hidePaginationLoader(),this.collection.atLeastOnePageFetched&&!this.$body.find("li").length&&(b=$('<li class="message first last no-results"></li>'),b.text((l=(m=this.selector.options.messages)!=null?m.noResults:void 0)!=null?l:""),this.$body.append(b)),e.__super__.render.apply(this,arguments)},e.prototype.addEveryoneOption=function(a){var b,c;return b=this.parent.data("user_data"),c={id:""+this.query.context+"_all",name:a,user_count:b.user_count,type:"context",avatar_url:b.avatar_url},this.selector.options.includeSelectAllOption&&$.extend(c,{permissions:b.permissions,selectAll:b.permissions.send_messages_all}),this.addOneRaw(c)},e.prototype.addSelectAllOption=function(a){var b;return b=this.parent.data("user_data"),this.addOneRaw({id:this.query.context,name:a,user_count:b.user_count,type:"context",avatar_url:b.avatar_url,permissions:b.permissions,selectAll:!0,noExpand:!0})},e.prototype.addFilterOption=function(a){return this.addOneRaw({id:this.query.context,name:this.parent.data("text"),type:"context",avatar_url:this.parent.data("user_data").avatar_url,subText:a,noExpand:!0})},e.prototype.addOne=function(a){return this.addOneRaw(a.attributes)},e.prototype.addOneRaw=function(a){var b;return b=$("<li />",{"class":"selectable",tabindex:"-1"}),this.$body.find("li:first")||b.addClass("first"),this.$body.find("li:last").removeClass("last"),b.addClass("last"),this.populateRow(b,a,{level:this.ancestors.length,parent:this.parent,ancestors:this.ancestors}),a.selectAll&&(this.$selectAll=b),b.hasClass("toggleable")&&this.selector.input.hasToken(b.data("id"))&&b.addClass("on"),this.$body.append(b)},e.prototype.populateRow=function(a,b,c){return c==null&&(c={}),this.selector.options.populator?(c=$.extend({noExpand:this.selector.options.noExpand},c),this.selector.options.populator(this.selector,a,b,c)):(a.data("id",b.text),a.text(b.text))},e.prototype.first=function(){return this.$el.find("li:first")},e.prototype.last=function(){return this.$el.find("li:last")},e.prototype.appendTo=function(a){return a.append(this.$el)},e.prototype.insertAfter=function(a){return this.$el.insertAfter(a.$el)},e.prototype.remove=function(){return this.$el.remove()},e.prototype.hide=function(a){return this.$el.animate({height:"1px"},"fast",a)},e.prototype.restore=function(){return this.$el.css("height","auto")},e.prototype.clear=function(){return this.$body.empty(),this.$heading.empty()},e.prototype.showPaginationLoader=function(){var a;return a=e.__super__.showPaginationLoader.apply(this,arguments),this.$paginationLoader.disableWhileLoading(this.collection.deferred),a},e.prototype.placePaginationLoader=function(){var a;return(a=this.$paginationLoader)!=null?a.insertAfter(this.$body):void 0},e.prototype.canSelectAll=function(){return this.$selectAll!=null},e.prototype.selectAllActive=function(){var a;return(a=this.$selectAll)!=null?a.hasClass("on"):void 0},e.prototype.updateSelectAll=function(a,b){var c,d,e=this;if(!this.$selectAll)return;c=this.$body.find("li.toggleable").not(this.$selectAll);if(a)return this.selectAllActive()?c.addClass("on").each(function(a,c){return b(!1,$(c))}):c.removeClass("on").each(function(a,c){return b(!1,$(c))});d=c.filter(".on");if(d.length<c.length&&this.selectAllActive())return this.$selectAll.removeClass("on"),b(!1,this.$selectAll),d.each(function(a,c){return b(!0,$(c))});if(d.length===c.length&&!this.selectAllActive())return this.$selectAll.addClass("on"),b(!0,this.$selectAll),d.each(function(a,c){return b(!1,$(c))})},e.prototype.onKeydown=function(a){var c,d,e;c=$(a.target),d=a.keyCode||a.which,e="on"+this.keyCodes[d]+"Key";if(this[e])return this[e].call(this,a,c)&&a.preventDefault();if(!b.include([16,17,18,92],d))return this.selector.input.focus(),$(this.selector.input.$input).trigger(a)},e.prototype.onBlur=function(a){var b;return $(a.target).removeClass("active"),typeof (b=this.selector).blur=="function"?b.blur():void 0},e.prototype.onFocus=function(a){return $(a.target).addClass("active")},e.prototype.onUpArrowKey=function(a,b){a.preventDefault(),this.selector.selectPrev();if(b.prev().length===0)return this.selector.input.focus()},e.prototype.onDownArrowKey=function(a,b){return a.preventDefault(),this.selector.selectNext()},e.prototype.onRightArrowKey=function(a,b){return a.preventDefault(),this.selector.expandSelection()},e.prototype.onLeftArrowKey=function(a,b){if(this.selector.listExpanded())return this.selector.collapse()},e.prototype.onEnterKey=function(a,b){return a.preventDefault(),this.selectResult(b)},e.prototype.onSpaceKey=function(a,b){return a.preventDefault(),this.selectResult(b)},e.prototype.onEscapeKey=function(a,b){return this.selector.input.focus(),this.selector.close()},e.prototype.selectResult=function(a){return a.hasClass("expandable")&&a.find("a.toggle").length>0?this.selector.toggleSelection():a.click()},e}(d)})}.call(this),function(){define("compiled/util/listWithOthers",["i18n!conversations","str/htmlEscape","jquery.instructure_misc_helpers"],function(a,b){return function(c,d){var e,f;return d==null&&(d=2),c.length>d&&(c=c.slice(0,d).concat([c.slice(d,c.length)])),$.toSentence(function(){var d,g,i;i=[];for(d=0,g=c.length;d<g;d++)f=c[d],typeof f=="string"||f.htmlSafe?i.push("<span>"+b(f)+"</span>"):i.push("<span class='others'>\n  "+b(a.t("other","other",{count:f.length}))+"\n  <span>\n    <ul>\n      "+function(){var a,c,d;d=[];for(a=0,c=f.length;a<c;a++)e=f[a],d.push("<li>"+b(e)+"</li>");return d}().join("")+"\n    </ul>\n  </span>\n</span>");return i}())}})}.call(this),function(){define("compiled/conversations/audienceList",["i18n!conversations","underscore","str/htmlEscape","compiled/util/listWithOthers","jquery.instructure_misc_helpers"],function(a,b,c,d){var e;return e=function(a){var b;return b=c(a.name),a.activeFilter&&(b="<span class='active-filter'>"+b+"</span>"),$.raw(b)},function(f,g){var i,j,k;return g==null&&(g={}),g.highlightFilters&&(f=b.groupBy(f,function(a){return a.activeFilter}),f=((k=f[true])!=null?k:[]).concat((j=f[false])!=null?j:[])),f=function(){var a,b,c;c=[];for(a=0,b=f.length;a<b;a++)i=f[a],c.push(e(i));return c}(),f.length===0?"<span>"+c(a.t("notes_to_self","Monologue"))+"</span>":d(f)}})}.call(this),function(){define("compiled/util/contextList",["underscore","str/htmlEscape","compiled/util/listWithOthers","jquery.instructure_misc_helpers"],function(a,b,c){var d,e,f;return f=function(b,c){return b=a.clone(b),b.activeFilter=a.include(c,""+b.type+"_"+b.id),b.sortBy=""+(b.activeFilter?0:1)+"_"+b.name.toLowerCase(),b},e=function(a,c){var d;return d=b(a.name),a.activeFilter&&(d="<span class='active-filter'>"+d+"</span>"),c&&a.type==="course"&&(d="<a href='"+b(a.url)+"'>"+d+"</a>"),$.raw(d)},d=function(b,d,g){var h,i,j,k,l;g==null&&(g={}),i=(l=g.filters)!=null?l:[],h=[];for(k in b)j=b[k],h=h.concat(a.values(a.pick(d[k],j)));return h=a.chain(h).map(function(a){return f(a,i)}).sortBy("sortBy").map(function(a){return e(a,g.linkToContexts)}).value(),g.hardCutoff&&(h=h.slice(0,g.hardCutoff)),c(h)}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/widget/TokenSelector",["jquery","underscore","compiled/widget/TokenSelectorList","compiled/collections/RecipientCollection","jquery.instructure_misc_helpers","compiled/jquery/scrollIntoView"],function(b,c,d,e){return function(){function f(c,d,e){var f=this;this.input=c,this.url=d,this.options=e!=null?e:{},this.select=a(this.select,this),this.close=a(this.close,this),this.click=a(this.click,this),this.mouseDown=a(this.mouseDown,this),this.mouseMove=a(this.mouseMove,this),this.autoSelectFirst=a(this.autoSelectFirst,this),this.stack=[],this.cache={},this.$container=b("<div />").addClass("autocomplete_menu"),this.$menu=b("<div />"),this.$container.append(b("<div />").append(this.$menu)),this.$container.css("top",0).css("left",0),this.mode="input",b("body").append(this.$container),this.reposition=function(){var a;return a=f.input.bottomOffset(),f.$container.css("top",a.top),f.$container.css("left",a.left)},b(window).resize(this.reposition),this.close()}return f.prototype.autoSelectFirst=function(a){a==null&&(a=this.list);if(a===this.list&&this.selection==null)return this.select(a.first(),!0)},f.prototype.browse=function(a){if(this.uiLocked)return;return this.clear(),this.close(),this.open(),this.list=this.listForQuery(this.preparePost(a)),this.list.appendTo(this.$menu),this.autoSelectFirst(),!0},f.prototype.mouseMove=function(a){var c;if(this.uiLocked)return;return c=b(a.target).closest("li"),c.hasClass("selectable")||(c=null),this.select(c)},f.prototype.mouseDown=function(a){var b=this;return setTimeout(function(){return b.input.focus()},0)},f.prototype.click=function(a){if(this.uiLocked)return;return this.mouseMove(a),this.selection&&(b(a.target).closest("a.expand").length?this.selectionExpanded()?this.collapse():this.expandSelection():this.selectionToggleable()&&b(a.target).closest("a.toggle").length?this.toggleSelection():this.selectionExpanded()?this.collapse():this.selectionExpandable()?this.expandSelection():(this.toggleSelection(!0),this.clear(),this.close())),this.input.focus()},f.prototype.captureKeyDown=function(a){var b,d,e;b=(d=(e=a.originalEvent)!=null?e.keyIdentifier:void 0)!=null?d:a.which;if(this.uiLocked)return!0;if(this.$menu.find(".no-results").length>0&&c.include([13,"Enter"],b))return a.preventDefault();switch(b){case"Backspace":case"U+0008":case 8:if(this.input.val()==="")return this.listExpanded()?this.collapse():this.$menu.is(":visible")?this.close():this.input.removeLastToken(),!0;break;case"Tab":case"U+0009":case 9:this.selection&&(this.selectionToggleable()||!this.selectionExpandable())&&this.toggleSelection(!0),this.clear(),this.close();if(this.selection)return!0;break;case"Enter":case 13:if(this.selectionExpanded())return this.collapse(),!0;if(this.selectionExpandable()&&!this.selectionToggleable())return this.expandSelection(),!0;return this.selection&&(this.toggleSelection(!0),this.clear()),this.close(),!0;case"Shift":case 16:return!1;case"Esc":case"U+001B":case 27:return this.$menu.is(":visible")?(this.close(),!0):!1;case"U+0020":case 32:if(this.selectionToggleable()&&this.mode==="menu")return this.toggleSelection(),!0;break;case"Left":case 37:if(this.listExpanded()&&this.input.caret()===0)return this.selectionExpanded()||this.input.val()===""?this.collapse():this.select(this.list.first()),!0;break;case"Up":case 38:return this.selectPrev(),!0;case"Right":case 39:if(this.input.caret()===this.input.val().length&&this.expandSelection())return!0;break;case"Down":case 40:return this.selectNext(),!0;case"U+002B":case 187:case 107:if(this.selectionToggleable()&&this.mode==="menu")return this.toggleSelection(!0),!0;break;case"U+002D":case 189:case 109:if(this.selectionToggleable()&&this.mode==="menu")return this.toggleSelection(!1),!0}return this.mode="input",this.updateSearch(),!1},f.prototype.open=function(){return this.$container.show(),this.reposition()},f.prototype.close=function(){var a,b,c,d,e,f,g,h;this.uiLocked=!1,this.$container.hide(),(f=this.list)!=null&&f.remove(),g=this.stack;for(b=d=0,e=g.length;d<e;b=++d)h=g[b],a=h[0],c=h[1],c.remove();return this.list=null,this.stack=[],this.$menu.css("left",0),this.select(null),this.input.selectorClosed()},f.prototype.clear=function(){return clearTimeout(this.timeout),this.input.val(""),this.select(null)},f.prototype.blur=function(){var a=this;return setTimeout(function(){if(!(a.input.hasFocus()||a.$container.find(":focus").length>0))return a.close()},0)},f.prototype.listExpanded=function(){return this.stack.length?!0:!1},f.prototype.parent=function(){return this.listExpanded()?this.stack[this.stack.length-1][0]:null},f.prototype.selectionExpanded=function(){var a,b;return(a=(b=this.selection)!=null?b.hasClass("expanded"):void 0)!=null?a:!1},f.prototype.selectionExpandable=function(){var a,b;return(a=(b=this.selection)!=null?b.hasClass("expandable"):void 0)!=null?a:!1},f.prototype.selectionToggleable=function(a){var b;return a==null&&(a=this.selection),((b=a!=null?a.hasClass("toggleable"):void 0)!=null?b:!1)&&!this.selectionExpanded()},f.prototype.expandSelection=function(){var a,b=this;return!this.selectionExpandable()||!!this.selectionExpanded()?!1:(this.stack.push([this.selection,this.list]),this.clear(),this.$menu.css("width",(this.stack.length+1)*100+"%"),this.uiLocked=!0,a=this.listForQuery(this.preparePost()),a.insertAfter(this.list),this.$menu.animate({left:"-="+this.$menu.parent().css("width")},"fast",function(){return b.list.hide(function(){return b.list=a,b.autoSelectFirst(),b.uiLocked=!1})}))},f.prototype.collapse=function(){var a,b,c,d=this;return this.listExpanded()?(c=this.stack.pop(),a=c[0],b=c[1],this.uiLocked=!0,b.restore(),this.$menu.animate({left:"+="+this.$menu.parent().css("width")},"fast",function(){return d.list.remove(),d.list=b,d.input.val(d.list.query.search),d.select(a),d.uiLocked=!1})):!1},f.prototype.toggleSelection=function(a,b,c){var d,e;b==null&&(b=this.selection),c==null&&(c=!1);if(a==null&&!this.selectionToggleable(b))return!1;d=b.data("id"),a==null&&(a=!b.hasClass("on")),a?(this.selectionToggleable(b)&&!c&&b.addClass("on"),this.input.addToken({value:d,text:(e=b.data("text"))!=null?e:b.text(),noClear:!0,data:b.data("user_data")})):(c||b.removeClass("on"),this.input.removeToken({value:d}));if(!c)return this.updateSelectAll(b)},f.prototype.updateSelectAll=function(a,b){var c,d,e,f=this;b==null&&(b=0),e=a.data("user_data").selectAll,d=b?this.stack[this.stack.length-b][1]:this.list;if(!d.canSelectAll())return;d.updateSelectAll(e,function(a,b){return f.toggleSelection(a,b,!0)});if(b<this.stack.length){b++,c=this.stack[this.stack.length-b][0];if(this.selectionToggleable(c))return d.selectAllActive()?c.addClass("on"):c.removeClass("on"),this.updateSelectAll(c,b)}},f.prototype.select=function(a,b){var c;b==null&&(b=!1);if((a!=null?a[0]:void 0)===((c=this.selection)!=null?c[0]:void 0))return;this.selection=(a!=null?a.length:void 0)?(a.focus(),a.scrollIntoView({ignore:{border:!0}}),a):null;if(!b)return this.mode=a?"menu":"input"},f.prototype.selectNext=function(a){var b;a==null&&(a=!1),this.select(this.selection?this.selection.next().length?this.selection.next():this.selection.parent("ul").next().length?this.selection.parent("ul").next().find("li").first():null:this.list.first(),a);if((b=this.selection)!=null?b.hasClass("message"):void 0)return this.selectNext(a)},f.prototype.selectPrev=function(){var a,b;this.select(this.selection?((a=this.selection)!=null?a.prev().length:void 0)?this.selection.prev():this.selection.parent("ul").prev().length?this.selection.parent("ul").prev().find("li").last():null:this.list.last());if((b=this.selection)!=null?b.hasClass("message"):void 0)return this.selectPrev()},f.prototype.updateSearch=function(){var a=this;return clearTimeout(this.timeout),this.select(null),this.timeout=setTimeout(function(){var b;b=a.listForQuery(a.preparePost());if(b!==a.list){if(b.query.search!==""||!!a.listExpanded())return a.list?(b.insertAfter(a.list),a.list.remove()):(a.open(),b.appendTo(a.$menu)),a.list=b,a.autoSelectFirst();if(a.$menu.is(":visible"))return a.close()}},100)},f.prototype.preparePost=function(a){var c,d,e;return c=b.extend({},(d=this.options.baseData)!=null?d:{},a!=null?a:{},{search:this.input.val().replace(/^\s+|\s+$/g,"")}),(e=c.exclude)==null&&(c.exclude=[]),c.exclude=c.exclude.concat(this.input.baseExclude),this.listExpanded()?c.context=this.parent().data("id"):c.exclude=c.exclude.concat(this.input.tokenValues()),c},f.prototype.collectionForQuery=function(a){var b,c;return b=JSON.stringify(a),this.cache[b]==null&&(c=new e,c.url=this.url,c.fetch({data:a}),this.cache[b]=c),this.cache[b]},f.prototype.listForQuery=function(a){var b,e,f,g=this;return e=this.collectionForQuery(a),f=new d({selector:this,parent:this.parent(),ancestors:function(){var a,c,d,e;d=this.stack,e=[];for(a=0,c=d.length;a<c;a++)b=d[a],e.push(b[0].data("id"));return e}.call(this),collection:e,query:a}),f.render(),e.atLeastOnePageFetched||e.on("fetch",c.once(function(){return g.autoSelectFirst(f)})),f},f.prototype.teardown=function(){return this.$container.remove()},f}()})}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("compiled/widget/TokenInput",["jquery","compiled/widget/TokenSelector","jquery.instructure_misc_plugins"],function(b,c){var d;return d=function(){function d(a,d){var e,f,g=this;this.$node=a,this.options=d,this.$node.data("token_input",this),this.$fakeInput=b("<div />").css("font-family",this.$node.css("font-family")).insertAfter(this.$node).addClass("token_input").click(function(){return g.$input.focus()}),this.nodeName=this.$node.attr("name"),this.$node.removeAttr("name").hide().change(function(){return g.$tokens.html(""),typeof g.change=="function"?g.change(g.tokenValues()):void 0}),this.added=this.options.added,this.change=this.options.change,this.$placeholder=b("<span />"),this.$placeholder.text(this.options.placeholder),this.options.placeholder&&this.$placeholder.appendTo(this.$fakeInput),this.$scroller=b("<div />").appendTo(this.$fakeInput),this.$tokens=b("<ul />").appendTo(this.$scroller),this.$tokens.click(function(a){var c,d;if(d=b(a.target).closest("li")){c=b(a.target).closest("a");if(c.length)return d.remove(),typeof g.change=="function"?g.change(g.tokenValues()):void 0}}),this.$tokens.maxTokenWidth=function(){var a;return parseInt(g.$tokens.css("width").replace("px",""))-((a=g.options.tokenWrapBuffer)!=null?a:150)+"px"},this.$tokens.resizeTokens=function(a){return a.find("div.ellipsis").css("max-width",g.$tokens.maxTokenWidth())},b(window).resize(function(){return g.$tokens.resizeTokens(g.$tokens)}),this.$input=b('<input name="token_capture" />').appendTo(this.$scroller).css("width","20px").css("font-size",this.$fakeInput.css("font-size")).autoGrowInput({comfortZone:20}).focus(function(){return g.$placeholder.hide(),g.active=!0,g.$fakeInput.addClass("active")}).blur(function(){return g.active=!1,setTimeout(function(){var a;if(!g.active)return g.$fakeInput.removeClass("active"),g.$placeholder.showIf(g.val()===""&&!g.$tokens.find("li").length),(a=g.selector)!=null?typeof a.blur=="function"?a.blur():void 0:void 0},50)}).keydown(function(a){return g.inputKeyDown(a)}).keyup(function(a){return g.inputKeyUp(a)});if(this.options.selector){e=(f=this.options.selector.type)!=null?f:c,delete this.options.selector.type;if(this.browser=this.options.selector.browser)delete this.options.selector.browser,b('<a class="browser">browse</a>').click(function(){if(g.selector.browse(g.browser.data))return g.$fakeInput.addClass("browse")}).prependTo(this.$fakeInput),this.$fakeInput.addClass("browsable");this.selector=new e(this,this.$node.data("finder_url"),this.options.selector)}this.baseExclude=[],this.resize()}return d.prototype.teardown=function(){return this.selector.teardown()},d.prototype.resize=function(){var a;return a=this.options.fakeInputWidth||this.$node.css("width"),this.$fakeInput.css("width",a)},d.prototype.addToken=function(a){var c,d,e,f,g,h,i,j,k;return i=(j=a!=null?a.value:void 0)!=null?j:this.val(),f="token_"+i,e=this.$tokens.find("#"+f),g=e.length===0,g&&(e=b("<li />"),h=(k=a!=null?a.text:void 0)!=null?k:this.val(),e.attr("id",f),d=b("<div />").addClass("ellipsis"),d.attr("title",h),d.text(h),e.append(d),c=b("<a />"),e.append(c),e.append(b("<input />").attr("type","hidden").attr("name",this.nodeName+"[]").val(i)),this.$tokens.resizeTokens(e),this.$tokens.append(e)),(a!=null?!a.noClear:!void 0)&&this.val(""),this.$placeholder.hide(),a&&typeof this.added=="function"&&this.added(a.data,e,g),typeof this.change=="function"&&this.change(this.tokenValues()),this.reposition()},d.prototype.hasToken=function(a){var b;return this.$tokens.find("#token_"+((b=a!=null?a.value:void 0)!=null?b:a)).length>0},d.prototype.removeToken=function(a){var b,c;return b="token_"+((c=a!=null?a.value:void 0)!=null?c:a),this.$tokens.find("#"+b).remove(),typeof this.change=="function"&&this.change(this.tokenValues()),this.reposition()},d.prototype.removeLastToken=function(a){return this.$tokens.find("li").last().remove(),typeof this.change=="function"&&this.change(this.tokenValues()),this.reposition()},d.prototype.reposition=function(){var a;return(a=this.selector)!=null&&a.reposition(),this.$scroller.scrollTop(this.$scroller.prop("scrollHeight"))},d.prototype.inputKeyDown=function(b){var c,d,e;this.keyUpAction=!1;if(this.selector){if((c=this.selector)!=null?c.captureKeyDown(b):void 0)return b.preventDefault(),!1;this.$fakeInput.removeClass("browse")}else if((d=(e=b.which,a.call(this.delimiters,e)>=0))!=null?d:[])return this.keyUpAction=this.addToken,b.preventDefault(),!1;return!0},d.prototype.tokenPairs=function(){var a,c,d,e,f,g;f=this.$tokens.find("li"),g=[];for(d=0,e=f.length;d<e;d++)c=f[d],a=b(c),g.push([a.find("input").val(),a.find("div").attr("title")]);return g},d.prototype.tokenValues=function(){var a,b,c,d,e;d=this.$tokens.find("[name='"+this.nodeName+"[]']"),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.value);return e},d.prototype.inputKeyUp=function(a){return this.reposition(),typeof this.keyUpAction=="function"?this.keyUpAction():void 0},d.prototype.bottomOffset=function(){var a;return a=this.$fakeInput.offset(),a.top+=this.$fakeInput.height()+2,a},d.prototype.focus=function(){return this.$input.focus()},d.prototype.hasFocus=function(){return this.active},d.prototype.val=function(a){if(a==null)return this.$input.val();if(a!==this.$input.val())return this.$input.val(a).change(),this.reposition()},d.prototype.caret=function(){var a,b,c,d;return this.$input[0].selectionStart!=null?(c=this.$input[0].selectionStart,a=this.$input[0].selectionEnd):(d=this.val(),b=document.selection.createRange().duplicate(),b.moveEnd("character",d.length),c=b.text===""?d.length:d.lastIndexOf(b.text),b=document.selection.createRange().duplicate(),b.moveStart("character",-d.length),a=b.text.length),c===a?c:-1},d.prototype.selectorClosed=function(){return this.$fakeInput.removeClass("browse")},d}(),b.fn.tokenInput=function(a){return this.each(function(){return new d(b(this),b.extend(!0,{},a))})},d})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/widget/ContextSearch",["i18n!recipient_input","jquery","underscore","compiled/util/contextList","compiled/widget/TokenInput","str/htmlEscape"],function(b,d,e,f,g,h){var i;return i=function(g){function h(b,c){this.contextList=a(this.contextList,this),this.buildContextInfo=a(this.buildContextInfo,this),this.populator=a(this.populator,this),c=d.extend(!0,{},this.defaults(),c),this.prefixUserIds=c.prefixUserIds,this.contexts=c.contexts,c.canToggle&&(this.canToggle=c.canToggle),h.__super__.constructor.call(this,b,c)}return c(h,g),h.prototype.defaults=function(){return{placeholder:b.t("context_search_placeholder","Enter a name, course, or group"),selector:{messages:{noResults:b.t("no_results","No results found")},populator:this.populator,baseData:{synthetic_contexts:1},browser:{data:{types:["context"]}}}}},h.prototype.populator=function(a,c,e,f){var g,h,i,j,k,l,m,n,o;f==null&&(f={}),l=(n=f.noExpand)!=null?n:e.noExpand,e.id=""+e.id,(o=e.type)==null&&(e.type="user"),e.avatar_url&&c.append(d("<img />",{alt:"","class":"avatar",src:e.avatar_url})),g=d("<b />"),g.text(e.name),i=d("<span />",{id:""+e.type+"-"+e.id+"-description"}),j=d("<span />",{"class":"name"}),f.parent||(h=this.buildContextInfo(e)),j.append(g,h),k=d("<span />",{"class":"details"}),e.common_courses!=null?k.html(this.contextList({courses:e.common_courses,groups:e.common_groups})):e.user_count!=null?k.text(b.t("people_count","person",{count:e.user_count})):e.item_count!=null?e.id.match(/_groups$/)?k.text(b.t("groups_count","group",{count:e.item_count})):e.id.match(/_sections$/)&&k.text(b.t("sections_count","section",{count:e.item_count})):e.subText&&k.text(e.subText),i.append(j,k),c.append(i),c.attr("role","menuitem"),c.attr("aria-labelledby",""+e.type+"-"+e.id+"-description"),m=e.name,f.parent&&(e.selectAll&&l?m=f.parent.data("text"):e.id.match(/_\d+_/)&&(m=b.beforeLabel(f.parent.data("text"))+" "+m)),c.data("text",m),c.data("id",e.type==="context"||!this.prefixUserIds?e.id:"user_"+e.id),e.rootId=f.ancestors[0],c.data("user_data",e),c.addClass(e.type),f.level>0&&a.options.showToggles&&(c.prepend('<a class="toggle"><i></i></a>'),this.canToggle(e)&&c.addClass("toggleable"));if(e.type==="context"&&!l)return c.prepend('<a class="expand"><i></i></a>'),c.addClass("expandable")},h.prototype.canToggle=function(a){return!a.item_count},h.prototype.buildContextInfo=function(a){var b,c,e;c=a.id.match(/^(course|section)_(\d+)$/),c&&(e=this.contexts[""+c[1]+"s"][c[2]]),b=a.context_name||"",b=b.length<40?b:b.substr(0,40)+"...";if(e!=null?e.term:void 0)b=b?""+b+" - "+e.term:e.term;return b?d("<span />",{"class":"context_info"}).text("("+b+")"):""},h.prototype.contextList=function(a){return a={courses:e.keys(a.courses),groups:e.keys(a.groups)},f(a,this.contexts,{linkToContexts:!1,hardCutoff:2})},h}(g),d.fn.contextSearch=function(a){return this.each(function(){return new i(d(this),d.extend(!0,{},a))})},i})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("compiled/conversations/Inbox",["i18n!conversations","underscore","str/htmlEscape","compiled/conversations/introSlideshow","compiled/conversations/ConversationsPane","compiled/conversations/MessageFormPane","compiled/conversations/audienceList","compiled/util/contextList","compiled/widget/ContextSearch","compiled/str/TextHelper","jquery.ajaxJSON","jquery.instructure_date_and_time","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.disableWhileLoading","compiled/jquery.rails_flash_notifications","compiled/jquery/offsetFrom","media_comments","vendor/jquery.ba-hashchange","vendor/jquery.elastic","jqueryui/position"],function(c,d,e,f,g,h,i,j,k,l){return function(){function k(b){this.options=b,this.updateView=a(this.updateView,this),this.initializeMenus=a(this.initializeMenus,this),this.canAddNotesFor=a(this.canAddNotesFor,this),this.render=a(this.render,this),this.currentUser=this.options.USER,this.contexts=this.options.CONTEXTS,this.userCache={},this.userCache[this.currentUser.id]=this.currentUser,$(this.render)}return k.prototype.render=function(){this.$inbox=$("#inbox"),this.minHeight=parseInt(this.$inbox.css("min-height").replace("px","")),this.$conversations=$("#conversations"),this.$messages=$("#messages"),this.$messageList=this.$messages.find("ul.messages"),this.$others=$('<div class="others" id="others_popup" />'),this.initializeHelp(),this.initializeForms(),this.initializeMenus(),this.initializeMessageActions(),this.initializeTokenInputs(),this.initializeConversationsPane(),this.initializeMessageFormPane(),this.initializeAutoResize(),this.initializeHashChange();if(this.options.SHOW_INTRO)return f()},k.prototype.filters=function(){var a;return(a=this.conversations.baseData().filter)!=null?a:[]},k.prototype.htmlAudience=function(a,b){var f,g,h,j,k;return b==null&&(b={}),a==null&&(a=(k=this.conversations.active())!=null?k.attributes:void 0),a==null?e(c.t("headings.new_message","New Message")):(g=b.filters=b.highlightFilters?this.filters():[],f=function(){var b,c,e,f;e=a.audience,f=[];for(b=0,c=e.length;b<c;b++)h=e[b],f.push({id:h,name:this.userCache[h].name,activeFilter:d.include(g,"user_"+h)});return f}.call(this),j=i(f,b),f.length&&(j+=" <em>"+this.htmlContextList(a.audience_contexts,b)+"</em>"),j)},k.prototype.htmlContextList=function(a,b){return b==null&&(b={}),a={courses:d.keys(a.courses),groups:d.keys(a.groups)},j(a,this.contexts,b)},k.prototype.htmlNameForUser=function(a,b){var c,d;return b==null&&(b={courses:a.common_courses,groups:a.common_groups}),e(a.name)+(((c=b.courses)!=null?c.length:void 0)||((d=b.groups)!=null?d.length:void 0)?" <em>"+this.htmlContextList(b)+"</em>":"")},k.prototype.canAddNotesFor=function(a){var c,d,e,f,g,h;if(!this.options.NOTES_ENABLED)return!1;e=typeof a=="object"?a:this.userCache[a];if(e==null)return!1;f=e.common_courses;for(c in f){d=f[c];if(b.call(d,"StudentEnrollment")>=0&&(this.options.CAN_ADD_NOTES_FOR_ACCOUNT||((g=this.contexts.courses[c])!=null?(h=g.permissions)!=null?h.manage_user_notes:void 0:void 0)))return!0}return!1},k.prototype.loadConversation=function(a,b,c){var d,e=this;return this.$messageList.removeClass("private").hide().html(""),(typeof $conversation!="undefined"&&$conversation!==null?$conversation.hasClass("private"):void 0)&&this.$messageList.addClass("private"),this.resetMessageForm(a),this.toggleMessageActions(!1),a==null?c():(d=a.url(),this.$messageList.show().disableWhileLoading($.ajaxJSON(d,"GET",{},function(a){var b,d,f,g,h,i,j,k,l;e.conversations.updateItems([a]);if(!e.conversations.isActive(a.id))return;j=a.participants;for(f=0,h=j.length;f<h;f++){d=j[f];if((k=e.userCache[d.id])!=null?!!k.avatar_url:!!void 0)continue;e.userCache[d.id]=d,d.htmlName=e.htmlNameForUser(d)}a["private"]&&(d=function(){var b,c,e,f;e=a.participants,f=[];for(b=0,c=e.length;b<c;b++)d=e[b],d.id!==this.currentUser.id&&f.push(d);return f}.call(e)[0])&&e.formPane.resetForParticipant(d),e.resize(),e.$messages.show(),l=a.messages;for(g=0,i=l.length;g<i;g++)b=l[g],e.$messageList.append(e.buildMessage(b));return e.$messageList.show(),c()})))},k.prototype.resetMessageForm=function(a){var b;return $("#action_compose_message").toggleClass("active",a==null),b=this.conversations.baseData(),this.formPane.reset(d.extend({},this.currentHashData(),{conversation:a,audience:this.htmlAudience(null,{linkToContexts:!0,highlightFilters:!0}),addRecipientsEnabled:a!=null&&!a.get("private"),mediaCommentsEnabled:this.options.MEDIA_COMMENTS_ENABLED,filter:b.filter,scope:b.scope}))},k.prototype.updatedConversation=function(a){var b;this.formPane.refresh(this.htmlAudience(null,{linkToContexts:!0,highlightFilters:!0}));if(!a.length)return;this.conversations.updateItems(a);if(a.length===1){b=a[0],this.conversations.isActive(b.id)&&this.buildMessage(b.messages[0]).prependTo(this.$messageList).slideDown("fast");if(b.visible)return this.updateHashData({id:b.id})}},k.prototype.deselectMessages=function(){return this.$messageList.find("li.selected").removeClass("selected")},k.prototype.addMessage=function(a){return this.toggleMessageActions(!1),this.buildMessage(a).prependTo(this.$messageList).slideDown("fast")},k.prototype.buildMessage=function(a){var b,d,f,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y=this;if(a.submission)return this.buildSubmission(a);f=$("#message_blank").clone(!0).attr("id","message_"+a.id),f.data("id",a.id),f.addClass(a.generated?"generated":a.author_id===this.currentUser.id?"self":"other"),f.addClass("forwardable"),m=this.userCache[a.author_id],(j=m!=null?m.avatar_url:void 0)&&f.prepend($("<img />").attr("src",j).addClass("avatar")),m&&(s=m.htmlName)==null&&(m.htmlName=this.htmlNameForUser(m)),n=(t=m!=null?m.name:void 0)!=null?t:c.t("unknown_user","Unknown user"),f.find(".audience").html((m!=null?m.htmlName:void 0)||e(n)),f.find("span.date").text($.parseFromISO(a.created_at).datetime_formatted),f.find("p").html(l.formatMessage(a.body)),f.find("a.show_quoted_text_link").click(function(a){var b,c;b=$(a.currentTarget),c=b.parents(".quoted_text_holder").children(".quoted_text");if(c.length)return event.stopPropagation(),event.preventDefault(),c.show(),b.hide()}),g=f.find("a.send_private_message"),g.on("click",function(b){return b.preventDefault(),b.stopPropagation(),m=y.userCache[a.author_id],$("#action_compose_message").trigger("click"),y.addUserTokenCb&&clearTimeout(y.addUserTokenCb),y.addUserTokenCb=setTimeout(function(){return delete y.addUserTokenCb,y.formPane.form.addToken({value:m.id,text:m.name,data:m})},100)});if((u=a.forwarded_messages)!=null?u.length:void 0){h=$('<ul class="messages"></ul>'),v=a.forwarded_messages;for(o=0,q=v.length;o<q;o++)k=v[o],h.append(this.buildMessage(k));f.append(h)}h=f.find("ul.message_attachments").first().detach(),d=h.find(".media_object_blank").detach(),b=h.find(".attachment_blank").detach();if(a.media_comment!=null||((w=a.attachments)!=null?w.length:void 0)){f.append(h),a.media_comment!=null&&h.append(this.buildMediaObject(d,a.media_comment));if(a.attachments!=null){x=a.attachments;for(p=0,r=x.length;p<r;p++)i=x[p],h.append(this.buildAttachment(b,i))}}return f},k.prototype.buildMediaObject=function(a,b){var c;return c=a.clone(!0).attr("id","media_comment_"+b.media_id),c.find("span.title").html(e(b.display_name)),c.find("span.media_comment_id").html(e(b.media_id)),c.find(".instructure_inline_media_comment").data("media_comment_type",b.media_type),c},k.prototype.buildAttachment=function(a,b){var c,d,f=this;return c=a.clone(!0).attr("id","attachment_"+b.id),c.data("id",b.id),c.find("span.title").html(e(b.display_name)),d=c.find("a"),d.attr("href",b.url),d.click(function(a){return a.stopPropagation()}),c},k.prototype.buildSubmission=function(a){var b,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this;i=$("#submission_blank").clone(!0).attr("id",a.id),i.data("id",a.id),a=a.submission,j=i.find("ul"),f=j.find("li.header"),l=$.replaceTags(f.find("a").attr("href"),{course_id:a.assignment.course_id,assignment_id:a.assignment_id,id:a.user_id}),f.find("a").attr("href",l),q=this.userCache[a.user_id],q&&(t=q.htmlName)==null&&(q.htmlName=this.htmlNameForUser(q)),r=(u=q!=null?q.name:void 0)!=null?u:c.t("unknown_user","Unknown user"),f.find(".title").html(e(a.assignment.name)),f.find("span.date").text(a.submitted_at?$.parseFromISO(a.submitted_at).datetime_formatted:c.t("not_applicable","N/A")),f.find(".audience").html((q!=null?q.htmlName:void 0)||e(r)),a.score&&a.assignment.points_possible?p=""+a.score+" / "+a.assignment.points_possible:p=(v=a.score)!=null?v:c.t("not_scored","no score"),f.find(".score").html(p),d=j.find(".comment").detach(),n=0,o=4;for(m=s=w=a.submission_comments.length-1;s>=0;m=s+=-1){k=a.submission_comments[m];if(n>=10)break;n++,b=this.buildSubmissionComment(d,k),n>o&&b.hide(),j.append(b)}return h=j.find(".more").detach(),n>o&&(g=h.clone(!0),g.find(".hidden").text(n-o),g.attr("title",e(c.t("titles.expand_inline","Show more comments"))),g.click(function(a){var b;return b=$(a.currentTarget),i=b.closest(".submission"),i.find(".more:hidden").show(),b.hide(),i.find(".comment:hidden").slideDown("fast"),x.resize(),!1}),j.append(g)),a.submission_comments.length>n&&(h.find("a").attr("href",l).attr("target","_blank"),h.find(".hidden").text(a.submission_comments.length-n),h.attr("title",e(c.t("titles.view_submission","Open submission in new window."))),a.submission_comments.length>o&&h.hide(),j.append(h)),i},k.prototype.buildSubmissionComment=function(a,b){var d,f,g,h,i,j;return d=a.clone(!0),g=this.userCache[b.author_id],(f=g!=null?g.avatar_url:void 0)&&d.prepend($("<img />").attr("src",f).addClass("avatar")),g&&(i=g.htmlName)==null&&(g.htmlName=this.htmlNameForUser(g)),h=(j=g!=null?g.name:void 0)!=null?j:c.t("unknown_user","Unknown user"),d.find(".audience").html((g!=null?g.htmlName:void 0)||e(h)),d.find("span.date").text($.parseFromISO(b.created_at).datetime_formatted),d.find("p").html(e(b.comment).replace(/\n/g,"<br />")),d},k.prototype.closeMenus=function(){return $("#actions .menus > li, #conversation_actions, #conversations .actions").removeClass("selected")},k.prototype.openMenu=function(a){var b,c;this.closeMenus();if(!a.hasClass("disabled"))return b=a.parent("li, span").addClass("selected").find("div"),c=-(b.parent().position().left+b.parent().outerWidth()/2)+6,c<-(b.outerWidth()/2)&&(c=-(b.outerWidth()/2)),b.css("margin-left",c+"px")},k.prototype.resize=function(a){var b=this;return a==null&&(a=0),this.resizeCb&&clearTimeout(this.resizeCb),this.resizeCb=setTimeout(function(){var a;return delete b.resizeCb,a=$(window).height()-$("#header").outerHeight(!0)-($("#wrapper-container").outerHeight(!0)-$("#wrapper-container").height())-($("#main").outerHeight(!0)-$("#main").height())-$("#breadcrumbs").outerHeight(!0)-$("#footer").outerHeight(!0),a<b.minHeight&&(a=b.minHeight),$(document.body).toggleClass("too_small",a<=b.minHeight),b.$inbox.height(a),b.$messageList.height(a-b.formPane.height()),b.conversations.resize(a)},a)},k.prototype.toggleMessageActions=function(a){return a!=null?(this.$messageList.find("> li").removeClass("selected"),this.$messageList.find("> li :checkbox").attr("checked",!1)):a=!!this.$messageList.find("li.selected").length,$("#action_forward").parent().showIf(a&&this.$messageList.find("li.selected.forwardable").length),a?$("#message_actions").slideDown(100):$("#message_actions").slideUp(100),this.formPane.toggle(a)},k.prototype.updateHashData=function(a){var b,c;b=$.extend(this.currentHashData(),a),c=$.encodeToHex(JSON.stringify(b));if(c!==location.hash.substring(1))return location.hash=c,$(document).triggerHandler("document_fragment_change",c)},k.prototype.initializeHelp=function(){var a=this;return $("#help_crumb").click(function(a){return a.preventDefault(),f()})},k.prototype.prepareTextareas=function(a){var b=this;return a.elastic(),a.keypress(function(a){if(a.which===13&&a.shiftKey)return $(a.target).closest("form").submit(),!1})},k.prototype.initializeForms=function(){var a=this;return this.$addForm=$("#add_recipients_form"),this.$forwardForm=$("#forward_message_form"),this.prepareTextareas(this.$forwardForm.find("textarea")),this.$addForm.submit(function(b){var c;return c=!!a.$addForm.find(".token_input li").length,c||b.stopImmediatePropagation(),c}),this.$addForm.formSubmit({disableWhileLoading:!0,success:function(b){return a.updatedConversation(b),a.$addForm.dialog("close")},error:function(b){return a.$addForm.dialog("close")}}),this.$forwardForm.submit(function(b){var c;return c=!!a.$forwardForm.find("#forward_body").val()&&!!a.$forwardForm.find(".token_input li").length,c||b.stopImmediatePropagation(),c}),this.$forwardForm.formSubmit({disableWhileLoading:!0,success:function(b){return a.updatedConversation(b),a.$forwardForm.dialog("close")},error:function(b){return a.$forwardForm.dialog("close")}}),this.$messageList.click(function(b){var c;if(!$(b.target).closest("a.instructure_inline_media_comment, .mejs-container").length)return c=$(b.target).closest("#messages > ul > li"),c.hasClass("generated")||(c.toggleClass("selected"),c.find("> :checkbox").attr("checked",c.hasClass("selected"))),a.toggleMessageActions()})},k.prototype.initializeMenus=function(){var a=this;return $(".menus > li > a").click(function(b){return b.preventDefault(b),a.openMenu($(b.currentTarget))}).focus(function(b){return a.openMenu($(b.currentTarget))}),$(document).bind("mousedown",function(b){$(b.target).closest("#others_popup").length||a.$others.hide();if(!$(b.target).closest(".menus > li, #conversation_actions, #conversations .actions").length)return a.closeMenus()}),this.$menuViews=$("#menu_views"),this.$menuViewsList=this.$menuViews.parent(),this.$menuViewsList.find("li a").click(function(b){var c;a.closeMenus();if(c=$(b.target).closest("li").data("scope"))return b.preventDefault(),a.updateHashData({scope:c})}),$("#conversations ul, #create_message_form").on("click",".others",function(b){var c,d,e;return d=$(b.currentTarget),c=d.closest("li").offsetParent(),e=d.offsetFrom(c),a.$others.empty().append(d.find("> span").clone()).css({left:e.left,top:e.top+d.height()+c.scrollTop(),fontSize:d.css("fontSize")}),c.append(a.$others.show()),!1})},k.prototype.setScope=function(a){var b,c;return c=this.$menuViewsList.find("li"),c.removeClass("checked"),b=c.filter("[data-scope="+a+"]"),b.length||(b=c.filter("[data-scope=inbox]")),b.addClass("checked"),this.$menuViews.text(b.text())},k.prototype.initializeMessageActions=function(){var a=this;return $("#message_actions").find("a").click(function(a){return a.preventDefault()}),$("#cancel_bulk_message_action").click(function(){return a.toggleMessageActions(!1)}),$("#action_delete").click(function(b){var d,e,f;e=a.conversations.active();if(e==null)return;d=a.$messageList.find(".selected"),f=d.length>1?c.t("confirm.delete_messages","Are you sure you want to delete your copy of these messages? This action cannot be undone."):c.t("confirm.delete_message","Are you sure you want to delete your copy of this message? This action cannot be undone.");if(confirm(f))return d.fadeOut("fast"),a.conversations.action($(b.currentTarget),{conversationId:e.id,data:{remove:function(){var a,b,c;c=[];for(a=0,b=d.length;a<b;a++)f=d[a],c.push($(f).data("id"));return c}()},success:function(){return a.toggleMessageActions(!1)},error:function(){return d.show()}})}),$("#action_forward").click(function(b){var d;if(a.conversations.active()==null)return;return a.$forwardForm.find("input[name!=authenticity_token], textarea").val("").change(),d=a.$forwardForm.find("ul.messages").first(),d.html(""),d.html(a.$messageList.find("> li.selected.forwardable").clone(!0).removeAttr("id").removeClass("self")),d.find("> li").removeClass("selected odd").find("> :checkbox").attr("checked",!0).attr("name","forwarded_message_ids[]").val(function(){return $(this).closest("li").data("id")}),d.find("> li").last().addClass("last"),a.$forwardForm.css("max-height",$(window).height()-300+"px").dialog({position:"center",height:"auto",width:510,title:c.t("title.forward_messages","Forward Messages"),buttons:[{text:c.t("#buttons.cancel","Cancel"),click:function(){return $(this).dialog("close")}},{text:c.t("buttons.send_message","Send"),click:function(){return $(this).submit()},"class":"btn-primary"}],open:function(){return a.$forwardForm.attr({action:"/conversations?"+$.param(a.conversations.baseData())})},close:function(){return $("#forward_recipients").data("token_input").$input.blur()}})}),$("#action_compose_message").click(function(b){return b.preventDefault(),a.updateHashData({id:null})})},k.prototype.addRecipients=function(a){var b=this;if(this.conversations.active()==null)return;return this.$addForm.attr("action",a.prop("href")).dialog({width:420,title:c.t("title.add_recipients","Add Recipients"),buttons:[{text:c.t("buttons.add_people","Add People"),click:function(){return b.$addForm.submit()}},{text:c.t("#buttons.cancel","Cancel"),click:function(){return b.$addForm.dialog("close")}}],open:function(){var a;return a=$("#add_recipients").data("token_input"),a.baseExclude=b.conversations.active().get("audience"),b.$addForm.find("input[name!=authenticity_token]").val("").change()},close:function(){return $("#add_recipients").data("token_input").$input.blur()}})},k.prototype.initializeTokenInputs=function(a){var b,d,e,f=this;b=c.t("enrollments_everyone","Everyone"),e=c.t("select_all","Select All"),(a!=null?a:$(document)).find(".recipients").contextSearch({contexts:this.contexts,added:function(a,b,d){var e,g,h;a.id=""+a.id,d&&a.rootId&&b.append("<input type='hidden' name='tags[]' value='"+a.rootId+"'>"),d&&a.type&&(b.addClass(a.type),a.user_count!=null&&(b.addClass("details"),e=$("<span />"),e.text(c.t("people_count","person",{count:a.user_count})),b.append(e),b.data("user_count",a.user_count)));if(!a.id.match(/^(course|group)_/))return a=$.extend({},a),delete a.avatar_url,g=(h=f.userCache[a.id])!=null?h:{},f.userCache[a.id]=$.extend(g,a)},canToggle:function(a){var b;return a.type==="user"||((b=a.permissions)!=null?b.send_messages_all:void 0)},selector:{showToggles:!0,includeEveryoneOption:function(a,c){var d;if((d=a.context)!=null?d.match(/^(course|section)_\d+$/):void 0)return b},includeSelectAllOption:function(a,b){var c,d,f;if(((c=a.context)!=null?c.match(/^((course|section)_\d+_.*|group_\d+)$/):void 0)&&((d=a.context)!=null?!d.match(/^(course|section)_\d+$/):!void 0)&&((f=a.context)!=null?!f.match(/^course_\d+_(groups|sections)$/):!void 0)&&b.data("user_data").permissions.send_messages_all)return e},baseData:{permissions:["send_messages_all"]}}});if(a)return;return this.filterNameMap={},$("#context_tags").contextSearch({contexts:this.contexts,prefixUserIds:!0,added:function(a,b,c){return b.prevAll().remove()},tokenWrapBuffer:80,selector:{includeEveryoneOption:function(a,c){var d;if((d=a.context)!=null?d.match(/^course_\d+$/):void 0)return b},includeFilterOption:function(a){var b,d;if((b=a.context)!=null?b.match(/^course_\d+$/):void 0)return c.t("filter_by_course","Filter by this course");if((d=a.context)!=null?d.match(/^group_\d+$/):void 0)return c.t("filter_by_group","Filter by this group")},baseData:{synthetic_contexts:1,types:["course","user","group"],include_inactive:!0}}}),d=$("#context_tags").data("token_input"),d.change=function(a){var b,c;return b=function(){var a,b,e,f;e=d.tokenPairs(),f=[];for(a=0,b=e.length;a<b;a++)c=e[a],this.filterNameMap[c[0]]=c[1],f.push(c[0]);return f}.call(f),f.updateHashData({filter:b})}},k.prototype.initializeConversationsPane=function(){return this.conversations=new g(this,this.$conversations)},k.prototype.initializeMessageFormPane=function(){return this.formPane=new h(this,{folderId:this.options.FOLDER_ID})},k.prototype.addedMessageForm=function(a){return this.prepareTextareas(a.find("textarea")),this.initializeTokenInputs(a)},k.prototype.initializeAutoResize=function(){var a=this;return $(window).resize(function(){return a.resize(50)}),this.resize()},k.prototype.currentHashData=function(){var a,b;try{a=$.parseJSON($.decodeFromHex(location.hash.substring(1)))||{}}catch(c){b=c,a={}}return a},k.prototype.updateView=function(a){var b,c,d;a==null&&(a=!1),c=location.hash,b=this.currentHashData(),b.force=a;if(b.filter){b.filter=function(){var a,c,e,f;e=b.filter,f=[];for(a=0,c=e.length;a<c;a++)d=e[a],this.filterNameMap[d]&&f.push(d);return f}.call(this);if(!b.filter.length)return this.updateHashData({filter:null})}return this.setScope(b.scope),this.conversations.updateView(b)},k.prototype.initializeHashChange=function(){var a=this;return $(window).bind("hashchange",function(){return a.updateView()}).triggerHandler("hashchange")},k}()})}.call(this),function(){require(["compiled/conversations/Inbox","jquery.google-analytics"],function(a){return new a(ENV.CONVERSATIONS),$("#create_message_form").on("click","div.token_input",function(a){return $.trackEvent("Compose Message","Select Recipient","Text Field")}),$("#create_message_form").on("click","a.browser",function(a){return $.trackEvent("Compose Message","Select Recipient","Picker Button")}),$("body").on("click","div.autocomplete_menu li.selectable",function(a){var b;return b=$(a.currentTarget).hasClass("context")?"Course/Group":"User",$.trackEvent("Autocomplete","Click",b)}),$("#context_tags_filter").on("click","div.token_input",function(a){return $.trackEvent("Filter","From/To","Text Field")}),$("#context_tags_filter").on("click","a.browser",function(a){return $.trackEvent("Filter","From/To","Picker Button")})})}.call(this),define("compiled/bundles/conversations",function(){})