(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},e=[].slice;define("compiled/collections/PaginatedCollection",["Backbone","underscore"],function(b,f){var g,h,i;return h=function(a){return a==null&&(a=""),a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},g=function(b){function g(){return this._setStateAfterFetch=a(this._setStateAfterFetch,this),i=g.__super__.constructor.apply(this,arguments),i}return c(g,b),g.prototype.nameRegex=/rel="([a-z]+)/,g.prototype.linkRegex=/^<([^>]+)/,g.prototype.pageRegex=/\Wpage=(\d+)/,g.prototype.perPageRegex=/\per_page=(\d+)/,g.prototype.parse=function(a,b){var c,e,f;return(c=this._urlCache)==null&&(this._urlCache=[]),(e=this._lastFetchOptions)==null&&(this._lastFetchOptions={}),this._setStateAfterFetch(b,this._lastFetchOptions),(f=this._lastFetchOptions.url,d.call(this._urlCache,f)<0)&&this._urlCache.push(this._lastFetchOptions.url),delete this._lastFetchOptions,g.__super__.parse.apply(this,arguments)},g.prototype.fetch=function(a){var b,c=this;return a==null&&(a={}),b="fetching"+h(a.page)+"Page",this[b]=!0,a.page!=null&&(this.urls!=null&&(a.url=this.urls[a.page]),a.add==null&&(a.add=!0),a.data=""),this._lastFetchOptions=a,this.trigger("beforeFetch",this,a),a.page!=null&&this.trigger("beforeFetch:"+a.page,this,a),g.__super__.fetch.call(this,a).done(function(d,f,g){var h;c[b]=!1,c.trigger("fetch",c,d,a),a.page!=null&&c.trigger("fetch:"+a.page,c,d,a);if((h=c.urls)!=null?!h.next:!void 0)return c.trigger.apply(c,["fetched:last"].concat(e.call(arguments)))})},g.prototype.canFetch=function(a){return this.urls!=null&&this.urls[a]!=null},g.prototype._setStateAfterFetch=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p;return b==null&&(b={}),j=(l=b.url,d.call(this._urlCache,l)<0),c=this.urls==null,g=c||((m=b.page)==="next"||m==="bottom")&&j,h=c||((n=b.page)==="prev"||n==="top")&&j,e=this.urls,this.urls=this._parsePageLinks(a),g&&this.urls.next!=null?this.urls.bottom=this.urls.next:this.urls.next?this.urls.bottom=e.bottom:delete this.urls.bottom,h&&this.urls.prev!=null?this.urls.top=this.urls.prev:this.urls.prev?this.urls.top=e.top:delete this.urls.top,i=(o=this.urls.first)!=null?o:this.urls.next,i!=null&&(f=parseInt(i.match(this.perPageRegex)[1],10),((p=(k=this.options).params)!=null?p:k.params={}).per_page=f),this.urls.last&&(this.totalPages=parseInt(this.urls.last.match(this.pageRegex)[1],10)),this.atLeastOnePageFetched=!0},g.prototype._parsePageLinks=function(a){var b,c,d=this;return b=(c=a.getResponseHeader("link"))!=null?c.split(","):void 0,b==null&&(b=[]),f.reduce(b,function(a,b){var c,e;return c=b.match(d.nameRegex)[1],e=b.match(d.linkRegex)[1],a[c]=e,a},{})},g}(b.Collection)})}).call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/WikiPage",["Backbone","compiled/str/splitAssetString"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments),e}return b(d,a),d.prototype.resourceName="pages",d.prototype.parse=function(a,b){return a.id=a.url,a},d.prototype.toJSON=function(){var a,b,e,f,g,h,i,j;return f=d.__super__.toJSON.apply(this,arguments),a=((h=this.collection)!=null?h.contextAssetString:void 0)||ENV.context_asset_string,g=((i=this.collection)!=null?i.resourceName:void 0)||this.resourceName,f.url&&a&&g&&(j=c(a),e=j[0],b=j[1],f.htmlUrl="/"+e+"/"+b+"/"+g+"/"+f.url),f},d}(a.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/collections/WikiPageCollection",["compiled/collections/PaginatedCollection","compiled/models/WikiPage"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments),e}return b(d,a),d.prototype.model=c,d}(a)})}.call(this),define("translations/collection_view",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{collection_view:{no_items:"لا توجد عناصر."}},es:{collection_view:{no_items:"No hay elementos."}},fr:{collection_view:{no_items:"Aucun élément"}},ja:{collection_view:{no_items:"アイテムがありません。"}},ko:{collection_view:{no_items:"항목이 없습니다."}},nl:{collection_view:{no_items:"Geen items."}},pt:{collection_view:{no_items:"Nenhum item."}},ru:{collection_view:{no_items:"Элементы отсутствуют."}},zh:{collection_view:{no_items:"没有项目。"}}}})}),define("translations/paginated_collection",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{paginated_collection:{no_items:"لا توجد عناصر."}},es:{paginated_collection:{no_items:"No hay elementos."}},fr:{paginated_collection:{no_items:"Aucun élément"}},ja:{paginated_collection:{no_items:"アイテムがありません。"}},ko:{paginated_collection:{no_items:"항목이 없습니다."}},nl:{paginated_collection:{no_items:"Geen items."}},pt:{paginated_collection:{no_items:"Nenhum item."}},ru:{paginated_collection:{no_items:"Элементы отсутствуют."}},zh:{paginated_collection:{no_items:"没有项目。"}}}})}),define("translations/wiki.wiki_page_buttons",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{wiki:{wiki_page_buttons:{buttons:{new_page:"صفحة جديدة"}}}},es:{wiki:{wiki_page_buttons:{buttons:{new_page:"Nueva página"}}}},fr:{wiki:{wiki_page_buttons:{buttons:{new_page:"Nouvelle page"}}}},ja:{wiki:{wiki_page_buttons:{buttons:{new_page:"新しいページ"}}}},ko:{},nl:{},pt:{wiki:{wiki_page_buttons:{buttons:{new_page:"Nova página"}}}},ru:{wiki:{wiki_page_buttons:{buttons:{new_page:"Новая страница"}}}},zh:{wiki:{wiki_page_buttons:{buttons:{new_page:"新页面"}}}}}})}),define("jst/collectionView",["compiled/handlebars_helpers","i18n!collection_view"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.collectionView=b(function(a,b,c,d,e){function o(a,b){return'\n<ul class="collectionViewItems"></ul>\n'}function p(a,b){var d="",e,f,g,h;d+="\n<p>\n  ",e="No items.",f="no_items",g={},h="collection_view",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="\n</p>\n",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0;i=c.collection,g=i||b.collection,g=g===null||g===undefined||g===!1?g:g.length,h=c["if"],j=k.program(1,o,e),j.hash={},j.fn=j,j.inverse=k.program(3,p,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f}),c.collectionView}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/CollectionView",["jquery","Backbone","jst/collectionView"],function(b,d,e){var f,g;return f=function(d){function f(){return this.renderItem=a(this.renderItem,this),this.rerenderUnlessCollection=a(this.rerenderUnlessCollection,this),this.renderOnAdd=a(this.renderOnAdd,this),this.removeItem=a(this.removeItem,this),this.renderOnReset=a(this.renderOnReset,this),this.removePreviousItems=a(this.removePreviousItems,this),this.render=a(this.render,this),g=f.__super__.constructor.apply(this,arguments),g}return c(f,d),f.optionProperty("itemView"),f.optionProperty("itemViewOptions"),f.prototype.className="collectionView",f.prototype.els={".collectionViewItems":"$list"},f.prototype.defaults={itemViewOptions:{}},f.prototype.template=e,f.prototype.initialize=function(a){return f.__super__.initialize.apply(this,arguments),this.attachCollection()},f.prototype.render=function(){return f.__super__.render.apply(this,arguments),this.collection.length&&this.renderItems(),this},f.prototype.toJSON=function(){return this.options},f.prototype.attachCollection=function(){return this.collection.on("reset",this.renderOnReset),this.collection.on("add",this.renderOnAdd),this.collection.on("remove",this.removeItem),this.collection.on("remove",this.rerenderUnlessCollection)},f.prototype.removePreviousItems=function(a){var b=this;return this.$list.children().each(function(a,c){var d;return(d=b.$(c).data("view"))!=null?d.remove():void 0})},f.prototype.renderOnReset=function(){return this.removePreviousItems(),this.render()},f.prototype.renderItems=function(){return this.collection.each(this.renderItem)},f.prototype.removeItem=function(a){return a.view.remove()},f.prototype.renderOnAdd=function(a){return this.collection.length===1?this.render():this.renderItem(a)},f.prototype.rerenderUnlessCollection=function(){if(!this.collection.length)return this.render()},f.prototype.renderItem=function(a){var c;return c=new this.itemView(b.extend({},this.itemViewOptions||{},{model:a})),c.render(),this.insertView(c)},f.prototype.insertView=function(a){var b;return b=this.collection.indexOf(a.model),b===0?this.prependView(a):b===this.collection.length-1?this.appendView(a):this.insertViewAtIndex(a,b)},f.prototype.insertViewAtIndex=function(a,b){var c;return c=this.$list.children().eq(b),c.length?c.before(a.el):this.$list.append(a.el)},f.prototype.prependView=function(a){return this.$list.prepend(a.el)},f.prototype.appendView=function(a){return this.$list.append(a.el)},f}(d.View)})}.call(this),define("jst/paginatedCollection",["compiled/handlebars_helpers","i18n!paginated_collection"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.paginatedCollection=b(function(a,b,c,d,e){function o(a,b){return'\n<ul class="collectionViewItems"></ul>\n'}function p(a,b){var d="",e,f,g,h;d+="\n<p>\n  ",e="No items.",f="no_items",g={},h="paginated_collection",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="\n</p>\n",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0;i=c.collection,g=i||b.collection,g=g===null||g===undefined||g===!1?g:g.length,h=c["if"],j=k.program(1,o,e),j.hash={},j.fn=j,j.inverse=k.program(3,p,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n\n<div class="paginatedLoadingIndicator">Loading</div>\n\n',f}),c.paginatedCollection}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/PaginatedCollectionView",["jquery","underscore","compiled/views/CollectionView","jst/paginatedCollection"],function(b,d,e,f){var g,h;return g=function(g){function i(){return this.showLoadingIndicator=a(this.showLoadingIndicator,this),this.hideLoadingIndicator=a(this.hideLoadingIndicator,this),this.checkScroll=a(this.checkScroll,this),this.detachScroll=a(this.detachScroll,this),this.attachScroll=a(this.attachScroll,this),h=i.__super__.constructor.apply(this,arguments),h}return c(i,g),i.prototype.defaults={buffer:500,scrollContainer:window},i.prototype.els=d.extend({},e.prototype.els,{".paginatedLoadingIndicator":"$loadingIndicator"}),i.optionProperty("scrollContainer"),i.prototype.template=f,i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.initScrollContainer()},i.prototype.attachCollection=function(){return i.__super__.attachCollection.apply(this,arguments),this.collection.on("reset",this.attachScroll),this.collection.on("fetched:last",this.detachScroll),this.collection.on("beforeFetch",this.showLoadingIndicator),this.collection.on("fetch",this.hideLoadingIndicator)},i.prototype.initScrollContainer=function(){return this.scrollContainer=b(this.scrollContainer),this.heightContainer=this.scrollContainer[0]===window?document.body:this.scrollContainer[0]},i.prototype.attachScroll=function(){var a,b;return b="scroll.pagination:"+this.cid,a="resize.pagination:"+this.cid,this.scrollContainer.on(b,this.checkScroll),this.scrollContainer.on(a,this.checkScroll)},i.prototype.detachScroll=function(){return this.scrollContainer.off(".pagination:"+this.cid)},i.prototype.checkScroll=function(){var a;if(this.fetchingPage)return;a=this.heightContainer.scrollHeight-this.scrollContainer.scrollTop()-this.scrollContainer.height();if(a<this.options.buffer)return this.collection.fetch({page:"next"})},i.prototype.remove=function(){return this.detachScroll(),i.__super__.remove.apply(this,arguments)},i.prototype.afterRender=function(){return i.__super__.afterRender.apply(this,arguments),this.hideLoadingIndicator()},i.prototype.hideLoadingIndicator=function(){var a;return(a=this.$loadingIndicator)!=null?a.hide():void 0},i.prototype.showLoadingIndicator=function(){var a;return(a=this.$loadingIndicator)!=null?a.show():void 0},i}(e)})}.call(this),define("jst/wiki/WikiPageIndexItem",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["wiki/WikiPageIndexItem"]=b(function(a,b,c,d,e){function p(a,b){return"text-success"}function q(a,b){return"muted"}function r(a,b){return' <span class="label">Front Page</span>'}function s(a,b){var d="",e;return d+=" by ",i=c.last_edited_by,e=i||a.last_edited_by,e=e===null||e===undefined||e===!1?e:e.display_name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"last_edited_by.display_name",{hash:{}})),d+=o(e),d}function t(a,b){return"text-success"}function u(a,b){return"muted"}function v(a,b){return"publish"}function w(a,b){return"unpublished"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<td><a href="',i=c.htmlUrl,g=i||b.htmlUrl,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"htmlUrl",{hash:{}})),f+=o(g)+'" class="',i=c.published,g=i||b.published,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(3,q,e),g=h.call(b,g,j);if(g||g===0)f+=g;f+='">',i=c.title,g=i||b.title,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"title",{hash:{}})),f+=o(g)+"</a>",i=c.front_page,g=i||b.front_page,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="</td>\n<td>",i=c.created_at,g=i||b.created_at,i=c.friendlyDatetime,h=i||b.friendlyDatetime,typeof h===l?g=h.call(b,g,{hash:{}}):h===n?g=m.call(b,"friendlyDatetime",g,{hash:{}}):g=h,f+=o(g)+"</td>\n<td>",i=c.updated_at,g=i||b.updated_at,i=c.friendlyDatetime,h=i||b.friendlyDatetime,typeof h===l?g=h.call(b,g,{hash:{}}):h===n?g=m.call(b,"friendlyDatetime",g,{hash:{}}):g=h,f+=o(g),i=c.last_edited_by,g=i||b.last_edited_by,h=c["if"],j=k.program(7,s,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='</td>\n<td><span class="',i=c.published,g=i||b.published,h=c["if"],j=k.program(9,t,e),j.hash={},j.fn=j,j.inverse=k.program(11,u,e),g=h.call(b,g,j);if(g||g===0)f+=g;f+='"><i class="icon-',i=c.published,g=i||b.published,h=c["if"],j=k.program(13,v,e),j.hash={},j.fn=j,j.inverse=k.program(15,w,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+='"></i></span></td>',f}),c["wiki/WikiPageIndexItem"]}),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/views/wiki/WikiPageIndexItemView",["Backbone","jst/wiki/WikiPageIndexItem"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments),e}return b(d,a),d.prototype.template=c,d.prototype.tagName="tr",d}(a.View)})}.call(this),define("jst/wiki/_wiki_page_buttons",["compiled/handlebars_helpers","i18n!wiki.wiki_page_buttons"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["wiki/_wiki_page_buttons"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+='<div id="wiki_page_buttons" class="clearfix">\n  <div id="pages-toolbar-right-buttons" style="float:right;">\n    <button class="btn btn-primary new_page">',g="New Page",h="buttons.new_page",i={},j="wiki.wiki_page_buttons",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</button>\n  </div>\n</div>\n",f}),a.registerPartial("wiki/wiki_page_buttons",c["wiki/_wiki_page_buttons"]),c["wiki/_wiki_page_buttons"]}),define("jst/wiki/WikiPageIndex",["compiled/handlebars_helpers","jst/wiki/_wiki_page_buttons"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["wiki/WikiPageIndex"]=b(function(a,b,c,d,e){function l(a,b){var d="",e,f;d+="\n        ",i=c.collection,e=i||a.collection,e=e===null||e===undefined||e===!1?e:e.length,f=c.unless,j=k.program(2,m,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n      ",d}function m(a,b){return'\n        <tr><td colspan="4">No pages created yet. <a class="new_page" href="#">Add one!</a></td></tr>\n        '}c=c||a.helpers,d=d||a.partials;var f="",g,h,i,j,k=this;g=b,g=k.invokePartial(d["wiki/wiki_page_buttons"],"wiki/wiki_page_buttons",g,c,d);if(g||g===0)f+=g;f+='\n<div id="wiki_page_index_content">\n  <table id="wiki_page_index" class="table">\n    <thead><tr>\n      <th>PAGE TITLE</th>\n      <th>CREATION DATE</th>\n      <th>LAST EDIT</th>\n      <th></th>\n    </tr></thead>\n    <tbody class="collectionViewItems">\n      ',i=c.fetched,g=i||b.fetched,h=c["if"],j=k.program(1,l,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n    </tbody>\n  </table>\n</div>",f}),c["wiki/WikiPageIndex"]}),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/views/wiki/WikiPageIndexView",["compiled/views/PaginatedCollectionView","compiled/views/wiki/WikiPageIndexItemView","jst/wiki/WikiPageIndex"],function(a,c,d){var e,f;return e=function(a){function e(){return f=e.__super__.constructor.apply(this,arguments),f}return b(e,a),e.mixin({el:"#content",template:d,itemView:c,events:{"click .new_page":"createNewPage"}}),e.prototype.createNewPage=function(a){return a!=null&&a.preventDefault(),alert("This will eventually create a new page")},e.prototype.toJSON=function(){var a;return a=e.__super__.toJSON.apply(this,arguments),a.fetched=this.fetched,a},e}(a)})}.call(this),function(){require(["compiled/collections/WikiPageCollection","compiled/views/wiki/WikiPageIndexView"],function(a,b){var c;return c=new b({collection:new a}),c.collection.fetch({data:{sort:"title",per_page:30}}).then(function(){c.fetched=!0;if(c.collection.models.length===0)return c.render()}),c.render()})}.call(this),define("compiled/bundles/wiki_page_index",function(){})