define("translations/collaborations",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{collaborations:{collaboration:{"delete":"هل ترغب بالتأكيد في حذف هذا التعاون؟"},errors:{no_name:"الرجاء إدخال اسم لهذا التعاون.",title_too_long:"الرجاء استخدام %{maxLength} حرفًا أو أقل للاسم. استخدم الوصف للمحتوى الإضافي."},titles:{"delete":"هل تريد حذف التعاون؟"}}},es:{collaborations:{collaboration:{"delete":"¿Está seguro de que desea borrar esta colaboración?"},errors:{no_name:"Por favor, introduzca un nombre para esta colaboración.",title_too_long:"Emplee un máximo de %{maxLength} caracteres para el nombre. Utilice la descripción para el contenido adicional."},titles:{"delete":"¿Borrar esta colaboración?"}}},fr:{collaborations:{collaboration:{"delete":"Voulez-vous vraiment supprimer cette collaboration ?"},errors:{no_name:"Veuillez saisir un nom pour cette collaboration.",title_too_long:"Le nom ne doit pas dépasser %{maxLength} caractères. Complétez avec la description."},titles:{"delete":"Supprimer la collaboration ?"}}},ja:{collaborations:{collaboration:{"delete":"この共同作業を削除してもよろしいですか?"},errors:{no_name:"この共同作業の名前を入力してください",title_too_long:"名前には、%{maxLength} 文字以下を使用してください。内容を追加する場合は、説明を使用してください。"},titles:{"delete":"共同作業を削除しますか?"}}},ko:{collaborations:{collaboration:{"delete":"이 대화를 삭제하시겠습니까?"},errors:{no_name:"이 문서의 이름 입력",title_too_long:"이름은 %{maxLength} 글자 이내로 지어주시기 바랍니다. 추가 내용은 설명을 사용하십시오."},titles:{"delete":"협업을 삭제하시겠습니까?"}}},nl:{collaborations:{collaboration:{"delete":"Weet je zeker dat je deze samenwerking wil verwijderen?"},errors:{no_name:"Geef een naam voor dit document"},titles:{"delete":"Verwijder samenwerking?"}}},pt:{collaborations:{collaboration:{"delete":"Tem a certeza de que pretende eliminar esta colaboração?"},errors:{no_name:"Introduza um nome para esta colaboração.",title_too_long:"Utilize %{maxLength} caracteres ou menos para o nome. Utilize a descrição para conteúdo adicional."},titles:{"delete":"Eliminar colaboração?"}}},ru:{collaborations:{collaboration:{"delete":"Вы уверены, что хотите удалить эту совместную работу?"},errors:{no_name:"Введите название для этой совместной работы",title_too_long:"Пожалуйста, используйте не больше %{maxLength} символов для имени. Используйте описание для дополнительного содержимого."},titles:{"delete":"Удалить совместную работу?"}}},zh:{collaborations:{collaboration:{"delete":"是否确定要删除此协作?"},errors:{no_name:"请输入此协作的名称。",title_too_long:"请将 %{maxLength} 个或更少字符用于名称。对于其他内容，请使用描述。"},titles:{"delete":"删除协作？"}}}}})}),function(){define("compiled/util/registerTemplateCss",[],function(){var a,b,c,d,e,f;return b=window.document,e={},c=function(a,b){return e[a]=b,d()},c.clear=function(){return e={},d()},d=function(){var c,d,f,g,h;f=[];for(h in e)d=e[h],f.push("/* From: "+h+" */"),f.push(d);return c=f.join("\n"),g=a(),"cssText"in g?g.cssText=c:g.appendChild(b.createTextNode(c))},f=null,a=function(){var a,c;if(f){while(a=f.firstChild)f.removeChild(a);return f}return b.createStyleSheet?f=b.createStyleSheet():(c=b.head||b.getElementsByTagName("head")[0],f=b.createElement("style"),c.appendChild(f))},c})}.call(this),define("translations/paginated_view",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{paginated_view:{loading_more_results:"تحميل مزيد من النتائج"}},es:{paginated_view:{loading_more_results:"Cargando más resultados"}},fr:{paginated_view:{loading_more_results:"Chargement de résultats supplémentaires"}},ja:{paginated_view:{loading_more_results:"より多くの結果を読み込んでいます"}},ko:{paginated_view:{loading_more_results:"더 많은 결과 로드"}},nl:{paginated_view:{loading_more_results:"Meer resultaten aan het laden"}},pt:{paginated_view:{loading_more_results:"Carregando mais resultados"}},ru:{paginated_view:{loading_more_results:"Загрузка других результатов"}},zh:{paginated_view:{loading_more_results:"正在加载其他结果"}}}})}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},e=[].slice;define("compiled/collections/PaginatedCollection",["Backbone","underscore"],function(b,f){var g,h,i;return h=function(a){return a==null&&(a=""),a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},g=function(b){function g(){return this._setStateAfterFetch=a(this._setStateAfterFetch,this),i=g.__super__.constructor.apply(this,arguments),i}return c(g,b),g.prototype.nameRegex=/rel="([a-z]+)/,g.prototype.linkRegex=/^<([^>]+)/,g.prototype.pageRegex=/\Wpage=(\d+)/,g.prototype.perPageRegex=/\per_page=(\d+)/,g.prototype.parse=function(a,b){var c,e,f;return(c=this._urlCache)==null&&(this._urlCache=[]),(e=this._lastFetchOptions)==null&&(this._lastFetchOptions={}),this._setStateAfterFetch(b,this._lastFetchOptions),(f=this._lastFetchOptions.url,d.call(this._urlCache,f)<0)&&this._urlCache.push(this._lastFetchOptions.url),delete this._lastFetchOptions,g.__super__.parse.apply(this,arguments)},g.prototype.fetch=function(a){var b,c=this;return a==null&&(a={}),b="fetching"+h(a.page)+"Page",this[b]=!0,a.page!=null&&(this.urls!=null&&(a.url=this.urls[a.page]),a.add==null&&(a.add=!0),a.data=""),this._lastFetchOptions=a,this.trigger("beforeFetch",this,a),a.page!=null&&this.trigger("beforeFetch:"+a.page,this,a),g.__super__.fetch.call(this,a).done(function(d,f,g){var h;c[b]=!1,c.trigger("fetch",c,d,a),a.page!=null&&c.trigger("fetch:"+a.page,c,d,a);if((h=c.urls)!=null?!h.next:!void 0)return c.trigger.apply(c,["fetched:last"].concat(e.call(arguments)))})},g.prototype.canFetch=function(a){return this.urls!=null&&this.urls[a]!=null},g.prototype._setStateAfterFetch=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p;return b==null&&(b={}),j=(l=b.url,d.call(this._urlCache,l)<0),c=this.urls==null,g=c||((m=b.page)==="next"||m==="bottom")&&j,h=c||((n=b.page)==="prev"||n==="top")&&j,e=this.urls,this.urls=this._parsePageLinks(a),g&&this.urls.next!=null?this.urls.bottom=this.urls.next:this.urls.next?this.urls.bottom=e.bottom:delete this.urls.bottom,h&&this.urls.prev!=null?this.urls.top=this.urls.prev:this.urls.prev?this.urls.top=e.top:delete this.urls.top,i=(o=this.urls.first)!=null?o:this.urls.next,i!=null&&(f=parseInt(i.match(this.perPageRegex)[1],10),((p=(k=this.options).params)!=null?p:k.params={}).per_page=f),this.urls.last&&(this.totalPages=parseInt(this.urls.last.match(this.pageRegex)[1],10)),this.atLeastOnePageFetched=!0},g.prototype._parsePageLinks=function(a){var b,c,d=this;return b=(c=a.getResponseHeader("link"))!=null?c.split(","):void 0,b==null&&(b=[]),f.reduce(b,function(a,b){var c,e;return c=b.match(d.nameRegex)[1],e=b.match(d.linkRegex)[1],a[c]=e,a},{})},g}(b.Collection)})}.call(this),define("translations/user",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{user:{errors:{already_enrolled:"أنت مسجل بالفعل في هذا المساق",course_full:"هذا المساق مكتمل",invalid_code:"كود غير صالح",required:"مطلوب",terms:"يجب أن توافق على الشروط",too_long:"يتعذر تجاوز %{max} حرفًَا"}}},es:{user:{errors:{already_enrolled:"Ya está matriculado en este curso",course_full:"Este curso está lleno",invalid_code:"Código inválido",required:"Obligatorio",terms:"Debe aceptar estos términos",too_long:"No puede exceder de %{max} caracteres"}}},fr:{user:{errors:{already_enrolled:"Vous êtes déjà inscrit à ce cours.",course_full:"Ce cours est complet.",invalid_code:"Code erroné",required:"Requis",terms:"Vous devez accepter les conditions.",too_long:"Ne doit pas dépasser %{max} caractères"}}},ja:{user:{errors:{already_enrolled:"このコースには既に登録されています",course_full:"このコースには空きがありません",invalid_code:"無効なコード",required:"必須",terms:"利用規約に同意する必要があります",too_long:"%{max} 文字以内にしてください"}}},ko:{user:{errors:{already_enrolled:"이 과목에 이미 등록함",course_full:"이 과목은 만원임",invalid_code:"유효하지 않은 코드",required:"필수",terms:"조건에 동의해야 합니다.",too_long:"%{max}글자를 초과할 수 없습니다."}}},nl:{user:{errors:{already_enrolled:"Je bent al ingeschreven voor deze cursus",course_full:"Deze cursus zit vol",invalid_code:"Ongeldige code",required:"Vereist",terms:"Je moet akkoord gaan met de voorwaarden",too_long:"Kan maximum van %{max} tekens niet overschrijden"}}},pt:{user:{errors:{already_enrolled:"Já está inscrito nesta disciplina",course_full:"Esta disciplina está cheia",invalid_code:"Código inválido",required:"Necessário",terms:"Tem de aceitar os termos",too_long:"Não pode exceder %{max} caracteres"}}},ru:{user:{errors:{already_enrolled:"Вы уже зарегистрированы на данном курсе",course_full:"Группа для данного курса набрана",invalid_code:"Неверный код",required:"Требуется",terms:"Вы должны согласиться с условиями",too_long:"Не может превышать %{max} символов"}}},zh:{user:{errors:{already_enrolled:"您已经登记此课程",course_full:"此课程名额已满",invalid_code:"无效的代码",required:"需要",terms:"您必须同意这些条款",too_long:"不能超过 %{max} 个字符"}}}}})}),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/User",["i18n!user","underscore","Backbone"],function(a,c,d){var e,f;return e=function(d){function e(){return f=e.__super__.constructor.apply(this,arguments),f}return b(e,d),e.prototype.modelType="user",e.prototype.resourceName="users",e.prototype.errorMap={name:{blank:a.t("errors.required","Required"),too_long:a.t("errors.too_long","Can't exceed %{max} characters",{max:255})},self_enrollment_code:{blank:a.t("errors.required","Required"),invalid:a.t("errors.invalid_code","Invalid code"),already_enrolled:a.t("errors.already_enrolled","You are already enrolled in this course"),full:a.t("errors.course_full","This course is full")},terms_of_use:{accepted:a.t("errors.terms","You must agree to the terms")}},e.prototype.enrollments=function(a,b){return c.where(this.get("enrollments"),a,b)},e.prototype.hasEnrollmentType=function(a){return!!this.enrollments({type:a},!0)},e.prototype.hasEnrollmentRole=function(a){return!!this.enrollments({role:a},!0)},e.prototype.findEnrollmentByRole=function(a){return this.enrollments({role:a},!0)},e.prototype.allEnrollmentsByType=function(a){return this.enrollments({type:a})},e.prototype.allEnrollmentsByRole=function(a){return this.enrollments({role:a})},e.prototype.pending=function(a){return c.any(this.get("enrollments"),function(b){var c;return b.role===a&&((c=b.enrollment_state)==="creation_pending"||c==="invited")})},e.prototype.sectionEditableEnrollments=function(){return c.select(this.get("enrollments"),function(a){return!c.include(["DesignerEnrollment","ObserverEnrollment"],a.type)})},e}(d.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/collections/UserCollection",["compiled/collections/PaginatedCollection","compiled/models/User"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments),e}return b(d,a),d.prototype.model=c,d}(a)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/Group",["Backbone"],function(a){var c,d,e;return d=a.Model,c=function(a){function c(){return e=c.__super__.constructor.apply(this,arguments),e}return b(c,a),c.prototype.modelType="group",c.prototype.resourceName="groups",c}(d)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/collections/GroupCollection",["compiled/collections/PaginatedCollection","compiled/models/Group"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments),e}return b(d,a),d.prototype.model=c,d.prototype.comparator=function(a){return a.get("name")},d}(a)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/collections/CollaboratorCollection",["underscore","Backbone"],function(a,c){var d,e,f,g,h,i;return g=a.extend,h=a.map,e=c.Collection,f=c.Model,d=function(a){function c(){return i=c.__super__.constructor.apply(this,arguments),i}return b(c,a),c.prototype.model=f,c.prototype.comparator=function(a){return a.get("sortable_name")||a.get("name")},c.prototype.parse=function(a){return h(a,function(a){return g(a,{id:a.collaborator_id})})},c}(e)})}.call(this),define("translations/collaborations.collaborator_picker",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{collaborations:{collaborator_picker:{labels:{available_groups:"المجموعات المتوفرة",available_users:"المستخدمون المتوفرون",collaborate_with:"التعاون مع:",collaboration_members:"أعضاء التعاون",groups:"المجموعات",loading:"تحميل",people:"الأشخاص",remove_all:"إزالة الكل"},member_instructions:"انقر أو اضغط على مستخدم أو مجموعة في العمود الأيمن لإضافة متعاونين."}}},es:{collaborations:{collaborator_picker:{labels:{available_groups:"Grupos disponibles",available_users:"Usuarios disponibles",collaborate_with:"Colaborar con:",collaboration_members:"Miembros de la colaboración",groups:"Grupos",loading:"Cargando",people:"Personas",remove_all:"Eliminar todos"},member_instructions:"Haga clic o toque un usuario o grupo en la columna de la izquierda para agregar colaboradores."}}},fr:{collaborations:{collaborator_picker:{labels:{available_groups:"Groupes disponibles",available_users:"Utilisateurs disponibles",collaborate_with:"Collaborer avec :",collaboration_members:"Membres de la collaboration",groups:"Groupes",loading:"Chargement",people:"Personnes",remove_all:"Supprimer tout"},member_instructions:"Cliquez sur un utilisateur ou un groupe dans la colonne de gauche pour ajouter des collaborateurs."}}},ja:{collaborations:{collaborator_picker:{labels:{available_groups:"利用できるグループ",available_users:"利用できるユーザ",collaborate_with:"次の人と共同作業:",collaboration_members:"共同作業メンバー",groups:"グループ",loading:"読み込み中",people:"メンバー",remove_all:"すべて削除"},member_instructions:"共同作業者を追加するには、左側の列でユーザまたはグループをクリックまたはタップしてください。"}}},ko:{collaborations:{collaborator_picker:{labels:{available_groups:"사용 가능한 그룹",available_users:"사용 가능한 사용자",collaborate_with:"협업 상대:",collaboration_members:"협업 멤버",groups:"그룹",loading:"로드 중",people:"사용자",remove_all:"모두 제거"},member_instructions:"협업을 추가하려면 왼쪽 열에 있는 사용자나 그룹을 클릭하거나 두드리십시오."}}},nl:{collaborations:{collaborator_picker:{labels:{available_groups:"Beschikbare groepen",available_users:"Beschikbare gebruikers",collaborate_with:"Samenwerken met:",collaboration_members:"Teamgenoten",groups:"Groepen",loading:"Bezig met laden",people:"Personen",remove_all:"Verwijder alles"},member_instructions:"Kies een gebruiker of groep aan de linkerkant."}}},pt:{collaborations:{collaborator_picker:{labels:{available_groups:"Grupos disponíveis",available_users:"Utilizadores disponíveis",collaborate_with:"Colaborar com:",collaboration_members:"Membros de colaboração",groups:"Grupos",loading:"A carregar",people:"Pessoas",remove_all:"Remover tudo"},member_instructions:"Clique em ou toque num utilizador ou grupo na coluna do lado esquerdo para adicionar Colaboradores."}}},ru:{collaborations:{collaborator_picker:{labels:{available_groups:"Доступные группы",available_users:"Доступные пользователи",collaborate_with:"Совместная работа с:",collaboration_members:"Члены совместной работы",groups:"Группы",loading:"Загрузка",people:"Люди",remove_all:"Удалить всех"},member_instructions:"Щелкните (или нажмите) на пользователе или группе в левой колонке, чтобы добавить участников совместной работы."}}},zh:{collaborations:{collaborator_picker:{labels:{available_groups:"可用组",available_users:"可用用户",collaborate_with:"协作对象:",collaboration_members:"协作成员",groups:"组",loading:"正在加载",people:"人员",remove_all:"全部删除"},member_instructions:"单击左侧列的用户或组，以添加协作者。"}}}}})}),define("translations/collaborations.edit",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{collaborations:{edit:{buttons:{cancel:"إلغاء",update:"تحديث التعاون"},labels:{description:"الوصف",title:"عنوان التعاون"}}}},es:{collaborations:{edit:{buttons:{cancel:"Cancelar",update:"Actualizar la colaboración"},labels:{description:"Descripción",title:"Título de la colaboración"}}}},fr:{collaborations:{edit:{buttons:{cancel:"Annuler",update:"Mettre à jour la collaboration"},labels:{description:"Description",title:"Nom de la collaboration"}}}},ja:{collaborations:{edit:{buttons:{cancel:"キャンセル",update:"共同作業の更新"},labels:{description:"説明",title:"共同作業のタイトル"}}}},ko:{collaborations:{edit:{buttons:{cancel:"취소",update:"협업 업데이트"},labels:{description:"설명",title:"협업 제목"}}}},nl:{collaborations:{edit:{buttons:{cancel:"Annuleren",update:"Wijzig samenwerking"},labels:{description:"Beschrijving",title:"Samenwerkingstitel"}}}},pt:{collaborations:{edit:{buttons:{cancel:"Cancelar",update:"Atualizar colaboração"},labels:{description:"Descrição",title:"Título de colaboração"}}}},ru:{collaborations:{edit:{buttons:{cancel:"Отменить",update:"Обновить совместную работу"},labels:{description:"Описание",title:"Название совместной работы"}}}},zh:{collaborations:{edit:{buttons:{cancel:"取消",update:"更新协作"},labels:{description:"说明",title:"协作标题"}}}}}})}),define("jst/PaginatedView",["compiled/handlebars_helpers","compiled/util/registerTemplateCss","i18n!paginated_view"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.PaginatedView=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+='<div class="paginatedView-loading" role="status" aria-live="polite">\n  ',g="Loading more results",h="loading_more_results",i={},j="paginated_view",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="\n</div>",f}),arguments[1]("PaginatedView",'.paginatedView-loading {\n  text-align: center;\n  color: #e9e9e9;\n  font-size: 26px;\n  background: url("/images/load.gif") no-repeat 50% 80%;\n  padding-bottom: 56px; }\n'),c.PaginatedView}),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/views/PaginatedView",["underscore","jquery","Backbone","jst/PaginatedView"],function(a,c,d,e){var f,g;return f=function(d){function f(){return g=f.__super__.constructor.apply(this,arguments),g}return b(f,d),f.prototype.paginationLoaderTemplate=e,f.prototype.paginationScrollContainer=window,f.prototype.distanceTillFetchNextPage=100,f.prototype.initialize=function(a){var b;return b=f.__super__.initialize.call(this,a),this.fetchOptions=a.fetchOptions,this.startPaginationListener(),this.bindPaginationEvents(),b},f.prototype.render=function(){var a;return a=f.__super__.render.apply(this,arguments),this.collection.fetchingNextPage&&this.showPaginationLoader(),a},f.prototype.showPaginationLoader=function(){var a;return(a=this.$paginationLoader)==null&&(this.$paginationLoader=c(this.paginationLoaderTemplate())),this.placePaginationLoader()},f.prototype.placePaginationLoader=function(){var a;return(a=this.$paginationLoader)!=null?a.insertAfter(this.el):void 0},f.prototype.hidePaginationLoader=function(){var a;return(a=this.$paginationLoader)!=null?a.remove():void 0},f.prototype.distanceToBottom=function(){var a,b;return a=c(this.paginationScrollContainer),b=a[0]===window?c(document).height():a[0].scrollHeight,b-a.scrollTop()-a.height()},f.prototype.startPaginationListener=function(){return c(this.paginationScrollContainer).on("scroll.pagination"+this.cid+", resize.pagination"+this.cid,c.proxy(this.fetchNextPageIfNeeded,this)),this.fetchNextPageIfNeeded()},f.prototype.stopPaginationListener=function(){return c(this.paginationScrollContainer).off(".pagination"+this.cid)},f.prototype.fetchNextPageIfNeeded=function(){var b=this;if(this.collection.fetchingNextPage)return;if(!this.collection.urls||!this.collection.urls.next){this.collection.length&&this.stopPaginationListener();return}return setTimeout(function(){if(c(b.paginationScrollContainer).is(":visible")&&b.distanceToBottom()<b.distanceTillFetchNextPage)return b.collection.fetch(a.extend({page:"next"},b.fetchOptions))},0)},f.prototype.bindPaginationEvents=function(){return this.collection.on("beforeFetch:next",this.showPaginationLoader,this),this.collection.on("fetch:next",this.hidePaginationLoader,this),this.collection.on("all",this.fetchNextPageIfNeeded,this)},f}(d.View)})}.call(this),define("jst/collaborations/collaborator",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["collaborations/collaborator"]=b(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n      <i class="icon-end" aria-hidden="true"></i>\n      <input type="hidden" id="',i=c.type,e=i||a.type,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"type",{hash:{}})),d+=o(e)+"_",i=c.id,e=i||a.id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"id",{hash:{}})),d+=o(e)+'" name="',i=c.type,e=i||a.type,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"type",{hash:{}})),d+=o(e)+'[]" value="',i=c.id,e=i||a.id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"id",{hash:{}})),d+=o(e)+'" />\n    ',d}function q(a,b){return'\n      <i class="icon-add" aria-hidden="true"></i>\n    '}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<li>\n  <a href="#" data-id="',i=c.id,g=i||b.id,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"id",{hash:{}})),f+=o(g)+'">\n    <i class="icon-',i=c.type,g=i||b.type,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"type",{hash:{}})),f+=o(g)+'" aria-hidden="true"></i>\n    ',i=c.name,g=i||b.name,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"name",{hash:{}})),f+=o(g)+"\n\n    ",i=c.selected,g=i||b.selected,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(3,q,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n  </a>\n</li>\n",f}),c["collaborations/collaborator"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/collaborations/ListView",["underscore","compiled/views/PaginatedView","compiled/collections/UserCollection","compiled/collections/GroupCollection","jst/collaborations/collaborator"],function(b,d,e,f,g){var h,i,j,k,l,m;return i=b.each,j=b.extend,k=b.flatten,l=b.reject,h=function(b){function d(){return this.renderCollaborator=a(this.renderCollaborator,this),this.render=a(this.render,this),m=d.__super__.constructor.apply(this,arguments),m}return c(d,b),d.prototype.filteredMembers=[],d.prototype.events={"click a":"selectCollaborator"},d.prototype.initialize=function(){return this.collection=this.createCollection(this.options.type),this.paginationScrollContainer=this.$el.parents(".list-wrapper"),this.attachEvents(),d.__super__.initialize.call(this,{fetchOptions:this.options.fetchOptions})},d.prototype.createCollection=function(a){return a==null&&(a="user"),a==="user"?new e({comparator:function(a){return a.get("sortable_name")}}):new f},d.prototype.attachEvents=function(){var a=this;return this.collection.on("add remove reset",this.render).on("remove",function(b){return a.trigger("collection:remove",b)})},d.prototype.render=function(){var a;return this.updateFilter([]),a=this.collection.map(this.renderCollaborator),this.$el.html(a.join("")),this.currentIndex!=null&&this.hasFocus&&this.updateFocus(),this.hasFocus=!1,d.__super__.render.apply(this,arguments)},d.prototype.renderCollaborator=function(a){var b;return a.get("id")===this.options.currentUser?"":(b=j(a.toJSON(),{name:a.get("sortable_name")||a.get("name"),type:a.modelType}),g(b))},d.prototype.updateFocus=function(){var a;return a=$(this.$el.find("li").get(this.currentIndex)).find("a"),a.length===0&&(a=$(this.$el.find("li").get(this.currentIndex-1)).find("a")),a.length===0&&(a=this.$el.parents(".collaborator-picker").find(".members-list")),a.focus()},d.prototype.selectCollaborator=function(a){var b;return a.preventDefault(),b=$(a.currentTarget).data("id"),this.currentIndex=$(a.currentTarget).parent().index(),this.hasFocus=!0,this.collection.remove(b)},d.prototype.updateFilter=function(a){var b=this;return setTimeout(function(){return b.filteredMembers=k([b.filteredMembers,a]),i(b.filteredMembers,function(a){return b.collection.remove(a,{silent:!0})})},0)},d.prototype.removeFromFilter=function(a){return this.filteredMembers=l(this.filteredMembers,function(b){return b.get("id")===a.get("id")})},d}(d)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/collaborations/MemberListView",["underscore","Backbone","compiled/models/Group","compiled/models/User","compiled/collections/CollaboratorCollection","jst/collaborations/collaborator"],function(b,d,e,f,g,h){var i,j,k,l,m,n;return k=b.extend,l=b.filter,m=b.map,j=d.View,i=function(b){function d(){return this.onFetch=a(this.onFetch,this),this.publishCollection=a(this.publishCollection,this),this.deselectCollaborator=a(this.deselectCollaborator,this),this.render=a(this.render,this),n=d.__super__.constructor.apply(this,arguments),n}return c(d,b),d.prototype.events={"click li a":"removeCollaborator","click .remove-all":"removeAll"},d.prototype.initialize=function(){return this.collection=this.createCollection(),this.cacheElements(),this.attachEvents()},d.prototype.createCollection=function(){return new g},d.prototype.cacheElements=function(){return this.$list=this.$el.find("ul"),this.$removeBtn=this.$el.find(".remove-button"),this.$instructions=this.$el.find(".member-instructions")},d.prototype.attachEvents=function(){return this.collection.on("add remove reset",this.render).on("reset",this.onFetch).on("remove",this.deselectCollaborator)},d.prototype.render=function(){var a,b=this;return this.options.currentUser&&this.removeCurrentUser(),this.updateElementVisibility(),a=this.collection.map(function(a){return h(k(a.toJSON(),{type:a.modelType||a.get("type"),id:a.get("collaborator_id")||a.get("id"),name:a.get("sortable_name")||a.get("name"),selected:!0}))}),this.$list.html(a.join("")),this.currentIndex!=null&&this.hasFocus&&this.updateFocus(),this.hasFocus=!1},d.prototype.updateFocus=function(){var a;return a=$(this.$el.find("li").get(this.currentIndex)).find("a"),a.length===0&&(a=$(this.$el.find("li").get(this.currentIndex-1)).find("a")),a.length===0&&(a=this.$el.parents(".collaborator-picker").find(".list-wrapper:first ul:visible")),a.focus()},d.prototype.removeCollaborator=function(a){var b;return a.preventDefault(),b=$(a.currentTarget).data("id"),this.currentIndex=$(a.target).parent().index(),this.hasFocus=!0,this.collection.remove(b)},d.prototype.removeAll=function(a){return a.preventDefault(),this.collection.remove(this.collection.models)},d.prototype.updateElementVisibility=function(){return this.collection.length===0?(this.$removeBtn.hide(),this.$instructions.show()):(this.$removeBtn.show(),this.$instructions.hide())},d.prototype.deselectCollaborator=function(a){return a.modelType==null&&(a=this.typecastMember(a)),this.trigger("collection:remove",a)},d.prototype.typecastMember=function(a){var b;return b=k(a.toJSON(),{id:a.get("collaborator_id")}),a.get("type")==="user"?new f(k(b,{sortable_name:b.name})):new e(b)},d.prototype.publishCollection=function(a){var b,c;return c=a.filter(function(a){return a.get("type")==="user"}),b=a.filter(function(a){return a.get("type")==="group"}),this.trigger("collection:reset","user",m(c,this.typecastMember)),this.trigger("collection:reset","group",m(b,this.typecastMember))},d.prototype.onFetch=function(){var a;this.publishCollection(this.collection),a=this.getNextPage(this.currentXHR.getResponseHeader("Link"));if(a)return this.collection.url=a,this.currentXHR=this.collection.fetch({add:!0}),$.when(this.currentXHR).then(this.onFetch)},d.prototype.getNextPage=function(a){var b;return b=l(a.split(","),function(a){return a.match(/next/)})[0],b?b.match(/http[^>]+/)[0]:!1},d.prototype.removeCurrentUser=function(){return this.collection.remove(this.options.currentUser,{silent:!0})},d}(j)})}.call(this),define("jst/collaborations/CollaboratorPicker",["compiled/handlebars_helpers","i18n!collaborations.collaborator_picker"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["collaborations/CollaboratorPicker"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<div class="collaborator-picker"\n     data-collaboration-id="',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'">\n  ',g="Collaborate With:",h="labels.collaborate_with",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n\n  <div class="box-with-header">\n    <header class="toolbar border border-round-t border-trbl">\n      <div class="filters">\n        <input type="radio"\n               aria-controls="available-users"\n               id="users-filter-btn-',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'"\n               name="filter"\n               value="available-users"\n               checked="checked" />\n        <label for="users-filter-btn-',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'">\n          <i class="icon-user" aria-hidden="true"></i>\n          ',g="People",h="labels.people",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n        </label>\n\n        <input type="radio"\n               aria-controls="available-groups"\n               id="groups-filter-btn-',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'"\n               name="filter"\n               value="available-groups" />\n        <label for="groups-filter-btn-',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'">\n          <i class="icon-group" aria-hidden="true"></i>\n          ',g="Groups",h="labels.groups",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n        </label>\n      </div>\n    </header>\n\n    <div class="box-content border border-round-b border-rbl">\n      <div class="list-wrapper available-lists">\n        <div class="list-view">\n          <ul class="available-users" aria-label="',g="Available users",h="labels.available_users",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='" tabindex="-1">\n            <li class="loading-wrapper">\n              <img src="/images/load.gif" alt="',g="Loading",h="labels.loading",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='" />\n            </li>\n          </ul>\n          <ul class="available-groups" aria-label="',g="Available groups",h="labels.available_groups",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='" tabindex="-1">\n            <li class="loading-wrapper">\n              <img src="/images/load.gif" alt="',g="Loading",h="labels.loading",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='" />\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="list-wrapper">\n        <div class="members-list-wrapper list-view">\n          <header class="remove-button">\n            <a href="#" class="remove-all" role="button">&times; ',g="Remove All",h="labels.remove_all",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</a>\n          </header>\n          <p class="member-instructions">\n            ',g="Click or tap a user or group in the left-hand column to add Collaborators.",h="member_instructions",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n          </p>\n          <ul class="members-list"\n              tabindex="-1"\n              aria-label="',g="Collaboration members",h="labels.collaboration_members",i={},j="collaborations.collaborator_picker",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+='"></ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',f}),c["collaborations/CollaboratorPicker"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/collaborations/CollaboratorPickerView",["i18n!collaborations","Backbone","compiled/views/collaborations/ListView","compiled/views/collaborations/MemberListView","jst/collaborations/CollaboratorPicker"],function(b,d,e,f,g){var h,i,j;return i=d.View,h=function(b){function d(){return this.updateListFilters=a(this.updateListFilters,this),this.deselectCollaborator=a(this.deselectCollaborator,this),j=d.__super__.constructor.apply(this,arguments),j}return c(d,b),d.prototype.template=g,d.prototype.events={"change .filters input":"filterList"},d.prototype.fetchOptions={data:{per_page:50}},d.prototype.initialize=function(){return this.cacheElements(),this.createLists(),this.attachEvents(),this.includeGroups=!window.location.pathname.match(/groups/)},d.prototype.cacheElements=function(){return this.$template=$(this.template({id:this.options.id||"new"})),this.$userList=this.$template.find(".available-users"),this.$groupList=this.$template.find(".available-groups"),this.$memberList=this.$template.find(".members-list-wrapper"),this.$listFilter=this.$template.find(".filters")},d.prototype.attachEvents=function(){return this.groupList.on("collection:remove",this.memberList.collection.add.bind(this.memberList.collection)),this.userList.on("collection:remove",this.memberList.collection.add.bind(this.memberList.collection)),this.memberList.on("collection:remove",this.deselectCollaborator),this.memberList.on("collection:reset",this.updateListFilters)},d.prototype.createLists=function(){return this.userList=new e({currentUser:ENV.current_user_id,el:this.$userList,fetchOptions:this.fetchOptions,type:"user"}),this.groupList=new e({el:this.$groupList,fetchOptions:this.fetchOptions,type:"group"}),this.memberList=new f({currentUser:ENV.current_user_id,el:this.$memberList})},d.prototype.fetchCollaborators=function(){this.userList.collection.fetch(this.fetchOptions),this.includeGroups&&this.groupList.collection.fetch(this.fetchOptions);if(this.options.edit)return this.memberList.collection.url="/api/v1/collaborations/"+this.options.id+"/members",this.memberList.currentXHR=this.memberList.collection.fetch(this.fetchOptions)},d.prototype.render=function(){return this.$el.append(this.$template),this.fetchCollaborators(),this.includeGroups?this.$listFilter.buttonset():this.$listFilter.hide(),this},d.prototype.filterList=function(a){var b;return b=$(a.currentTarget).val(),this.$el.find(".available-lists ul").hide(),this.$el.find("."+b).show()},d.prototype.deselectCollaborator=function(a){var b;return b=a.modelType==="user"?this.userList:this.groupList,b.removeFromFilter(a),b.collection.add(a)},d.prototype.updateListFilters=function(a,b){var c;return c=a==="user"?this.userList:this.groupList,c.updateFilter(b)},d}(i)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/views/collaborations/CollaborationFormView",["i18n!collaborations","Backbone","compiled/views/collaborations/CollaboratorPickerView"],function(a,c,d){var e,f,g;return f=c.View,e=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments),g}return b(e,c),e.prototype.translations={errors:{noName:a.t("errors.no_name","Please enter a name for this collaboration."),titleTooLong:a.t("errors.title_too_long","Please use %{maxLength} characters or less for the name. Use the description for additional content.",{maxLength:ENV.TITLE_MAX_LEN})}},e.prototype.events={submit:"onSubmit","click .cancel_button":"onCancel"},e.prototype.initialize=function(){return this.cacheElements(),this.picker=new d({el:this.$collaborators}),this.titleMaxLength=ENV.TITLE_MAX_LEN},e.prototype.cacheElements=function(){return this.$titleInput=this.$el.find("#collaboration_title"),this.$collaborators=this.$el.find(".collaborator_list")},e.prototype.render=function(a){return a==null&&(a=!0),this.$el.show(),a&&this.$el.find("h2").focus(),this.$collaborators.is(":empty")&&this.picker.render(),this},e.prototype.onSubmit=function(a){var b;return b=this.$el.getFormData(),b["collaboration[title]"]?this.titleMaxLength&&b["collaboration[title]"].length>this.titleMaxLength?(a.preventDefault(),a.stopPropagation(),this.raiseTitleLengthError()):setTimeout(function(){return window.location=window.location.pathname},2500):(a.preventDefault(),a.stopPropagation(),this.raiseTitleError())},e.prototype.onCancel=function(a){return a.preventDefault(),this.$el.hide(),this.trigger("hide")},e.prototype.raiseTitleError=function(){return this.trigger("error",this.$titleInput,this.translations.errors.noName),!1},e.prototype.raiseTitleLengthError=function(){return this.trigger("error",this.$titleInput,this.translations.errors.titleTooLong),!1},e}(f)})}.call(this),define("jst/collaborations/edit",["compiled/handlebars_helpers","i18n!collaborations.edit"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["collaborations/edit"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<form action="',k=c.action,g=k||b.action,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"action",{hash:{}})),f+=q(g)+'"\n      class="edit_collaboration communication_message"\n      method="POST">\n  <input type="hidden" name="_method" value="put" />\n  <input type="hidden" name="authenticity_token" value="',k=c.token,g=k||b.token,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"token",{hash:{}})),f+=q(g)+'" />\n  <div class="header">\n    <input name="collaboration[title]"\n           aria-label="',g="Collaboration title",h="labels.title",i={},j="collaborations.edit",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='"\n           style="width: 300px;"\n           type="text"\n           value="',k=c.title,g=k||b.title,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"title",{hash:{}})),f+=q(g)+'" />\n  </div>\n\n  <div class="content">\n    <label for="collaboration_',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'_description">\n      ',g="Description",h="labels.description",i={},j="collaborations.edit",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n    </label><br />\n    <textarea id="collaboration_',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'_description"\n              name="collaboration[description]"\n              style="height: 50px; width: 400px;">\n      ',k=c.description,g=k||b.description,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"description",{hash:{}})),f+=q(g)+'\n    </textarea>\n  </div>\n\n  <div class="footer">\n    <div class="collaborator_list"></div>\n  </div>\n\n  <div class="collaboration-actions form-actions">\n    <button type="button" class="btn cancel_button">\n      ',g="Cancel",h="buttons.cancel",i={},j="collaborations.edit",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n    </button>\n    <button type="submit" class="btn btn-primary">\n      ',g="Update collaboration",h="buttons.update",i={},j="collaborations.edit",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="\n    </button>\n  </div>\n</form>\n",f}),c["collaborations/edit"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/collaborations/CollaborationView",["i18n!collaborations","underscore","Backbone","compiled/views/collaborations/CollaboratorPickerView","jst/collaborations/edit"],function(b,d,e,f,g){var h,i,j,k;return j=d.extend,i=e.View,h=function(d){function e(){return this["delete"]=a(this["delete"],this),k=e.__super__.constructor.apply(this,arguments),k}return c(e,d),e.prototype.events={"click .edit_collaboration_link":"onEdit","click .delete_collaboration_link":"onDelete","click .cancel_button":"onCloseForm"},e.prototype.initialize=function(){return this.id=this.$el.data("id")},e.prototype.formTemplate=function(a){var b,c,d,e;return c=a.action,d=a.className,e=a.data,b=$(g(j(e,{action:c,id:this.id,token:ENV.AUTHENTICITY_TOKEN})))},e.prototype.confirmGoogleDocsDelete=function(){var a;return a=$("#delete_collaboration_dialog").data("collaboration",this.$el),a.dialog({title:b.t("titles.delete","Delete collaboration?"),width:350})},e.prototype.confirmDelete=function(a){return this.$el.confirmDelete({message:b.t("collaboration.delete","Are you sure you want to delete this collaboration?"),success:this["delete"],url:a})},e.prototype["delete"]=function(){var a=this;return this.$el.slideUp(function(){return a.$el.remove()}),this.trigger("delete",this)},e.prototype.onEdit=function(a){var b;return a.preventDefault(),b=this.formTemplate({action:$(a.currentTarget).attr("href"),className:this.$el.attr("class"),data:this.$el.getTemplateData({textValues:["title","description"]})}),this.$el.children().hide(),this.$el.append(b),this.addCollaboratorPicker(b)},e.prototype.onDelete=function(a){var b;return a.preventDefault(),b=$(a.currentTarget).attr("href"),this.$el.hasClass("google_docs")?this.confirmGoogleDocsDelete():this.confirmDelete(b)},e.prototype.onCloseForm=function(a){return this.$el.find("form").remove(),this.$el.children().show()},e.prototype.addCollaboratorPicker=function(a){var b;return b=new f({edit:!0,el:a.find(".collaborator_list"),id:this.id}),b.render()},e}(i)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/collaborations/CollaborationsPage",["underscore","Backbone","compiled/views/collaborations/CollaborationView","compiled/views/collaborations/CollaborationFormView"],function(b,d,e,f){var g,h,i,j,k;return i=b.each,j=b.reject,h=d.View,g=function(b){function d(){return this.onFormError=a(this.onFormError,this),this.onFormHide=a(this.onFormHide,this),this.onCollaborationDelete=a(this.onCollaborationDelete,this),this.initPageState=a(this.initPageState,this),k=d.__super__.constructor.apply(this,arguments),k}return c(d,b),d.prototype.events={"click .add_collaboration_link":"addCollaboration"},d.prototype.initialize=function(){return this.cacheElements(),this.createViews(),this.attachEvents(),$(document).on("ready",this.initPageState)},d.prototype.initPageState=function(){if($("#collaborations .collaboration:visible").length===0)return this.addFormView.render(!1),this.$addLink.hide()},d.prototype.cacheElements=function(){return this.$header=$("h1:first"),this.$addLink=$(".add_collaboration_link"),this.$addForm=$("#new_collaboration"),this.$noCollaborationsMessage=$("#no_collaborations_message")},d.prototype.createViews=function(){return this.addFormView=new f({el:this.$addForm}),this.collaborationViews=$("div.collaboration").map(function(){return new e({el:$(this)})})},d.prototype.attachEvents=function(){var a=this;return this.addFormView.on("hide",this.onFormHide).on("error",this.onFormError),i(this.collaborationViews,function(b){return b.on("delete",a.onCollaborationDelete)})},d.prototype.addCollaboration=function(a){return a.preventDefault(),this.$addLink.hide(),this.addFormView.render(),this.$el.scrollTo(this.addFormView.$el)},d.prototype.onCollaborationDelete=function(a){this.collaborationViews=j(this.collaborationViews,function(b){return b===a});if(this.collaborationViews.length===0)return this.$noCollaborationsMessage.show(),this.addFormView.render(!1)},d.prototype.onFormHide=function(){return this.$addLink.show(),this.$header.focus()},d.prototype.onFormError=function(a,b){return a.focus().errorBox(b)},d}(h)})}.call(this),define("collaborations",["i18n!collaborations","jquery","jquery.ajaxJSON","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","jquery.templateData","vendor/jquery.scrollTo"],function(a,b){var c={};c.Util={removeCollaboration:function(a){var c=b("#collaborations .collaboration:visible");c.length<=1&&(b("#no_collaborations_message").slideDown(),b(".add_collaboration_link").click()),a.slideUp(function(){a.remove()})}},c.Events={init:function(){b("#delete_collaboration_dialog .cancel_button").on("click",this.onClose),b("#delete_collaboration_dialog .delete_button").on("click",this.onDelete),b(document).fragmentChange(this.onFragmentChange),b("#collaboration_collaboration_type").on("change",this.onTypeChange).change()},onClose:function(a){b("#delete_collaboration_dialog").dialog("close")},onDelete:function(a){var d=b(this).hasClass("delete_document_button"),e={delete_doc:d},f=b("#delete_collaboration_dialog").data("collaboration"),g=f.find(".delete_collaboration_link").attr("href");f.dim(),b("#delete_collaboration_dialog").dialog("close"),b.ajaxJSON(g,"DELETE",e,function(a){c.Util.removeCollaboration(f)},b.noop)},onFragmentChange:function(a,c){if(c!=="#add_collaboration")return;b("#collaborations .collaboration").length==0&&b(".add_collaboration_link").click()},onTypeChange:function(a){var c=b(this).val(),d=c,e;if(INST.collaboration_types)for(var f in INST.collaboration_types){var g=INST.collaboration_types[f];g.name===c&&(d=g.type)}b(".collaboration_type").hide(),e=b("#new_collaboration #"+d+"_description"),e.show(),b(".collaborate_data").showIf(!e.hasClass("unauthorized")),b(".collaboration_authorization").hide(),b("#collaborate_authorize_"+d).showIf(e.hasClass("unauthorized"))}},b(document).ready(c.Events.init.bind(c.Events))}),function(){require(["compiled/views/collaborations/CollaborationsPage","collaborations"],function(a){var b;return b=new a({el:$("body")})})}.call(this),define("compiled/bundles/collaborations",function(){})