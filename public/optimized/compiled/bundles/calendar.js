define("translations/calendars",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendars:{assignment_details:"تفاصيل المهمة",default_title:"حدث",event_details:"تفاصيل الحدث",feed_dialog_title:"موجز التقويم",keycodes:{"delete":"d",edit:"e","new":"n",next_day:"ctrl+سهم لليمين",next_event:"j",next_week:"ctrl+سهم لأسفل",open:"o",previous_day:"ctrl+سهم لليسار",previous_event:"k",previous_week:"ctrl+سهم لأعلى",refresh:"r"},notices:{event_moved:"%{event} تم نقله إلى %{day}"},prompts:{delete_assignment:"هل ترغب بالتأكيد في حذف هذه المهمة؟",delete_event:"هل ترغب بالتأكيد في حذف هذا الحدث؟"},titles:{add_new_assignment:"إضافة مهمة جديدة",add_new_event:"إضافة حدث جديد",edit_assignment:"تحرير المهمة",edit_event:"تحرير الحدث"}}},es:{calendars:{assignment_details:"Detalles de la Tarea",default_title:"evento",event_details:"Detalles del Evento",feed_dialog_title:"Canal del Calendario",keycodes:{"delete":"d",edit:"e","new":"n",next_day:"ctrl + derecha",next_event:"j",next_week:"ctrl + abajo",open:"o",previous_day:"ctrl + izquierda",previous_event:"k",previous_week:"ctrl + arriba",refresh:"r"},notices:{event_moved:"%{event} fue movido a %{day}"},prompts:{delete_assignment:"¿Está seguro que quiere borrar esta tarea?",delete_event:"¿Está seguro que quiere borrar este evento?"},titles:{add_new_assignment:"Agregar Tarea Nueva",add_new_event:"Agregar Evento Nuevo",edit_assignment:"Editar la Tarea",edit_event:"Editar el Evento"}}},fr:{calendars:{assignment_details:"Informations sur la tâche",default_title:"événement",event_details:"Informations de l’événement",feed_dialog_title:"Flux de calendrier",keycodes:{"delete":"d",edit:"e","new":"n",next_day:"ctrl+droite",next_event:"j",next_week:"ctrl+bas",open:"o",previous_day:"ctrl+gauche",previous_event:"k",previous_week:"ctrl+haut",refresh:"r"},notices:{event_moved:"%{event} a été déplacé vers %{day}"},prompts:{delete_assignment:"Voulez-vous vraiment supprimer cette tâche ?",delete_event:"Voulez-vous vraiment supprimer cet événement ?"},titles:{add_new_assignment:"Ajouter une nouvelle tâche",add_new_event:"Ajouter un nouvel événement",edit_assignment:"Modifier la tâche",edit_event:"Modifier l’événement"}}},ja:{calendars:{assignment_details:"課題の詳細",default_title:"イベント",event_details:"イベントの詳細",feed_dialog_title:"カレンダー フィード",keycodes:{"delete":"d",edit:"e","new":"n",next_day:"Ctrl+Right",next_event:"j",next_week:"Ctrl+Down",open:"o",previous_day:"Ctrl+Left",previous_event:"k",previous_week:"Ctrl+Up",refresh:"r"},notices:{event_moved:"%{event} は次の場所に移動されました: %{day}"},prompts:{delete_assignment:"この課題を削除してもよろしいですか?",delete_event:"このイベントを削除してもよろしいですか?"},titles:{add_new_assignment:"新しい課題の追加",add_new_event:"新しいイベントの追加",edit_assignment:"課題の編集",edit_event:"イベントの編集"}}},ko:{calendars:{assignment_details:"과제 세부 정보",default_title:"행사",event_details:"행사 세부 정보",feed_dialog_title:"달력 피드",keycodes:{"delete":"d",edit:"e","new":"n",next_day:"ctrl+오른쪽",next_event:"j",next_week:"ctrl+아래쪽",open:"o",previous_day:"ctrl+왼쪽",previous_event:"k",previous_week:"ctrl+위쪽",refresh:"r"},notices:{event_moved:"%{event}를 %{day}로 옮김"},prompts:{delete_assignment:"이 과제를 삭제하시겠습니까?",delete_event:"이 행사를 삭제하시겠습니까?"},titles:{add_new_assignment:"새 과제 추가",add_new_event:"새 행사 추가",edit_assignment:"과제 편집",edit_event:"행사 편집"}}},nl:{calendars:{assignment_details:"Opdrachtdetails",default_title:"gebeurtenis",event_details:"Details van gebeurtenis",feed_dialog_title:"Agenda feed",keycodes:{"delete":"d",edit:"e","new":"n",next_day:"ctrl+pijltje rechts",next_event:"j",next_week:"ctrl+pijltje beneden",open:"o",previous_day:"ctrl+pijltje links",previous_event:"k",previous_week:"ctrl+pijltje omhoog",refresh:"r"},notices:{event_moved:"%{event} is verplaatst naar %{day}"},prompts:{delete_assignment:"Weet u zeker dat u deze opdracht wil verwijderen?",delete_event:"Weet u zeker dat u deze gebeurtenis wil verwijderen?"},titles:{add_new_assignment:"Voeg een nieuwe opdracht toe",add_new_event:"Voeg een nieuwe gebeurtenis toe",edit_assignment:"Wijzig opdracht",edit_event:"Wijzig gebeurtenis"}}},pt:{calendars:{assignment_details:"Detalhes da tarefa",default_title:"evento",event_details:"Detalhes do evento",feed_dialog_title:"Feed do calendário",keycodes:{"delete":"d",edit:"e","new":"n",next_day:"ctrl+direita",next_event:"j",next_week:"ctrl+baixo",open:"o",previous_day:"ctrl+esquerda",previous_event:"k",previous_week:"ctrl+cima",refresh:"r"},notices:{event_moved:"%{event} foi movido para %{day}"},prompts:{delete_assignment:"Tem certeza de que deseja excluir esta tarefa?",delete_event:"Tem certeza de que deseja excluir este evento?"},titles:{add_new_assignment:"Adicionar nova tarefa",add_new_event:"Adicionar novo evento",edit_assignment:"Editar tarefa",edit_event:"Editar evento"}}},ru:{calendars:{assignment_details:"Сведения о задании",default_title:"событие",event_details:"Подробные сведения о мероприятии",feed_dialog_title:"Канал календаря",keycodes:{"delete":"d",edit:"e","new":"n",next_day:"ctrl+вправо",next_event:"j",next_week:"ctrl+вниз",open:"о",previous_day:"ctrl+влево",previous_event:"k",previous_week:"ctrl+вверх",refresh:"r"},notices:{event_moved:"%{event} было перемещено в %{day}"},prompts:{delete_assignment:"Вы действительно хотите удалить это задание?",delete_event:"Действительно хотите удалить это событие?"},titles:{add_new_assignment:"Добавить новое задание",add_new_event:"Добавить новое мероприятие",edit_assignment:"Редактировать задание",edit_event:"Редактировать событие"}}},zh:{calendars:{assignment_details:"作业详细信息",default_title:"事件",event_details:"事件详细信息",feed_dialog_title:"日历馈送",keycodes:{"delete":"d",edit:"e","new":"n",next_day:"ctrl+向右键",next_event:"j",next_week:"ctrl+向下键",open:"o",previous_day:"ctrl+向左键",previous_event:"k",previous_week:"ctrl+向上键",refresh:"r"},notices:{event_moved:"%{event} 已移至 %{day}"},prompts:{delete_assignment:"是否确定要删除此作业?",delete_event:"是否确定要删除此事件?"},titles:{add_new_assignment:"添加新作业",add_new_event:"添加新事件",edit_assignment:"编辑作业",edit_event:"编辑事件"}}}}})}),define("translations/content_locks",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{content_locks:{buttons:{ok_thanks:"لا، شكرًا"},messages:{assignment_locked_at:"تم تأمين هذه المهمة %{at}.",assignment_locked_module:"تعد هذه المهمة جزءًا من الوحدة *%{module}* ولم يتم تأمينها بعد.",assignment_locked_no_reason:"تم تأمين هذه المهمة.  لم يتم تقديم أي سبب آخر.",assignment_locked_until:"تم تأمين هذه المهمة حتى %{date}.",content_locked_at:"تم تأمين هذا المحتوى %{at}.",content_locked_module:"يعد هذا المحتوى جزءًا من الوحدة *%{module}* ولم يتم إلغاء تأمينه بعد.",content_locked_no_reason:"تم تأمين هذا المحتوى.  لم يتم تقديم أي سبب آخر.",content_locked_until:"تم تأمين هذا المحتوى حتى %{date}.",file_locked_at:"تم تأمين هذا الملف %{at}.",file_locked_module:"يعد هذا الملف جزءًا من الوحدة *%{module}* ولم يتم إلغاء تأمينه بعد.",file_locked_no_reason:"تم تأمين هذا الملف.  لم يتم تقديم أي سبب آخر.",file_locked_until:"تم تأمين هذا الملف حتى %{date}.",page_locked_at:"تم تأمين هذه الصفحة في %{at}.",page_locked_module:"تعد هذه الصفحة جزءًا من الوحدة *%{module}* ولم يتم إلغاء تأمينها بعد.",page_locked_no_reason:"تم تأمين هذه الصفحة.  لم يتم تقديم أي سبب آخر.",page_locked_until:"تم تأمين هذه الصفحة حتى %{date}.",quiz_locked_at:"تم تأمين هذا الاختبار %{at}.",quiz_locked_module:"يعد هذا الاختبار جزءًا من الوحدة *%{module}* ولم يتم إلغاء تأمينه بعد.",quiz_locked_no_reason:"تم تأمين هذا الاختبار.  لم يتم تقديم أي سبب آخر.",quiz_locked_until:"تم تأمين هذا الاختبار حتى %{date}.",topic_locked_at:"تم تأمين هذا الموضوع في %{at}.",topic_locked_module:"يعد هذا الموضوع جزءًا من الوحدة *%{module}* ولم يتم إلغاء تأمينه بعد.",topic_locked_no_reason:"تم تأمين هذا الموضوع.  لم يتم تقديم أي سبب آخر.",topic_locked_until:"تم تأمين هذا الموضوع حتى %{date}.",visit_modules_page_for_details:"تفضل بزيارة صفحة الوحدات للحصول على معلومات عن كيفية إلغاء تأمين هذا المحتوى."},titles:{content_is_locked:"تم تأمين المحتوى"}}},es:{content_locks:{buttons:{ok_thanks:"Ok, Gracias"},messages:{assignment_locked_at:"Esta tarea fue bloqueada en %{at}.",assignment_locked_module:"Esta tarea es parte del módulo *%{module}* y aún no ha sido desbloqueada.",assignment_locked_no_reason:"Esta tarea esta bloqueada. No se ha provisto otra razón.",assignment_locked_until:"Esta tarea está bloqueada hasta %{date}.",content_locked_at:"Este contenido fue bloqueado en %{at}.",content_locked_module:"Este contenido es parte del módulo *%{module}* y aún no ha sido desbloqueado.",content_locked_no_reason:"Este contenido está bloqueado. No se ha provisto otra razón.",content_locked_until:"Este contenido está bloqueado hasta %{date}.",file_locked_at:"Este archivo fue bloqueado en %{at}.",file_locked_module:"Este archivo es parte del módulo *%{module}* y no ha sido desbloqueado aún.",file_locked_no_reason:"Este archivo está bloqueado. No se ha provisto otra razón.",file_locked_until:"Este archivo ha sido bloqueado hasta %{date}.",page_locked_at:"Esta página fue bloqueado en %{at}.",page_locked_module:"Esta página es parte del módulo *%{module}* y aún no ha sido desbloqueado.",page_locked_no_reason:"Esta página está bloqueada. No se ha provisto otra razón.",page_locked_until:"Esta página está bloqueada hasta %{date}.",quiz_locked_at:"Esta evaluación fue bloqueada en %{at}.",quiz_locked_module:"Esta evaluación es parte del módulo *%{module}* y aún no ha sido desbloqueado.",quiz_locked_no_reason:"Esta evaluación está bloqueada. No se ha provisto otra razón.",quiz_locked_until:"Esta evaluación está bloqueada hasta %{date}.",topic_locked_at:"Este tema fue bloqueado en %{at}.",topic_locked_module:"Este tema es parte del módulo *%{module}* y aún no ha sido desbloqueado.",topic_locked_no_reason:"Este tema está bloqueado. No se ha provisto otra razón.",topic_locked_until:"Este tema está bloqueado hasta %{date}.",visit_modules_page_for_details:"Visite la página de los módulos para información de cómo desbloquear este contenido."},titles:{content_is_locked:"El Contenido está Bloqueado"}}},fr:{content_locks:{buttons:{ok_thanks:"D’accord, merci"},messages:{assignment_locked_at:"Cette tâche a été verrouillée le %{at}",assignment_locked_module:"Cette tâche fait partie du module *%{module}* et n’a pas encore été déverrouillée.",assignment_locked_no_reason:"Cette tâche est verrouillée. Aucune autre raison n’a été fournie.",assignment_locked_until:"Cette tâche est verrouillée jusqu’au %{date}.",content_locked_at:"Ce contenu a été verrouillé le %{at}",content_locked_module:"Ce contenu fait partie du module *%{module}* et n’a pas encore été déverrouillé.",content_locked_no_reason:"Ce contenu est verrouillé. Aucune autre raison n’a été fournie.",content_locked_until:"Ce contenu est verrouillé jusqu’au %{date}.",file_locked_at:"Ce fichier a été verrouillé le %{at}.",file_locked_module:"Ce fichier fait partie du module *%{module}* et n’a pas encore été déverrouillé.",file_locked_no_reason:"Ce fichier est verrouillé. Aucune autre raison n’a été fournie.",file_locked_until:"Ce fichier est verrouillé jusqu’au %{date}.",page_locked_at:"Cette page a été verrouillée le %{at}.",page_locked_module:"Cette page fait partie du module *%{module}* et n’a pas encore été déverrouillée.",page_locked_no_reason:"Cette page est verrouillée. Aucune autre raison n’a été fournie.",page_locked_until:"Cette page est verrouillée jusqu’au %{date}.",quiz_locked_at:"Ce questionnaire a été verrouillé le %{at}.",quiz_locked_module:"Ce questionnaire fait partie du module *%{module}* et n’a pas encore été déverrouillé.",quiz_locked_no_reason:"Ce questionnaire est verrouillé. Aucune autre raison n’a été fournie.",quiz_locked_until:"Ce questionnaire est verrouillé jusqu’au %{date}.",topic_locked_at:"Ce sujet a été verrouillé le %{at}.",topic_locked_module:"Ce sujet fait partie du module *%{module}* et n’a pas encore été déverrouillé.",topic_locked_no_reason:"Ce sujet est verrouillé. Aucune autre raison n’a été fournie.",topic_locked_until:"Ce sujet est verrouillé jusqu’au %{date}.",visit_modules_page_for_details:"Pour obtenir des informations sur le déverrouillage de ce contenu, consultez la page des modules."},titles:{content_is_locked:"Contenu verrouillé"}}},ja:{content_locks:{buttons:{ok_thanks:"OK です。ありがとうございます。"},messages:{assignment_locked_at:"この課題は %{at} にロックされました。",assignment_locked_module:"この課題はモジュール *%{module}* の一部で、まだロックが解除されていません。",assignment_locked_no_reason:"この課題はロックされています。別の理由は提供されていません。",assignment_locked_until:"%{date} まで、この課題はロックされています。",content_locked_at:"このコンテンツは %{at} にロックされました。",content_locked_module:"このコンテンツはモジュール *%{module}* の一部で、まだロックが解除されていません。",content_locked_no_reason:"このコンテンツはロックされています。別の理由は提供されていません。",content_locked_until:"%{date} まで、このコンテンツはロックされています。",file_locked_at:"このファイルは %{at} にロックされました。",file_locked_module:"このファイルはモジュール *%{module}* の一部で、まだロックが解除されていません。",file_locked_no_reason:"このファイルはロックされています。別の理由は提供されていません。",file_locked_until:"%{date} まで、このファイルはロックされています。",page_locked_at:"このページは %{at} にロックされました。",page_locked_module:"このページはモジュール *%{module}* の一部で、まだロックが解除されていません。",page_locked_no_reason:"このページはロックされています。別の理由は提供されていません。",page_locked_until:"%{date} まで、このページはロックされています。",quiz_locked_at:"このクイズは %{at} にロックされました。",quiz_locked_module:"このクイズはモジュール *%{module}* の一部で、まだロックが解除されていません。",quiz_locked_no_reason:"このクイズはロックされています。別の理由は提供されていません。",quiz_locked_until:"%{date} まで、このクイズはロックされています。",topic_locked_at:"このトピックは %{at} にロックされました。",topic_locked_module:"このトピックはモジュール *%{module}* の一部で、まだロックが解除されていません。",topic_locked_no_reason:"このトピックはロックされています。別の理由は提供されていません。",topic_locked_until:"%{date} まで、このトピックはロックされています。",visit_modules_page_for_details:"このコンテンツのロックを解除する方法については、モジュールのページにアクセスしてください。"},titles:{content_is_locked:"コンテンツはロックされています"}}},ko:{content_locks:{buttons:{ok_thanks:"감사합니다."},messages:{assignment_locked_at:"이 과제는 %{at}에 잠겼습니다.",assignment_locked_module:"이 과제는 *%{module}* 모듈의 일부분이며 아직 잠금이 해제되지 않았습니다.",assignment_locked_no_reason:"이 과제는 잠겨 있습니다.  다른 이유가 제공되지 않았습니다.",assignment_locked_until:"이 과제는 %{date}까지 잠겨 있습니다.",content_locked_at:"이 내용은 %{at}에 잠겼습니다.",content_locked_module:"이 내용은 *%{module}* 모듈의 일부분이며 아직 잠금이 해제되지 않았습니다.",content_locked_no_reason:"이 내용은 잠겨 있습니다. 다른 이유가 제공되지 않았습니다.",content_locked_until:"이 내용은 %{date}까지 잠겨 있습니다.",file_locked_at:"이 파일은 %{at}에 잠겼습니다.",file_locked_module:"이 파일은 *%{module}* 모듈의 일부분이며 아직 잠금이 해제되지 않았습니다.",file_locked_no_reason:"이 파일은 잠겨 있습니다.  다른 이유가 제공되지 않았습니다.",file_locked_until:"이 파일은 %{date}까지 잠겨 있습니다.",page_locked_at:"이 페이지는 %{at}에 잠겼습니다.",page_locked_module:"이 페이지는 *%{module}* 모듈의 일부분이며 아직 잠금이 해제되지 않았습니다.",page_locked_no_reason:"이 페이지는 잠겨 있습니다. 다른 이유가 제공되지 않았습니다.",page_locked_until:"이 페이지는 %{date}까지 잠겨 있습니다.",quiz_locked_at:"이 퀴즈는 %{at}에 잠겼습니다.",quiz_locked_module:"이 퀴즈는 *%{module}* 모듈의 일부분이며 아직 잠금이 해제되지 않았습니다.",quiz_locked_no_reason:"이 퀴즈는 잠겨 있습니다. 다른 이유가 제공되지 않았습니다.",quiz_locked_until:"이 퀴즈는 %{date}까지 잠겨 있습니다.",topic_locked_at:"이 주제는 %{at}에 잠겼습니다.",topic_locked_module:"이 주제는 *%{module}* 모듈의 일부분이며 아직 잠금이 해제되지 않았습니다.",topic_locked_no_reason:"이 주제는 잠겨 있습니다. 다른 이유가 제공되지 않았습니다.",topic_locked_until:"이 주제는 %{date}까지 잠겨 있습니다.",visit_modules_page_for_details:"이 내용의 잠금을 해제하는 방법에 대한 정보는 모듈 페이지를 방문하십시오."},titles:{content_is_locked:"내용이 잠겨 있음"}}},nl:{content_locks:{buttons:{ok_thanks:"Oké, Bedankt"},messages:{assignment_locked_at:"Deze opdracht is vergrendeld %{at}.",assignment_locked_module:"Deze opdracht is onderdeel van de module *%{module}* en is nog niet ontgrendeld.",assignment_locked_no_reason:"Deze opdracht is vergrendeld. Er is geen andere reden opgegeven.",assignment_locked_until:"Deze opdracht is vergrendeld tot %{date}.",content_locked_at:"Deze inhoud is vergrendeld %{at}.",content_locked_module:"Deze inhoud is onderdeel van de module *%{module}* en is nog niet ontgrendeld. ",content_locked_no_reason:"De inhoud is vergrendeld. Er is geen andere reden opgegeven.",content_locked_until:"Deze inhoud is vergrendeld tot %{date}.",file_locked_at:"Dit bestand is vergrendeld %{at}.",file_locked_module:"Dit bestand is onderdeel van de module *%{module}* en is nog niet ontgrendeld.",file_locked_no_reason:"Dit bestand is vergrendeld. Er is geen andere reden opgegeven. ",file_locked_until:"Dit bestand is vergrendeld tot %{date}.",page_locked_at:"Deze pagina is vergrendeld %{at}.",page_locked_module:"Deze pagina is onderdeel van de module *%{module}* en is nog niet ontgrendeld.",page_locked_no_reason:"Deze pagina is vergrendeld. Er is geen andere reden opgegeven.",page_locked_until:"Deze pagina is vergrendeld tot %{date}.",quiz_locked_at:"Deze quiz is vergrendeld op %{at}.",quiz_locked_module:"Deze quiz is onderdeel van de module *%{module}* en is nog niet ontgrendeld.",quiz_locked_no_reason:"Deze quiz is vergrendeld. Er is geen andere reden opgegeven.",quiz_locked_until:"Deze quiz is vergrendeld tot %{date}.",topic_locked_at:"Dit onderwerp is vergrendeld %{at}.",topic_locked_module:"Dit onderwerp is onderdeel van de module *%{module}* en is nog niet ontgrendeld.",topic_locked_no_reason:"Dit onderwerp is vergrendeld. Er is geen andere reden opgegeven.",topic_locked_until:"Dit onderwerp is vergrendeld tot %{date}.",visit_modules_page_for_details:"Bekijk de modulepagina voor meer informatie over het ontgrendelen van deze inhoud."},titles:{content_is_locked:"Inhoud is vergrendeld"}}},pt:{content_locks:{buttons:{ok_thanks:"Ok, obrigado"},messages:{assignment_locked_at:"Esta tarefa foi travada %{at}.",assignment_locked_module:"Esta tarefa faz parte do módulo *%{module}* e ainda não foi destravada.",assignment_locked_no_reason:"Esta tarefa está travada.  Nenhum outro motivo foi fornecido.",assignment_locked_until:"Esta tarefa está travada até %{date}.",content_locked_at:"Este conteúdo foi bloqueado %{at}.",content_locked_module:"Este conteúdo faz parte do módulo *%{module}* e ainda não foi desbloqueado.",content_locked_no_reason:"Este conteúdo está bloqueado. Nenhum outro motivo foi fornecido.",content_locked_until:"Este conteúdo está bloqueado até %{date}.",file_locked_at:"Este ficheiro foi bloqueado %{at}.",file_locked_module:"Este ficheiro faz parte do módulo *%{module}* e ainda não foi desbloqueado.",file_locked_no_reason:"Este ficheiro está bloqueado. Nenhum outro motivo foi fornecido.",file_locked_until:"Este ficheiro está bloqueado até %{date}.",page_locked_at:"Esta página foi travada %{at}.",page_locked_module:"Esta página faz parte do módulo *%{module}* e ainda não foi destravada.",page_locked_no_reason:"Esta página está travada.  Nenhum outro motivo foi fornecido.",page_locked_until:"Esta página está travada até %{date}.",quiz_locked_at:"Este teste foi bloqueado %{at}.",quiz_locked_module:"Este teste faz parte do módulo *%{module}* e ainda não foi desbloqueado.",quiz_locked_no_reason:"Este teste está bloqueado. Nenhum outro motivo foi fornecido.",quiz_locked_until:"Este teste está bloqueado até %{date}.",topic_locked_at:"Este tópico foi bloqueado %{at}.",topic_locked_module:"Este tópico faz parte do módulo *%{module}* e ainda não foi desbloqueado.",topic_locked_no_reason:"Este tópico está bloqueado. Nenhum outro motivo foi fornecido.",topic_locked_until:"Este tópico está bloqueado até %{date}.",visit_modules_page_for_details:"Visite a página dos módulos para obter informações sobre como destravar este conteúdo."},titles:{content_is_locked:"O conteúdo está bloqueado"}}},ru:{content_locks:{buttons:{ok_thanks:"ОК, спасибо"},messages:{assignment_locked_at:"Это задание было заблокировано %{at}.",assignment_locked_module:"Это задание — часть модуля *%{module}* и еще не разблокировано.",assignment_locked_no_reason:"Это задание заблокировано.  Другая причина не указана.",assignment_locked_until:"Это задание заблокировано до %{date}",content_locked_at:"Это содержание было заблокировано %{at}.",content_locked_module:"Это содержание — часть модуля *%{module}* и еще не разблокировано.",content_locked_no_reason:"Это содержание заблокировано.  Другая причина не указана.",content_locked_until:"Это содержание заблокировано до %{date}",file_locked_at:"Этот файл был заблокирован %{at}.",file_locked_module:"Этот файл — часть модуля *%{module}* и еще не разблокирован.",file_locked_no_reason:"Этот файл заблокирован.  Другая причина не указана.",file_locked_until:"Этот файл заблокирован до %{date}",page_locked_at:"Эта страница заблокирована %{at}.",page_locked_module:"Эта страница — часть модуля *%{module}* и еще не разблокирована.",page_locked_no_reason:"Эта страница заблокирована.  Другая причина не указана.",page_locked_until:"Эта страница заблокирована до %{date}",quiz_locked_at:"Эта контрольная работа была заблокирована %{at}.",quiz_locked_module:"Эта контрольная работа — часть модуля *%{module}* и еще не разблокирована.",quiz_locked_no_reason:"Эта контрольная работа заблокирована.  Другая причина не указана.",quiz_locked_until:"Эта контрольная работа заблокирована до %{date}",topic_locked_at:"Эта тема заблокирована %{at}.",topic_locked_module:"Эта тема — часть модуля *%{module}* и еще не разблокирована.",topic_locked_no_reason:"Эта тема заблокирована.  Другая причина не указана.",topic_locked_until:"Эта тема заблокирована до %{date}",visit_modules_page_for_details:"Посетите страницу модуля для получения сведений о разблокировании этого содержания."},titles:{content_is_locked:"Содержание заблокировано"}}},zh:{content_locks:{buttons:{ok_thanks:"好，谢谢"},messages:{assignment_locked_at:"此作业锁定于 %{at}。",assignment_locked_module:"此作业是单元 *%{module}* 的一部分，尚未解锁。",assignment_locked_no_reason:"此作业已锁定。尚未提供其他原因。",assignment_locked_until:"此作业锁定至 %{date}。",content_locked_at:"此内容锁定于 %{at}。",content_locked_module:"此内容是单元 *%{module}* 的一部分，尚未解锁。",content_locked_no_reason:"此内容已锁定。尚未提供其他原因。",content_locked_until:"此内容锁定至 %{date}。",file_locked_at:"此文件锁定于 %{at}。",file_locked_module:"此文件是单元 *%{module}* 的一部分，尚未解锁。",file_locked_no_reason:"此文件已锁定。尚未提供其他原因。",file_locked_until:"此文件锁定至 %{date}。",page_locked_at:"此页面锁定于 %{at}。",page_locked_module:"此页面是单元 *%{module}* 的一部分，尚未解锁。",page_locked_no_reason:"此页面已锁定。尚未提供其他原因。",page_locked_until:"此页面锁定至 %{date}。",quiz_locked_at:"此测验锁定于 %{at}。",quiz_locked_module:"此测验是单元 *%{module}* 的一部分，尚未解锁。",quiz_locked_no_reason:"此测验已锁定。尚未提供其他原因。",quiz_locked_until:"此测验锁定至 %{date}。",topic_locked_at:"此主题锁定于 %{at}。",topic_locked_module:"此主题是单元 *%{module}* 的一部分，尚未解锁。",topic_locked_no_reason:"此主题已锁定。尚未提供其他原因。",topic_locked_until:"此主题锁定至 %{date}。",visit_modules_page_for_details:"有关如何解锁此内容的信息，请访问单元页面。"},titles:{content_is_locked:"内容已锁定"}}}}})}),define("content_locks",["INST","i18n!content_locks","jquery","str/htmlEscape","jquery.instructure_date_and_time","jqueryui/dialog"],function(a,b,c,d){a.lockExplanation=function(a,e){if(a.lock_at)switch(e){case"quiz":return b.t("messages.quiz_locked_at","This quiz was locked %{at}.",{at:c.parseFromISO(a.lock_at).datetime_formatted});case"assignment":return b.t("messages.assignment_locked_at","This assignment was locked %{at}.",{at:c.parseFromISO(a.lock_at).datetime_formatted});case"topic":return b.t("messages.topic_locked_at","This topic was locked %{at}.",{at:c.parseFromISO(a.lock_at).datetime_formatted});case"file":return b.t("messages.file_locked_at","This file was locked %{at}.",{at:c.parseFromISO(a.lock_at).datetime_formatted});case"page":return b.t("messages.page_locked_at","This page was locked %{at}.",{at:c.parseFromISO(a.lock_at).datetime_formatted});default:return b.t("messages.content_locked_at","This content was locked %{at}.",{at:c.parseFromISO(a.lock_at).datetime_formatted})}else if(a.unlock_at)switch(e){case"quiz":return b.t("messages.quiz_locked_until","This quiz is locked until %{date}.",{date:c.parseFromISO(a.unlock_at).datetime_formatted});case"assignment":return b.t("messages.assignment_locked_until","This assignment is locked until %{date}.",{date:c.parseFromISO(a.unlock_at).datetime_formatted});case"topic":return b.t("messages.topic_locked_until","This topic is locked until %{date}.",{date:c.parseFromISO(a.unlock_at).datetime_formatted});case"file":return b.t("messages.file_locked_until","This file is locked until %{date}.",{date:c.parseFromISO(a.unlock_at).datetime_formatted});case"page":return b.t("messages.page_locked_until","This page is locked until %{date}.",{date:c.parseFromISO(a.unlock_at).datetime_formatted});default:return b.t("messages.content_locked_until","This content is locked until %{date}.",{date:c.parseFromISO(a.unlock_at).datetime_formatted})}else if(a.context_module){var f="";switch(e){case"quiz":f+=b.t("messages.quiz_locked_module","This quiz is part of the module *%{module}* and hasn't been unlocked yet.",{module:d(a.context_module.name),wrapper:"<b>$1</b>"});break;case"assignment":f+=b.t("messages.assignment_locked_module","This assignment is part of the module *%{module}* and hasn't been unlocked yet.",{module:d(a.context_module.name),wrapper:"<b>$1</b>"});break;case"topic":f+=b.t("messages.topic_locked_module","This topic is part of the module *%{module}* and hasn't been unlocked yet.",{module:d(a.context_module.name),wrapper:"<b>$1</b>"});break;case"file":f+=b.t("messages.file_locked_module","This file is part of the module *%{module}* and hasn't been unlocked yet.",{module:d(a.context_module.name),wrapper:"<b>$1</b>"});break;case"page":f+=b.t("messages.page_locked_module","This page is part of the module *%{module}* and hasn't been unlocked yet.",{module:d(a.context_module.name),wrapper:"<b>$1</b>"});break;default:f+=b.t("messages.content_locked_module","This content is part of the module *%{module}* and hasn't been unlocked yet.",{module:d(a.context_module.name),wrapper:"<b>$1</b>"})}if(c("#context_modules_url").length>0)return f+="<br/>",f+="<a href='"+c("#context_modules_url").attr("href")+"'>",f+=b.t("messages.visit_modules_page_for_details","Visit the modules page for information on how to unlock this content."),f+="</a>",f}else switch(e){case"quiz":return b.t("messages.quiz_locked_no_reason","This quiz is locked.  No other reason has been provided.");case"assignment":return b.t("messages.assignment_locked_no_reason","This assignment is locked.  No other reason has been provided.");case"topic":return b.t("messages.topic_locked_no_reason","This topic is locked.  No other reason has been provided.");case"file":return b.t("messages.file_locked_no_reason","This file is locked.  No other reason has been provided.");case"page":return b.t("messages.page_locked_no_reason","This page is locked.  No other reason has been provided.");default:return b.t("messages.content_locked_no_reason","This content is locked.  No other reason has been provided.")}},c(document).ready(function(){c(".content_lock_icon").live("click",function(e){if(c(this).data("lock_reason")){e.preventDefault();var f=c(this).data("lock_reason"),g=f.type,h=c("<div/>");h.html(a.lockExplanation(f,g));var i=c("#lock_reason_dialog");if(i.length===0){i=c("<div/>").attr("id","lock_reason_dialog"),c("body").append(i.hide());var j="<div class='lock_reason_content'></div><div class='button-container'><button type='button' class='btn' >"+d(b.t("buttons.ok_thanks","Ok, Thanks"))+"</button></div>";i.append(j),i.find(".button-container .btn").click(function(){i.dialog("close")})}i.find(".lock_reason_content").empty().append(h),i.dialog({title:b.t("titles.content_is_locked","Content Is Locked")})}})})}),define("calendar_move",["i18n!calendars","jquery","jquery.instructure_date_and_time","jquery.templateData","jqueryui/datepicker"],function(a,b){function d(a){return{day:a.getDate(),month:a.getMonth(),year:a.getFullYear()}}var c=a.t("#date.month_names");return{changeMonth:function(a,e){var f=a.data("calendar_objects"),g={},h=null;if(typeof e=="string"){var h=b.datepicker.parseDate("mm/dd/yy",e);h&&h.setDate(1)}if(!h)var i=parseInt(a.find(".month_number").text(),10),j=parseInt(a.find(".year_number").text(),10),h=new Date(j,i+e-1,1);var g={month_name:c[h.getMonth()+1],month_number:h.getMonth()+1,year_number:h.getFullYear()};a.fillTemplateData({data:g});var k=new Date,l=d(k),m=d(h);k=h,k.setDate(0),k.setDate(k.getDate()-k.getDay());var n=d(k),o=null;m.day!=n.day&&(k.setDate(1),k.setMonth(k.getMonth()+1),k.setDate(0),o={day:k.getDate(),month:n.month,year:n.year},k.setDate(1),k.setMonth(k.getMonth()+1)),k.setMonth(h.getMonth()+1),k.setDate(0);var p={day:k.getDate(),month:m.month,year:m.yearh};k.setDate(k.getDate()+1),k.setDate(k.getDate()+(6-k.getDay())),k.setDate(k.getDate()+7);var q=d(k),r=a.data("days");r||(r=a.find(".calendar_day_holder"),a.data("days",r)),a.hasClass("mini_month")&&(r=a.find(".day")),a.find(".calendar_event").remove();var s=0,t=n.day,i=n.month,j=n.year;while(t<=q.day||i!=q.month){var u=r.eq(s);if(u.length>0){var v=u.attr("class").split(" "),w=[];for(var x=0;x<v.length;x++)v[x].indexOf("date_")!=0&&w.push(v[x]);u.attr("class",w.join(" "))}u.show().addClass("visible").parents("tr").show().addClass("visible");var g={day_number:t},y=i<9?"0"+(i+1):i+1,z=t<10?"0"+t:t;id="day_"+j+"_"+y+"_"+z,a.hasClass("mini_month")&&(id="mini_"+id),u.attr("id",id).addClass("date_"+y+"_"+z+"_"+j).find(".day_number").text(t).attr("title",y+"/"+z+"/"+j).addClass("date_"+y+"_"+z+"_"+j);var A=u.children("div");a.hasClass("mini_month")&&(A=u),A.removeClass("current_month other_month today"),i==m.month?A.addClass("current_month"):A.addClass("other_month"),i==l.month&&t==l.day&&j==l.year&&A.addClass("today"),t++,s++;if(o&&t>o.day&&i==o.month||t>p.day&&i==p.month)i+=1,i>=12&&(i-=12,j++),t=1}while(s<r.length){var u=r.eq(s);u.parents("tr").hide().removeClass("visible"),u.hide().removeClass("visible"),s++}!!a.hasClass("mini_month")}}}),define("calendar",["INST","i18n!calendars","jquery","compiled/userSettings","calendar_move","jqueryui/draggable","jquery.ajaxJSON","jquery.instructure_date_and_time","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.keycodes","compiled/jquery.rails_flash_notifications","jquery.templateData","vendor/date","vendor/jquery.scrollTo","jqueryui/datepicker","jqueryui/resizable","jqueryui/sortable","jqueryui/tabs"],function(a,b,c,d,e){function f(a,b){c(document).data("dragging",!0),c(this).parents(".calendar_day_holder").addClass("selected");if(c(this).hasClass("event_pending")||!(c(this).data("event_data")||{}).can_edit)return a.preventDefault(),a.stopPropagation(),!1;setTimeout(g,50),c(this).addClass("event_pending")}function g(){c(".calendar_month, .calendar_week, .calendar_day, .calendar_undated, .mini_calendar, .mini_calendar_week, .mini_calendar_day").each(function(){if(c(this).data("drag_position"))return;var a=c(this),b=a.offset(),d=a.outerWidth(),e=a.outerHeight();c(this).hasClass(".calendar_week")&&(e=a.find(".calendar_day:first").outerHeight()),c(this).data("drag_position",{offset:b,width:d,height:e})})}function i(a,b){a=a.originalEvent;var d=a.pageX,e=a.pageY,f=null,g=null,i=null;if(!c(".calendar_day_undated").data("drag_position"))return;if(h){var j=h.data("drag_position");if(d>=j.offset.left&&d<=j.offset.left+j.width&&e>=j.offset.top&&e<=j.offset.top+j.height)return h}return c(".calendar_day_undated").each(function(){var a=c(this).data("drag_position");if(d>=a.offset.left&&d<=a.offset.left+a.width&&e>=a.offset.top&&e<=a.offset.top+a.height)return i=c(this),!1}),i?i:(c(".calendar_month,.mini_calendar").each(function(){var a=c(this).data("drag_position");if(d>=a.offset.left&&d<=a.offset.left+a.width&&e>=a.offset.top&&e<=a.offset.top+a.height)return f=c(this),!1}),f&&(f.find(".calendar_week,.mini_calendar_week").each(function(){var a=c(this).data("drag_position");if(d>=a.offset.left&&d<=a.offset.left+a.width&&e>=a.offset.top&&e<=a.offset.top+a.height)return g=c(this),!1}),g&&g.find(".calendar_day,.mini_calendar_day").each(function(){var a=c(this).data("drag_position");if(d>=a.offset.left&&d<=a.offset.left+a.width&&e>=a.offset.top&&e<=a.offset.top+a.height)return i=c(this),!1})),h=i,i)}function j(a,d){c(document).data("dragging",!1),c("td.selected").removeClass("selected"),c(".drop_target").removeClass("drop_target");var e=i(a,d),f=c(this);if(e&&e[0]!=f.parents(".calendar_day")[0]){var g=c.extend({},f.getTemplateData({textValues:["start_date_string","start_time_string","end_time_string","event_type","id","context_id","context_type","all_day"]}),f.data("event_data")),h=g.context_type.toLowerCase()+"_"+g.context_id,j,k,m=g.event_type;g.all_day=="true"&&(g.start_time_string="",g.end_time_string="");if(e.hasClass("calendar_day_undated"))j=null,k=null;else{var n=f.parents(".calendar_day").find(".day_number").attr("title"),o=e.find(".day_number").attr("title");j=c.parseDateTime(o,g.start_time_string),k=c.parseDateTime(o,g.end_time_string)}var q=c("#context_urls ."+h+"_event_url").attr("href");m=="assignment"?(g=c.extend(g,c.formatDateTime(j,{object_name:"assignment",property_name:"due_at"})),q=c("#context_urls ."+h+"_assignment_url").attr("href")):(g=c.extend(g,c.formatDateTime(j,{object_name:"calendar_event",property_name:"start_at"})),g=c.extend(g,c.formatDateTime(k,{object_name:"calendar_event",property_name:"end_at"}))),q=c.replaceTags(q,"id",g.id);var r=null;if(e.hasClass("mini_calendar_day")){r=e.find(".day_number").attr("title")||"";var s=Date.parse(r);s&&(e=c("#day_"+s.toString("yyyy_MM_dd")).find(".calendar_day"))}l(f,e.parent()),c.ajaxJSON(q,"PUT",g,function(a){f.removeClass("event_pending"),x(a),p(a),!e.length&&r&&c.flashMessage(b.t("notices.event_moved","%{event} was moved to %{day}",{event:f.find(".title").text()||b.t("default_title","event"),day:r}))})}else c(this).removeClass("event_pending")}function l(a,b,d){return $before=null,b.length===0&&a.remove(),d||b.find(".calendar_event").each(function(){var b=(c(this).data("event_data")||{}).time_sortable||"",d=(a.data("event_data")||{}).time_sortable||"";if(b>d)return $before=c(this),!1;if(b==d&&c(this).find(".title").text()>a.find(".title").text())return $before=c(this),!1}),$before&&!d?$before.before(a.show()):b.children("div.calendar_day").append(a.show()),a}function m(a,b){e.changeMonth(a,b),a.hasClass("mini_month")||setTimeout(n,500)}function n(){$month=c(".calendar_container .calendar_month"),s($month,!0)}function p(a){var b=a.calendar_event||a.assignment,c=b.id;for(var d in o)calendar.appendToCache(d,[a])}function q(a){var b=a.attr("id").split("_").pop(),c=a.hasClass("assignment")?"assignment":"calendar_event";calendar.removeFromCache({asset_string:c+"_"+b})}function r(a,b){var c=0,d=[],e=function(f){if(a.length>0){var g=a.shift();c++;if(g){var h=x(g,null,b);d.push("#event_"+h)}c>50?(c=0,setTimeout(function(){e(f)},500)):e(f)}else if(f)var i=d.join(",")};setTimeout(function(){e(!0)},10)}function s(a,b,d,e){var f,g,h=!0;if(typeof a=="string"){var i=a.split("/");f=i[0],g=i[1],a=c(".calendar_month:first"),h=!1}else a.monthLoading(),f=parseInt(a.find(".month_number").text(),10),g=parseInt(a.find(".year_number").text(),10);var j="/calendar?"+c.param({month:f,year:g}),k=j+(e==0?"":"&include_undated=1"),l=[];o[j]||(o[j]=[]),o[j].contexts_last_update_at=o[j].contexts_last_update_at||{},o[j].contexts_loading=o[j].contexts_loading||{};var m=null,n=!0;c(".calendar_links .group_reference_checkbox:checked").each(function(){var a=c(this).attr("id").substring(6);o[j].contexts_last_update_at[a]||(n=!1);if(m!=""&&o[j].contexts_last_update_at[a]){if(!m||o[j].contexts_last_update_at[a]<m)m=o[j].contexts_last_update_at[a]}else m="";o[j].contexts_loading[a]||(!b||!o[j].contexts_last_update_at[a])&&l.push(a)}),k=k+"&last_update_at="+(m||"");var p={};h&&a.find(".calendar_event").each(function(){c(this).attr("id")&&(p[c(this).attr("id")]=!0)}),delete p.event_blank,delete p.event_new,delete p.event_id;if(b&&n&&o[j]&&(o[j].dont_retry||o[j].length>0)){var q=c.merge([],o[j]);h&&(r(q),a.monthLoading("remove"))}else{h&&a.monthLoading("remove");var s={};d&&(s.timeout=2e3);var t=[],u=[];for(var v in l)u.push(l[v]),u.length>=5&&(t.push(u),u=[]);u.length>0&&t.push(u);for(var v in t)h&&a.monthLoading(),function(b,d,e){for(var f in b)o[d].contexts_loading[b[f]]=!0;var g=e+"&only_contexts="+b.join(",");c.ajaxJSON(g,"GET",{},function(e){calendar.appendToCache(d,e),c.each(e,function(a,b){var c=(b.calendar_event||b.assignment).context_code,e=(b.calendar_event||b.assignment).updated_at;if(!calendar.lastUpdate[d]||e>calendar.lastUpdate[d])calendar.lastUpdate[d]=e;if(!o[d].contexts_last_update_at[c]||e>o[d].contexts_last_update_at[c])o[d].contexts_last_update_at[c]=e});var f=(new Date).toString("u");for(var g in b)o[d].contexts_last_update_at[b[g]]=o[d].contexts_last_update_at[b[g]]||f,o[d].contexts_loading[b[g]]=!1;h&&(r(e,!0),a.monthLoading("remove"))},function(c){o[d]&&o[d].dont_retry&&(o[d].dont_retry=!1);for(var e in b)o[d].contexts_loading[b[e]]=!1;h&&a.monthLoading("remove")})}(t[v],j,k)}}function x(a,b,d){var e=c.extend({},a.assignment),f=null,g=null;if(a.calendar_event){e=c.extend({},a.calendar_event);var h=c.parseFromISO(e.start_at),i=c.parseFromISO(e.end_at);e.start_time_string=h.time_string,e.end_time_string=i.time_string,e.start_time_formatted=h.time_formatted,e.start_date_string=h.date_formatted,e.end_time_formatted=i.time_formatted,e.time_sortable=h.time_sortable,e.event_type="calendar_event",f="calendar_event_"+e.id,x.details_urls=x.details_urls||{},key="calendar_event_"+e.context_type+e.context_id;if(!x.details_urls[key]){var j=t;j=c.replaceTags(j,"context_id",e.context_id),j=c.replaceTags(j,"context_type",e.context_type.toLowerCase()),x.details_urls[key]=j}g=x.details_urls[key]}else{var m=c.parseFromISO(e.due_at,"due_date");e.start_time_string=m.time_string,e.end_time_string=m.time_string,e.start_time_formatted=m.time_formatted,e.start_date_string=m.date_formatted,e.end_time_formatted=m.time_formatted,e.time_sortable=m.time_sortable,e.start_at=e.due_at,e.event_type="assignment",f="assignment_"+e.id,x.details_urls=x.details_urls||{},key="assignment_"+e.context_type+e.context_id;if(!x.details_urls[key]){var j=u;j=c.replaceTags(j,"context_id",e.context_id),j=c.replaceTags(j,"context_type",e.context_type.toLowerCase()),x.details_urls[key]=j}g=x.details_urls[key],g=c.replaceTags(g,"id",e.id),g=c.replaceTags(g,"context_id",e.context_id),g=c.replaceTags(g,"context_type",e.context_type.toLowerCase())}b&&b.attr("id")=="event_new"&&b.attr("id","event_"+f);if(!e.start_at&&!b&&!calendar.showingUndatedEvents){calendar.hiddenUndatedEvents=calendar.hiddenUndatedEvents||[],calendar.hiddenUndatedEvents.push(a),w.text(calendar.hiddenUndatedEvents.length);return}if(!b||b.attr("id")!="event_new"&&b.attr("id")!="event_"+f){b=c("#event_"+f+":visible");if(b.length>0&&b.find(".updated_at").text()==e.updated_at)return}b=c("#event_"+f);var n=c.parseFromISO(e.all_day_date);n.date_timestamp&&!1?(e.start_at=e.all_day_date.substring(0,10),e.all_day_date=n.date_formatted):e.all_day_date="",e.all_day&&(e.start_at=e.all_day_date.substring(0,10),n.date_timestamp&&(e.all_day_date=n.date_formatted,e.start_at=n.date_sortable.substring(0,10)),e.start_time_formatted="",e.end_time_formatted="");var o=managementContexts&&c.inArray(e.context_code,managementContexts)!=-1;if(e.permissions||o)e.can_edit=o||e.permissions&&e.permissions.update,e.can_delete=o||e.permissions&&e.permissions["delete"];if(e.workflow_state=="deleted")return b.remove(),f;!b||b.length===0?(b=v.clone(!0),g=c.replaceTags(g,"id",e.id),b.find(".title").attr("href",g),b.toggleClass("assignment",!!a.assignment),d!==!0&&b.draggable(k)):b.find(".title").attr("href")==="#"&&(g=c.replaceTags(g,"id",e.id),b.find(".title").attr("href",g)),b.fillTemplateData({data:{title:e.title},hrefValues:["id"],id:"event_"+f}),b.data("event_data",e),b.toggleClass("draggable",e.can_edit),b.data("description",e.description);var p=b.attr("class")||"",q="group_"+e.context_code;b.addClass(q),b.find(".calendar-name-text").text(c("."+q).find("label").text()),b.addClass("event_"+f);var r=c(".calendar_undated");e.start_at!=null&&(r=c("#day_"+e.start_at.substring(0,10).replace(/-/g,"_"))),b.hasClass("event_pending")||l(b,r,d);var s=e.start_time_formatted||"";return e.start_time_string&&e.start_time_string!=e.end_time_string&&(s+=" to "+(e.end_time_formatted||"")),event_title=e.title,event_title+=s?" - "+s:"",a.assignment&&s&&(event_title="due: "+event_title),b.find(".calendar_event_text").attr("title",event_title).show(),c("#"+q).length>0&&b.showIf(c("#"+q).attr("checked")),e.id==calendar.activateEventId&&calendar.activateEventId&&(r=b.parents(".calendar_day"),calendar.activateEventId=null,z(b,r)),f}function y(a){c(".calendar_month").each(function(){s(c(this),a||!1,!0,null)})}function z(d,e){var f=c("#event_details"),g=c("#edit_event"),h=c.extend({},d.getTemplateData({textValues:["id","start_time_string","end_time_string","start_date_string","title","event_type","can_edit","can_delete","context_id","context_type","all_day"],htmlValues:["description"]}),d.data("event_data"));h.description=d.data("description"),h.start_time=h.start_time_string,h.end_time=h.end_time_string;var i={},j="",k="";e.find(".day_number").length&&(j=e.find(".day_number").attr("title").split("/").pop(),k=h.start_date_string,k.match(new RegExp(j))||(k=k+" "+j)),h.all_day=="true"?(i=Date.parse(k),h.time_string=c.dateString(i)):h.start_time_string?(i=Date.parse(k),h.time_string=c.dateString(i)):(h.time_string="No Date Set",h.date=""),f.data("current_event",d).data("current_day",e);var l=null;f.find(".title").attr("href",d.find(".title").attr("href")),f.find(".view_event_link").attr("href",d.find(".title").attr("href")),f.find(".delete_event_link").attr("href",d.find(".delete_"+h.event_type+"_link").attr("href")),f.find(".edit_event").showIf(h.can_edit&&!h.frozen),f.find(".delete_event").showIf(h.can_delete&&!h.frozen);var m=d.attr("id")=="event_blank",n="Event",o=null;m?c("#edit_event").addClass("new_event"):c("#edit_event").removeClass("new_event"),h.event_type=="assignment"&&(n="Assignment");if(h.event_type=="assignment"||h.start_time==h.end_time){if(h.all_day=="true"&&h.event_type=="assignment")h.time_string=h.start_date_string+" at "+h.start_time_string;else if(h.start_time){var k=c.dateString(i);h.time_string=k+" at "+h.start_time_string}h.event_type=="assignment"&&h.time_string&&(h.time_string="due: "+h.time_string)}h.description=d.data("description"),f.fillTemplateData({data:h,htmlValues:["description"]}),h.lock_info&&f.find(".lock_explanation").html(a.lockExplanation(h.lock_info,"assignment")),g.data("dialog")&&g.dialog("close"),f.find(".description").css("max-height",Math.max(c(window).height()-200,150));var p=n=="Event"?b.t("event_details","Event Details"):b.t("assignment_details","Assignment Details");f.dialog({title:p,width:h.description.length>2e3?Math.max(c(window).width()-300,450):450,resizable:!0,close:function(){c(document).click(),B()},open:function(){c(document).triggerHandler("event_dialog",c(this))}}),d.addClass("selected"),A(e.parents(".calendar_day_holder"))}function A(a){c(".calendar_container").data("prevent_hover",!0),c(".calendar_day_holder.selected").removeClass("selected"),c(".mini_calendar .day.related").removeClass("related"),a.addClass("selected");var b=a.find(".day_number").attr("title");if(b){var d=c(".mini_calendar .day.date_"+b.replace(/\//g,"_"));d.addClass("related")}}function B(){c(".calendar_container").data("prevent_hover",!1),c(".calendar_day_holder.selected").removeClass("selected"),c(".mini_calendar .day.related").removeClass("related")}function C(a,b,d){if(a.attr("id")=="edit_assignment_form")if(a.hasClass("new_event")){a.attr("method","POST");var e=c("#context_urls ."+b+"_add_assignment_url").attr("href")||"";a.find(".more_options_link").attr("href",c("."+b+"_add_assignment_url").attr("href")+"/new"),a.attr("action",e)}else{a.attr("method","PUT");var e=c("#context_urls ."+b+"_assignment_url").attr("href")||"";e=c.replaceTags(e,"id",d),a.find(".more_options_link").attr("href",e+"/edit"),a.attr("action",e)}else if(a.hasClass("new_event")){a.attr("method","POST");var e=c("#context_urls ."+b+"_add_event_url").attr("href")||"";a.find(".more_options_link").attr("href",c("."+b+"_add_event_url").attr("href")+"/new"),a.attr("action",e)}else{a.attr("method","PUT");var e=c("#context_urls ."+b+"_event_url").attr("href")||"";e=c.replaceTags(e,"id",d),a.find(".more_options_link").attr("href",e+"/edit"),a.attr("action",e)}}function D(a,d){var e=c("#edit_event"),f=c("#event_details"),g=c.extend({},a.data("event_data"),a.getTemplateData({textValues:["title"]}));g.description=a.data("description"),g.context_type=g.context_type||"",g.id=g.id||"";var h=g.context_type.toLowerCase()+"_"+g.context_id;if(!g.context_type||a.attr("id")=="event_blank")h=c("#edit_event select.context_id").val();g.start_time=g.start_time_string||"",g.end_time=g.end_time_string||"",g.date=d.find(".day_number").attr("title"),g.all_day=="true"&&(g.start_time="",g.end_time="",g.date=g.all_day_date),g.due_at="";var i=Date.parse(g.date+" "+g.start_time)||Date.parse(g.date),j=Date.parse(g.date+" "+g.end_time)||Date.parse(g.date);i?(g.date=i.toString("MMM d, yyyy"),g.due_at=c.datetime.clean(i),g.start_time_string&&(g.start_time=i.toString("h:mmtt").toLowerCase()),g.end_time_string&&(g.end_time=j.toString("h:mmtt").toLowerCase())):g.date="";var k=a.attr("id")=="event_blank",l="Event",m=null;c("#edit_event,#edit_assignment_form,#edit_calendar_event_form").toggleClass("new_event",k),k&&g.event_type=="calendar_event";var n=0,o=e.find("#edit_assignment_form");o.find("select.context_id").val(h),C(o,h,g.id);var p=e.find("#edit_calendar_event_form");p.find("select.context_id").val(h),C(p,h,g.id),g.event_type=="assignment"?(m=o,l="Assignment"):m=p,c("#edit_assignment_form,#edit_calendar_event_form").data("event_id",g.id).data("context",h),c("#event_details").data("current_event",a),c("#edit_assignment_form").data("current_event",a),c("#edit_calendar_event_form").data("current_event",a),c("#edit_assignment_form").fillFormData(g,{object_name:"assignment"}),c("#edit_calendar_event_form").fillFormData(g,{object_name:"calendar_event"}),f.data("dialog")&&f.dialog("close"),A(d.parents(".calendar_day_holder"));var q;k?q=l=="Event"?b.t("titles.add_new_event","Add New Event"):b.t("titles.add_new_assignment","Add New Assignment"):q=l=="Event"?b.t("titles.edit_event","Edit Event"):b.t("titles.edit_assignment","Edit Assignment"),e.dialog({title:q,width:400,open:function(){c(document).triggerHandler("edit_event_dialog",e);var a=e.find("#edit_event_tabs"),b=c("#event_details").data("current_event"),d=c.extend({},b.data("event_data")),f=b.attr("id")=="event_blank",g=c.map(c(".group_reference_checkbox:checked"),function(a,b){return c(a).attr("id").replace("group_","")});c("#edit_event .context_select").each(function(){var a=c(this).find("select.context_id"),b=window.thisElementFiredTheEvent&&(c(window.thisElementFiredTheEvent).closest(".group_reference").find(".group_reference_checkbox").attr("id")||"").replace("group_",""),d=a.find("option").attr("disabled",function(){return g.length&&c.inArray(c(this).val(),g)===-1});g.length&&a.val(b||g[0]),c(this).showIf(f),a.val(h),a.triggerHandler("change",!1)}),a.tabs("enable",0),a.tabs("enable",1);var i=0;d.event_type=="assignment"?(i=1,a.tabs("select",1),f?a.find(".ui-tabs-nav").show():(a.find(".ui-tabs-nav").hide(),a.tabs("disable",0))):(a.tabs("select",0),f?a.find(".ui-tabs-nav").show():(a.find(".ui-tabs-nav").hide(),a.tabs("disable",1)),c("#edit_assignment_form select.context_id option").filter(function(){return!c(this).attr("disabled")}).length===0&&(a.tabs("disable",1),i=0)),f&&(i=0),a.tabs("select",i),i==0?c("#edit_calendar_event_form :text:first").focus().select():c("#edit_assignment_form :text:first").focus().select(),a.find(".ui-tabs-panel:eq("+a.tabs("option","selected")+") select.context_id").triggerHandler("change"),c("#edit_assignment_form").find(".assignment_group_id").val(d.assignment_group_id)},drag:function(){m.hideErrors()},autoSize:!0,close:function(){B();var a=c("#edit_event .assignment_group_id");if(a.length>0){var b=c("#"+a.attr("id").substring(5));b.empty().append(a.children().clone())}var d=c("#edit_event_tabs").data("selected.tabs");if(c("#edit_event").hasClass("new_event")){var e={};d==1?(e=c("#edit_assignment_form").getFormData({object_name:"assignment"}),e.event_type="assignment",e.start_time_string=e.start_time,e.end_time_string=e.start_time):(e=c("#edit_calendar_event_form").getFormData({object_name:"calendar_event"}),e.event_type="calendar_event",e.start_time_string=e.start_time,e.end_time_string=e.end_time),c("#event_blank").fillTemplateData({data:e})}m.find("input[name='date']").datepicker("hide")},resizable:!1,modal:!0});if(g.context_id&&g.context_type){var r=e.find("#edit_event_tabs"),s=(""+g.context_type+"_"+g.context_id).toLowerCase();r.data("group_class")&&r.removeClass(r.data("group_class")),r.addClass("group_"+s).data("group_class","group_"+s)}}function E(a){var b=c(".calendar_container .calendar_day_holder.selected:first");if(!b||b.length===0){F(a);return}var d=b.find(".calendar_event"),e=d.filter(".selected:first");if(d.length===0){a=="down"?a="right":a=="up"&&(a="left"),F(a);return}if(!e||e.length===0){c(".calendar_event.selected").removeClass("selected"),a=="up"?e=b.find(".calendar_event:last"):e=b.find(".calendar_event:first"),e.find("a.title").focus(),e.addClass("selected"),c("html,body").scrollTo(e);return}if(a=="up")var f=e.prev(".calendar_event");else var f=e.next(".calendar_event");f&&f.length>0?(c(".calendar_event.selected").removeClass("selected"),f.find("a.title").focus(),f.addClass("selected"),c("html,body").scrollTo(f)):(a=="down"?a="right":a=="up"&&(a="left"),F(a))}function F(a){var b=c(".calendar_container .calendar_day_holder.selected:first");if(!b||b.length===0){c(".calendar_container .calendar_day_holder.selected").removeClass("selected"),c(".calendar_container .calendar_event.selected").removeClass("selected"),b=c(".calendar_container .calendar_day_holder .current_month").eq(0).parent(),b.addClass("selected"),c("html,body").scrollTo(b);return}var d=b.parents(".calendar_month"),e=null,f=b.attr("id").split("_"),g=new Date(f[1],f[2]-1,f[3]);if(a=="right")e=b.next().find(".current_month").parent(),e.length===0&&(e=b.parent().next(".visible").find(".calendar_day_holder .current_month").eq(0).parent()),e.length===0&&(g.setDate(g.getDate()+1),m(d,1),e=c("#day_"+c.datepicker.formatDate("yy_mm_dd",g)));else if(a=="left")e=b.prev().find(".current_month").parent(),e.length===0&&(e=b.parent().prev(".visible").find(".calendar_day_holder .current_month").filter(":last").parent()),e.length===0&&(g.setDate(g.getDate()-1),m(d,-1),e=c("#day_"+c.datepicker.formatDate("yy_mm_dd",g)));else if(a=="up"){var h=b.parent().children(".calendar_day_holder").index(b);e=b.parent().prev(".visible").children(".calendar_day_holder").eq(h).find(".current_month").parent(),e.length===0&&(g.setDate(g.getDate()-7),m(d,-1),e=c("#day_"+c.datepicker.formatDate("yy_mm_dd",g)))}else if(a=="down"){var h=b.parent().children(".calendar_day_holder").index(b);e=b.parent().next(".visible").children(".calendar_day_holder").eq(h).find(".current_month").parent(),e.length===0&&(g.setDate(g.getDate()+7),m(d,1),e=c("#day_"+c.datepicker.formatDate("yy_mm_dd",g)))}e&&e.length>0&&(e.focus(),c(".calendar_container .calendar_day_holder.selected").removeClass("selected"),c(".calendar_container .calendar_day.hover").removeClass("hover"),c(".calendar_container .calendar_event.selected").removeClass("selected"),e.addClass("selected"),e.find(".calendar_day").addClass("hover"),c("html,body").scrollTo(e))}function G(){c(".calendar_month").each(function(){c(this).data("days",c(this).find(".calendar_day_holder"))})}function H(a){var d=c("#event_details"),e=c.extend({},a.data("event_data")),f=e.context_type.toLowerCase()+"_"+e.context_id,g=b.t("prompts.delete_event","Are you sure you want to delete this event?");e.event_type=="assignment"&&(g=b.t("prompts.delete_assignment","Are you sure you want to delete this assignment?"));var h=c("."+f+"_event_url").attr("href");e.event_type=="assignment"&&(h=c("."+f+"_assignment_url").attr("href")),h=c.replaceTags(h,"id",e.id),a.confirmDelete({url:h,message:g,confirmed:function(){d.dialog("close"),c(this).dim()},success:function(){c(document).triggerHandler("delete_event"),c(this).fadeOut(function(){c(this).remove(),q(a)})}})}window.calendar={activateEventId:ENV.CALENDAR.ACTIVE_EVENT,viewItem:function(a,b,c){},showingUndatedEvents:!1,appendToCache:function(a,b){var d={};o[a]=o[a]||[],c.each(b,function(a,b){var c=null;b.calendar_event?c="calendar_event_"+b.calendar_event.id:c="assignment_"+b.assignment.id,d[c]=b}),c.each(o[a],function(b,c){var e=null;c.calendar_event?e="calendar_event_"+c.calendar_event.id:e="assignment_"+c.assignment.id,d[e]&&(o[a][b]=d[e],d[e]=null)}),c.each(d,function(b,c){c&&o[a].push(c)})},removeFromCache:function(a){for(var b in o){var d=c.merge([],o[b]),e=[],f=!1;for(var g=0;g<d.length;g++){var h=d[g].assignment?"assignment":"calendar_event",i=d[g][h],j=h+"_"+i.id;a.asset_string&&a.asset_string==j?f=!0:e.push(d[g])}f&&(o[b]=e)}},lastUpdate:{}};var h=null,k={helper:function(){var a=c(this).outerWidth(),b=c(this).clone();return b.width(a).css("zIndex",20),c(this).parents(".calendar_container").append(b),b},scroll:!0,drag:function(a,b){if(c.browser.msie)return;var d=i(a,b);if(d&&d.hasClass("drop_target"))return;c(".drop_target").removeClass("drop_target"),d&&d.closest(".calendar_day_holder,.mini_calendar_day").addClass("drop_target")},start:f,stop:j},o={};c.fn.monthLoading=function(a){return c.fn.monthLoading.cnt=Math.max(c.fn.monthLoading.cnt||0,0),a?c.fn.monthLoading.cnt--:c.fn.monthLoading.cnt++,this.find(".refresh_calendar_link").find(".static").showIf(c.fn.monthLoading.cnt<=0).end().find(".animated").showIf(c.fn.monthLoading.cnt>0),this};var t=c("#event_details").find(".calendar_event_url").attr("href"),u=c("#event_details").find(".assignment_url").attr("href"),v=c("#event_blank"),w=c(".show_undated_link .undated_count");c(document).ready(function(){c(".calendar_day.today").removeClass("today"),c("#day_"+(new Date).toString("yyyy_MM_dd")).children(".calendar_day").addClass("today"),c(".show_undated_link").click(function(a){a.preventDefault(),calendar.showingUndatedEvents=!0,c(".undated_link").hide(),events=(calendar.hiddenUndatedEvents||[]).sort(function(a,b){var c=(a.calendar_event||a.assignment||{}).title||"",d=(b.calendar_event||b.assignment||{}).title||"";return c<d?0:d>c?1:0}),r(events||[],!0),c(".undated_content").show()}),c("#edit_calendar_event_form .more_options_link").click(function(a){a.preventDefault();var b=c(this).attr("href").split("#"),d=c("#edit_calendar_event_form").getFormData({object_name:"calendar_event"}),e={};d.title&&(e.title=d.title),d.date&&(e.start_at=d.date+" "+(d.start_time||""),e.end_at=d.date+" "+(d.end_time||"")),e.return_to=location.href,b[0]+="?"+c.param(e),location.href=b.join("#")}),c(".calendar_event").live("mouseover",function(){!c(this).hasClass("ui-draggable")&&c(this).hasClass("draggable")&&c(this).draggable(k)}),c("#edit_assignment_form .more_options_link").click(function(a){a.preventDefault();var b=c(this).attr("href").split("#"),d=c("#edit_assignment_form").getFormData({object_name:"assignment"}),e={};d.title&&(e.title=d.title),d.due_at&&(e.due_at=d.due_at),d.assignment_group_id&&(e.assignment_group_id=d.assignment_group_id),e.return_to=location.href,b[0]+="?"+c.param(e),location.href=b.join("#")}),c(".calendar_feed_link").click(function(a){a.preventDefault(),c("#calendar_feed_box").find(".calendar_feed_url").val(c(this).attr("href")).end().find(".show_calendar_feed_link").attr("href",c(this).attr("href")),c("#calendar_feed_box").dialog({title:b.t("feed_dialog_title","Calendar Feed"),width:375})}),c("#calendar_feed_box .calendar_feed_url").focus(function(){c(this).select()}),c(".calendar_day_holder").focus(function(a){c(".calendar_container .calendar_day.hover").removeClass("hover"),c(".calendar_container .calendar_event.selected").removeClass("selected"),c(this).find(".calendar_day").addClass("hover")}),c(".calendar_event a").focus(function(a){c(".calendar_container .calendar_day.hover").removeClass("hover"),c(".calendar_container .calendar_event.selected").removeClass("selected"),c(this).parents(".calendar_event").addClass("selected"),c(this).parents(".calendar_day").addClass("hover")}),c("#edit_event select.context_id").change(function(a,b){var d=c(this).val(),e=c("#"+d+"_assignment_groups").clone(!0).attr("id","temp_"+d+"_assignment_groups");attachAddAssignmentGroup(e,c("#context_urls ."+d+"_add_assignment_group_url").attr("href")),c(this).parents("form").find(".assignment_group_select").empty().append(e);var f=c(this).parents("form"),g=f.data("event_id"),h="";C(f,d,g),b!==!1&&c(this).parents("#edit_event").find("select.context_id").not(c(this)).val(c(this).val()).triggerHandler("change",!1);var i=c(this).closest("#edit_event");i.data("group_class")&&i.removeClass(i.data("group_class")),i.addClass("group_"+d).data("group_class","group_"+d)}),c("#edit_assignment_form .datetime_field, #edit_calendar_event_form .datetime_field").datetime_field(),c("#edit_calendar_event_form .time_field").time_field().blur(function(a){var b=c("#edit_calendar_event_form .time_field.start_time").next(".datetime_suggest").text();c("#edit_calendar_event_form .time_field.start_time").next(".datetime_suggest").hasClass("invalid_datetime")&&(b=null),b=b||c("#edit_calendar_event_form .time_field.start_time").val();var d=c("#edit_calendar_event_form .time_field.end_time").next(".datetime_suggest").text();c("#edit_calendar_event_form .time_field.end_time").next(".datetime_suggest").hasClass("invalid_datetime")&&(d=null),d=d||c("#edit_calendar_event_form .time_field.end_time").val();var e=Date.parse(b),f=Date.parse(d);e=e||f,f=f||e,c(this).hasClass("end_time")?e>f&&(e=f):f<e&&(f=e),e&&c("#edit_calendar_event_form .time_field.start_time").val(e.toString("h:mmtt").toLowerCase()),f&&c("#edit_calendar_event_form .time_field.end_time").val(f.toString("h:mmtt").toLowerCase())}),c("#edit_calendar_event_form .date_field").date_field(),c("#edit_event_form input[name='date']").datepicker(),c(".calendar_month").delegate(".next_month_link","click",function(a){a.preventDefault();var b=c(".calendar_month .month_name").text()+" "+c(".calendar_month .year_number").text(),d=Date.parse(b)||new Date;d.setMonth(d.getMonth()+1);var e={};try{e=c.parseJSON(c.decodeFromHex(location.hash.substring(1)))||{}}catch(f){e={}}e.month=d.getMonth()+1,e.year=d.getFullYear(),location.replace("#"+c.encodeToHex(JSON.stringify(e)))}).delegate(".prev_month_link","click",function(a){a.preventDefault();var b=c(".calendar_month .month_name").text()+" "+c(".calendar_month .year_number").text(),d=Date.parse(b)||new Date;d.setMonth(d.getMonth()-1);var e={};try{e=c.parseJSON(c.decodeFromHex(location.hash.substring(1)))||{}}catch(f){e={}}e.month=d.getMonth()+1,e.year=d.getFullYear(),location.replace("#"+c.encodeToHex(JSON.stringify(e)))});var a=parseInt(c("#max_calendar_count").text(),10)||10,e=function(){e.log=!0};setInterval(function(){if(e.log){e.log=!1;var a=[];c(".calendar_links .group_reference_checkbox:checked").each(function(){var b=c(this).attr("id").substring(6);a.push(b)}),d.set("checked_calendar_codes",a)}},1e3),c(".group_reference_checkbox").bind("change click",function(){var b=this;setTimeout(function(){c("."+c(b).attr("id")+":not(.group_reference)").showIf(c(b).attr("checked")),c(".calendar_links .group_reference_checkbox:checked").length>a&&c(".calendar_links .group_reference_checkbox:checked").not(b).filter(":first").attr("checked",!1).change(),c(b).attr("checked")&&y(!0),e(),c(".calendars_open_count").text(c(".calendar_links .group_reference_checkbox:checked").length)},10)}).filter(":last").change(),c(".calendar_container").delegate(".calendar_day","mouseover",function(a){var b=c(a.liveFired||c(this).parents(".calendar_container"));if(b.data("prevent_hover"))return;c(".calendar_day.hover").removeClass("hover"),c(this).addClass("hover");var d=c(this).find(".day_number").attr("title");if(d&&!c(document).data("dragging")){var e=c(".mini_calendar .day.date_"+d.replace(/\//g,"_"));e.addClass("related")}}).delegate(".calendar_day","mouseout",function(a){var b=c(a.liveFired||c(this).parents(".calendar_container"));if(b.data("prevent_hover"))return;c(this).removeClass("hover");var d=c(this).find(".day_number").attr("title");if(d){var e=c(".mini_calendar .day.date_"+d.replace(/\//g,"_"));e.removeClass("related")}}),c(".mini_month").delegate(".next_month_link","mousedown",function(a){a.preventDefault(),m(c(a.liveFired||c(this).parents(".mini_month")),1)}).delegate(".prev_month_link","mousedown",function(a){a.preventDefault(),m(c(a.liveFired||c(this).parents(".mini_month")),-1)}).delegate(".next_month_link,.prev_month_link","click",function(a){a.preventDefault()}).delegate(".day_number","click",function(a){a.preventDefault();var b=c(this).attr("title");m(c(a.liveFired||c(this).parents(".mini_month")),b),m(c(".calendar_container .calendar_month"),b)}),c(document).click(function(a){var b=c(this);c(".calendar_container .calendar_event.selected").each(function(a){c(this).parent()[0]!=b[0]&&c(this).removeClass("selected")}),c(".calendar_container .calendar_day_holder.selected").each(function(a){c(this)[0]!=b.parent()[0]&&c(this).removeClass("selected")})}),c(".calendar_event").live("click",function(a){a.preventDefault(),a.stopPropagation(),c(".calendar_day_holder.selected,.calendar_event.selected").removeClass("selected"),z(c(this),c(this).parents(".calendar_day"))}),c(".calendar_container").delegate(".calendar_day","click",function(a){if(c(a.target).closest(".calendar_event").length>0)return;a.preventDefault(),a.stopPropagation();if(canCreateEvent){D(c("#event_blank"),c(this));var b=(c(".group_reference_checkbox:checked:first").attr("id")||"").replace(/^group_/,"");b||(b=(c(".group_reference.default_context").find(".group_reference_checkbox").attr("id")||"").replace(/^group_/,"")),b&&c("#edit_event .context_select select.context_id").each(function(){c(this).val(b),this.selectedIndex<0&&(this.selectedIndex=0),c(this).triggerHandler("change",!1)})}}),c(document).delegate(".add_event_link","click",function(a){window.thisElementFiredTheEvent=this,a.preventDefault(),D(c("#event_blank"),c(this));var b=(c(this).closest(".group_reference").find(".group_reference_checkbox").attr("id")||"").replace("group_","");c("#edit_event .context_select select.context_id").val(b).triggerHandler("change",!1),window.thisElementFiredTheEvent=undefined}),c(document).keycodes([b.t("keycodes.next_day","ctrl+right"),b.t("keycodes.previous_day","ctrl+left"),b.t("keycodes.next_week","ctrl+down"),b.t("keycodes.previous_week","ctrl+up")].join(" "),function(a){a.preventDefault(),a.stopPropagation();var c;switch(a.keyString){case b.t("keycodes.next_day","ctrl+right"):c="right";break;case b.t("keycodes.previous_day","ctrl+left"):c="left";break;case b.t("keycodes.next_week","ctrl+down"):c="down";break;case b.t("keycodes.previous_week","ctrl+up"):c="up"}F(c)}),c(document).keycodes([b.t("keycodes.next_event","j"),b.t("keycodes.previous_event","k"),b.t("keycodes.open","o"),b.t("keycodes.edit","e"),b.t("keycodes.delete","d"),b.t("keycodes.new","n"),b.t("keycodes.refresh","r")].join(" "),function(a){a.preventDefault(),a.stopPropagation();var d=c(".calendar_event.selected:first"),e=c(".calendar_day_holder.selected:first");a.keyString==b.t("keycodes.next_event","j")?E("down"):a.keyString==b.t("keycodes.previous_event","k")?E("up"):a.keyString==b.t("keycodes.open","o")?d.click():a.keyString==b.t("keycodes.delete","d")?d.length>0&&d.find(".can_delete").text()=="true"&&H(d):a.keyString==b.t("keycodes.edit","e")?d.length>0&&d.find(".can_edit").text()=="true"&&D(d,e.children(".calendar_day")):a.keyString==b.t("keycodes.new","n")?D(c("#event_blank"),e.children(".calendar_day")):a.keyString==b.t("keycodes.refresh","r")&&y()}),c("#edit_calendar_event_form").formSubmit({object_name:"calendar_event",required:["title"],processData:function(a){a.start_time&&(a.end_time||(a.end_time=a.start_time));var b=Date.parse(a.date+" "+a.start_time);a.start_at="",a.end_at="",b?(a.time_sortable=b.toString("HH:mm"),a.event_date_string=b.toString("yyyy_MM_dd"),a.start_at=c.datetime.process(b),a.start_time=b.toString("hh:mmtt").toLowerCase()):(a.time_sortable="0",a.event_date_string=null),a.start_time&&!a.end_time&&(a.end_time=a.start_time);var d=Date.parse(a.date+" "+a.end_time);return d&&(a.end_at=c.datetime.process(d),a.end_time=d.toString("hh:mmtt").toLowerCase()),a["calendar_event[start_at]"]=a.start_at,a["calendar_event[end_at]"]=a.end_at,a},beforeSubmit:function(a){var b=c(this).data("current_event");if(!b)return!1;b.attr("id")=="event_blank"&&(b=b.clone(!0).attr("id","event_new"),b.draggable(k)),a=c.extend(a,c(this).getFormData({object_name:"calendar_event"})),a.start_time_string=a.start_time,a.end_time_string=a.end_time,a.event_type="calendar_event",b.fillTemplateData({data:a});var d=c(this).find("select.context_id").val();b.addClass("group_"+d),c("#group_"+d).attr("checked",!0).change(),b.find(".calendar_event_text").attr("title",a.title),b.addClass("event_pending");var e=c(".calendar_undated");return a.event_date_string&&(e=c("#day_"+a.event_date_string)),l(b,e),c("#edit_event").dialog("close"),b},success:function(a,b){b.removeClass("event_pending"),c(document).triggerHandler("add_event",b),x(a,b),p(a)}}),c("#edit_calendar_event_form input[name='date'],#edit_assignment_form input[name='date']").change(function(){c(".calendar_day.hover").removeClass("hover"),c(".calendar_day_holder.selected").removeClass("selected");var a=c(this).val().split("/"),b=null;a.length==3&&(b=a[2]+"_"+a[0]+"_"+a[1]),b&&A(c("#day_"+b))}),c("#edit_assignment_form").formSubmit({object_name:"assignment",required:["title"],processData:function(a){var b=Date.parse(a.due_at);return a.time_sortable="0",a.event_date_string="",a.start_time="",b&&(a["assignment[due_at]"]=c.datetime.process(b),a.time_sortable=b.toString("HH:mm"),a.event_date_string=b.toString("yyyy_MM_dd"),a.start_time=b.toString("hh:mmtt").toLowerCase()),a.start_time_string=a.start_time,a.end_time_string=a.start_time,a.event_type="assignment",a},beforeSubmit:function(a){var b=c(this).data("current_event");if(!b)return!1;b.attr("id")=="event_blank"&&(b=b.clone(!0).attr("id","event_new"),b.draggable(k));var d=c(this).find("select.context_id").val();return b.addClass("group_"+d),c("#group_"+d).attr("checked",!0).change(),b.find(".calendar_event_text").attr("title",a.title),b.fillTemplateData({data:a}),b.find(".calendar_event_text").attr("title",a.title),b.addClass("event_pending"),l(b,c("#day_"+a.event_date_string)),c("#edit_event").dialog("close"),b},success:function(a,b){b.removeClass("event_pending"),c(document).triggerHandler("add_event",b),x(a,b),p(a)}}),c(".refresh_calendar_link").click(function(a){a.preventDefault();var b=c(this).parents(".calendar_month");b.length>0?s(b):y()}),c("#event_details").delegate(".edit_event_link","click",function(a){a.preventDefault();var b=c("#event_details"),d=b.data("current_event"),e=b.data("current_day");d&&e&&D(d,e)}).delegate(".delete_event_link","click",function(a){a.preventDefault();var b=c("#event_details"),d=b.data("current_event");H(d)}),c(document).fragmentChange(function(a,b){if(b.indexOf("#calendar_event_")==0||b.indexOf("#assignment_")==0){var d="event_"+b.substring(1),e=c("#"+d);e.length>0&&(e.addClass("selected"),c("html,body").scrollTo(e.parents(".calendar_day")),e.click())}}),c("#edit_event_tabs").tabs().bind("tabsselect",function(a,b){c(document).triggerHandler("event_tab_select",b.index),c(b.panel).find("select.context_id").triggerHandler("change")});var f=d.get("checked_calendar_codes");if(f){var g=0;for(var h in f){var i=c("#group_"+f[h]);i.attr("checked",!0),i.length>0&&g++}g==0&&c(".group_reference .group_reference_checkbox:lt(10)").each(function(){c(this).attr("checked",!0)})}else c(".group_reference .group_reference_checkbox:lt(10)").each(function(){c(this).attr("checked",!0)});setTimeout(y,3e3),setInterval(y,6e5),setTimeout(G,1e3)}),c(function(){c("#right-side").delegate(".group_reference","mouseenter mouseleave",function(a){c(this).find(".add_event_link").showIf(a.type==="mouseenter"&&c(this).find(".group_reference_checkbox").attr("checked"))})}),c(function(){c(document).fragmentChange(function(){var a=null;try{a=c.parseJSON(c.decodeFromHex(document.location.hash.substring(1)))}catch(b){}if(a&&a.month&&parseInt(a.month,10)&&a.year&&parseInt(a.year,10)){var d=c(".calendar_month .month_name").text()+" "+c(".calendar_month .year_number").text(),e=Date.parse(d)||new Date,f=Date.parse(a.month+" "+a.year)||new Date;if(f.getMonth()!=e.getMonth()||f.getFullYear()!=e.getFullYear()){var g=c.datepicker.formatDate("mm/dd/yy",f);m(c(".calendar_month"),g),m(c(".calendar_container").find(".mini_month"),g)}}if(a&&a.show){var h=a.show.split(","),i=!h&&!h.length,j=!1,k=[];c(".group_reference_checkbox").each(function(){var a=this.checked;j=(this.checked=c.inArray(c(this).attr("id"),h)>-1||i)||j,this.checked!=a&&k.push(this)}),!j&&h!="nothing"&&c(".group_reference_checkbox").each(function(){var a=this.checked;this.checked=!0,this.checked!=a&&k.push(this)}),c.each(k,function(){c(this).triggerHandler("change","dontUpdateFragment")})}}),c(".group_reference_checkbox").bind("change click",function(a,b){setTimeout(function(){if(a==="dontUpdateFragment")return!0;var a=null;try{a=c.parseJSON(c.decodeFromHex(document.location.hash.substring(1)))}catch(b){}var d=[];c(".group_reference_checkbox:checked").each(function(){d.push(c(this).attr("id"))});var e={};e.show=d.join(",")||"nothing";var f=c(".calendar_month:first .month_number").text(),g=c(".calendar_month:first .year_number").text();e.month=a&&a.month||f,e.year=a&&a.year||g,location.replace("#"+c.encodeToHex(JSON.stringify(e)))},10)})})}),function(){require(["calendar","calendar_move","content_locks"])}.call(this),define("compiled/bundles/calendar",function(){})