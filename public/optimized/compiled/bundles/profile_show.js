(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/util/ProximityLoader",["jquery","underscore"],function(b,c){var d;return d=function(){function d(d,e){e==null&&(e={}),this._loadScript=a(this._loadScript,this),this._onMove=a(this._onMove,this),this.options=c.extend({},this.defaultOptions,e),this._cacheElements(d),this.deferred=b.Deferred().then(this._loadScript);if(!this.$el.length)return;this._attachEvents()}return d.prototype.defaultOptions={callback:b.noop,delay:200,dependencies:[],threshold:150},d.prototype._cacheElements=function(a){return this.$el=b(a),this.$body=b("body")},d.prototype._attachEvents=function(){return this.$body.on(this._eventName(),c.throttle(this._onMove,this.options.delay))},d.prototype._eventName=function(){return"mousemove.proximity."+this.$el.guid},d.prototype._dimensions=function(){return this.__dimensions||(this.__dimensions={bottom:this.$el.offset().top+this.$el.height()+this.options.threshold,left:this.$el.offset().left-this.options.threshold,right:this.$el.offset().left+this.$el.width()+this.options.threshold,top:this.$el.offset().top-this.options.threshold,centerX:this.$el.offset().left+this.$el.width()/2,centerY:this.$el.offset().top+this.$el.height()/2})},d.prototype._onMove=function(a){return this._isBounded(a.pageX,a.pageY)&&this._hasVelocity(a.pageX,a.pageY)&&this.deferred.resolve(),this.pageX=a.pageX,this.pageY=a.pageY,a},d.prototype._loadScript=function(){return this.$body.off(this._eventName()),require(this.options.dependencies,this.options.callback)},d.prototype._isBounded=function(a,b){return this._dimensions().left<a&&this._dimensions().right>a&&this._dimensions().top<b&&this._dimensions().bottom>b},d.prototype._hasVelocity=function(a,b){return Math.abs(this.pageX-this._dimensions().centerX)>Math.abs(a-this._dimensions().centerX)&&Math.abs(this.pageY-this._dimensions().centerY)>Math.abs(b-this._dimensions().centerY)},d}()})}).call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/util/AvatarWidget",["compiled/util/ProximityLoader"],function(b){var c;return c=function(){function c(b){this._openAvatarDialog=a(this._openAvatarDialog,this),this._initializeDialog=a(this._initializeDialog,this),this.$el=$(b),this._initializeLoader(),this._attachEvents()}return c.prototype._attemptedLoads=0,c.prototype._attachEvents=function(){return this.$el.on("click",this._openAvatarDialog)},c.prototype._initializeLoader=function(){return this.loader=new b(this.$el,{callback:this._initializeDialog,dependencies:["compiled/views/profiles/AvatarDialogView"]})},c.prototype._initializeDialog=function(a){return this.avatarDialog=new a},c.prototype._openAvatarDialog=function(a){return a!=null&&a.preventDefault(),typeof this.avatarDialog!="undefined"?this.avatarDialog.show():this._pollScriptLoad()},c.prototype._pollScriptLoad=function(){this.loader.deferred.resolve();if(this._attemptedLoads<20)return this._attemptedLoads++,setTimeout(this._openAvatarDialog,100);throw new Error("Failed to load AvatarDialogView")},c}()})}.call(this),define("translations/validate",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{validate:{is_required:"هذا الحقل مطلوب"}},es:{validate:{is_required:"Este campo es requerido"}},fr:{validate:{is_required:"Ce champ est obligatoire."}},ja:{validate:{is_required:"このフィールドは必須項目です"}},ko:{validate:{is_required:"이 필드가 필요함"}},nl:{validate:{is_required:"Dit veld is verplicht"}},pt:{validate:{is_required:"Este campo é obrigatório"}},ru:{validate:{is_required:"Необходимо это поле"}},zh:{validate:{is_required:"此字段为必填字段"}}}})}),function(){define("compiled/jquery/validate",["jquery","underscore","i18n!validate"],function(a,b,c){return a.fn.validate=function(){var d,e;return d={},this.find("[required]").each(function(){var b,e,f,g;b=a(this),e=b.attr("name"),f=b.val();if(f==="")return((g=d[e])!=null?g:d[e]=[]).push({name:e,type:"required",message:c.t("is_required","This field is required")})}),e=b.size(d)>0,e?(this.data("errors",d),!1):(this.data("errors",null),!0)}})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};require(["Backbone","jquery","str/htmlEscape","compiled/util/AvatarWidget","compiled/tinymce","compiled/jquery/validate","tinymce.editor_box"],function(a,c,d,e){var f,g,h;return g=a.View,f=function(a){function f(){return h=f.__super__.constructor.apply(this,arguments),h}return b(f,a),f.prototype.el=document.body,f.prototype.events={"click [data-event]":"handleDeclarativeClick","submit #edit_profile_form":"validateForm"},f.prototype.attemptedDependencyLoads=0,f.prototype.initialize=function(){return f.__super__.initialize.apply(this,arguments),new e(".profile-link")},f.prototype.handleDeclarativeClick=function(a){var b,d;return a.preventDefault(),b=c(a.currentTarget),d=b.data("event"),typeof this[d]=="function"?this[d](a,b):void 0},f.prototype.editProfile=function(){return this.initEdit(),this.editProfile=this.showEditForm},f.prototype.showEditForm=function(){return this.$el.addClass("editing").removeClass("not-editing"),this.$(".profile_links").removeClass("span6")},f.prototype.initEdit=function(){var a,b,c,d,e,f,g;if((e=this.options.links)!=null?e.length:void 0){f=this.options.links;for(c=0,d=f.length;c<d;c++)g=f[c],a=g.title,b=g.url,this.addLinkField(null,null,a,b)}else this.addLinkField(),this.addLinkField();return this.showEditForm()},f.prototype.cancelEditProfile=function(){return this.$el.addClass("not-editing").removeClass("editing"),this.$(".profile_links").addClass("span6")},f.prototype.addLinkField=function(a,b,e,f){var g,h;e==null&&(e=""),f==null&&(f=""),(h=this.$linkFields)==null&&(this.$linkFields=this.$("#profile_link_fields")),g=c('<tr>\n  <td><input type="text" maxlength="255" name="link_titles[]" value="'+d(e)+'"></td>\n  <td>→</td>\n  <td><input type="text" name="link_urls[]" value="'+d(f)+'"></td>\n  <td><a href="#" data-event="removeLinkRow"><i class="icon-end"></i></a></td>\n</tr>'),this.$linkFields.append(g);if(a!=null)return a.preventDefault(),g.find("input:first").focus()},f.prototype.removeLinkRow=function(a,b){return b.parents("tr").remove()},f.prototype.validateForm=function(a){if(!c("#edit_profile_form").validate())return a.preventDefault()},f}(g),new f(ENV.PROFILE)})}.call(this),define("compiled/bundles/profile_show",function(){})