(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("compiled/models/Progress",["Backbone"],function(b){var e,f,g;return e=b.Model,f=function(b){function e(){return this.onPoll=a(this.onPoll,this),this.poll=a(this.poll,this),g=e.__super__.constructor.apply(this,arguments),g}return c(e,b),e.prototype.defaults={url:null,timeout:1e3},e.prototype.pollStates=["queued","running"],e.prototype.isPolling=function(){var a;return a=this.get("workflow_state"),d.call(this.pollStates,a)>=0},e.prototype.initialize=function(){var a=this;return this.pollDfd=new $.Deferred,this.on("change:url",function(){if(a.isPolling())return a.poll()})},e.prototype.url=function(){return this.get("url")},e.prototype.poll=function(){var a=this;return this.fetch().then(this.onPoll,function(){return a.pollDfd.rejectWith(a,arguments)}),this.pollDfd},e.prototype.onPoll=function(){return this.isPolling()?setTimeout(this.poll,this.get("timeout")):(this.pollDfd.resolve(),this.trigger("complete"))},e}(e)})}).call(this),function(){define("compiled/models/progressable",["compiled/models/Progress","underscore"],function(a,b){var c;return c={initialize:function(){return this.progressModel=new a,this.attachProgressable()},saveWithProgressDeferred:function(){return this.save(),this.progressModel.pollDfd},attachProgressable:function(){var a=this;return this.on("change:progress_url",function(b,c){return a.progressModel.set({url:c,workflow_state:"queued"})}),this.progressModel.on("complete",function(){return a.fetch({success:function(){return a.trigger("progressResolved")}})})}}})}.call(this),define("translations/quiz_reports.quiz_report_generator",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{quiz_reports:{quiz_report_generator:{download_report_name:"تنزيل %{report_name}",generate_report_name:"إنشاء %{report_name}",generated_at_date_time:"تم الإنشاء في %{dateAndTime}",generating_report_name:"جارٍ إنشاء %{report_name}..."}}},es:{quiz_reports:{quiz_report_generator:{download_report_name:"Descargar %{report_name}",generate_report_name:"Generar %{report_name}",generated_at_date_time:"Generado %{dateAndTime}",generating_report_name:"Generando %{report_name}..."}}},fr:{quiz_reports:{quiz_report_generator:{download_report_name:"Télécharger %{report_name}",generate_report_name:"Générer %{report_name}",generated_at_date_time:"Généré le %{dateAndTime}",generating_report_name:"Génération de %{report_name}..."}}},ja:{quiz_reports:{quiz_report_generator:{download_report_name:"%{report_name} のダウンロード",generate_report_name:"%{report_name} の生成",generated_at_date_time:"作成日: %{dateAndTime}",generating_report_name:"%{report_name}を生成しています..."}}},ko:{quiz_reports:{quiz_report_generator:{download_report_name:"%{report_name} 다운로드",generate_report_name:"%{report_name} 생성",generated_at_date_time:"%{dateAndTime}에 생성",generating_report_name:"%{report_name} 생성 중..."}}},nl:{quiz_reports:{quiz_report_generator:{download_report_name:"Download %{report_name}",generate_report_name:"Genereer %{report_name}",generated_at_date_time:"%{dateAndTime} gegenereerd",generating_report_name:"%{report_name} wordt gegenereerd..."}}},pt:{quiz_reports:{quiz_report_generator:{download_report_name:"Transferir %{report_name}",generate_report_name:"Criar %{report_name}",generated_at_date_time:"Criado %{dateAndTime}",generating_report_name:"A criar %{report_name}..."}}},ru:{quiz_reports:{quiz_report_generator:{download_report_name:"Скачать %{report_name}",generate_report_name:"Создать %{report_name}",generated_at_date_time:"Создан %{dateAndTime}",generating_report_name:"Создание %{report_name}…"}}},zh:{quiz_reports:{quiz_report_generator:{download_report_name:"下载 %{report_name}",generate_report_name:"生成 %{report_name}",generated_at_date_time:"生成时间 %{dateAndTime}",generating_report_name:"正在生成 %{report_name}..."}}}}})}),define("translations/quizzes.statistics",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{quizzes:{statistics:{count_attempts:{one:"محاولة واحدة",other:"%{count} من المحاولات"},titles:{submitted_users_for_quesiton:"المستخدمون المقدمون لـ %{user}"},uncounted_submissions:{one:"عملية إرسال أخرى",other:"%{count} من عمليات الإرسال الأخرى"}}}},es:{quizzes:{statistics:{count_attempts:{one:"1 intento",other:"%{count} intentos"},titles:{submitted_users_for_quesiton:"Preguntas Presentadas para %{user}"},uncounted_submissions:{one:"1 envío extra",other:"%{count} envíos extras"}}}},fr:{quizzes:{statistics:{count_attempts:{one:"1 tentative",other:"%{count} tentatives"},titles:{submitted_users_for_quesiton:"Utilisateurs envoyés pour %{user}"},uncounted_submissions:{one:"1 autre envoi",other:"%{count} autres envois"}}}},ja:{quizzes:{statistics:{count_attempts:{one:"%{count} 回の試行",other:"%{count} 回の試行"},titles:{submitted_users_for_quesiton:"%{user} のために提出したユーザ"},uncounted_submissions:{one:"%{count} 件の他の提出物",other:"%{count} 件の他の提出物"}}}},ko:{quizzes:{statistics:{count_attempts:{one:"시도 %{count}번",other:"시도 %{count}번"},titles:{submitted_users_for_quesiton:"%{user}의 제출한 사용자"},uncounted_submissions:{one:"다른 제출물 %{count}개",other:"다른 제출물 %{count}개"}}}},nl:{quizzes:{statistics:{count_attempts:{one:"%{count} pogingen",other:"%{count} pogingen"},titles:{submitted_users_for_quesiton:"Verstuurde gebruikers voor %{user}"},uncounted_submissions:{one:"1 andere inzending",other:"%{count} andere inzendingen"}}}},pt:{quizzes:{statistics:{count_attempts:{one:"1 tentativa",other:"%{count} tentativas"},titles:{submitted_users_for_quesiton:"Utilizadores enviados para %{user}"},uncounted_submissions:{one:"1 outro envio",other:"%{count} outros envios"}}}},ru:{quizzes:{statistics:{count_attempts:{one:"1 попытка",other:"%{count} попытки(ок)"},titles:{submitted_users_for_quesiton:"Отправленные пользователи для %{user}"},uncounted_submissions:{one:"1 другая отправка",other:" %{count} других отправок"}}}},zh:{quizzes:{statistics:{count_attempts:{one:"%{count} 次尝试",other:"%{count} 次尝试"},titles:{submitted_users_for_quesiton:"%{user} 的已提交用户"},uncounted_submissions:{one:"%{count} 个其他提交文件",other:"%{count} 个其他提交文件"}}}}}})}),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/QuizReport",["jquery","underscore","compiled/models/progressable","Backbone","jquery.instructure_date_and_time"],function(a,c,d,e){var f,g,h;return f=e.Model,g=function(e){function f(){return h=f.__super__.constructor.apply(this,arguments),h}return b(f,e),f.mixin(d),f.prototype.urlRoot=function(){return"/api/v1/courses/"+this.get("course_id")+"/quizzes/"+this.get("quiz_id")+"/reports"},f.prototype.toJSON=function(){return{quiz_report:c.pick(f.__super__.toJSON.apply(this,arguments),"report_type","includes_all_versions")}},f.prototype.present=function(){var b;return b=c.extend({},this.attributes),this.progressModel.id&&(b.progress=this.progressModel.toJSON()),b.file&&(b.dateAndTime=a.parseFromISO(b.file.created_at).datetime_formatted),b},f}(f)})}.call(this),define("jst/quiz_reports/quizReportGenerator",["compiled/handlebars_helpers","i18n!quiz_reports.quiz_report_generator"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["quiz_reports/quizReportGenerator"]=b(function(a,b,c,d,e){function q(a,b){var d="",e,f,g,h;d+='\n  <a href="',i=c.file,e=i||a.file,e=e===null||e===undefined||e===!1?e:e.url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"file.url",{hash:{}})),d+=o(e)+'" class="btn button-sidebar-wide "target="_blank">\n    <i class="icon-download"></i>\n    ',e="Download %{report_name}",f="download_report_name",g={},h="quiz_reports.quiz_report_generator",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="<br>\n    <small>",e="Generated %{dateAndTime}",f="generated_at_date_time",g={},h="quiz_reports.quiz_report_generator",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</small>\n  </a>\n",d}function r(a,b){var d="",e,f;d+="\n  ",i=c.progress,e=i||a.progress,f=c["if"],j=k.program(4,s,b),j.hash={},j.fn=j,j.inverse=k.program(9,v,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function s(a,b){var d="",e,f,g,h;d+="\n    ",e="Generating %{report_name}...",f="generating_report_name",g={},h="quiz_reports.quiz_report_generator",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+='\n    <div class="progress progress-small progress-striped ',i=c.progress,e=i||a.progress,e=e===null||e===undefined||e===!1?e:e.workflow_state,f="completed",i=c.ifEqual,g=i||a.ifEqual,j=k.program(5,t,b),j.hash={},j.fn=j,j.inverse=k.program(7,u,b),i&&typeof g===l?e=g.call(a,f,e,j):e=p.call(a,g,f,e,j);if(e||e===0)d+=e;return d+='" style="margin: 0 0 10px">\n      <div class="bar" style="width:',i=c.progress,e=i||a.progress,e=e===null||e===undefined||e===!1?e:e.completion,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"progress.completion",{hash:{}})),d+=o(e)+'%;"></div>\n    </div>\n  ',d}function t(a,b){return"progress-success"}function u(a,b){return"active"}function v(a,b){var d="",e,f,g,h;d+='\n    <a href="javascript:void(0)" class="create-report btn button-sidebar-wide">\n      <i class="icon-ms-excel"></i>\n      ',e="Generate %{report_name}",f="generate_report_name",g={},h="quiz_reports.quiz_report_generator",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="\n    </a>\n  ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression,p=c.blockHelperMissing;i=c.file,g=i||b.file,h=c["if"],j=k.program(1,q,e),j.hash={},j.fn=j,j.inverse=k.program(3,r,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n\n",f}),c["quiz_reports/quizReportGenerator"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/quiz_reports/QuizReportGenerator",["underscore","Backbone","jst/quiz_reports/quizReportGenerator","compiled/models/QuizReport"],function(b,d,e,f){var g,h,i;return h=d.View,g=function(b){function d(){return this.reportReady=a(this.reportReady,this),i=d.__super__.constructor.apply(this,arguments),i}return c(d,b),d.prototype.template=e,d.prototype.initialize=function(){var a;return(a=this.model.get("progress"))&&this.model.progressModel.set(a),this.model.progressModel.on("change",this.render),this.model.on("progressResolved",this.reportReady)},d.prototype.events={"click .create-report":function(){return this.autoDownload=!0,this.model.save()}},d.prototype.reportReady=function(){this.render();if(this.autoDownload)return this.triggerDownload()},d.prototype.triggerDownload=function(){var a;return a=this.model.get("file").url,$(document.body).append($("<iframe>",{style:"display:none",src:a}))},d}(h)})}.call(this),require(["i18n!quizzes.statistics","jquery","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.templateData"],function(a,b){b.scrollSidebar(),b(".essay_answer").live("click",function(a){a.preventDefault(),b(this).addClass("expanded")}),b(".download_submissions_link").click(function(a){a.preventDefault(),INST.downloadSubmissions(b(this).attr("href"))}),b(".answer,.number_answer").live("click",function(c){var d=b(this).getTemplateData({textValues:["user_ids"],dataValues:["responses"]}),e=d.user_ids,f=parseInt(d.responses,10)||0;if(e!=null&&f>0){var g=b("#submitted_users_dialog");g.find(".user:not(.blank)").remove();var h=[],i=b(this).find(".answer_text").text(),j=b(this).parents("tr");while(j.length&&j.find("td .question_name").length==0)j=j.prev();var k=j.find("td .question_name").text();e=e.split(",");var l=f-e.length,m=b.unique(e);for(var n in m){var o=m[n],p=b.grep(e,function(a){return a==o}).length,q=b("#submitted_users .user.user_"+o).text();p>1&&(q=q+" ("+a.t("count_attempts","attempt",{count:p})+")");if(q){var r=g.find(".user.blank:first").clone(!0).removeClass("blank");r.fillTemplateData({data:{name:q}}),g.find(".users").append(r.show())}else l++}if(l>0){var r=g.find(".user.blank:first").clone(!0).removeClass("blank");r.fillTemplateData({data:{name:a.t("uncounted_submissions",{one:"1 other submission",other:"%{count} other submissions"},{count:l})}}),r.addClass("uncounted"),g.find(".users").append(r.show())}g.fillTemplateData({data:{answer_text:i,question_name:k}}),g.dialog({title:a.t("titles.submitted_users_for_quesiton","Submitted Users for %{user}",{user:k}),width:500,height:300})}})}),define("quiz_statistics",function(){}),function(){require(["compiled/models/QuizReport","compiled/views/quiz_reports/QuizReportGenerator","quiz_statistics"],function(a,b){var c,d,e,f,g,h,i,j;c=$(".quiz-reports"),i=ENV.quiz_reports,j=[];for(g=0,h=i.length;g<h;g++)f=i[g],d=$("<div>").appendTo(c),e=new a(f),j.push((new b({el:d,model:e})).render());return j})}.call(this),define("compiled/bundles/quiz_statistics",function(){})