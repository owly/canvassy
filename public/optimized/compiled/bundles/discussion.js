(function(){define("compiled/arr/walk",[],function(){var a;return a=function(b,c,d){var e,f,g;for(f=0,g=b.length;f<g;f++)e=b[f],d(e,b),e[c]!=null&&a(e[c],c,d);return b}})}).call(this),function(){define("compiled/regexp/rEscape",[],function(){var a;return a=function(a){return a.replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/g,"\\$&")}})}.call(this),define("translations/discussions",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{are_your_sure_delete:"هل ترغب بالتأكيد في حذف هذا الإدخال؟",confirm_delete_discussion_topic:"هل تريد بالتأكيد حذف موضوع المناقشة هذا؟","delete":"حذف",edit_settings:"تحرير إعدادات المناقشات",hide_due_dates:"إخفاء تواريخ الاستحقاق",lock:"تأمين",mark_as_read:"وضع علامة كمقروء",mark_as_unread:"وضع علامة كغير مقروء",no_content:"لا يوجد محتوى",pin:"تثبيت",pinned_discussions:"المناقشات المثبتة",show_all_n_replies:{one:"عرض إجابة واحدة",other:"عرض جميع الإجابات البالغ عددها %{count}"},show_due_dates:"إظهار تواريخ الاستحقاق",uknown_author:"مؤلف غير معروف",unknown:"غير معروف",unknown_author:"مؤلف غير معروف",unlock:"إلغاء التأمين",unpin:"إلغاء التثبيت"}},es:{discussions:{are_your_sure_delete:"¿Seguro que quiere borrar esta entrada?",confirm_delete_discussion_topic:"¿Está seguro de que desea borrar este tema de debate?","delete":"Borrar",edit_settings:"Editar la configuración de los debates",hide_due_dates:"Ocultar las fechas de vencimiento",lock:"Bloquear",mark_as_read:"Marcar como leído",mark_as_unread:"Marcar como no leído",no_content:"Sin Contenido",pin:"Anclar",pinned_discussions:"Debates anclados",show_all_n_replies:{one:"Mostrar una  respuesta",other:"Mostrar las %{count} respuestas"},show_due_dates:"Mostrar las fechas de vencimiento",uknown_author:"Autor desconocido",unknown:"Desconocido",unknown_author:"Autor desconocido",unlock:"Desbloquear",unpin:"Desanclar"}},fr:{discussions:{are_your_sure_delete:"Voulez-vous vraiment supprimer cette entrée ?",confirm_delete_discussion_topic:"Voulez-vous vraiment supprimer ce sujet de discussion ?","delete":"Supprimer",edit_settings:"Modifier les paramètres des discussions",hide_due_dates:"Masquer les dates d’échéance",lock:"Verrouiller",mark_as_read:"Marquer comme lu",mark_as_unread:"Marquer comme non lu",no_content:"Pas de contenu",pin:"Épingler",pinned_discussions:"Discussions épinglées",show_all_n_replies:{one:"Afficher une réponse",other:"Afficher les %{count} réponses"},show_due_dates:"Afficher les dates d’échéance",uknown_author:"Auteur inconnu",unknown:"Inconnu",unknown_author:"Auteur inconnu",unlock:"Déverrouiller",unpin:"Détacher"}},ja:{discussions:{are_your_sure_delete:"このエントリを削除してもよろしいですか?",confirm_delete_discussion_topic:"このディスカッション トピックを削除してもよろしいですか?","delete":"削除",edit_settings:"ディスカッション設定の編集",hide_due_dates:"期日を非表示",lock:"ロック",mark_as_read:"既読にする",mark_as_unread:"未読にする",no_content:"コンテンツなし",pin:"固定",pinned_discussions:"固定されたディスカッション",show_all_n_replies:{one:"%{count} 個の返信をすべて表示する",other:"%{count} 個の返信をすべて表示する"},show_due_dates:"期日を表示",uknown_author:"不明な作成者",unknown:"不明",unknown_author:"不明な作成者",unlock:"ロックの解除",unpin:"固定の解除"}},ko:{discussions:{are_your_sure_delete:"이 항목을 삭제하시겠습니까?",edit_settings:"토론 설정 편집",hide_due_dates:"기한 숨기기",mark_as_read:"읽음으로 표시",mark_as_unread:"읽지 않음으로 표시",no_content:"내용 없음",show_all_n_replies:{one:"답변 %{count}개 모두 표시",other:"답변 %{count}개 모두 표시"},show_due_dates:"기한 표시",uknown_author:"알 수 없는 작성자",unknown:"알 수 없음",unknown_author:"알 수 없는 작성자"}},nl:{discussions:{are_your_sure_delete:"Weet je zeker dat je deze invoer wilt verwijderen?",edit_settings:"Wijzig discussieinstellingen",hide_due_dates:"Verberg vervaldatums",mark_as_read:"Markeer als gelezen",mark_as_unread:"Markeer als ongelezen",no_content:"Geen inhoud",show_all_n_replies:{one:"Bekijk 1 reactie",other:"Bekijk alle %{count} reacties"},show_due_dates:"Toon vervaldatums",uknown_author:"Onbekende auteur",unknown:"Onbekend",unknown_author:"Onbekende auteur"}},pt:{discussions:{are_your_sure_delete:"Tem certeza de que deseja excluir esta entrada?",confirm_delete_discussion_topic:"Tem a certeza de que pretende eliminar este tópico?","delete":"Eliminar",edit_settings:"Editar definições de discussões",hide_due_dates:"Ocultar datas de entrega",lock:"Bloquear",mark_as_read:"Marcar como lido",mark_as_unread:"Marcar como não lido",no_content:"Sem conteúdo",pin:"Afixar",pinned_discussions:"Discussões afixadas",show_all_n_replies:{one:"Mostrar uma resposta",other:"Mostrar todas as %{count} respostas"},show_due_dates:"Mostrar datas de entrega",uknown_author:"Autor desconhecido",unknown:"Desconhecido",unknown_author:"Autor desconhecido",unlock:"Desbloquear",unpin:"Remover"}},ru:{discussions:{are_your_sure_delete:"Действительно хотите удалить эту запись?",confirm_delete_discussion_topic:"Вы уверены, что хотите удалить эту тему обсуждения?","delete":"Удалить",edit_settings:"Редактировать настройки обсуждений",hide_due_dates:"Скрыть даты выполнения",lock:"Заблокировать",mark_as_read:"Отметить как прочитанное",mark_as_unread:"Отметить как непрочитанное",no_content:"Нет содержимого",pin:"Привязать",pinned_discussions:"Привязанные обсуждения",show_all_n_replies:{one:"Показать один ответ",other:"Показать все %{count} ответов"},show_due_dates:"Отобразить даты выполнения",uknown_author:"Неизвестный автор",unknown:"Неизвестно",unknown_author:"Неизвестный автор",unlock:"Разблокировать",unpin:"Отменить привязку"}},zh:{discussions:{are_your_sure_delete:"是否确定要删除此条目?",confirm_delete_discussion_topic:"是否确定要删除此讨论主题？","delete":"删除",edit_settings:"编辑讨论设置",hide_due_dates:"隐藏到期日期",lock:"锁定",mark_as_read:"标记为已读",mark_as_unread:"标记为未读",no_content:"无内容",pin:"固定",pinned_discussions:"已固定的讨论",show_all_n_replies:{one:"显示所有 %{count} 个回复",other:"显示所有 %{count} 个回复"},show_due_dates:"显示到期日期",uknown_author:"未知作者",unknown:"未知",unknown_author:"未知作者",unlock:"解锁",unpin:"取消固定"}}}})}),define("translations/discussions.entry_content",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{entry_content:{authors_name:"اسم المؤلف","delete":"حذف",edit:"تحرير",edited_comment:"تم التحرير بواسطة *%{editor.display_name}* في %{edited_at}",go_to_parent:"انتقال إلى الأصل",go_to_topic:"الانتقال إلى الموضوع",manage_discussion_entry:"إدارة إدخال المناقشة",open_in_speedgrader:"فتح في SpeedGrader",unknown_author:"مؤلف غير معروف"}}},es:{discussions:{entry_content:{authors_name:"Nombre del Autor","delete":"Borrar",edit:"Editar",edited_comment:"Editado por *%{editor.display_name}* el %{edited_at}",go_to_parent:"Ir al inicio",go_to_topic:"Ir a un tema",manage_discussion_entry:"Gestionar la entrada de debate",open_in_speedgrader:"Abrir en el calificador rápido",unknown_author:"Autor desconocido"}}},fr:{discussions:{entry_content:{authors_name:"Nom de l’auteur","delete":"Supprimer",edit:"Modifier",edited_comment:"Modifié par *%{editor.display_name}* le %{edited_at}",go_to_parent:"Accéder au dossier parent",go_to_topic:"Aller à la rubrique",manage_discussion_entry:"Gérer l’entrée de discussion",open_in_speedgrader:"Ouvrir dans SpeedGrader",unknown_author:"Auteur inconnu"}}},ja:{discussions:{entry_content:{authors_name:"作成者名","delete":"削除",edit:"編集",edited_comment:"*%{editor.display_name}* が %{edited_at} に編集",go_to_parent:"親に移動",go_to_topic:"トピックに移動",manage_discussion_entry:"ディスカッション エントリの管理",open_in_speedgrader:"SpeedGrader で開く",unknown_author:"不明な作成者"}}},ko:{discussions:{entry_content:{authors_name:"작성자 이름","delete":"삭제",edit:"편집",edited_comment:"*%{editor.display_name}*이(가) %{edited_at}에 편집",go_to_parent:"상위로 가기",go_to_topic:"주제로 가기",manage_discussion_entry:"토론 항목 관리",open_in_speedgrader:"SpeedGrader에서 열기",unknown_author:"알 수 없는 작성자"}}},nl:{discussions:{entry_content:{authors_name:"Auteur","delete":"Verwijder",edit:"Wijzig",edited_comment:"Gewijzigd door *%{editor.display_name}* op %{edited_at}",go_to_parent:"Ga terug naar hoofdniveau",go_to_topic:"Ga naar onderwerp",manage_discussion_entry:"Beheer discussiebericht",open_in_speedgrader:"Open in SnelBeoordelen",unknown_author:"Onbekende auteur"}}},pt:{discussions:{entry_content:{authors_name:"Nome do autor","delete":"Excluir",edit:"Editar",edited_comment:"Editado por *%{editor.display_name}* em %{edited_at}",go_to_parent:"Ir para início",go_to_topic:"Ir para o tópico",manage_discussion_entry:"Gerir entrada de discussão",open_in_speedgrader:"Abrir no SpeedGrader",unknown_author:"Autor desconhecido"}}},ru:{discussions:{entry_content:{authors_name:"Имя автора","delete":"Удалить",edit:"Редактировать",edited_comment:"Отредактировано *%{editor.display_name}* %{edited_at}",go_to_parent:"Перейти на родительский уровень",go_to_topic:"Перейти к теме",manage_discussion_entry:"Управление записью в обсуждении",open_in_speedgrader:"Открыть в SpeedGrader",unknown_author:"Неизвестный автор"}}},zh:{discussions:{entry_content:{authors_name:"作者姓名","delete":"删除",edit:"编辑",edited_comment:"由 *%{editor.display_name}* 于 %{edited_at} 编辑",go_to_parent:"回到父级",go_to_topic:"返回主题",manage_discussion_entry:"管理讨论条目",open_in_speedgrader:"在 SpeedGrader 中打开",unknown_author:"未知作者"}}}}})}),define("translations/discussions.deleted_entry",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{},es:{},fr:{},ja:{discussions:{deleted_entry:{deleted:"このエントリは削除されました"}}},ko:{discussions:{deleted_entry:{deleted:"이 항목이 삭제됨"}}},nl:{},pt:{},ru:{},zh:{}}})}),define("translations/discussions.entry_stats",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{entry_stats:{show_more:"عرض المزيد"}}},es:{discussions:{entry_stats:{show_more:"Mostrar más"}}},fr:{discussions:{entry_stats:{show_more:"Afficher plus"}}},ja:{discussions:{entry_stats:{show_more:"詳細"}}},ko:{discussions:{entry_stats:{show_more:"자세히 표시"}}},nl:{discussions:{entry_stats:{show_more:"Toon meer"}}},pt:{discussions:{entry_stats:{show_more:"Mostrar mais"}}},ru:{discussions:{entry_stats:{show_more:"Показать больше"}}},zh:{discussions:{entry_stats:{show_more:"显示更多"}}}}})}),define("translations/discussions.reply",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{reply:{error_saving_reply:"*حدث خطأ*، الرجاء نشر ردك مرة أخرى لاحقًا",saving_reply:"يجري حفظ الرد..."}}},es:{discussions:{reply:{error_saving_reply:"*Se ha producido un error*, por favor envie su respuesta en otro momento",saving_reply:"Guardando la respuesta..."}}},fr:{discussions:{reply:{error_saving_reply:"*Une erreur s’est produite*. Veuillez renvoyer votre réponse ultérieurement.",saving_reply:"Enregistrement de la réponse..."}}},ja:{discussions:{reply:{error_saving_reply:"*エラーが発生しました*。後でもう一度返信を投稿してください",saving_reply:"返信を保存しています..."}}},ko:{discussions:{reply:{error_saving_reply:"*오류가 발생했습니다*. 나중에 다시 답변을 게시하시기 바랍니다.",saving_reply:"답변 저장 중..."}}},nl:{discussions:{reply:{error_saving_reply:"*Er is een fout opgetreden*, plaats de reactie later opnieuw",saving_reply:"Reactie wordt opgeslagen..."}}},pt:{discussions:{reply:{error_saving_reply:"*Ocorreu um erro*, publique novamente a sua resposta mais tarde",saving_reply:"A guardar a resposta..."}}},ru:{discussions:{reply:{error_saving_reply:"*Произошла ошибка*, пожалуйста, попробуйте опубликовать ваш ответ позже",saving_reply:"Сохранение ответа"}}},zh:{discussions:{reply:{error_saving_reply:"*发生错误*，请稍后再填写回复。",saving_reply:"正在保存答复..."}}}}})}),define("translations/discussions.reply_attachment",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{reply_attachment:{remove_attachment:"إزالة"}}},es:{discussions:{reply_attachment:{remove_attachment:"eliminar"}}},fr:{discussions:{reply_attachment:{remove_attachment:"supprimer"}}},ja:{discussions:{reply_attachment:{remove_attachment:"削除"}}},ko:{discussions:{reply_attachment:{remove_attachment:"제거"}}},nl:{discussions:{reply_attachment:{remove_attachment:"verwijder"}}},pt:{discussions:{reply_attachment:{remove_attachment:"remover"}}},ru:{discussions:{reply_attachment:{remove_attachment:"Удаление"}}},zh:{discussions:{reply_attachment:{remove_attachment:"删除"}}}}})}),define("translations/discussions.reply_form",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{reply_form:{attach_file:"إرفاق",cancel:"إلغاء",post_reply:"نشر رد",switch_views:"تبديل العروض",write_a_reply:"رد"}}},es:{discussions:{reply_form:{attach_file:"Adjuntar",cancel:"Cancelar",post_reply:"Publicar respuesta",switch_views:"Cambiar de vista",write_a_reply:"Responder..."}}},fr:{discussions:{reply_form:{attach_file:"Joindre",cancel:"Annuler",post_reply:"Publier une réponse",switch_views:"Changer la vue",write_a_reply:"Répondre"}}},ja:{discussions:{reply_form:{attach_file:"添付",cancel:"キャンセル",post_reply:"返信の投稿",switch_views:"ビューの切り替え",write_a_reply:"返信"}}},ko:{discussions:{reply_form:{attach_file:"첨부",cancel:"취소",switch_views:"뷰 전환",write_a_reply:"답변 작성..."}}},nl:{discussions:{reply_form:{attach_file:"Bijlage toevoegen",cancel:"Annuleren",switch_views:"Wissel weergaven",write_a_reply:"Antwoord"}}},pt:{discussions:{reply_form:{attach_file:"Anexar",cancel:"Cancelar",post_reply:"Publicar resposta",switch_views:"Alternar Vistas",write_a_reply:"Responder"}}},ru:{discussions:{reply_form:{attach_file:"Вложить",cancel:"Отменить",post_reply:"Опубликовать ответ",switch_views:"Переключить виды",write_a_reply:"Ответ"}}},zh:{discussions:{reply_form:{attach_file:"附加",cancel:"取消",post_reply:"帖子回复",switch_views:"切换视图",write_a_reply:"回复"}}}}})}),define("translations/discussions.no_results",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{no_results:{make_sure_all_search_terms_are_spelled_correctly:"تأكد من كتابة كل مصطلحات البحث بشكل صحيح إملائيًا.",suggestions:"الاقتراحات:",try_different_more_general_or_fewer_keywords:"جرّب استخدام كلمات أساسية مختلفة أو أكثر تعميمًا أو أقل عددًا.",try_disabling_the_unread_filter:'جرّب تعطيل عامل التصفية "غير مقروءة".',your_search_did_not_match_any_entries:"لم يتطابق بحثك مع أي إدخالات."}}},es:{discussions:{no_results:{make_sure_all_search_terms_are_spelled_correctly:"Asegurarse de que todos los términos de búsqueda están escritos correctamente.",suggestions:"Sugerencias:",try_different_more_general_or_fewer_keywords:"Intente con menos palabras clave o con palabras clave diferente o más generales.",try_disabling_the_unread_filter:'Intente desactivar el filtro "No Leído".',your_search_did_not_match_any_entries:"Su búsqueda no coincide con ninguna entrada."}}},fr:{discussions:{no_results:{make_sure_all_search_terms_are_spelled_correctly:"Vérifiez que tous les termes de recherche sont bien orthographiés.",suggestions:"Suggestions :",try_different_more_general_or_fewer_keywords:"Essayez avec des mots-clés différents, plus généraux ou moins nombreux.",try_disabling_the_unread_filter:"Essayez de désactiver le filtre « Non lu(s) ».",your_search_did_not_match_any_entries:"Votre recherche ne correspond à aucune entrée."}}},ja:{discussions:{no_results:{make_sure_all_search_terms_are_spelled_correctly:"すべての検索条件について誤入力がないことを確認してください。",suggestions:"提案:",try_different_more_general_or_fewer_keywords:"異なるキーワード、さらに一般的なキーワード、またはさらに少ないキーワードで試してください。",try_disabling_the_unread_filter:'"未読" フィルタを無効にしてみてください。',your_search_did_not_match_any_entries:"検索に一致するエントリはありませんでした。"}}},ko:{discussions:{no_results:{make_sure_all_search_terms_are_spelled_correctly:"모든 검색 용어의 철자가 올바른지 확인하십시오. ",suggestions:"제안:",try_different_more_general_or_fewer_keywords:"다른 키워드나 보다 일반적인 키워드나 더 적은 키워드로 다시 시도해 보십시오.",try_disabling_the_unread_filter:'"읽지 않음" 필터를 사용하지 말아 보십시오.',your_search_did_not_match_any_entries:"검색과 일치하는 항목이 없습니다."}}},nl:{discussions:{no_results:{make_sure_all_search_terms_are_spelled_correctly:"Zorg ervoor dat alle zoektermen correct gespeld zijn.",suggestions:"Suggesties:",try_different_more_general_or_fewer_keywords:"Probeer andere, algemenere of minder zoekwoorden.",try_disabling_the_unread_filter:'Probeer het "Ongelezen" filter uit te schakelen.',your_search_did_not_match_any_entries:"Je zoekopdracht heeft geen resultaten opgeleverd"}}},pt:{discussions:{no_results:{make_sure_all_search_terms_are_spelled_correctly:"Certifique-se de que todos os termos de pesquisa não têm erros ortográficos.",suggestions:"Sugestões:",try_different_more_general_or_fewer_keywords:"Experimente com palavras-chave diferentes, mais genéricas ou em menor número.",try_disabling_the_unread_filter:'Experimente desativar o filtro "Não lidos".',your_search_did_not_match_any_entries:"A sua pesquisa não corresponde a nenhuma entrada."}}},ru:{discussions:{no_results:{make_sure_all_search_terms_are_spelled_correctly:"Убедитесь, что все критерии поиска написаны правильно.",suggestions:"Предложения:",try_different_more_general_or_fewer_keywords:"Попробуйте другие, более общие, или меньше ключевых слов.",try_disabling_the_unread_filter:'Попробуйте отключить фильтр "Непрочитанные".',your_search_did_not_match_any_entries:"Не найдено записей по вашему поисковому запросу."}}},zh:{discussions:{no_results:{make_sure_all_search_terms_are_spelled_correctly:"确保所有的搜索词拼写正确。",suggestions:"建议:",try_different_more_general_or_fewer_keywords:"尝试其他、更常用或更少的关键字。",try_disabling_the_unread_filter:"尝试禁用“未读”筛选器。",your_search_did_not_match_any_entries:"您的搜索不匹配任何条目。"}}}}})}),define("translations/discussions.results_entry",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{results_entry:{authors_name:"اسم المؤلف",unknown_author:"مؤلف غير معروف",view_in_discussion:"عرض في مناقشة"}}},es:{discussions:{results_entry:{authors_name:"Nombre del Autor",unknown_author:"Autor desconocido",view_in_discussion:"Ver en debate"}}},fr:{discussions:{results_entry:{authors_name:"Nom de l’auteur",unknown_author:"Auteur inconnu",view_in_discussion:"Afficher dans la discussion"}}},ja:{discussions:{results_entry:{authors_name:"作成者名",unknown_author:"不明な作成者",view_in_discussion:"ディスカッションで表示"}}},ko:{discussions:{results_entry:{authors_name:"작성자 이름",unknown_author:"알 수 없는 작성자",view_in_discussion:"토론에서 보기"}}},nl:{discussions:{results_entry:{authors_name:"Auteur",unknown_author:"Onbekende auteur",view_in_discussion:"Bekijk in discussie"}}},pt:{discussions:{results_entry:{authors_name:"Nome do autor",unknown_author:"Autor desconhecido",view_in_discussion:"Ver em discussão"}}},ru:{discussions:{results_entry:{authors_name:"Имя автора",unknown_author:"Неизвестный автор",view_in_discussion:"Смотреть в обсуждении"}}},zh:{discussions:{results_entry:{authors_name:"作者姓名",unknown_author:"未知作者",view_in_discussion:"查看讨论"}}}}})}),define("translations/discussions.entry_collection_view",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{entry_collection_view:{add_reply_to_topic:"إضافة رد إلى الموضوع"}}},es:{discussions:{entry_collection_view:{add_reply_to_topic:"Agregar respuesta al tema"}}},fr:{discussions:{entry_collection_view:{add_reply_to_topic:"Ajouter une réponse au sujet"}}},ja:{discussions:{entry_collection_view:{add_reply_to_topic:"トピックへの返信を追加"}}},ko:{discussions:{entry_collection_view:{add_reply_to_topic:"주제에 답변 추가"}}},nl:{discussions:{entry_collection_view:{add_reply_to_topic:"Reageer op onderwerp"}}},pt:{discussions:{entry_collection_view:{add_reply_to_topic:"Adicionar resposta ao tópico"}}},ru:{discussions:{entry_collection_view:{add_reply_to_topic:"Добавить ответ к теме"}}},zh:{discussions:{entry_collection_view:{add_reply_to_topic:"将回复添加至主题"}}}}})}),function(){define("compiled/editor/EditorToggle",["underscore","i18n!editor","jquery","Backbone","compiled/fn/preventDefault","tinymce.editor_box"],function(a,b,c,d,e){var f;return f=function(){function a(a,b){this.editingElement(a),this.options=c.extend({},this.options,b),this.textArea=this.createTextArea(),this.options.switchViews&&(this.switchViews=this.createSwitchViews()),this.done=this.createDone(),this.content=this.getContent(),this.editing=!1}return a.prototype.options={doneText:b.t("done_as_in_finished","Done"),switchViews:!1},a.prototype.toggle=function(){return this.editing?this.display():this.edit()},a.prototype.edit=function(){var a;return this.textArea.val(this.getContent()),this.textArea.insertBefore(this.el),this.el.detach(),this.options.switchViews&&this.switchViews.insertBefore(this.textArea),this.done.insertAfter(this.textArea),this.options.editorBoxLabel&&(a={tinyOptions:{aria_label:this.options.editorBoxLabel}}),this.textArea.editorBox(a),this.editing=!0,this.trigger("edit")},a.prototype.display=function(a){if(a!=null?!a.cancel:!void 0)this.content=this.textArea._justGetCode(),this.textArea.val(this.content),this.el.html(this.content);return this.el.insertBefore(this.textArea),this.textArea._removeEditor(),this.textArea.detach(),this.options.switchViews&&this.switchViews.detach(),this.done.detach(),this.textArea.attr("id",""),this.editing=!1,this.trigger("display")},a.prototype.editingElement=function(a){return this.el=a},a.prototype.getContent=function(){return c.trim(this.el.html())},a.prototype.createTextArea=function(){return c("<textarea/>").css({width:"100%",minHeight:"110px"}).addClass("editor-toggle")},a.prototype.createDone=function(){var a=this;return c("<a/>").html(this.options.doneText).attr("href","#").addClass("btn edit-html-done edit_html_done").attr("title",b.t("done.title","Click to finish editing the rich text area")).click(e(function(){return a.display()}))},a.prototype.createSwitchViews=function(){var a=this;return c("<a/>",{style:"float: right",href:"#"}).text(b.t("switch_views","Switch Views")).click(e(function(){return a.textArea.editorBox("toggle")}))},a}(),a.extend(f.prototype,d.Events),f})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/discussions/EntryEditor",["i18n!editor","jquery","compiled/editor/EditorToggle","compiled/str/convertApiUserContent","vendor/jquery.ba-tinypubsub"],function(b,d,e,f,g){var h,i;return i=g.publish,h=function(e){function g(b){this.view=b,this.onSaveError=a(this.onSaveError,this),this.onSaveSuccess=a(this.onSaveSuccess,this),g.__super__.constructor.call(this,this.getEditingElement(),{switchViews:!0}),this.cancelButton=this.createCancelButton(),this.done.addClass("btn-small")}return c(g,e),g.prototype.display=function(a){g.__super__.display.apply(this,arguments),this.cancelButton.detach();if((a!=null?a.cancel:void 0)!==!0)return this.view.model.set("replies",[]),this.view.model.set("updated_at",(new Date).toISOString()),this.view.model.set("editor",ENV.current_user),this.view.model.save({messageNotification:b.t("saving","Saving..."),message:this.content},{success:this.onSaveSuccess,error:this.onSaveError})},g.prototype.createCancelButton=function(){var a=this;return d("<a/>").html(b.t("cancel","Cancel")).css({marginLeft:"5px"}).attr("href","javascript:").addClass("cancel_button").click(function(){return a.display({cancel:!0})})},g.prototype.edit=function(){return this.editingElement(this.getEditingElement()),g.__super__.edit.apply(this,arguments),this.cancelButton.insertAfter(this.done)},g.prototype.getEditingElement=function(){return this.view.$(".message:first")},g.prototype.getContent=function(){return f(this.view.model.get("message"),{forEditing:!0})},g.prototype.onSaveSuccess=function(){return this.view.model.set("messageNotification","")},g.prototype.onSaveError=function(){return this.view.model.set({messageNotification:b.t("save_failed","Failed to save, please try again later")}),this.edit()},g}(e)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/DiscussionFilterState",["Backbone"],function(a){var c,d,e;return d=a.Model,c=function(a){function c(){return e=c.__super__.constructor.apply(this,arguments),e}return b(c,a),c.prototype.defaults={unread:!1,query:null,collapsed:!1},c.prototype.hasFilter=function(){var a,b,c;return c=this.attributes,b=c.unread,a=c.query,b||a!=null?!0:!1},c.prototype.reset=function(){return this.set({unread:!1,query:null,collapsed:!1}),this.trigger("reset")},c}(d)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/DiscussionTopic/DiscussionToolbarView",["i18n!discussions","Backbone","underscore","jqueryui/button"],function(b,d,e){var f,g,h;return g=d.View,f=function(b){function d(){return this.clearInputs=a(this.clearInputs,this),h=d.__super__.constructor.apply(this,arguments),h}return c(d,b),d.prototype.els={"#discussion-search":"$searchInput","#onlyUnread":"$unread",".disableWhileFiltering":"$disableWhileFiltering"},d.prototype.events={"keyup #discussion-search":"filterBySearch","change #onlyUnread":"toggleUnread","click #collapseAll":"collapseAll","click #expandAll":"expandAll","click .mark_all_as_read":"markAllAsRead","click .mark_all_as_unread":"markAllAsUnread"},d.prototype.initialize=function(){return this.model.on("change",this.clearInputs)},d.prototype.afterRender=function(){return this.$unread.button()},d.prototype.filter=d.prototype.afterRender,d.prototype.clearInputs=function(){if(this.model.hasFilter())return;return this.$searchInput.val(""),this.$unread.prop("checked",!1),this.$unread.button("refresh"),this.maybeDisableFields()},d.prototype.filterBySearch=e.debounce(function(){var a;return a=this.$searchInput.val(),a===""&&(a=null),this.model.set("query",a),this.maybeDisableFields()},250),d.prototype.toggleUnread=function(){var a=this;return setTimeout(function(){return a.model.set("unread",a.$unread.prop("checked")),a.maybeDisableFields()},50)},d.prototype.collapseAll=function(){return this.model.set("collapsed",!0),this.trigger("collapseAll")},d.prototype.expandAll=function(){return this.model.set("collapsed",!1),this.trigger("expandAll")},d.prototype.markAllAsRead=function(a){return a.preventDefault(),this.trigger("markAllAsRead")},d.prototype.markAllAsUnread=function(a){return a.preventDefault(),this.trigger("markAllAsUnread")},d.prototype.maybeDisableFields=function(){return this.$disableWhileFiltering.attr("disabled",this.model.hasFilter())},d}(g)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/discussions/MarkAsReadWatcher",["Backbone","i18n!discussions","underscore","jquery"],function(b,c,d,e){var f,g,h;return g=2e3,f=1e3,h=function(){function h(b){var c=this;this.view=b,this.markAsRead=a(this.markAsRead,this),h.unread.push(this),this.view.model.bind("change:collapsedView",function(a,b){c.ignore=b;if(b)return c.clearTimer()})}var b,c=this;return h.unread=[],h.prototype.createTimer=function(){return this.timer||(this.timer=setTimeout(this.markAsRead,g))},h.prototype.clearTimer=function(){return clearTimeout(this.timer),delete this.timer},h.prototype.markAsRead=function(){return this.view.model.markAsRead(),h.unread=d(h.unread).without(this),h.trigger("markAsRead",this.view.model)},b=e(window),h.init=function(){return b.bind("scroll resize",this.checkForVisibleEntries),this.checkForVisibleEntries()},h.checkForVisibleEntries=d.throttle(function(){var a,c,d,e,f,g,i,j;f=b.scrollTop(),a=f+b.height(),j=h.unread;for(g=0,i=j.length;g<i;g++){c=j[g];if(c.ignore||c.view.model.get("forced_read_state"))continue;e=c.view.$el.offset().top,d=e<a&&e+c.view.$el.height()>f,c[d?"createTimer":"clearTimer"]()}},f),h}.call(this),d.extend(h,b.Events)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/Entry",["i18n!discussions","jquery","underscore","Backbone","jquery.ajaxJSON"],function(a,c,d,e){var f,g;return f=function(f){function h(){return g=h.__super__.constructor.apply(this,arguments),g}return b(h,f),h.prototype.defaults={id:null,parent_id:null,message:a.t("no_content","No Content"),user_id:null,read_state:"read",forced_read_state:!1,created_at:null,updated_at:null,deleted:!1,attachment:null,replies:[],canAttach:ENV.DISCUSSION.PERMISSIONS.CAN_ATTACH,"new":!1,highlight:!1},h.prototype.computedAttributes=["canModerate","canReply","speedgraderUrl","inlineReplyLink",{name:"allowsSideComments",deps:["parent_id","deleted"]},{name:"allowsThreadedReplies",deps:["deleted"]},{name:"showBoxReplyLink",deps:["allowsSideComments"]},{name:"collapsable",deps:["replies","allowsSideComments","allowsThreadedReplies"]},{name:"summary",deps:["message"]}],h.prototype.read=function(){return""+ENV.DISCUSSION.ENTRY_ROOT_URL+"?ids[]="+this.get("id")},h.prototype.create=function(){var a;return this.set("author",ENV.DISCUSSION.CURRENT_USER),a=this.get("parent_id"),a===null?ENV.DISCUSSION.ROOT_REPLY_URL:ENV.DISCUSSION.REPLY_URL.replace(/:entry_id/,a)},h.prototype["delete"]=function(){return ENV.DISCUSSION.DELETE_URL.replace(/:id/,this.get("id"))},h.prototype.update=function(){return ENV.DISCUSSION.DELETE_URL.replace(/:id/,this.get("id"))},h.prototype.sync=function(a,b,c){return c==null&&(c={}),c.url=this[a](),e.sync(a,this,c)},h.prototype.parse=function(a){return d.isArray(a)?a[0]:a},h.prototype.toJSON=function(){var a;return a=h.__super__.toJSON.apply(this,arguments),d.pick(a,"id","parent_id","message","user_id","read_state","forced_read_state","created_at","updated_at","deleted","attachment","replies","author")},h.prototype.canModerate=function(){var a;return a=this.get("user_id")===ENV.DISCUSSION.CURRENT_USER.id,a&&ENV.DISCUSSION.PERMISSIONS.CAN_MANAGE_OWN||ENV.DISCUSSION.PERMISSIONS.MODERATE},h.prototype.canReply=function(){return this.get("deleted")?!1:ENV.DISCUSSION.PERMISSIONS.CAN_REPLY?!0:!1},h.prototype.inlineReplyLink=function(){return ENV.DISCUSSION.THREADED&&(this.allowsThreadedReplies()||this.allowsSideComments())?!0:!1},h.prototype.allowsThreadedReplies=function(){return this.get("deleted")?!1:ENV.DISCUSSION.PERMISSIONS.CAN_REPLY?ENV.DISCUSSION.THREADED?!0:!1:!1},h.prototype.allowsSideComments=function(){return this.get("deleted")?!1:ENV.DISCUSSION.PERMISSIONS.CAN_REPLY?ENV.DISCUSSION.THREADED?!1:this.get("parent_id")?!1:!0:!1},h.prototype.showBoxReplyLink=function(){return this.allowsSideComments()},h.prototype.collapsable=function(){return this.hasChildren()||this.allowsSideComments()||this.allowsThreadedReplies()},h.prototype.speedgraderUrl=function(){if(ENV.DISCUSSION.SPEEDGRADER_URL_TEMPLATE)return ENV.DISCUSSION.SPEEDGRADER_URL_TEMPLATE.replace(/%22%3Astudent_id%22/,this.get("user_id"))},h.prototype.summary=function(){return this.escapeDiv||(this.escapeDiv=c("<div/>")),this.escapeDiv.html(this.get("message")).text()},h.prototype.markAsRead=function(){var a;return this.set("read_state","read"),a=ENV.DISCUSSION.MARK_READ_URL.replace(/:id/,this.get("id")),c.ajaxJSON(a,"PUT")},h.prototype.markAsUnread=function(){var a;return this.set({read_state:"unread",forced_read_state:!0}),a=ENV.DISCUSSION.MARK_UNREAD_URL.replace(/:id/,this.get("id")),c.ajaxJSON(a,"DELETE",{forced_read_state:!0})},h.prototype.hasChildren=function(){return this.get("replies").length>0},h}(e.Model)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/util/BackoffPoller",["jquery","jquery.ajaxJSON"],function(b){var c;return c=function(){function c(b,c,d){var e,f,g,h,i;this.url=b,this.handler=c,d==null&&(d={}),this.handle=a(this.handle,this),this.poll=a(this.poll,this),this.baseInterval=(e=d.baseInterval)!=null?e:1e3,this.backoffFactor=(f=d.backoffFactor)!=null?f:1.5,this.maxAttempts=(g=d.maxAttempts)!=null?g:8,this.handleErrors=(h=d.handleErrors)!=null?h:!1,this.initialDelay=(i=d.initialDelay)!=null?i:!0}return c.prototype.start=function(){return this.running?this.reset():this.nextPoll(!0),this},c.prototype.then=function(a){var b;return(b=this.callbacks)==null&&(this.callbacks=[]),this.callbacks.push(a)},c.prototype.reset=function(){return this.nextInterval=this.baseInterval,this.attempts=0},c.prototype.stop=function(a){var b,c,d,e;a==null&&(a=!1),this.running&&clearTimeout(this.running),delete this.running;if(a&&this.callbacks){e=this.callbacks;for(c=0,d=e.length;c<d;c++)b=e[c],b()}return delete this.callbacks},c.prototype.poll=function(){var a=this;return this.running=!0,this.attempts++,b.ajaxJSON(this.url,"GET",{},this.handle,function(b,c){return a.handleErrors?a.handle(b,c):a.stop()})},c.prototype.handle=function(a,b){switch(this.handler(a,b)){case"continue":return this.nextPoll();case"reset":return this.nextPoll(!0);case"stop":return this.stop(!0);default:return this.stop()}},c.prototype.nextPoll=function(a){a==null&&(a=!1);if(a){this.reset();if(!this.initialDelay)return this.poll()}else this.nextInterval=parseInt(this.nextInterval*this.backoffFactor);return this.attempts>=this.maxAttempts?this.stop():this.running=setTimeout(this.poll,this.nextInterval)},c}()})}.call(this),function(){define("compiled/arr/erase",[],function(){return function(a,b){var c,d,e,f;for(c=e=0,f=a.length;e<f;c=++e){d=a[c];if(d!==b)continue;a.splice(c,1);break}return a}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("compiled/models/Topic",["i18n!discussions","jquery","underscore","Backbone","compiled/util/BackoffPoller","compiled/arr/walk","compiled/arr/erase","jquery.ajaxJSON"],function(b,e,f,g,h,i,j){var k,l,m,n;return m=f.each,l={avatar_image_url:null,display_name:b.t("uknown_author","Unknown Author"),id:null},k=function(b){function f(){return this.parseNewEntry=a(this.parseNewEntry,this),this.parseEntry=a(this.parseEntry,this),n=f.__super__.constructor.apply(this,arguments),n}return c(f,b),f.prototype.defaults={view:[],entries:[],new_entries:[],unread_entries:[],forced_entries:[]},f.prototype.url=function(){return""+this.get("root_url")+"?include_new_entries=1"},f.prototype.fetch=function(a){var b,c=this;return a==null&&(a={}),b=new h(this.url(),function(b,d){return d.status===503?"continue":d.status!==200?"abort":(c.set(c.parse(b,200,d)),typeof a.success=="function"&&a.success(c,b),"stop")},{handleErrors:!0,initialDelay:!1,baseInterval:2e3,maxAttempts:12,backoffFactor:1.6}),b.start()},f.prototype.markAllAsRead=function(){return e.ajaxJSON(ENV.DISCUSSION.MARK_ALL_READ_URL,"PUT",{forced_read_state:!1}),this.setAllReadState("read")},f.prototype.markAllAsUnread=function(){return e.ajaxJSON(ENV.DISCUSSION.MARK_ALL_UNREAD_URL,"DELETE",{forced_read_state:!1}),this.setAllReadState("unread")},f.prototype.setAllReadState=function(a){return m(this.flattened,function(b){return b.read_state=a})},f.prototype.parse=function(a,b,c){return this.data=a,this.data.entries=[],this.flattened={},this.lastRoot=null,this.participants={},this.flattenParticipants(),i(this.data.view,"replies",this.parseEntry),m(this.data.new_entries,this.parseNewEntry),delete this.lastRoot,this.data},f.prototype.flattenParticipants=function(){var a,b,c,d,e;d=this.data.participants,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.participants[a.id]=a);return e},f.prototype.setEntryAuthor=function(a){return a.user_id!=null?a.author=this.participants[a.user_id]:a.author=l},f.prototype.parseEntry=function(a){var b,c,e;this.flattened[a.id]=a,b=this.flattened[a.parent_id],a.parent=b;if(c=a.id,d.call(this.data.unread_entries,c)>=0)a.read_state="unread";if(e=a.id,d.call(this.data.forced_entries,e)>=0)a.forced_read_state=!0;return this.setEntryAuthor(a),a.editor_id!=null&&(a.editor=this.participants[a.editor_id]),a.parent_id!=null?(a.root_entry=this.lastRoot,a.root_entry_id=this.lastRoot.id):(this.lastRoot=a,this.data.entries.push(a)),a},f.prototype.parseNewEntry=function(a){var b,c;this.flattened[a.id]=a,b=this.flattened[a.parent_id],this.setEntryAuthor(a);if(b!=null){((c=b.replies)!=null?c:b.replies=[]).push(a),a.parent=b;while(b.parent)b=b.parent;return a.root_entry=b,a.root_entry_id=b.id}return this.data.entries.push(a)},f.prototype.maybeRemove=function(a){var b;if(a.deleted&&!a.replies)return((b=a.parent)!=null?b.replies:void 0)!=null&&j(a.parent.replies,a),delete this.flattened[a.id]},f}(g.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/SideCommentDiscussionTopic",["compiled/arr/walk","compiled/models/Topic"],function(a,c){var d,e;return d=function(a){function c(){return e=c.__super__.constructor.apply(this,arguments),e}return b(c,a),c.prototype.parse=function(){var a,b,d,e,f;c.__super__.parse.apply(this,arguments),b={},f=this.flattened;for(d in f)a=f[d],delete a.replies,a.root_entry_id!=null?(e=b[a.root_entry_id],e.replies.push(a),a.parent=e,a.parent_id=e.id):(b[a.id]=a,a.replies=[]);return this.data.entries=function(){var c;c=[];for(d in b)a=b[d],a.replies.sort(function(a,b){return Date.parse(b.created_at)-Date.parse(a.created_at)}),c.push(a);return c}(),this.data},c}(c)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/collections/EntryCollection",["Backbone","compiled/models/Entry","compiled/arr/walk"],function(a,c,d){var e,f;return e=function(a){function e(){return f=e.__super__.constructor.apply(this,arguments),f}return b(e,a),e.prototype.defaults={perPage:50,initialPage:0},e.prototype.model=c,e.prototype.totalPages=function(){return Math.ceil(this.length/this.options.perPage)},e.prototype.getPage=function(a){var b;return a==="next"?this.getPage(this.currentPage+1):(this.currentPage=a,b=this.getPageIndicies(a),this.toArray().slice(b.start,b.end))},e.prototype.getPageIndicies=function(a){var b,c;return c=a*this.options.perPage,b=c+this.options.perPage,{start:c,end:b}},e.prototype.getPageAsCollection=function(a,b){return b==null&&(b=this.options),a=new this.constructor(this.getPage(a),b),a.fullCollection=this,a},e.prototype.setAllReadState=function(a){return this.each(function(b){return b.set("read_state",a)})},e.prototype.getEntryData=function(a){var b,c,e,f,g,h,i,j,k,l,m=this;c=null,g=null,e=0,d(this.toJSON(),"replies",function(b){var d;d=m.get(b.id)!=null,c===null&&d&&(g=b),d?e=0:c===null&&(e+=1);if(b.id===a)return c=b});if(g==null||c==null)return null;h=this.indexOf(this.get(g.id));for(f=j=0,k=this.totalPages();0<=k?j<=k:j>=k;f=0<=k?++j:--j){l=this.getPageIndicies(f),i=l.start,b=l.end;if(h>=i&&h<b)break}return{entry:c,rootParent:g,page:f,levels:e}},e}(a.Collection)})}.call(this),define("translations/discussion_topics",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussion_topics:{confirm_delete_announcement:{one:"هل أنت متأكد من أنك تريد حذف هذا الإعلان؟",other:"هل أنت متأكد من أنك تريد حذف هذه الإعلانات الـ %{count}؟"},confirm_delete_discussion_topic:{one:"هل أنت متأكد من أنك تريد حذف موضوعات المناقشة الـ %{count} هذه؟",other:"هل أنت متأكد من أنك تريد حذف موضوعات المناقشة الـ %{count} هذه؟"},default_discussion_title:"بلا عنوان",reply_count_tooltip:{one:"1 رد",other:"%{count} ردًا",zero:"بلا ردود"},unread_count_tooltip:{one:"1 رد غير مقروء",other:"%{count} ردًا غير مقروء",zero:"بلا ردود غير مقروءة"}}},es:{discussion_topics:{confirm_delete_announcement:{one:"¿Está seguro de que quiere borrar este anuncio?",other:"¿Está seguro de que quiere borrar estos %{count} anuncios?"},confirm_delete_discussion_topic:{one:"¿Está seguro de que quiere borrar este tema de debate?",other:"¿Está seguro de que quiere borrar estos %{count} temas de debate?"},default_discussion_title:"Sin Título",reply_count_tooltip:{one:"1 respuesta",other:"%{count} respuestas",zero:"Sin respuestas"},unread_count_tooltip:{one:"1 respuesta sin leer",other:"%{count} respuestas no leídas",zero:"No hay respuestas sin leer"}}},fr:{discussion_topics:{confirm_delete_announcement:{one:"Voulez-vous vraiment supprimer cette annonce ?",other:"Voulez-vous vraiment supprimer ces %{count} annonces ?"},confirm_delete_discussion_topic:{one:"Voulez-vous vraiment supprimer ce sujet de discussion ?",other:"Voulez-vous vraiment supprimer ces %{count} sujets de discussion ?"},default_discussion_title:"Sans titre",reply_count_tooltip:{one:"1 réponse",other:"%{count} réponses",zero:"Aucune réponse"},unread_count_tooltip:{one:"1 réponse non lue",other:"%{count} réponses non lues",zero:"Aucune réponse non lue"}}},ja:{discussion_topics:{confirm_delete_announcement:{one:"この %{count} 個のアナウンスを削除してもよろしいですか?",other:"この %{count} 個のアナウンスを削除してもよろしいですか?"},confirm_delete_discussion_topic:{one:"この %{count} 個のディスカッション トピックを削除してもよろしいですか?",other:"この %{count} 個のディスカッション トピックを削除してもよろしいですか?"},default_discussion_title:"タイトルなし",reply_count_tooltip:{one:"1 件の返信",other:"%{count} 件の返信",zero:"返信なし"},unread_count_tooltip:{one:"1 件の返信が未読",other:"%{count} 件の返信が未読",zero:"未読の返信なし"}}},ko:{discussion_topics:{confirm_delete_announcement:{one:"이 알림 %{count}개를 삭제하시겠습니까?",other:"이 알림 %{count}개를 삭제하시겠습니까?"},confirm_delete_discussion_topic:{one:"이 토론 주제 %{count}개를 삭제하시겠습니까?",other:"이 토론 주제 %{count}개를 삭제하시겠습니까?"},default_discussion_title:"제목 없음",reply_count_tooltip:{one:"답변 1개",other:"답변 %{count}개",zero:"답변 없음"},unread_count_tooltip:{one:"읽지 않은 답변 1개",other:"읽지 않은 답변 %{count}개",zero:"읽지 않은 답변 없음"}}},nl:{discussion_topics:{confirm_delete_announcement:{one:"Weet je zeker dat je deze aankondiging wilt verwijderen?",other:"Weet je zeker dat je deze %{count} aankondigingen wilt verwijderen?"},confirm_delete_discussion_topic:{one:"Weet je zeker dat je dit discussie-onderwerp wilt verwijderen?",other:"Weet je zeker dat je deze %{count} discussie-onderwerpen wilt verwijderen?"},default_discussion_title:"Geen titel",reply_count_tooltip:{one:"1 reactie",other:"%{count} reacties",zero:"Geen reacties"},unread_count_tooltip:{one:"1 ongelezen antwoord",other:"%{count} ongelezen reacties",zero:"Geen ongelezen reacties"}}},pt:{discussion_topics:{confirm_delete_announcement:{one:"Tem a certeza de que pretende eliminar este anúncio?",other:"Tem a certeza de que pretende eliminar estes% {count} anúncios?"},confirm_delete_discussion_topic:{one:"Tem a certeza de que pretende eliminar este tópico de discussão?",other:"Tem a certeza de que pretende eliminar estes %{count} tópicos de discussão?"},default_discussion_title:"Sem título",reply_count_tooltip:{one:"1 resposta",other:"%{count} respostas",zero:"Sem respostas"},unread_count_tooltip:{one:"1 resposta não lida",other:"%{count} respostas não lidas",zero:"Sem respostas não lidas"}}},ru:{discussion_topics:{confirm_delete_announcement:{one:"Вы уверены, что хотите удалить это объявление?",other:"Вы уверены, что хотите удалить эти %{count} объявлений?"},confirm_delete_discussion_topic:{one:"Вы уверены, что хотите удалить эту тему обсуждения?",other:"Вы уверены, что хотите удалить эти %{count} тем обсуждения?"},default_discussion_title:"Без названия",reply_count_tooltip:{one:"1 ответ",other:"%{count} ответа(-ов)",zero:"Ответы отсутствуют"},unread_count_tooltip:{one:"1 непрочитанный ответ",other:"%{count} непрочитанных ответа(-ов)",zero:"У вас нет непрочитанных ответов"}}},zh:{discussion_topics:{confirm_delete_announcement:{one:"是否确定要删除这 %{count} 个通告?",other:"是否确定要删除这 %{count} 个通告?"},confirm_delete_discussion_topic:{one:"是否确定要删除这 %{count} 个讨论主题?",other:"是否确定要删除这 %{count} 个讨论主题?"},default_discussion_title:"无标题",reply_count_tooltip:{one:"1 个回复",other:"%{count} 个回复",zero:"无回复"},unread_count_tooltip:{one:"1 条未读的回复",other:"%{count} 个未读回复",zero:"无未读回复"}}}}})}),define("translations/discussions.participant",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussions:{participant:{anonymous_user:"مجهول"}}},es:{discussions:{participant:{anonymous_user:"Anónimo"}}},fr:{discussions:{participant:{anonymous_user:"Anonyme"}}},ja:{discussions:{participant:{anonymous_user:"匿名"}}},ko:{discussions:{participant:{anonymous_user:"익명"}}},nl:{discussions:{participant:{anonymous_user:"Anoniem"}}},pt:{discussions:{participant:{anonymous_user:"Anônimo"}}},ru:{discussions:{participant:{anonymous_user:"Анонимно"}}},zh:{discussions:{participant:{anonymous_user:"匿名"}}}}})}),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/Participant",["Backbone","i18n!discussions.participant"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments),e}return b(d,a),d.prototype.defaults={avatar_image_url:"",display_name:c.t("anonymous_user","Anonymous"),id:null},d}(a.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/collections/ParticipantCollection",["i18n!discussions","Backbone","compiled/models/Participant"],function(a,c,d){var e,f;return e=function(c){function e(){return f=e.__super__.constructor.apply(this,arguments),f}return b(e,c),e.prototype.model=d,e.prototype.defaults={currentUser:{},unknown:{avatar_image_url:null,display_name:a.t("uknown_author","Unknown Author"),id:null}},e.prototype.findOrUnknownAsJSON=function(a){var b;return b=this.get(a),b!=null?b.toJSON():a===ENV.current_user.id?ENV.current_user:this.options.unknown},e}(c.Collection)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/models/DiscussionEntry",["underscore","Backbone","i18n!discussions"],function(a,c,d){var e,f,g;return f={avatar_image_url:null,display_name:d.t("unknown_author","Unknown Author"),id:null},e=function(a){function c(){return g=c.__super__.constructor.apply(this,arguments),g}return b(c,a),c.prototype.author=function(){return this.findParticipant(this.get("user_id"))},c.prototype.editor=function(){return this.findParticipant(this.get("editor_id"))},c.prototype.findParticipant=function(a){var b,c,d;return a&&(b=(c=this.collection)!=null?c.participants.get(a):void 0)?b.toJSON():a===((d=ENV.current_user)!=null?d.id:void 0)?ENV.current_user:f},c}(c.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/collections/DiscussionEntriesCollection",["Backbone","compiled/models/DiscussionEntry"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments),e}return b(d,a),d.prototype.model=c,d}(a.Collection)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty;define("compiled/models/TurnitinSettings",[],function(){var c;return c=function(){function c(b){b==null&&(b={}),this.present=a(this.present,this),this.excludesSmallMatches=a(this.excludesSmallMatches,this),this.toJSON=a(this.toJSON,this),this.percent=a(this.percent,this),this.words=a(this.words,this),this.sPaperCheck=b.s_paper_check||!1,this.originalityReportVisibility=b.originality_report_visibility||!1,this.internetCheck=b.internet_check||!1,this.excludeBiblio=b.exclude_biblio||!1,this.excludeQuoted=b.exclude_quoted||!1,this.journalCheck=b.journal_check||!1,this.excludeSmallMatchesType=b.exclude_small_matches_type,this.excludeSmallMatchesValue=b.exclude_small_matches_value||0}return c.prototype.words=function(){return this.excludeSmallMatchesType==="percent"?"":this.excludeSmallMatchesValue},c.prototype.percent=function(){return this.excludeSmallMatchesType==="words"?"":this.excludeSmallMatchesValue},c.prototype.toJSON=function(){return{s_paper_check:this.sPaperCheck,originality_report_visibility:this.originalityReportVisibility,internet_check:this.internetCheck,exclude_biblio:this.excludeBiblio,exclude_quoted:this.excludeQuoted,journal_check:this.journalCheck,exclude_small_matches_type:this.excludeSmallMatchesType,exclude_small_matches_value:this.excludeSmallMatchesValue}},c.prototype.excludesSmallMatches=function(){return this.excludeSmallMatchesType!=null},c.prototype.present=function(){var a,c,d;a={};for(c in this){if(!b.call(this,c))continue;d=this[c],a[c]=d}return a.excludesSmallMatches=this.excludesSmallMatches(),a.words=this.words(),a.percent=this.percent(),a},c}()})}.call(this),define("translations/overrides",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{overrides:{lock_date_before_due_date:"لا يمكن أن يكون تاريخ التأمين قبل تاريخ الاستحقاق",overrides:{everyone:"الجميع",everyone_else:"أي شخص آخر"},unlock_date_after_due_date:"لا يمكن أن يكون تاريخ إلغاء التأمين بعد تاريخ الاستحقاق",unlock_date_after_lock_date:"لا يمكن أن يكون تاريخ إلغاء التأمين بعد تاريخ التأمين"}},es:{overrides:{lock_date_before_due_date:"La fecha de bloqueo no puede ser anterior a la fecha de vencimiento",overrides:{everyone:"Todos",everyone_else:"Todos los demás"},unlock_date_after_due_date:"La fecha de desbloqueo no puede ser posterior a la fecha de vencimiento",unlock_date_after_lock_date:"La fecha de desbloqueo no puede ser posterior a la fecha de bloqueo"}},fr:{overrides:{lock_date_before_due_date:"La date de verrouillage ne peut pas être antérieure à la date d’échéance.",overrides:{everyone:"Tous",everyone_else:"Tous les autres"},unlock_date_after_due_date:"La date de déverrouillage ne peut pas être postérieure à la date d’échéance.",unlock_date_after_lock_date:"La date de déverrouillage ne peut pas être postérieure à la date de verrouillage."}},ja:{overrides:{lock_date_before_due_date:"ロック日を期日より前にすることはできません",overrides:{everyone:"全員",everyone_else:"他の全員"},unlock_date_after_due_date:"ロック解除日を期日より後にすることはできません",unlock_date_after_lock_date:"ロック解除日をロック日より後にすることはできません"}},ko:{overrides:{lock_date_before_due_date:"잠금 해제 날짜는 기한 이전일 수 없음",overrides:{everyone:"모두",everyone_else:"나머지 모든 사람"},unlock_date_after_due_date:"잠금 해제 날짜는 기한 이후일 수 없음",unlock_date_after_lock_date:"잠금 해제 날짜는 잠금 날짜 이후일 수 없음"}},nl:{overrides:{lock_date_before_due_date:"Vergrendeldatum kan niet voor vervaldatum zijn",overrides:{everyone:"Iedereen",everyone_else:"Alle anderen"},unlock_date_after_due_date:"Ontgrendeldatum kan niet na vervaldatum zij",unlock_date_after_lock_date:"Ontgrendeldatum kan niet na vergrendeldatum zijn"}},pt:{overrides:{lock_date_before_due_date:"A data de bloqueio não pode ser anterior à data de entrega",overrides:{everyone:"Todos",everyone_else:"Todos os outros"},unlock_date_after_due_date:"A data de desbloqueio não pode ser posterior à data de entrega",unlock_date_after_lock_date:"A data de desbloqueio não pode ser posterior à data de bloqueio"}},ru:{overrides:{lock_date_before_due_date:"Дата блокировки не может быть раньше даты выполнения",overrides:{everyone:"Все",everyone_else:"Все остальные"},unlock_date_after_due_date:"Дата разблокирования не может быть позже даты выполнения",unlock_date_after_lock_date:"Дата разблокирования не может быть позже даты блокировки"}},zh:{overrides:{lock_date_before_due_date:"锁定日期不能早于截止日期",overrides:{everyone:"每个人",everyone_else:"其他人"},unlock_date_after_due_date:"解锁日期不能晚于截止日期",unlock_date_after_lock_date:"解锁日期不能晚于锁定日期"}}}})}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/models/Section",["Backbone","i18n!overrides"],function(b,d){var e,f,g;return e=b.Model,f=function(b){function e(){return this.isDefaultDueDateSection=a(this.isDefaultDueDateSection,this),g=e.__super__.constructor.apply(this,arguments),g}return c(e,b),e.defaultDueDateSection=function(){return new e({id:e.defaultDueDateSectionID,name:d.t("overrides.everyone","Everyone")})},e.defaultDueDateSectionID=0,e.prototype.isDefaultDueDateSection=function(){return this.id===e.defaultDueDateSectionID},e}(e)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/models/AssignmentOverride",["Backbone","underscore","jquery","compiled/models/Section"],function(b,d,e,f){var g,h;return g=function(b){function e(){return this.representsDefaultDueDate=a(this.representsDefaultDueDate,this),this.getCourseSectionID=a(this.getCourseSectionID,this),this.isBlank=a(this.isBlank,this),h=e.__super__.constructor.apply(this,arguments),h}return c(e,b),e.prototype.defaults={due_at_overridden:!0,due_at:null,all_day:!1,all_day_date:null,unlock_at_overridden:!0,unlock_at:null,lock_at_overridden:!0,lock_at:null},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("change:course_section_id",this.clearID,this)},e.prototype.clearID=function(){return this.set("id",void 0)},e.prototype.parse=function(a){var b;return b=a.assignment_override,b},e.prototype.toJSON=function(){return{assignment_override:e.__super__.toJSON.apply(this,arguments)}},e.defaultDueDate=function(a){var b;return a==null&&(a={}),b=d.extend(a,{course_section_id:f.defaultDueDateSectionID}),new e(b)},e.prototype.isBlank=function(){return this.get("due_at")==null},e.prototype.getCourseSectionID=function(){return this.get("course_section_id")},e.prototype.representsDefaultDueDate=function(){return this.getCourseSectionID()===f.defaultDueDateSectionID},e}(b.Model)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/collections/AssignmentOverrideCollection",["Backbone","underscore","jquery","compiled/models/AssignmentOverride","compiled/models/Section"],function(b,d,e,f,g){var h,i;return h=function(b){function e(){return this.isSimple=a(this.isSimple,this),this.toJSON=a(this.toJSON,this),this.blank=a(this.blank,this),this.containsDefaultDueDate=a(this.containsDefaultDueDate,this),this.getDefaultDueDate=a(this.getDefaultDueDate,this),this.courseSectionIDs=a(this.courseSectionIDs,this),i=e.__super__.constructor.apply(this,arguments),i}return c(e,b),e.prototype.model=f,e.prototype.courseSectionIDs=function(){return this.pluck("course_section_id")},e.prototype.comparator=function(a){return a.id},e.prototype.getDefaultDueDate=function(){return this.detect(function(a){return a.getCourseSectionID()===g.defaultDueDateSectionID})},e.prototype.containsDefaultDueDate=function(){return!!this.getDefaultDueDate()},e.prototype.blank=function(){return this.select(function(a){return a.isBlank()})},e.prototype.toJSON=function(){var a;return a=this.reject(function(a){return a.representsDefaultDueDate()}),d.map(a,function(a){return a.toJSON().assignment_override})},e.prototype.isSimple=function(){return d.difference(this.courseSectionIDs(),[g.defaultDueDateSectionID]).length===0},e}(b.Collection)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/models/Assignment",["jquery","underscore","Backbone","compiled/models/TurnitinSettings","compiled/collections/AssignmentOverrideCollection"],function(d,e,f,g,h){var i,j,k;return j=f.Model,i=function(d){function f(){return this.setNullDates=a(this.setNullDates,this),this._filterFrozenAttributes=a(this._filterFrozenAttributes,this),this._getAssignmentType=a(this._getAssignmentType,this),this._hasOnlyType=a(this._hasOnlyType,this),this._submissionTypes=a(this._submissionTypes,this),this.toView=a(this.toView,this),this.isLetterGraded=a(this.isLetterGraded,this),this.isSimple=a(this.isSimple,this),this.externalToolNewTab=a(this.externalToolNewTab,this),this.externalToolUrl=a(this.externalToolUrl,this),this.gradingStandardId=a(this.gradingStandardId,this),this.groupCategoryId=a(this.groupCategoryId,this),this.turnitinEnabled=a(this.turnitinEnabled,this),this.gradeGroupStudentsIndividually=a(this.gradeGroupStudentsIndividually,this),this.turnitinAvailable=a(this.turnitinAvailable,this),this.allowedExtensions=a(this.allowedExtensions,this),this.restrictFileExtensions=a(this.restrictFileExtensions,this),this.notifyOfUpdate=a(this.notifyOfUpdate,this),this.peerReviewsAssignAt=a(this.peerReviewsAssignAt,this),this.peerReviewCount=a(this.peerReviewCount,this),this.automaticPeerReviews=a(this.automaticPeerReviews,this),this.peerReviews=a(this.peerReviews,this),this.isOnlineSubmission=a(this.isOnlineSubmission,this),this.acceptsOnlineTextEntries=a(this.acceptsOnlineTextEntries,this),this.acceptsMediaRecording=a(this.acceptsMediaRecording,this),this.acceptsOnlineURL=a(this.acceptsOnlineURL,this),this.acceptsOnlineUpload=a(this.acceptsOnlineUpload,this),this.submissionType=a(this.submissionType,this),this.submissionTypes=a(this.submissionTypes,this),this.courseID=a(this.courseID,this),this.gradingType=a(this.gradingType,this),this.frozenAttributes=a(this.frozenAttributes,this),this.frozen=a(this.frozen,this),this.freezeOnCopy=a(this.freezeOnCopy,this),this.canFreeze=a(this.canFreeze,this),this.assignmentGroupId=a(this.assignmentGroupId,this),this.pointsPossible=a(this.pointsPossible,this),this.name=a(this.name,this),this.description=a(this.description,this),this.lockAt=a(this.lockAt,this),this.unlockAt=a(this.unlockAt,this),this.dueAt=a(this.dueAt,this),this.assignmentType=a(this.assignmentType,this),this.isAssignment=a(this.isAssignment,this),this.isNotGraded=a(this.isNotGraded,this),this.isExternalTool=a(this.isExternalTool,this),this.isDiscussionTopic=a(this.isDiscussionTopic,this),this.isQuiz=a(this.isQuiz,this),k=f.__super__.constructor.apply(this,arguments),k}return c(f,d),f.prototype.resourceName="assignments",f.prototype.initialize=function(){var a;return a=this.get("assignment_overrides"),this.set("assignment_overrides",new h(a)),this.set("turnitin_settings",new g(this.get("turnitin_settings")),{silent:!0})},f.prototype.isQuiz=function(){return this._hasOnlyType("online_quiz")},f.prototype.isDiscussionTopic=function(){return this._hasOnlyType("discussion_topic")},f.prototype.isExternalTool=function(){return this._hasOnlyType("external_tool")},f.prototype.isNotGraded=function(){return this._hasOnlyType("not_graded")},f.prototype.isAssignment=function(){return!e.include(this._submissionTypes(),"online_quiz","discussion_topic","not_graded","external_tool")},f.prototype.assignmentType=function(a){return arguments.length>0?a==="assignment"?this.set("submission_types",["none"]):this.set("submission_types",[a]):this._getAssignmentType()},f.prototype.dueAt=function(a){return arguments.length>0?this.set("due_at",a):this.get("due_at")},f.prototype.unlockAt=function(a){return arguments.length>0?this.set("unlock_at",a):this.get("unlock_at")},f.prototype.lockAt=function(a){return arguments.length>0?this.set("lock_at",a):this.get("lock_at")},f.prototype.description=function(a){return arguments.length>0?this.set("description",a):this.get("description")},f.prototype.name=function(a){return arguments.length>0?this.set("name",a):this.get("name")},f.prototype.pointsPossible=function(a){return arguments.length>0?this.set("points_possible",a):this.get("points_possible")||0},f.prototype.assignmentGroupId=function(a){return a?this.set("assignment_group_id",a):this.get("assignment_group_id")},f.prototype.canFreeze=function(){return this.get("frozen_attributes")!=null&&!this.frozen()},f.prototype.freezeOnCopy=function(){return this.get("freeze_on_copy")},f.prototype.frozen=function(){return this.get("frozen")},f.prototype.frozenAttributes=function(){return this.get("frozen_attributes")||[]},f.prototype.gradingType=function(a){return a?this.set("grading_type",a):this.get("grading_type")||"points"},f.prototype.courseID=function(){return this.get("course_id")},f.prototype.submissionTypes=function(a){return arguments.length>0?this.set("submission_types",a):this._submissionTypes()},f.prototype.submissionType=function(){var a;return a=this._submissionTypes(),e.include(a,"none")||a.length===0?"none":e.include(a,"on_paper")?"on_paper":e.include(a,"external_tool")?"external_tool":"online"},f.prototype.acceptsOnlineUpload=function(){return!!e.include(this._submissionTypes(),"online_upload")},f.prototype.acceptsOnlineURL=function(){return!!e.include(this._submissionTypes(),"online_url")},f.prototype.acceptsMediaRecording=function(){return!!e.include(this._submissionTypes(),"media_recording")},f.prototype.acceptsOnlineTextEntries=function(){return!!e.include(this._submissionTypes(),"online_text_entry")},f.prototype.isOnlineSubmission=function(){return e.any(this._submissionTypes(),function(a){return a==="online"||a==="online_text_entry"||a==="media_recording"||a==="online_url"||a==="online_upload"})},f.prototype.peerReviews=function(a){return arguments.length>0?this.set("peer_reviews",a):this.get("peer_reviews")},f.prototype.automaticPeerReviews=function(a){return arguments.length>0?this.set("automatic_peer_reviews",a):this.get("automatic_peer_reviews")},f.prototype.peerReviewCount=function(a){return arguments.length>0?this.set("peer_review_count",a):this.get("peer_review_count")||0},f.prototype.peerReviewsAssignAt=function(a){return arguments.length>0?this.set("peer_reviews_assign_at",a):this.get("peer_reviews_assign_at")||null},f.prototype.notifyOfUpdate=function(a){return arguments.length>0?this.set("notify_of_update",a):this.get("notify_of_update")},f.prototype.restrictFileExtensions=function(){return!!this.allowedExtensions()},f.prototype.allowedExtensions=function(a){return arguments.length>0?this.set("allowed_extensions",a):this.get("allowed_extensions")},f.prototype.turnitinAvailable=function(){return typeof this.get("turnitin_enabled")!="undefined"},f.prototype.gradeGroupStudentsIndividually=function(a){return arguments.length>0?this.set("grade_group_students_individually",a):this.get("grade_group_students_individually")},f.prototype.turnitinEnabled=function(a){return arguments.length===0?this.get("turnitin_enabled")===void 0?!1:!!this.get("turnitin_enabled"):this.set("turnitin_enabled",a)},f.prototype.groupCategoryId=function(a){return arguments.length>0?this.set("group_category_id",a):this.get("group_category_id")},f.prototype.gradingStandardId=function(a){return arguments.length>0?this.set("grading_standard_id",a):this.get("grading_standard_id")},f.prototype.externalToolUrl=function(a){var b;return b=this.get("external_tool_tag_attributes")||{},arguments.length>0?(b.url=a,this.set("external_tool_tag_attributes",b)):b.url},f.prototype.externalToolNewTab=function(a){var b;return b=this.get("external_tool_tag_attributes")||{},arguments.length>0?(b.new_tab=a,this.set("external_tool_tag_attributes",b)):b.new_tab},f.prototype.isSimple=function(){return this.gradingType()==="points"&&this.submissionType()==="none"&&!this.groupCategoryId()&&!this.peerReviews()&&!this.frozen()&&this.get("assignment_overrides").isSimple()},f.prototype.isLetterGraded=function(){return this.gradingType()==="letter_grade"},f.prototype.toView=function(){var a,b,c,d,e;b=["name","dueAt","description","pointsPossible","lockAt","unlockAt","gradingType","notifyOfUpdate","peerReviews","automaticPeerReviews","peerReviewCount","peerReviewsAssignAt","acceptsOnlineUpload","acceptsMediaRecording","submissionType","acceptsOnlineTextEntries","acceptsOnlineURL","allowedExtensions","restrictFileExtensions","isOnlineSubmission","isNotGraded","isExternalTool","externalToolUrl","externalToolNewTab","turnitinAvailable","turnitinEnabled","gradeGroupStudentsIndividually","groupCategoryId","frozen","frozenAttributes","freezeOnCopy","canFreeze","isSimple","gradingStandardId","isLetterGraded","assignmentGroupId"],c={};for(d=0,e=b.length;d<e;d++)a=b[d],c[a]=this[a]();return c},f.prototype.toJSON=function(){var a;return a=f.__super__.toJSON.apply(this,arguments),a=this._filterFrozenAttributes(a),this.alreadyScoped?a:{assignment:a}},f.prototype.parse=function(a){var b;return b=a.assignment_overrides,b!=null?a.assignment_overrides=new h(b):a.assignment_overrides=new h,a.turnitin_settings=new g(a.turnitin_settings),a},f.prototype._submissionTypes=function(){return this.get("submission_types")||[]},f.prototype._hasOnlyType=function(a){var b;return b=this._submissionTypes(),b.length===1&&b[0]===a},f.prototype._getAssignmentType=function(){return this.isDiscussionTopic()?"discussion_topic":this.isQuiz()?"online_quiz":this.isExternalTool()?"external_tool":this.isNotGraded()?"not_graded":"assignment"},f.prototype._filterFrozenAttributes=function(a){var c,d,f;f=this.attributes;for(c in f){if(!b.call(f,c))continue;d=f[c],e.contains(this.frozenAttributes(),c)&&delete a[c]}return e.contains(this.frozenAttributes(),"title")&&delete a.name,e.contains(this.frozenAttributes(),"group_category_id")&&delete a.grade_group_students_individually,e.contains(this.frozenAttributes(),"peer_reviews")&&(delete a.automatic_peer_reviews,delete a.peer_review_count,delete a.peer_reviews_assign_at),delete a.frozen,delete a.frozen_attributes,a},f.prototype.setNullDates=function(){return this.dueAt(null),this.lockAt(null),this.unlockAt(null),this},f}(j)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/models/DiscussionTopic",["i18n!discussion_topics","Backbone","jquery","underscore","compiled/collections/ParticipantCollection","compiled/collections/DiscussionEntriesCollection","compiled/models/Assignment"],function(b,d,e,f,g,h,i){var j,k;return j=function(j){function l(){return this.present=a(this.present,this),k=l.__super__.constructor.apply(this,arguments),k}return c(l,j),l.prototype.resourceName="discussion_topics",l.prototype.defaults={discussion_type:"side_comment",podcast_enabled:!1,podcast_has_student_posts:!1,require_initial_post:!1,is_announcement:!1,subscribed:!1},l.prototype.dateAttributes=["last_reply_at","posted_at","delayed_post_at"],l.prototype.initialize=function(){var a,b=this;return this.participants=new g,this.entries=new h,this.entries.url=function(){return""+f.result(b,"url")+"/entries"},this.entries.participants=this.participants,this.set("set_assignment",this.get("assignment")!=null),a=new i(this.get("assignment")||{}),a.alreadyScoped=!0,this.set("assignment",a)},l.prototype.present=function(){return d.Model.prototype.toJSON.call(this)},l.prototype.topicSubscribe=function(){return this.set("subscribed",!0),e.ajaxJSON(ENV.DISCUSSION.SUBSCRIBE_URL,"PUT")},l.prototype.topicUnsubscribe=function(){return this.set("subscribed",!1),e.ajaxJSON(ENV.DISCUSSION.UNSUBSCRIBE_URL,"DELETE")},l.prototype.toJSON=function(){var a,b;return b=l.__super__.toJSON.apply(this,arguments),b.set_assignment||delete b.assignment,a=b.assignment?typeof b.assignment.toJSON=="function"?b.assignment.toJSON():b.assignment:null,f.extend(b,{summary:this.summary(),unread_count_tooltip:this.unreadTooltip(),reply_count_tooltip:this.replyTooltip(),assignment:a})},l.prototype.unreadTooltip=function(){return b.t("unread_count_tooltip",{zero:"No unread replies",one:"1 unread reply",other:"%{count} unread replies"},{count:this.get("unread_count")})},l.prototype.replyTooltip=function(){return b.t("reply_count_tooltip",{zero:"No replies",one:"1 reply",other:"%{count} replies"},{count:this.get("discussion_subentry_count")})},l.prototype.fetchEntries=function(){var a,b=this;return a=f.result(this,"url"),e.get(""+a+"/view",function(a){var c,d,e,f;return f=a.unread_entries,d=a.forced_entries,e=a.participants,c=a.view,b.unreadEntries=f,b.forcedEntries=d,b.participants.reset(e),b.entries.reset(c)})},l.prototype.summary=function(){return e("<div/>").html(this.get("message")).text()||""},l.prototype.updateOneAttribute=function(a,b,c){var d;return c==null&&(c={}),d={},d[a]=b,c=f.defaults(c,{data:JSON.stringify(d),contentType:"application/json"}),this.save({},c)},l.prototype.positionAfter=function(a){var b,c;return this.updateOneAttribute("position_after",a),b=this.collection,c=b.indexOf(b.get(a)),b.remove(this,{silent:!0}),b.models.splice(c,0,this),b.reset(b.models)},l}(d.Model)})}.call(this),define("translations/rubrics",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{rubrics:{loading:"جارٍ التحميل...",titles:{assignment_rubric_details:"تفاصيل عنوان المهمة"}}},es:{rubrics:{loading:"cargando...",titles:{assignment_rubric_details:"Detalles de la Rúbrica de la Tarea"}}},fr:{rubrics:{loading:"Chargement en cours...",titles:{assignment_rubric_details:"Informations du barème des tâches"}}},ja:{rubrics:{loading:"読み込んでいます...",titles:{assignment_rubric_details:"課題の注釈の詳細表示"}}},ko:{rubrics:{loading:"로드 중...",titles:{assignment_rubric_details:"과제 루브릭 세부 정보"}}},nl:{rubrics:{loading:"Laden...",titles:{assignment_rubric_details:"Details van de criteria"}}},pt:{rubrics:{loading:"Carregando...",titles:{assignment_rubric_details:"Detalhe do protocolo da tarefa"}}},ru:{rubrics:{loading:"Загрузка...",titles:{assignment_rubric_details:"Сведения о рубрике заданий"}}},zh:{rubrics:{loading:"正在加载...",titles:{assignment_rubric_details:"作业题目详细信息"}}}}})}),function(){define("compiled/widget/assignmentRubricDialog",["i18n!rubrics","jquery","jqueryui/dialog","vendor/jquery.ba-tinypubsub"],function(a,b){var c;return c={initTriggers:function(){var a;if(a=b(".rubric_dialog_trigger"))return this.noRubricExists=a.data("noRubricExists"),this.url=a.data("url"),a.click(function(a){return a.preventDefault(),c.openDialog()})},initDialog:function(){return this.dialogInited=!0,this.$dialog=b("<div><h4>"+a.t("loading","Loading...")+"</h4></div>").dialog({title:a.t("titles.assignment_rubric_details","Assignment Rubric Details"),width:600,modal:!1,resizable:!0,autoOpen:!1}),b.get(this.url,function(a){c.$dialog.html(b(a).show());if(c.noRubricExists)return b.subscribe("edit_rubric/initted",function(){return c.$dialog.find(".btn.add_rubric_link").click()})})},openDialog:function(){return this.dialogInited||this.initDialog(),this.$dialog.dialog("open")}}})}.call(this),define("translations/discussion_topics.page_nav",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{discussion_topics:{page_nav:{Page:"صفحة",current_page:"الحالي",first_page:"أولاً",last_page:"أخيرًا"}}},es:{discussion_topics:{page_nav:{Page:"Página",current_page:"Actual",first_page:"Primera",last_page:"Última"}}},fr:{discussion_topics:{page_nav:{Page:"Page",current_page:"Actuelle",first_page:"Première",last_page:"Dernière"}}},ja:{discussion_topics:{page_nav:{Page:"ページ",current_page:"現在",first_page:"最初",last_page:"最後"}}},ko:{discussion_topics:{page_nav:{Page:"페이지",current_page:"현재",first_page:"처음",last_page:"마지막"}}},nl:{discussion_topics:{page_nav:{Page:"Pagina",current_page:"Huidig",first_page:"Eerste",last_page:"Laatste"}}},pt:{discussion_topics:{page_nav:{Page:"Página",current_page:"Atual",first_page:"Primeira",last_page:"Última"}}},ru:{discussion_topics:{page_nav:{Page:"Страница",current_page:"Текущие",first_page:"Первая",last_page:"Последняя"}}},zh:{discussion_topics:{page_nav:{Page:"页",current_page:"当前",first_page:"第一个",last_page:"最后一个"}}}}})}),function(){define("compiled/jquery/scrollIntoView",["jquery"],function(a){return a.fn.scrollIntoView=function(b){var c,d,e,f,g,h;b==null&&(b={}),c=b.container||this.offsetParent(),e=c.scrollTop(),d=e+c.height(),g=this[0].offsetTop,f=g+a(this[0]).outerHeight();if((h=b.ignore)!=null?h.border:void 0)g+=parseInt(a(this[0]).css("border-top-width").replace("px","")),f-=parseInt(a(this[0]).css("border-bottom-width").replace("px",""));if(g<e||b.toTop)return c.scrollTop(g);if(f>d)return c.scrollTop(f-c.height())}})}.call(this),function(){define("compiled/jquery/sticky",["underscore","jquery"],function(a,b){var c;return c=function(){function c(a){this.$el=a,this.top=this.$el.offset().top,this.stuck=!1,this.constructor.addInstance(this)}return c.instances=[],c.initialized=!1,c.$container=b(window),c.initialize=function(){return this.$container.on("scroll",a.debounce(this.checkInstances,10)),this.initialized=!0},c.addInstance=function(a){return this.initialized||this.initialize(),this.instances.push(a),this.checkInstances()},c.checkInstances=function(){var a,b,d,e,f;a=c.$container.scrollTop(),f=c.instances;for(d=0,e=f.length;d<e;d++)b=f[d],a>=b.top?b.stuck||b.stick():b.stuck&&b.unstick();return null},c.prototype.stick=function(){return this.$el.addClass("sticky"),this.stuck=!0},c.prototype.unstick=function(){return this.$el.removeClass("sticky"),this.stuck=!1},c}.call(this),b.fn.sticky=function(){return this.each(function(){return new c(b(this))})},b(function(){return b("[data-sticky]").sticky()}),c})}.call(this),define("jst/discussions/_deleted_entry",["compiled/handlebars_helpers","i18n!discussions.deleted_entry"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["discussions/_deleted_entry"]=b(function(a,b,c,d,e){function r(a,b){return"collapsable"}function s(a,b){return'data-event="toggleCollapsed"'}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<header class="entry-header discussion-section admin-link-hover-area ',k=c.read_state,g=k||b.read_state,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"read_state",{hash:{}})),f+=q(g)+" clearfix ",k=c.collapsable,g=k||b.collapsable,h=c["if"],l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='" ',k=c.collapsable,g=k||b.collapsable,h=c["if"],l=m.program(3,s,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='>\n  <div class="discussion-header-content right-of-avatar">\n    <div class="discussion-header-right">\n      <div class="headerBadges show-if-collapsed"></div>\n    </div>\n    <div class="discussion-title">',g="Deleted by *%{editor_name}* on %{edited_at}",h="deleted",i={},j="discussions.deleted_entry",i.scope=j,j="<a %{editor_href}>$1</a>",i.w0=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</div>\n  </div>\n</header>\n\n",f}),a.registerPartial("discussions/deleted_entry",c["discussions/_deleted_entry"]),c["discussions/_deleted_entry"]}),define("jst/discussions/entryStats",["compiled/handlebars_helpers","i18n!discussions.entry_stats"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["discussions/entryStats"]=b(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+="\n<a href='#'>\n",i=c.moreText,e=i||a.moreText,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.program(4,r,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n</a>\n",d}function q(a,b){var d="",e;return d+="\n  ",i=c.moreText,e=i||a.moreText,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"moreText",{hash:{}})),d+=o(e)+"\n",d}function r(a,b){var d="",e,f,g,h;d+="\n  ",e="Show more",f="show_more",g={},h="discussions.entry_stats",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="\n",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;i=c.showMore,g=i||b.showMore,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n<div class='new-and-total-badge'>\n  <span class=\"new-items\">",i=c.stats,g=i||b.stats,g=g===null||g===undefined||g===!1?g:g.unread,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"stats.unread",{hash:{}})),f+=o(g)+'</span>\n  <span class="total-items">',i=c.stats,g=i||b.stats,g=g===null||g===undefined||g===!1?g:g.total,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"stats.total",{hash:{}})),f+=o(g)+"</span>\n</div>\n",f}),c["discussions/entryStats"]}),define("jst/discussions/_reply_attachment",["compiled/handlebars_helpers","i18n!discussions.reply_attachment"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["discussions/_reply_attachment"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+='<li>\n  <input name="attachment" type="file">\n  <a href="#" class=\'discussion-reply-action\' data-event="removeReplyAttachment">',g="remove",h="remove_attachment",i={},j="discussions.reply_attachment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</a>\n</li>\n",f}),a.registerPartial("discussions/reply_attachment",c["discussions/_reply_attachment"]),c["discussions/_reply_attachment"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/discussions/Reply",["Backbone","underscore","i18n!discussions.reply","jquery","compiled/models/Entry","str/htmlEscape","jst/discussions/_reply_attachment","compiled/fn/preventDefault","tinymce.editor_box"],function(b,c,d,e,f,g,h,i){var j;return j=function(){function b(b,c){var d=this;this.view=b,this.options=c!=null?c:{},this.onPostReplyError=a(this.onPostReplyError,this),this.onPostReplySuccess=a(this.onPostReplySuccess,this),this.submit=a(this.submit,this),this.hideNotification=a(this.hideNotification,this),this.hide=a(this.hide,this),this.el=this.view.$(".discussion-reply-action:first"),this.discussionEntry=this.el.closest(".discussion_entry"),this.discussionEntry.length===0&&(this.discussionEntry=this.el.closest(".entry")),this.form=this.discussionEntry.find("form:first").submit(i(this.submit)),this.textArea=this.getEditingElement(),this.form.find(".cancel_button").click(this.hide),this.form.on("click",".toggle-wrapper a",function(a){return a.preventDefault(),d.textArea.editorBox("toggle")}),this.form.delegate(".alert .close","click",i(this.hideNotification)),this.editing=!1}return b.prototype.toggle=function(){return this.editing?this.hide():this.edit()},b.prototype.edit=function(){var a=this;return this.form.addClass("replying"),this.discussionEntry.addClass("replying"),this.textArea.editorBox({tinyOptions:{width:"100%"}}),this.options.focus&&setTimeout(function(){return a.textArea.editorBox("focus")},20),this.editing=!0,this.trigger("edit",this)},b.prototype.hide=function(){return this.content=this.textArea._justGetCode(),this.textArea._removeEditor(),this.form.removeClass("replying"),this.discussionEntry.removeClass("replying"),this.textArea.val(this.content),this.editing=!1,this.trigger("hide",this)},b.prototype.hideNotification=function(){return this.view.model.set("notification","")},b.prototype.submit=function(){var a;return this.hide(),this.textArea._setContentCode(""),this.view.model.set("notification","<div class='alert alert-info'>"+d.t("saving_reply","Saving reply...")+"</div>"),a=new f(this.getModelAttributes()),a.save(null,{success:this.onPostReplySuccess,error:this.onPostReplyError,multipart:a.get("attachment"),proxyAttachment:!0}),this.hide(),this.removeAttachments()},b.prototype.getEditingElement=function(){return this.view.$(".reply-textarea:first")},b.prototype.getModelAttributes=function(){var a;return a=(new Date).getTime(),{summary:e("<div/>").html(this.content).text(),message:this.content,parent_id:this.options.topLevel?null:this.view.model.get("id"),user_id:ENV.current_user_id,created_at:a,updated_at:a,attachment:this.form.find("input[type=file]")[0],"new":!0}},b.prototype.onPostReplySuccess=function(a){return this.view.model.set("notification",""),this.trigger("save",a)},b.prototype.onPostReplyError=function(a){return this.view.model.set("notification","<div class='alert alert-info'>"+d.t("error_saving_reply","*An error occured*, please post your reply again later",{wrapper:"<strong>$1</strong>"})+"</div>"),this.textArea.val(a.get("message")),this.edit()},b.prototype.addAttachment=function(a){return this.form.find("ul.discussion-reply-attachments").append(h()),this.form.find("a.discussion-reply-add-attachment").hide()},b.prototype.removeAttachment=function(a){return a.closest("ul.discussion-reply-attachments li").remove(),this.form.find("a.discussion-reply-add-attachment").show()},b.prototype.removeAttachments=function(){return this.form.find("ul.discussion-reply-attachments").empty(),this.form.find("a.discussion-reply-add-attachment").show()},b}(),c.extend(j.prototype,b.Events),j})}.call(this),define("jst/_avatar",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c._avatar=b(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+="\n  ",i=c.avatar_image_url,e=i||a.avatar_image_url,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function q(a,b){var d="",e,f;d+="\n    <a ",i=c.url,e=i||a.url,f=c["if"],j=k.program(3,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=' class="avatar" ',i=c.display_name,e=i||a.display_name,f=c["if"],j=k.program(5,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='><img src="',i=c.avatar_image_url,e=i||a.avatar_image_url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"avatar_image_url",{hash:{}})),d+=o(e)+'" alt="',i=c.display_name,e=i||a.display_name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"display_name",{hash:{}})),d+=o(e)+'"></a>\n  ',d}function r(a,b){var d="",e;return d+=' href="',i=c.url,e=i||a.url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"url",{hash:{}})),d+=o(e)+'" ',d}function s(a,b){var d="",e;return d+=' title="',i=c.display_name,e=i||a.display_name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"display_name",{hash:{}})),d+=o(e)+'" ',d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f}),a.registerPartial("avatar",c._avatar),c._avatar}),define("jst/discussions/_entry_content",["compiled/handlebars_helpers","i18n!discussions.entry_content","jst/_avatar"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["discussions/_entry_content"]=b(function(a,b,c,d,e){function r(a,b){return"collapsable"}function s(a,b){return'data-event="toggleCollapsed"'}function t(a,b){var d="",e,f,g,h;d+='\n          <li><a data-pushstate href="#entry-',k=c.parent_id,e=k||a.parent_id,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"parent_id",{hash:{}})),d+=q(e)+'"><i class="icon-replied"></i> ',e="Go To Parent",f="go_to_parent",g={},h="discussions.entry_content",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</a></li>\n        ",d}function u(a,b){var d="",e,f,g,h;d+='\n          <li><a href="#content"><i class="icon-discussion"></i> ',e="Go To Topic",f="go_to_topic",g={},h="discussions.entry_content",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</a></li>\n        ",d}function v(a,b){var d="",e,f,g,h;d+='\n          <li><a data-event="edit" href="#"><i class="icon-edit"></i> ',e="Edit",f="edit",g={},h="discussions.entry_content",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;d+='</a></li>\n          <li><a data-event="remove" href="#"><i class="icon-trash"></i> ',e="Delete",f="delete",g={},h="discussions.entry_content",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</a></li>\n        ",d}function w(a,b){var d="",e,f,g,h;d+='\n          <li><a href="',k=c.speedgraderUrl,e=k||a.speedgraderUrl,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"speedgraderUrl",{hash:{}})),d+=q(e)+'"><i class="icon-check"></i> ',e="Open in SpeedGrader",f="open_in_speedgrader",g={},h="discussions.entry_content",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</a></li>\n        ",d}function x(a,b){var d="",e;return d+='href="',k=c.author,e=k||a.author,e=e===null||e===undefined||e===!1?e:e.html_url,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"author.html_url",{hash:{}})),d+=q(e)+'" data-bypass',d}function y(a,b){return"unknown"}function z(a,b){var d,e;return k=c.author,d=k||a.author,d=d===null||d===undefined||d===!1?d:d.url,e=c["if"],l=m.program(18,A,b),l.hash={},l.fn=l,l.inverse=m.noop,d=e.call(a,d,l),d||d===0?d:""}function A(a,b){var d="",e;return d+=' href="',k=c.author,e=k||a.author,e=e===null||e===undefined||e===!1?e:e.url,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"author.url",{hash:{}})),d+=q(e)+'" ',d}function B(a,b){var d;return k=c.author,d=k||a.author,d=d===null||d===undefined||d===!1?d:d.display_name,typeof d===n?d=d.call(a,{hash:{}}):d===p&&(d=o.call(a,"author.display_name",{hash:{}})),q(d)}function C(a,b){var d,e,f,g;return d="Unknown Author",e="unknown_author",f={},g="discussions.entry_content",f.scope=g,k=c.t,g=k||a.t,l={},l.hash=f,typeof g===n?d=g.call(a,e,d,l):g===p?d=o.call(a,"t",e,d,l):d=g,d||d===0?d:""}function D(a,b){var d="",e,f,g,h;d+='\n    <div class="discussion-fyi">',e="Edited by *%{editor.display_name}* on %{edited_at}",f="edited_comment",g={},h="discussions.entry_content",g.scope=h,h="<a %{editor_href}>$1</a>",g.w0=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</div>\n  ",d}function E(a,b){var d="",e,f;d+='\n    <div class="comment_attachments">\n      ',k=c.attachments,e=k||a.attachments,f=c.each,l=m.program(27,F,b),l.hash={},l.fn=l,l.inverse=m.noop,e=f.call(a,e,l);if(e||e===0)d+=e;return d+="\n    </div>\n  ",d}function F(a,b){var d="",e,f;return d+='\n        <div><a href="',k=c.url,e=k||a.url,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"url",{hash:{}})),d+=q(e)+'" class="',k=c["content-type"],e=k||a["content-type"],k=c.mimeClass,f=k||a.mimeClass,typeof f===n?e=f.call(a,e,{hash:{}}):f===p?e=o.call(a,"mimeClass",e,{hash:{}}):e=f,d+=q(e)+'" title="',k=c.filename,e=k||a.filename,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"filename",{hash:{}})),d+=q(e)+'">',k=c.display_name,e=k||a.display_name,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"display_name",{hash:{}})),d+=q(e)+"</a></div>\n      ",d}function G(a,b){return'\n<div class="entry-controls hide-if-collapsed hide-if-replying">\n  <div class="notification" data-bind="notification"></div>\n  <a class=\'discussion-reply-action entry-control dim-till-hover\' data-event="addReply" href=\'#\'><i class=\'icon-replied standalone-icon\'></i></a>\n</div>\n'}c=c||a.helpers,d=d||a.partials;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<header class="entry-header discussion-section admin-link-hover-area clearfix ',k=c.collapsable,g=k||b.collapsable,h=c["if"],l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='" ',k=c.collapsable,g=k||b.collapsable,h=c["if"],l=m.program(3,s,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+=">\n  ",k=c.author,g=k||b.author,g=m.invokePartial(d.avatar,"avatar",g,c,d);if(g||g===0)f+=g;f+='\n  <div class="discussion-header-content right-of-avatar">\n    <div class="admin-links hide-if-collapsed">\n      <a class="al-trigger dim-till-hover" data-kyle-menu-options=\'{"appendMenuTo": "body"}\'><i\n          class="icon-settings standalone-icon"></i><i class="icon-mini-arrow-down standalone-icon"></i><span\n          class="screenreader-only">',g="Manage Discussion Entry",h="manage_discussion_entry",i={},j="discussions.entry_content",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</span></a>\n      <ul class="al-options">\n        ',k=c.parent_id,g=k||b.parent_id,h=c["if"],l=m.program(5,t,e),l.hash={},l.fn=l,l.inverse=m.program(7,u,e),g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n        ",k=c.canModerate,g=k||b.canModerate,h=c["if"],l=m.program(9,v,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n        ",k=c.speedgraderUrl,g=k||b.speedgraderUrl,h=c["if"],l=m.program(11,w,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n      </ul>\n    </div>\n    <div class="discussion-header-right">\n      <div class="discussion-pubdate hide-if-collapsed">',k=c.updated_at,g=k||b.updated_at,h={},i=!0,h.pubdate=i,k=c.friendlyDatetime,i=k||b.friendlyDatetime,l={},l.hash=h,typeof i===n?g=i.call(b,g,l):i===p?g=o.call(b,"friendlyDatetime",g,l):g=i,f+=q(g)+'</div>\n      <div class="headerBadges show-if-collapsed"></div>\n    </div>\n    <div class="discussion-title">\n      <a ',k=c.author,g=k||b.author,g=g===null||g===undefined||g===!1?g:g.html_url,h=c["if"],l=m.program(13,x,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+=' class="author ',k=c.author,g=k||b.author,g=g===null||g===undefined||g===!1?g:g.id,h=c.unless,l=m.program(15,y,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='" title="',g="Author's name",h="authors_name",i={},j="discussions.entry_content",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='" ',k=c.author,g=k||b.author,h=c["if"],l=m.program(17,z,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+=' class="author">',k=c.author,g=k||b.author,h=c["if"],l=m.program(20,B,e),l.hash={},l.fn=l,l.inverse=m.program(22,C,e),g=h.call(b,g,l);if(g||g===0)f+=g;f+='</a>\n    </div>\n    <div class="show-if-collapsed discussion-subtitle summary ellipsis">',k=c.summary,g=k||b.summary,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"summary",{hash:{}})),f+=q(g)+'</div> \n  </div>\n</header>\n<div class="discussion-section message_wrapper hide-if-collapsed">\n  <span class="message-notification" data-bind="messageNotification"></span>\n  <div data-bind="message" class="message user_content">',k=c.message,g=k||b.message,k=c.convertApiUserContent,h=k||b.convertApiUserContent,typeof h===n?g=h.call(b,g,{hash:{}}):h===p?g=o.call(b,"convertApiUserContent",g,{hash:{}}):g=h,f+=q(g)+"</div>\n  ",k=c.editor,g=k||b.editor,h=c["if"],l=m.program(24,D,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n  ",k=c.attachments,g=k||b.attachments,h=c["if"],l=m.program(26,E,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n</div>\n",k=c.inlineReplyLink,g=k||b.inlineReplyLink,h=c["if"],l=m.program(29,G,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;return f+="\n",f}),a.registerPartial("discussions/entry_content",c["discussions/_entry_content"]),c["discussions/_entry_content"]}),define("jst/discussions/_reply_form",["compiled/handlebars_helpers","i18n!discussions.reply_form"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["discussions/_reply_form"]=b(function(a,b,c,d,e){function r(a,b){var d="",e,f,g,h;d+='\n  <div class="discussion-entry-reply-area reply-box-container hide-if-collapsed hide-if-replying">\n    <div class="notification" data-bind="notification"></div>\n    <a class="discussion-reply-action discussion-reply-box" data-event="addReply" href="#">\n      ',e="Reply",f="write_a_reply",g={},h="discussions.reply_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="\n    </a>\n  </div>\n",d}function s(a,b){var d="",e,f,g,h;d+='\n          <a href="#" class="discussion-reply-add-attachment discussion-reply-action icon-paperclip"\n             data-event="addReplyAttachment">',e="Attach",f="attach_file",g={},h="discussions.reply_form",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</a>\n        ",d}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;k=c.showBoxReplyLink,g=k||b.showBoxReplyLink,h=c["if"],l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n<div class=\'discussion-entry-reply-area hide-if-collapsed show-if-replying\'>\n  <form class="discussion-reply-form">\n    <div class="toggle-wrapper">\n      <a href="#">',g="Switch Views",h="switch_views",i={},j="discussions.reply_form",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</a>\n    </div>\n\n    <textarea class="reply-textarea" id="reply_message_for_',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'"></textarea>\n\n    <div class="clearfix">\n      <div class="discussion-reply-buttons">\n        <a href="javascript:" class="cancel_button btn btn-small">',g="Cancel",h="cancel",i={},j="discussions.reply_form",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</a>\n        <button class="btn btn-primary btn-small" type="submit">',g="Post Reply",h="post_reply",i={},j="discussions.reply_form",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</button>\n      </div>\n\n      <div class="discussion-reply-attachments-container">\n        <ul class="discussion-reply-attachments"></ul>\n        ',k=c.canAttach,g=k||b.canAttach,h=c["if"],l=m.program(3,s,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;return f+="\n      </div>\n    </div>\n  </form>\n</div>\n",f}),a.registerPartial("discussions/reply_form",c["discussions/_reply_form"]),c["discussions/_reply_form"]}),define("jst/discussions/entry_with_replies",["compiled/handlebars_helpers","jst/discussions/_deleted_entry","jst/discussions/_entry_content","jst/discussions/_reply_form"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["discussions/entry_with_replies"]=b(function(a,b,c,d,e){function p(a,b){return"deleted-discussion-entry"}function q(a,b){return"can-reply"}function r(a,b){var e="",f;e+="\n      ",f=a,f=k.invokePartial(d["discussions/deleted_entry"],"discussions/deleted_entry",f,c,d);if(f||f===0)e+=f;return e+="\n    ",e}function s(a,b){var e="",f;e+="\n      ",f=a,f=k.invokePartial(d["discussions/entry_content"],"discussions/entry_content",f,c,d);if(f||f===0)e+=f;return e+="\n    ",e}function t(a,b){var e="",f;e+="\n    ",f=a,f=k.invokePartial(d["discussions/reply_form"],"discussions/reply_form",f,c,d);if(f||f===0)e+=f;return e+="\n  ",e}function u(a,b){var e="",f;e+='\n  <div class="bottom-reply-with-box">\n    ',f=a,f=k.invokePartial(d["discussions/reply_form"],"discussions/reply_form",f,c,d);if(f||f===0)e+=f;return e+="\n  </div>\n",e}c=c||a.helpers,d=d||a.partials;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<article class="discussion_entry can_be_marked_as_read ',i=c.read_state,g=i||b.read_state,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"read_state",{hash:{}})),f+=o(g)+"-onload ",i=c.read_state,g=i||b.read_state,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"read_state",{hash:{}})),f+=o(g)+" ",i=c.deleted,g=i||b.deleted,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+=" ",i=c.canReply,g=i||b.canReply,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='"\n         data-mark-read-url="',i=c.mark_read_url,g=i||b.mark_read_url,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"mark_read_url",{hash:{}})),f+=o(g)+'">\n  <a href="#"\n     class="discussion-read-state-btn"\n     role="button"\n     title=""\n     data-tooltip=\'{ "position": "top", "collision": "none" }\'\n     data-event="toggleRead">\n    <div class="discussion-read-state tooltip data-tooltip"></div>\n  </a>\n  <div class="entry_content" data-should-position>\n    ',i=c.deleted,g=i||b.deleted,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.program(7,s,e),g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  </div>\n  ",i=c.allowsThreadedReplies,g=i||b.allowsThreadedReplies,h=c["if"],j=k.program(9,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n</article>\n<div class="replies hide-if-collapsed"></div>\n',i=c.allowsSideComments,g=i||b.allowsSideComments,h=c["if"],j=k.program(11,u,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n\n\n",f}),c["discussions/entry_with_replies"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/DiscussionTopic/EntryView",["underscore","i18n!discussions","compiled/discussions/MarkAsReadWatcher","compiled/arr/walk","Backbone","compiled/collections/EntryCollection","jst/discussions/_entry_content","jst/discussions/_deleted_entry","jst/discussions/entry_with_replies","jst/discussions/entryStats","compiled/discussions/Reply","compiled/discussions/EntryEditor","str/htmlEscape","vendor/jquery.ba-tinypubsub","compiled/str/convertApiUserContent","jst/_avatar","jst/discussions/_reply_form"],function(b,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s,t;return s=p.publish,r=function(g){function i(){return this.renderTree=a(this.renderTree,this),this.toggleDeleted=a(this.toggleDeleted,this),this.toggleReadState=a(this.toggleReadState,this),t=i.__super__.constructor.apply(this,arguments),t}return c(i,g),i.instances={},i.collapseRootEntries=function(){return b.each(this.instances,function(a){if(!a.model.get("parent"))return a.collapse()})},i.expandRootEntries=function(){return b.each(this.instances,function(a){if(!a.model.get("parent"))return a.expand()})},i.setAllReadState=function(a){return b.each(this.instances,function(b){return b.model.set("read_state",a)})},i.prototype.els={".discussion_entry:first":"$entryContent",".replies:first":"$replies",".headerBadges:first":"$headerBadges",".discussion-read-state-btn:first":"$readStateToggle"},i.prototype.events={"click .loadDescendants":"loadDescendants","click [data-event]":"handleDeclarativeEvent"},i.prototype.defaults={treeView:null,descendants:2,children:5,showMoreDescendants:2},i.prototype.template=k,i.prototype.tagName="li",i.prototype.className="entry",i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.constructor.instances[this.cid]=this,this.$el.attr("id","entry-"+this.model.get("id")),this.model.on("change:deleted",this.toggleDeleted),this.model.on("change:read_state",this.toggleReadState),this.model.on("change:editor",this.render),this.model.on("change:editor",function(a){return a.trigger("edited")})},i.prototype.toggleRead=function(a){return a.preventDefault(),this.model.get("read_state")==="read"?this.model.markAsUnread():this.model.markAsRead(),i.trigger("readStateChanged",this.model,this)},i.prototype.handleDeclarativeEvent=function(a){var b,c;b=$(a.currentTarget),c=b.data("event");if(this.bypass(a))return;return a.stopPropagation(),a.preventDefault(),this[c](a,b)},i.prototype.bypass=function(a){var b,c,d;return c=$(a.target),c.data("bypass")!=null?!0:(b=$(a.target).closest(".admin-links").length,d=$(a.target).data("event"),b&&!d?!0:!1)},i.prototype.toJSON=function(){var a;return a=this.model.attributes,a.edited_at=$.parseFromISO(a.updated_at).datetime_formatted,a.editor?(a.editor_name=a.editor.display_name,a.editor_href='href="'+a.editor.html_url+'"'):(a.editor_name=d.t("unknown","Unknown"),a.editor_href=""),a},i.prototype.toggleReadState=function(a,b){return this.setToggleTooltip(),this.$entryContent.toggleClass("unread",b==="unread"),this.$entryContent.toggleClass("read",b==="read")},i.prototype.toggleCollapsed=function(a,b){return this.addedCountsToHeader||this.addCountsToHeader(),this.$el.toggleClass("collapsed")},i.prototype.expand=function(){return this.$el.removeClass("collapsed")},i.prototype.collapse=function(){return this.addedCountsToHeader||this.addCountsToHeader(),this.$el.addClass("collapsed")},i.prototype.addCountsToHeader=function(){var a,b;return b=this.countPosterity(),a="<div class='new-and-total-badge'>\n  <span class=\"new-items\">"+b.unread+'</span>\n  <span class="total-items">'+b.total+"</span>\n</div>",this.$headerBadges.append(l({stats:b})),this.addedCountsToHeader=!0},i.prototype.toggleDeleted=function(a,b){this.$entryContent.toggleClass("deleted-discussion-entry",b);if(b)return this.model.set("updated_at",(new Date).toISOString()),this.model.set("editor",ENV.current_user)},i.prototype.setToggleTooltip=function(){var a;return a=this.model.get("read_state")==="unread"?d.t("mark_as_read","Mark as Read"):d.t("mark_as_unread","Mark as Unread"),this.$readStateToggle.attr("title",a)},i.prototype.afterRender=function(){var a;return i.__super__.afterRender.apply(this,arguments),this.options.collapsed&&this.collapse(),this.setToggleTooltip(),this.model.get("read_state")==="unread"&&!this.model.get("forced_read_state")&&!ENV.DISCUSSION.MANUAL_MARK_AS_READ&&((a=this.readMarker)==null&&(this.readMarker=new e(this)),e.checkForVisibleEntries()),s("userContent/change")},i.prototype.filter=i.prototype.afterRender,i.prototype.renderTree=function(a){var b,c,d,e,f;a==null&&(a={});if(this.treeView!=null)return;return f=this.model.get("replies"),d=(a.descendants||this.options.descendants)-1,b=a.children||this.options.children,c=new h(f,{perPage:b}),e=c.getPageAsCollection(0),this.treeView=new this.options.treeView({el:this.$replies[0],descendants:d,collection:e,threaded:this.options.threaded,showMoreDescendants:this.options.showMoreDescendants}),this.treeView.render()},i.prototype.renderDescendantsLink=function(){var a;return a=this.countPosterity(),this.descendantsLink=$("<div/>"),this.descendantsLink.html(l({stats:a,showMore:!0})),this.descendantsLink.addClass("showMore loadDescendants"),this.$replies.append(this.descendantsLink)},i.prototype.countPosterity=function(){var a;return a={unread:0,total:0},this.model.attributes.replies==null?a:(f(this.model.attributes.replies,"replies",function(b){return b.read_state==="unread"&&a.unread++,a.total++}),a)},i.prototype.loadDescendants=function(a){return a.stopPropagation(),a.preventDefault(),this.renderTree({children:this.options.children,descendants:this.options.showMoreDescendants})},i.prototype.remove=function(){var a;if(confirm(d.t("are_your_sure_delete","Are you sure you want to delete this entry?")))return this.model.set("deleted",!0),this.model.destroy(),a=j(this.toJSON()),this.$(".entry_content:first").html(a)},i.prototype.edit=function(){var a;(a=this.editor)==null&&(this.editor=new n(this));if(!this.editor.editing)return this.editor.edit()},i.prototype.addReply=function(a,b){var c,d=this;return(c=this.reply)==null&&(this.reply=new m(this,{focus:!0})),this.model.set("notification",""),this.reply.edit(),this.reply.on("save",function(a){return d.renderTree(),d.treeView.collection.add(a),d.treeView.collection.fullCollection.add(a),d.trigger("addReply"),i.trigger("addReply",a)})},i.prototype.addReplyAttachment=function(a,b){return a.preventDefault(),this.reply.addAttachment(b)},i.prototype.removeReplyAttachment=function(a,b){return a.preventDefault(),this.reply.removeAttachment(b)},i.prototype.format=function(a,b){return a==="message"?(b=q(b),this.$el.find(".message").removeClass("enhanced"),s("userContent/change"),b):a==="notification"?b:o(b)},i}(g.View),b.extend(r,g.Events)})}.call(this),define("jst/discussions/noResults",["compiled/handlebars_helpers","i18n!discussions.no_results"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["discussions/noResults"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+="<p>\n  ",g="Your search did not match any entries.",h="your_search_did_not_match_any_entries",i={},j="discussions.no_results",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="\n</p>\n<p>\n",g="Suggestions:",h="suggestions",i={},j="discussions.no_results",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="\n<ul>\n  <li>",g="Make sure all search terms are spelled correctly.",h="make_sure_all_search_terms_are_spelled_correctly",i={},j="discussions.no_results",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="</li>\n  <li>",g="Try different, more general, or fewer keywords.",h="try_different_more_general_or_fewer_keywords",i={},j="discussions.no_results",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="</li>\n  <li>",g='Try disabling the "Unread" filter.',h="try_disabling_the_unread_filter",i={},j="discussions.no_results",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</li>\n</ul>\n",f}),c["discussions/noResults"]}),define("jst/discussions/results_entry",["compiled/handlebars_helpers","i18n!discussions.results_entry","jst/_avatar"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["discussions/results_entry"]=b(function(a,b,c,d,e){function r(a,b){var d="",e;return d+='href="',k=c.author,e=k||a.author,e=e===null||e===undefined||e===!1?e:e.html_url,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"author.html_url",{hash:{}})),d+=q(e)+'" data-bypass',d}function s(a,b){return"unknown"}function t(a,b){var d,e;return k=c.author,d=k||a.author,d=d===null||d===undefined||d===!1?d:d.url,e=c["if"],l=m.program(6,u,b),l.hash={},l.fn=l,l.inverse=m.noop,d=e.call(a,d,l),d||d===0?d:""}function u(a,b){var d="",e;return d+=' href="',k=c.author,e=k||a.author,e=e===null||e===undefined||e===!1?e:e.url,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"author.url",{hash:{}})),d+=q(e)+'" ',d}function v(a,b){var d;return k=c.author,d=k||a.author,d=d===null||d===undefined||d===!1?d:d.display_name,typeof d===n?d=d.call(a,{hash:{}}):d===p&&(d=o.call(a,"author.display_name",{hash:{}})),q(d)}function w(a,b){var d,e,f,g;return d="Unknown Author",e="unknown_author",f={},g="discussions.results_entry",f.scope=g,k=c.t,g=k||a.t,l={},l.hash=f,typeof g===n?d=g.call(a,e,d,l):g===p?d=o.call(a,"t",e,d,l):d=g,d||d===0?d:""}function x(a,b){var d="",e,f;d+='\n        <div class="discussion-fyi">This comment was edited by <a ',k=c.editor,e=k||a.editor,e=e===null||e===undefined||e===!1?e:e.url,f=c["if"],l=m.program(13,y,b),l.hash={},l.fn=l,l.inverse=m.noop,e=f.call(a,e,l);if(e||e===0)d+=e;return d+=">",k=c.editor,e=k||a.editor,e=e===null||e===undefined||e===!1?e:e.display_name,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"editor.display_name",{hash:{}})),d+=q(e)+"</a></div>\n      ",d}function y(a,b){var d="",e;return d+=' href="',k=c.editor,e=k||a.editor,e=e===null||e===undefined||e===!1?e:e.url,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"editor.url",{hash:{}})),d+=q(e)+'" ',d}function z(a,b){var d="",e,f;d+='\n        <div class="comment_attachments">\n          ',k=c.attachments,e=k||a.attachments,f=c.each,l=m.program(16,A,b),l.hash={},l.fn=l,l.inverse=m.noop,e=f.call(a,e,l);if(e||e===0)d+=e;return d+="\n        </div>\n      ",d}function A(a,b){var d="",e,f;return d+='\n            <div><a href="',k=c.url,e=k||a.url,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"url",{hash:{}})),d+=q(e)+'" class="',k=c["content-type"],e=k||a["content-type"],k=c.mimeClass,f=k||a.mimeClass,typeof f===n?e=f.call(a,e,{hash:{}}):f===p?e=o.call(a,"mimeClass",e,{hash:{}}):e=f,d+=q(e)+'" title="',k=c.filename,e=k||a.filename,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"filename",{hash:{}})),d+=q(e)+'">',k=c.display_name,e=k||a.display_name,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"display_name",{hash:{}})),d+=q(e)+"</a></div>\n          ",d}c=c||a.helpers,d=d||a.partials;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<article class="discussion_entry">\n  <a href="#"\n     class="discussion-read-state-btn"\n     role="button"\n     title=""\n     data-tooltip=\'{ "position": "top", "collision": "none" }\'\n     data-event="toggleRead">\n    <div class="discussion-read-state tooltip data-tooltip"></div>\n  </a>\n  <div class="entry_content">\n    <header class="entry-header discussion-section">\n      ',k=c.author,g=k||b.author,g=m.invokePartial(d.avatar,"avatar",g,c,d);if(g||g===0)f+=g;f+='\n      <div class="discussion-header-content right-of-avatar">\n        <div class="discussion-header-right">\n          <div class="discussion-pubdate hide-if-collapsed">',k=c.updated_at,g=k||b.updated_at,h={},i=!0,h.pubdate=i,k=c.friendlyDatetime,i=k||b.friendlyDatetime,l={},l.hash=h,typeof i===n?g=i.call(b,g,l):i===p?g=o.call(b,"friendlyDatetime",g,l):g=i,f+=q(g)+'</div>\n        </div>\n        <div class="discussion-title">\n          <a ',k=c.author,g=k||b.author,g=g===null||g===undefined||g===!1?g:g.html_url,h=c["if"],l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+=' class="author ',k=c.author,g=k||b.author,g=g===null||g===undefined||g===!1?g:g.id,h=c.unless,l=m.program(3,s,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='" title="',g="Author's name",h="authors_name",i={},j="discussions.results_entry",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='" ',k=c.author,g=k||b.author,h=c["if"],l=m.program(5,t,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+=' class="author">',k=c.author,g=k||b.author,h=c["if"],l=m.program(8,v,e),l.hash={},l.fn=l,l.inverse=m.program(10,w,e),g=h.call(b,g,l);if(g||g===0)f+=g;f+='</a>\n        </div>\n      </div>\n    </header>\n    <div class="discussion-section message_wrapper">\n      <div class="message user_content">',k=c.message,g=k||b.message,k=c.convertApiUserContent,h=k||b.convertApiUserContent,typeof h===n?g=h.call(b,g,{hash:{}}):h===p?g=o.call(b,"convertApiUserContent",g,{hash:{}}):g=h,f+=q(g)+"</div>\n      ",k=c.editor,g=k||b.editor,h=c["if"],l=m.program(12,x,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n      ",k=c.attachments,g=k||b.attachments,h=c["if"],l=m.program(15,z,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n    </div>\n    <div class="entry-controls">\n      <a href="#entry-',k=c.id,g=k||b.id,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"id",{hash:{}})),f+=q(g)+'" class="viewInDiscussion">',g="View in discussion",h="view_in_discussion",i={},j="discussions.results_entry",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</a>\n    </div>\n  </div>\n</article>\n\n\n\n",f}),c["discussions/results_entry"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/DiscussionTopic/FilterEntryView",["Backbone","i18n!discussions","compiled/views/DiscussionTopic/EntryView","jst/discussions/results_entry"],function(b,d,e,f){var g,h,i;return h=b.View,g=function(b){function e(){return this.updateReadState=a(this.updateReadState,this),i=e.__super__.constructor.apply(this,arguments),i}return c(e,b),e.prototype.els={".discussion_entry:first":"$entryContent",".discussion-read-state-btn:first":"$readStateToggle"},e.prototype.events={click:"click","click .discussion-read-state-btn":"toggleRead"},e.prototype.tagName="li",e.prototype.className="entry",e.prototype.template=f,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.model.on("change:read_state",this.updateReadState)},e.prototype.toJSON=function(){return this.model.attributes},e.prototype.click=function(){return this.trigger("click",this)},e.prototype.afterRender=function(){return e.__super__.afterRender.apply(this,arguments),this.updateReadState()},e.prototype.toggleRead=function(a){return a.stopPropagation(),a.preventDefault(),this.model.get("read_state")==="read"?this.model.markAsUnread():this.model.markAsRead()},e.prototype.updateReadState=function(){return this.updateTooltip(),this.$entryContent.toggleClass("unread",this.model.get("read_state")==="unread"),this.$entryContent.toggleClass("read",this.model.get("read_state")==="read")},e.prototype.updateTooltip=function(){var a;return a=this.model.get("read_state")==="unread"?d.t("mark_as_read","Mark as Read"):d.t("mark_as_unread","Mark as Unread"),this.$readStateToggle.attr("title",a)},e}(h)})}.call(this),define("jst/discussions/EntryCollectionView",["compiled/handlebars_helpers","i18n!discussions.entry_collection_view"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["discussions/EntryCollectionView"]=b(function(a,b,c,d,e){function o(a,b){var d="",e,f,g,h;d+='\n  <span class="add_root_reply"><a href="*" class="btn btn-primary btn-small icon-arrow-up">',e="Add Reply to Topic",f="add_reply_to_topic",g={},h="discussions.entry_collection_view",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</a></span>\n",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0;f+='<ul class="discussion-entries"></ul>\n\n',i=c.showReplyButton,g=i||b.showReplyButton,h=c["if"],j=k.program(1,o,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n\n",f}),c["discussions/EntryCollectionView"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/DiscussionTopic/EntryCollectionView",["i18n!discussions","compiled/arr/walk","Backbone","jst/discussions/EntryCollectionView","jst/discussions/entryStats","compiled/views/DiscussionTopic/EntryView"],function(b,d,e,f,g,h){var i,j,k;return j=e.View,i=function(e){function i(){return this.add=a(this.add,this),this.addAll=a(this.addAll,this),k=i.__super__.constructor.apply(this,arguments),k}return c(i,e),i.prototype.defaults={descendants:2,showMoreDescendants:2,showReplyButton:!1,displayShowMore:!0,threaded:!1,root:!1},i.prototype.events={"click .loadNext":"loadNextFromEvent"},i.prototype.template=f,i.prototype.els={".discussion-entries":"list"},i.prototype.attach=function(){return this.collection.on("reset",this.addAll),this.collection.on("add",this.add)},i.prototype.toJSON=function(){return this.options},i.prototype.addAll=function(){return this.teardown(),this.collection.each(this.add)},i.prototype.add=function(a){var b;return b=new h({model:a,treeView:this.constructor,descendants:this.options.descendants,children:this.collection.options.perPage,showMoreDescendants:this.options.showMoreDescendants,threaded:this.options.threaded,collapsed:this.options.collapsed}),b.render(),a.on("change:editor",this.nestEntries),a.get("new")?this.addNewView(b):(this.options.descendants?b.renderTree():a.hasChildren()&&b.renderDescendantsLink(),!this.options.threaded&&!this.options.root?this.list.prepend(b.el):this.list.append(b.el),this.nestEntries())},i.prototype.nestEntries=function(){return $(".entry_content[data-should-position]").each(function(){var a,b;return a=$(this),b=(a.parents("li.entry").length-1)*30,a.css("padding-left",b).removeAttr("data-should-position")})},i.prototype.addNewView=function(a){var b=this;a.model.set("new",!1),this.options.threaded?this.list.prepend(a.el):this.list.append(a.el),this.nestEntries();if(!this.options.root)return a.$el.hide(),setTimeout(function(){return a.$el.fadeIn()},500)},i.prototype.teardown=function(){return this.list.empty()},i.prototype.afterRender=function(){return i.__super__.afterRender.apply(this,arguments),this.addAll(),this.renderNextLink()},i.prototype.renderNextLink=function(){var a,c,d,e;(e=this.nextLink)!=null&&e.remove();if(!(this.options.displayShowMore&&this.unShownChildren()>0))return;return d=this.getUnshownStats(),this.nextLink=$("<div/>"),c=!0,this.options.threaded||(a=b.t("show_all_n_replies",{one:"Show one reply",other:"Show all %{count} replies"},{count:d.total+this.collection.options.perPage})),this.nextLink.html(g({stats:d,moreText:a,showMore:!0})),this.nextLink.addClass("showMore loadNext"),this.options.threaded?this.nextLink.insertAfter(this.list):this.nextLink.insertBefore(this.list)},i.prototype.getUnshownStats=function(){var a,b,c,e,f;return b=this.collection.length,a=this.collection.fullCollection.length,f=this.collection.fullCollection.toJSON().slice(b,a),c=0,e=0,d(f,"replies",function(a){c++;if(a.read_state==="unread")return e++}),{total:c,unread:e}},i.prototype.unShownChildren=function(){return this.collection.fullCollection.length-this.collection.length},i.prototype.loadNextFromEvent=function(a){return a.stopPropagation(),a.preventDefault(),this.loadNext()},i.prototype.loadNext=function(){return this.options.threaded?this.collection.add(this.collection.fullCollection.getPage("next")):this.collection.reset(this.collection.fullCollection.toArray()),this.renderNextLink()},i.prototype.filter=i.prototype.afterRender,i}(j)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/DiscussionTopic/DiscussionFilterResultsView",["jst/discussions/noResults","underscore","compiled/views/DiscussionTopic/FilterEntryView","compiled/views/DiscussionTopic/EntryCollectionView","compiled/collections/EntryCollection","compiled/regexp/rEscape"],function(b,d,e,f,g,h){var i,j;return i=function(i){function k(){return this.queryFilter=a(this.queryFilter,this),this.unreadFilter=a(this.unreadFilter,this),this.renderOrTeardownResults=a(this.renderOrTeardownResults,this),this.render=a(this.render,this),this.clearModel=a(this.clearModel,this),this.add=a(this.add,this),this.resetCollection=a(this.resetCollection,this),j=k.__super__.constructor.apply(this,arguments),j}return c(k,i),k.prototype.defaults=d.extend({},f.prototype.defaults,{descendants:0,displayShowMore:!0,threaded:!0}),k.prototype.initialize=function(){return k.__super__.initialize.apply(this,arguments),this.allData=this.options.allData},k.prototype.attach=function(){return this.model.on("change",this.renderOrTeardownResults)},k.prototype.setAllReadState=function(a){if(this.collection!=null)return this.collection.fullCollection.each(function(b){return b.set("read_state",a)})},k.prototype.resetCollection=function(a){var b,c=this;return b=new g(a,{perPage:10}),this.collection=b.getPageAsCollection(0),this.collection.on("add",this.add),this.render(),this.collection.on("change:read_state",function(a,b){var d;c.trigger("readStateChanged",a.id,b),d=$("#entry-"+a.id);if(d.length){a=d.data("view").model;if(a)return a.set("read_state",b)}})},k.prototype.add=function(a){var b,c=this;return b=new e({model:a}),b.render(),b.on("click",function(){return c.clearModel(),setTimeout(function(){return c.trigger("clickEntry",b.model)},1)}),this.list.append(b.el)},k.prototype.toggleRead=function(a){return a.preventDefault(),this.model.get("read_state")==="read"?this.model.markAsUnread():this.model.markAsRead()},k.prototype.clearModel=function(){return this.model.reset()},k.prototype.render=function(){return this.collection!=null&&k.__super__.render.apply(this,arguments),this.trigger("render"),this.$el.removeClass("hidden")},k.prototype.renderOrTeardownResults=function(){var a,b,c,d,e,f,g;if(this.model.hasFilter()){e=function(){var b,c;b=this.allData.flattened,c=[];for(d in b)a=b[d],c.push(a);return c}.call(this),g=this.model.toJSON();for(b in g)f=g[b],c=this[""+b+"Filter"],c&&(e=c(f,e));return e.length?this.resetCollection(e):this.renderNoResults()}if(!this.model.hasFilter())return this.$el.addClass("hidden"),this.trigger("hide")},k.prototype.renderNoResults=function(){return this.render(),this.$el.html(b)},k.prototype.unreadFilter=function(a,b){return a?(a=d.filter(b,function(a){return a.read_state==="unread"}),a.sort(function(a,b){return Date.parse(a.created_at)-Date.parse(b.created_at)})):b},k.prototype.queryFilter=function(a,b){var c,e;return c=function(){var b,c,d,f;d=(a!=null?a:"").trim().split(/\s+/g),f=[];for(b=0,c=d.length;b<c;b++)e=d[b],f.push(new RegExp(h(e),"i"));return f}(),c.length?d.filter(b,function(a){var b,d,e,f;b=""+a.message+"\n"+a.author.display_name+" ";for(e=0,f=c.length;e<f;e++){d=c[e];if(!d.test(b))return!1}return!0}):b},k}(f)})}.call(this),define("jst/DiscussionTopics/pageNav",["compiled/handlebars_helpers","i18n!discussion_topics.page_nav"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["DiscussionTopics/pageNav"]=b(function(a,b,c,d,e){function s(a,b){var d="",e,f,g,h;d+='\n    <li><a href="#page-1" data-pushstate title=\'',e="First",f="first_page",g={},h="discussion_topics.page_nav",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="'>&lt;&lt;</a></li>\n    ",d}function t(a,b,d){var e="",f,g,h;e+="\n      ",k=c.current,f=k||d.current,g=a,k=c.ifEqual,h=k||a.ifEqual,l=m.program(4,u,b),l.hash={},l.fn=l,l.inverse=m.program(6,v,b),k&&typeof h===n?f=h.call(a,g,f,l):f=r.call(a,h,g,f,l);if(f||f===0)e+=f;return e+="\n    ",e}function u(a,b){var d="",e,f,g,h;d+='\n        <li><span class="item" title=\'',e="Current",f="current_page",g={},h="discussion_topics.page_nav",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="'>",e=a,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"this",{hash:{}})),d+=q(e)+"</span></li>\n      ",d}function v(a,b){var c="",d;return c+='\n        <li><a class="item" href="#page-',d=a,typeof d===n?d=d.call(a,{hash:{}}):d===p&&(d=o.call(a,"this",{hash:{}})),c+=q(d)+'" data-pushstate title="',d=a,typeof d===n?d=d.call(a,{hash:{}}):d===p&&(d=o.call(a,"this",{hash:{}})),c+=q(d)+'">',d=a,typeof d===n?d=d.call(a,{hash:{}}):d===p&&(d=o.call(a,"this",{hash:{}})),c+=q(d)+"</a></li>\n      ",c}function w(a,b){var d="",e,f,g,h;d+='\n      <li><a class="item" href="#page-',k=c.lastPage,e=k||a.lastPage,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"lastPage",{hash:{}})),d+=q(e)+"\" data-pushstate title='",e="Last",f="last_page",g={},h="discussion_topics.page_nav",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="'>&gt;&gt;</a></li>\n    ",d}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression,r=c.blockHelperMissing;f+='<div class="discussion-page-nav">\n  <span class="hidden-readable">',g="Page",h="Page",i={},j="discussion_topics.page_nav",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="</span>\n  <ul>\n    ",k=c.showFirst,g=k||b.showFirst,h=c["if"],l=m.program(1,s,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n\n    ",k=c.pages,g=k||b.pages,h=c.each,l=m.programWithDepth(t,e,b),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n\n    ",k=c.lastPage,g=k||b.lastPage,h=c["if"],l=m.program(8,w,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;return f+="\n  </ul>\n</div>\n\n",f}),c["DiscussionTopics/pageNav"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/DiscussionTopic/EntriesView",["underscore","jquery","jst/DiscussionTopics/pageNav","Backbone","compiled/views/DiscussionTopic/EntryCollectionView","compiled/jquery/scrollIntoView"],function(b,d,e,f,g){var h,i;return h=function(f){function h(){return this.render=a(this.render,this),this.goToEntry=a(this.goToEntry,this),this.addEntry=a(this.addEntry,this),this.hideIfFiltering=a(this.hideIfFiltering,this),i=h.__super__.constructor.apply(this,arguments),i}return c(h,f),h.prototype.defaults={initialPage:0,descendants:2,showMoreDescendants:50,children:3},h.prototype.$window=d(window),h.prototype.initialize=function(){return this.collection.on("add",this.addEntry),this.model.on("change",this.hideIfFiltering)},h.prototype.hideIfFiltering=function(){return this.model.hasFilter()?this.$el.addClass("hidden"):this.$el.removeClass("hidden")},h.prototype.addEntry=function(a){return this.collectionView.collection.add(a)},h.prototype.goToEntry=function(a){var b,c;return typeof a!="object"?a=parseInt(a,10):(c=a,a=c.entry.id),b=d("#entry-"+a),b.length?this.scrollToEl(b):(c==null&&(c=this.collection.getEntryData(a)),this.collection.currentPage===c.page?c.levels===0?this.expandToUnrenderedEntry(c):this.descendToUnrenderedEntry(c):this.renderAndGoToEntry(c))},h.prototype.expandToUnrenderedEntry=function(a){var b,c,e;c=a.entry,b={};while(!b.length)c=c.parent,b=d("#entry-"+c.id);return e=b.data("view"),e.treeView?e.treeView.loadNext():e.renderTree(),this.goToEntry(a)},h.prototype.descendToUnrenderedEntry=function(a){var c,e,f,g,h,i,j;g=a.entry,h=g,f=-1,c={};while(!c.length)e=h,h=e.parent,f++,i=b.without(h.replies,e),i.unshift(e),h.replies=i,c=d("#entry-"+e.id);return j=c.data("view"),j.renderTree({descendants:f}),this.goToEntry(a)},h.prototype.renderAndGoToEntry=function(a){return this.render(a.page+1),this.goToEntry(a)},h.prototype.scrollToEl=function(a){var b=this;return this.$window.scrollTo(a,200,{offset:-150,onAfter:function(){var c;return setTimeout(function(){return a.addClass("highlight")},200),setTimeout(function(){return a.removeClass("highlight")},400),setTimeout(function(){return a.addClass("highlight")},600),c=function(){return a.removeClass("highlight"),b.$window.off("scroll",c),b.trigger("scrollAwayFromEntry")},setTimeout(function(){return b.$window.on("scroll",c),setTimeout(c,5e3)},10)}})},h.prototype.render=function(a){return a==null&&(a=1),this.teardown(),this.collectionView=new g({el:this.$el[0],collection:this.collection.getPageAsCollection(a-1,{perPage:this.options.children}),descendants:this.options.descendants,showMoreDescendants:this.options.showMoreDescendants,displayShowMore:!1,threaded:this.options.threaded,root:!0,collapsed:this.model.get("collapsed")}),this.collectionView.render(),this.renderPageNav(),this},h.prototype.teardown=function(){return this.$el.empty()},h.prototype.renderPageNav=function(){var a,b,c,d,f,g,h;f=this.collection.totalPages(),a=this.collection.currentPage+1;if(f<2)return;return d=3,c={current:a},c.showFirst=f>d&&a!==1,f>d&&a!==f&&(c.lastPage=f),c.pages=f<d+1?function(){h=[];for(var a=1;1<=f?a<=f:a>=f;1<=f?a++:a--)h.push(a);return h}.apply(this):c.showFirst&&c.lastPage?[a-1,a,a+1]:c.showFirst&&!c.lastPage?[a-2,a-1,a]:!c.showFirst&&c.lastPage?[a,a+1,a+2]:void 0,b=e(c),this.$el.prepend(b).append(b)},h}(f.View)})}.call(this),function(){define("compiled/util/wikiSidebarWithMultipleEditors",["wikiSidebar","tinymce.editor_box","compiled/tinymce"],function(a){return $.subscribe("editorBox/focus",function(b){return a.inited||a.init(),a.show(),a.attachToEditor(b)}),$.subscribe("editorBox/removeAll",function(){return a.hide()})})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/views/DiscussionTopic/TopicView",["i18n!discussions","jquery","Backbone","underscore","compiled/models/DiscussionTopic","compiled/views/DiscussionTopic/EntriesView","compiled/views/DiscussionTopic/EntryView","jst/discussions/_reply_form","compiled/discussions/Reply","compiled/widget/assignmentRubricDialog","compiled/util/wikiSidebarWithMultipleEditors","jquery.instructure_misc_helpers","str/htmlEscape"],function(b,d,e,f,g,h,i,j,k,l,m){var n,o;return n=function(e){function f(){return this.subscriptionStatusChanged=a(this.subscriptionStatusChanged,this),this.hideIfFiltering=a(this.hideIfFiltering,this),o=f.__super__.constructor.apply(this,arguments),o}return c(f,e),f.prototype.events={"click #discussion_topic .discussion-reply-action[data-event]":"handleEvent","click .add_root_reply":"addRootReply","click .discussion_locked_toggler":"toggleLocked","click .toggle_due_dates":"toggleDueDates","click .rte_switch_views_link":"toggleEditorMode","click .topic-subscribe-button":"subscribeTopic","click .topic-unsubscribe-button":"unsubscribeTopic"},f.prototype.els={".add_root_reply":"$addRootReply","#discussion_topic":"$topic",".due_date_wrapper":"$dueDates",".reply-textarea:first":"$textarea","#discussion-toolbar":"$discussionToolbar",".topic-subscribe-button":"$subscribeButton",".topic-unsubscribe-button":"$unsubscribeButton"},f.prototype.initialize=function(){var a=this;return this.model.set("id",ENV.DISCUSSION.TOPIC.ID),this.model.cid="main",this.model.set("canAttach",ENV.DISCUSSION.PERMISSIONS.CAN_ATTACH),this.filterModel=this.options.filterModel,this.filterModel.on("change",this.hideIfFiltering),this.topic=new g({id:ENV.DISCUSSION.TOPIC.ID}),this.topic.url=ENV.DISCUSSION.ROOT_URL.replace(/\/view/m,""),this.topic.set("subscribed",ENV.DISCUSSION.TOPIC.IS_SUBSCRIBED),i.on("addReply",function(){return a.setSubscribed(!0)})},f.prototype.hideIfFiltering=function(){return this.filterModel.hasFilter()?this.$topic.addClass("hidden"):this.$topic.removeClass("hidden")},f.prototype.afterRender=function(){return f.__super__.afterRender.apply(this,arguments),d(document.body).is(".with-right-side")&&d.scrollSidebar(),l.initTriggers(),this.$el.toggleClass("side_comment_discussion",!ENV.DISCUSSION.THREADED),this.subscriptionStatusChanged()},f.prototype.filter=f.prototype.afterRender,f.prototype.toggleLocked=function(a){var b;return b=d(a.currentTarget).data("mark-locked"),this.topic.save({locked:b}).done(function(){return window.location.reload()})},f.prototype.toggleDueDates=function(a){return a.preventDefault(),this.$dueDates.toggleClass("hidden"),d(a.currentTarget).text(this.$dueDates.hasClass("hidden")?b.t("show_due_dates","Show Due Dates"):b.t("hide_due_dates","Hide Due Dates"))},f.prototype.toggleEditorMode=function(a){return a.preventDefault(),a.stopPropagation(),this.$textarea.editorBox("toggle")},f.prototype.subscribeTopic=function(a){a.preventDefault(),this.topic.topicSubscribe(),this.subscriptionStatusChanged();if(this.$subscribeButton.is(":focus"))return this.$unsubscribeButton.focus()},f.prototype.unsubscribeTopic=function(a){a.preventDefault(),this.topic.topicUnsubscribe(),this.subscriptionStatusChanged();if(this.$unsubscribeButton.is(":focus"))return this.$subscribeButton.focus()},f.prototype.subscriptionStatusChanged=function(){var a;a=this.topic.get("subscribed"),this.$discussionToolbar.removeClass("subscribed"),this.$discussionToolbar.removeClass("unsubscribed");if(ENV.DISCUSSION.CAN_SUBSCRIBE)return a?this.$discussionToolbar.addClass("subscribed"):this.$discussionToolbar.addClass("unsubscribed")},f.prototype.addReply=function(a){var b=this;return a!=null&&a.preventDefault(),this.reply==null&&(this.reply=new k(this,{topLevel:!0,focus:!0}),this.reply.on("edit",function(){var a;return(a=b.$addRootReply)!=null?a.hide():void 0}),this.reply.on("hide",function(){var a;return(a=b.$addRootReply)!=null?a.show():void 0}),this.reply.on("save",function(a){return b.setSubscribed(!0),b.trigger("addReply",a)})),this.model.set("notification",""),this.reply.edit()},f.prototype.setSubscribed=function(a){return this.topic.set("subscribed",!0),this.subscriptionStatusChanged()},f.prototype.addReplyAttachment=i.prototype.addReplyAttachment,f.prototype.removeReplyAttachment=i.prototype.removeReplyAttachment,f.prototype.handleEvent=function(a){var b,c;return b=d(a.currentTarget),c=b.data("event"),typeof this[c]=="function"?this[c](a,b):void 0},f.prototype.render=function(){var a,b;return ENV.DISCUSSION.PERMISSIONS.CAN_REPLY&&(b=this.model.toJSON(),b.showBoxReplyLink=!0,a=j(b),this.$("#discussion_topic").append(a)),f.__super__.render.apply(this,arguments)},f.prototype.format=function(a,b){return a==="notification"?b:m(b)},f.prototype.addRootReply=function(a){var b,c;return b=this.$(a.currentTarget),c=d("#discussion_topic .discussion-reply-form"),this.addReply(a),d("html, body").animate({scrollTop:c.offset().top-100})},f}(e.View)})}.call(this),function(){require(["compiled/views/DiscussionTopic/EntryView","compiled/models/DiscussionFilterState","compiled/views/DiscussionTopic/DiscussionToolbarView","compiled/views/DiscussionTopic/DiscussionFilterResultsView","compiled/discussions/MarkAsReadWatcher","jquery","underscore","Backbone","compiled/models/Entry","compiled/models/Topic","compiled/models/SideCommentDiscussionTopic","compiled/collections/EntryCollection","compiled/views/DiscussionTopic/TopicView","compiled/views/DiscussionTopic/EntriesView","compiled/jquery/sticky"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;return r=5,q=10,y=new h.Router,this.data=ENV.DISCUSSION.THREADED?new j({root_url:ENV.DISCUSSION.ROOT_URL}):new k({root_url:ENV.DISCUSSION.ROOT_URL}),s=new l(null),u=new b,C=new m({el:"#main",model:new h.Model,filterModel:u}),t=new n({el:"#discussion_subentries",collection:s,descendants:r,children:q,threaded:ENV.DISCUSSION.THREADED,model:u}),B=new c({el:"#discussion-toolbar",model:u}),v=new d({el:"#filterResults",allData:data,model:u}),o=f(window),p=f("#discussion_subentries"),z=function(){return o.scrollTo(p,{offset:-49})},data.on("change",function(){var a;return a=data.get("entries"),s.options.per_page=a.length,s.reset(a)}),D=function(a,b){var c;c=data.flattened[a];if(c)return c.read_state=b},A=function(b){return s.setAllReadState(b),a.setAllReadState(b),v.setAllReadState(b)},t.on("scrollAwayFromEntry",function(){var a;return a=o.scrollTop(),y.navigate("",{trigger:!1,replace:!0}),o.scrollTo(a)}),a.on("readStateChanged",function(a,b){return D(a.get("id"),a.get("read_state"))}),e.on("markAsRead",function(a){return D(a.get("id"),a.get("read_state"))}),v.on("readStateChanged",function(a,b){return D(a,b)}),v.on("clickEntry",function(a){return y.navigate("entry-"+a.get("id"),!0)}),B.on("expandAll",function(){return a.expandRootEntries(),z()}),B.on("collapseAll",function(){return a.collapseRootEntries(),z()}),B.on("markAllAsRead",function(){return data.markAllAsRead(),A("read")}),B.on("markAllAsUnread",function(){return data.markAllAsUnread(),A("unread")}),v.on("render",function(){return z()}),v.on("hide",function(){return z()}),u.on("reset",function(){return a.expandRootEntries()}),y.route("entry-:id","id",t.goToEntry),y.route("page-:page","page",function(a){return t.render(a),z()}),w=function(a){data.fetch({success:function(){var b;t.render(),h.history.start({pushState:!0,root:ENV.DISCUSSION.APP_URL+"/"});if(a)return b=s.get(a.id),b&&s.remove(b),s.add(a),t.render(),y.navigate("entry-"+a.get("id"),!0)}}),C.on("addReply",function(a){return s.add(a),y.navigate("entry-"+a.get("id"),!0)});if(!ENV.DISCUSSION.MANUAL_MARK_AS_READ)return e.init()},C.render(),B.render(),ENV.DISCUSSION.INITIAL_POST_REQUIRED?(x=function(a){return w(a),C.off("addReply",x)},C.on("addReply",x)):w()})}.call(this),define("compiled/bundles/discussion",function(){})