define("translations/calendar",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{appointment_group_deletion_details:"سيؤدي حذفه إلى حذف أي مواعيد قام الطلاب بالاشتراك فيها",buttons:{cancel:"إلغاء",send_message:"إرسال",sending_message:"جارٍ الإرسال..."},calendar_title:"التقويم:",cancel_appointment:"هل تريد بالتأكيد إلغاء موعدك مع %{name}؟",confirm_appointment_group_deletion:"هل تريد بالتأكيد حذف مجموعة المواعيد هذه؟",confirm_deletion:"تأكيد الحذف",confirm_removal:"تأكيد الإزالة",confirm_unreserve:"تأكيد إزالة الحجز",do_nothing:"عدم القيام بشيء",end_before_start_error:"يجب أن يقع وقت البداية قبل وقت النهاية",ends_in_past_error:"لا يمكنك إنشاء جزء زمني لموعد ينتهي في الماضي",errors:{send_message_failed:"حدث خطأ أثناء إرسال الرسالة، الرجاء إعادة المحاولة"},event_assignment_title:"عنوان المهمة:",event_event_title:"عنوان الحدث:",event_on_this_day:"يوجد حدث في هذا اليوم",labels:{due:"موعد الاستحقاق"},messages_sent:"تم إرسال الرسالة",no_groups:"لم يتم العثور على مجموعات",no_users:"لم يتم العثور على مستخدمين",ok:"موافق",open_appointment_on_this_day:"يوجد موعد مفتوح في هذا اليوم",prompts:{delete_assignment:"هل ترغب بالتأكيد في حذف هذه المهمة؟",delete_event:"هل ترغب بالتأكيد في حذف هذا الحدث؟",delete_override:"هل أنت متأكد أنك تريد حذف تجاوز المهمة هذه؟\n",unreserve_event:"هل تريد بالتأكيد حذف الحجز الخاص بك لهذا الحدث؟"},reschedule:"إعادة الجدولة",save:"حفظ",save_and_publish:"حفظ ونشر",save_changes:"حفظ التغييرات",time_block_errors:"حدثت أخطاء في اختياراتك للمجموعة الزمنية",titles:{edit_appointment_group:"تحرير مجموعة مواعيد",edit_event:"تحرير الحدث"},today:"اليوم"}},es:{calendar:{appointment_group_deletion_details:"Al borrarlo también borrará cualquier cita que se hayan realizado los alumnos.",buttons:{cancel:"Cancelar",send_message:"Enviar",sending_message:"Enviando..."},calendar_title:"Calendario:",cancel_appointment:"¿Está seguro de que quiere cancelar su cita con %{name}?",confirm_appointment_group_deletion:"¿Está seguro de que quiere borrar este grupo de citas?",confirm_deletion:"Confirmar el borrado",confirm_removal:"Confirmar la eliminación",confirm_unreserve:"Confirme la eliminación de la reserva",do_nothing:"No hacer nada",end_before_start_error:"La hora de de inicio debe ser anterior a la hora de finalización",ends_in_past_error:"No puede crear un espacio para una cita que termina en el pasado",errors:{send_message_failed:"Ha ocurrido un error al enviar su mensaje. Inténtelo de nuevo"},event_assignment_title:"Título de la tarea:",event_event_title:"Título del evento:",event_on_this_day:"Hay un evento en este día",labels:{due:"fecha límite"},messages_sent:"Mensaje enviado",no_groups:"No se encontraron grupos",no_users:"No se encontraron usuarios",ok:"OK",open_appointment_on_this_day:"Hay una cita abierta en este día",prompts:{delete_assignment:"¿Está seguro que quiere borrar esta tarea?",delete_event:"¿Está seguro que quiere borrar este evento?",delete_override:"¿Está seguro de que desea eliminar esta omisión de asignación?",unreserve_event:"¿Está seguro de que quiere borrar su reserva para este evento?"},reschedule:"Reprogramar",save:"Guardar",save_and_publish:"Guardar y publicar",save_changes:"Guardar los Cambios",time_block_errors:"Hay errores en su selección de bloques de tiempo",titles:{edit_appointment_group:"Editar grupo de cita",edit_event:"Editar el Evento"},today:"Hoy"}},fr:{calendar:{appointment_group_deletion_details:"La suppression de cet élément entraînera la suppression de tous les rendez-vous pris par les étudiants.",buttons:{cancel:"Annuler",send_message:"Envoyer",sending_message:"Envoi en cours..."},calendar_title:"Calendrier :",cancel_appointment:"Voulez-vous vraiment annuler votre rendez-vous avec %{name} ?",confirm_appointment_group_deletion:"Voulez-vous vraiment supprimer ce groupe de rendez-vous ?",confirm_deletion:"Confirmer la suppression",confirm_removal:"Confirmer le retrait",confirm_unreserve:"Confirmer le retrait de la réservation",do_nothing:"Ne rien faire",end_before_start_error:"L’heure de début doit être antérieure à l’heure de fin.",ends_in_past_error:"Impossible de créer un créneau de rendez-vous qui se termine dans le passé",errors:{send_message_failed:"Erreur lors de l’envoi de votre message. Veuillez réessayer."},event_assignment_title:"Intitulé de la tâche :",event_event_title:"Intitulé de l’événement :",event_on_this_day:"Un événement est prévu à cette date.",labels:{due:"échéance"},messages_sent:"Messages envoyés",no_groups:"Aucun groupe trouvé",no_users:"Aucun utilisateur trouvé",ok:"OK",open_appointment_on_this_day:"Il y a un rendez-vous disponible à cette date.",prompts:{delete_assignment:"Voulez-vous vraiment supprimer cette tâche ?",delete_event:"Voulez-vous vraiment supprimer cet événement ?",delete_override:"Voulez-vous vraiment supprimer le changement apporté pour cette tâche ?",unreserve_event:"Voulez-vous vraiment supprimer votre réservation relative à cet événement ?"},reschedule:"Reprogrammer",save:"Enregistrer",save_and_publish:"Enregistrer et publier",save_changes:"Enregistrer les modifications",time_block_errors:"Il y a des erreurs dans vos sélections de plages horaires.",titles:{edit_appointment_group:"Modifier un groupe de rendez-vous",edit_event:"Modifier l’événement"},today:"Aujourd’hui"}},ja:{calendar:{appointment_group_deletion_details:"これを削除すると、受講生がサインアップしたすべての予定も削除されます。",buttons:{cancel:"キャンセル",send_message:"送信",sending_message:"送信しています..."},calendar_title:"カレンダー:",cancel_appointment:"%{name} との予定を取り消してもよろしいですか?",confirm_appointment_group_deletion:"この予定グループを削除してもよろしいですか?",confirm_deletion:"削除の確認",confirm_removal:"削除の確認",confirm_unreserve:"予約削除の確認",do_nothing:"何もしない",end_before_start_error:"開始時刻は終了時刻より前である必要があります",ends_in_past_error:"過去の日時に終了する予定スロットは作成できません",errors:{send_message_failed:"メッセージの送信中にエラーが発生しました。もう一度、試してください"},event_assignment_title:"課題タイトル:",event_event_title:"イベント タイトル:",event_on_this_day:"この日にはイベントがあります",labels:{due:"期限"},messages_sent:"送信済みメッセージ",no_groups:"グループが見つかりません",no_users:"ユーザが見つかりません",ok:"OK",open_appointment_on_this_day:"この日には予定があります",prompts:{delete_assignment:"この課題を削除してもよろしいですか?",delete_event:"このイベントを削除してもよろしいですか?",delete_override:"この課題の上書きを削除してもよろしいですか?",unreserve_event:"このイベントの予約を削除してもよろしいですか?"},reschedule:"再スケジュール",save:"保存",save_and_publish:"保存して公開",save_changes:"変更内容の保存",time_block_errors:"時間ブロックの選択にエラーがあります。",titles:{edit_appointment_group:"予定グループの編集",edit_event:"イベントの編集"},today:"本日"}},ko:{calendar:{appointment_group_deletion_details:"이를 삭제하면 학생이 등록한 약속도 삭제됩니다.",buttons:{cancel:"취소",send_message:"전송",sending_message:"전송 중..."},calendar_title:"달력:",cancel_appointment:"%{name}와(과)의 약속을 취소하시겠습니까?",confirm_appointment_group_deletion:"이 약속 그룹을 삭제하시겠습니까?",confirm_deletion:"삭제 확인",confirm_removal:"제거 확인",confirm_unreserve:"예약 제거 확인",do_nothing:"아무 것도 안 함",end_before_start_error:"시작 시각은 끝 시각 이전이어야 함",ends_in_past_error:"지난 시간에 끝나는 약속 슬롯을 만들 수 없음",errors:{send_message_failed:"메시지 전송 중 오류 발생"},event_assignment_title:"과제 제목:",event_event_title:"행사 제목:",event_on_this_day:"이 날에 행사가 있음",labels:{due:"기한"},messages_sent:"메시지 보냄",no_groups:"그룹 없음",no_users:"사용자 없음",ok:"확인",open_appointment_on_this_day:"이 날에 공개 약속이 있음",prompts:{delete_assignment:"이 과제를 삭제하시겠습니까?",delete_event:"이 행사를 삭제하시겠습니까?",delete_override:"이 과제 재정의를 삭제하시겠습니까?",unreserve_event:"이 행사에 대한 예약을 삭제하시겠습니까?"},reschedule:"일정 변경",save:"저장",save_and_publish:"저장 & 게시",save_changes:"변경 내용 저장",time_block_errors:"시간 블록 선택에 오류가 있습니다.",titles:{edit_appointment_group:"약속 그룹 편집",edit_event:"행사 편집"},today:"오늘"}},nl:{calendar:{appointment_group_deletion_details:"Door dit te verwijderen worden ook afspraken met leerlingen verwijderd.",buttons:{cancel:"Annuleren",send_message:"Versturen",sending_message:"Bezig met versturen..."},calendar_title:"Agenda:",cancel_appointment:"Weet u zeker dat u de afspraak met %{name} wilt annuleren?",confirm_appointment_group_deletion:"Weet u zeker dat u deze afspraak groep wilt verwijderen?",confirm_deletion:"Bevestig verwijderen",confirm_removal:"Bevestig verwijderen",confirm_unreserve:"Bevestig opheffing reservering",do_nothing:"Doe niets",end_before_start_error:"Starttijd moet eerder dan de eindtijd zijn",ends_in_past_error:"Het is niet mogelijk om een tijdvak te maken in het verleden",errors:{send_message_failed:"Er is een fout opgetreden met het versturen van het bericht, probeer het opnieuw"},event_assignment_title:"Naam van opdracht:",event_event_title:"Naam van gebeurtenis:",event_on_this_day:"Er is een gebeurtenis op deze dag",labels:{due:"geëindigd"},messages_sent:"Berichten verzonden",no_groups:"Geen groepen gevonden",no_users:"Geen gebruikers gevonden",ok:"OK",open_appointment_on_this_day:"Er is een open afspraak op deze dag",prompts:{delete_assignment:"Weet u zeker dat u deze afspraak wil verwijderen?",delete_event:"Weet u zeker dat u deze gebeurtenis wil verwijderen?",delete_override:"Weet je zeker dat je deze opdracht-overschrijving wil overschrijven?",unreserve_event:"Weet je zeker dat je de reservering voor deze gebeurtenis wilt verwijderen?"},reschedule:"Opnieuw plannen",save:"Opslaan",save_and_publish:"Opslaan & publiceren",save_changes:"Wijzigingen opslaan",time_block_errors:"Je tijdblokselecties bevatten fouten.",titles:{edit_appointment_group:"Wijzig afspraak groep",edit_event:"Wijzig gebeurtenis"},today:"Vandaag"}},pt:{calendar:{appointment_group_deletion_details:"Eliminar isto também irá eliminar compromissos para os quais os alunos se tenham inscrito.",buttons:{cancel:"Cancelar",send_message:"Enviar",sending_message:"Enviando..."},calendar_title:"Calendário:",cancel_appointment:"Tem a certeza de que pretende cancelar o seu compromisso com %{name}?",confirm_appointment_group_deletion:"Tem a certeza de que pretende eliminar este grupo de compromissos?",confirm_deletion:"Confirmar eliminação",confirm_removal:"Confirmar remoção",confirm_unreserve:"Confirmar remoção de reserva",do_nothing:"Não fazer nada",end_before_start_error:"A hora de início tem de ser anterior à hora de fim",ends_in_past_error:"Não pode criar uma entrada de compromisso que termine no passado",errors:{send_message_failed:"Ocorreu um erro durante o envio da mensagem, tente novamente"},event_assignment_title:"Título da tarefa:",event_event_title:"Título do evento:",event_on_this_day:"Há um evento neste dia",labels:{due:"prazo"},messages_sent:"Mensagens enviadas",no_groups:"Não foram encontrados grupos",no_users:"Não foram encontrados utilizadores",ok:"OK",open_appointment_on_this_day:"Há um compromisso aberto neste dia",prompts:{delete_assignment:"Tem certeza de que deseja excluir esta tarefa?",delete_event:"Tem certeza de que deseja excluir este evento?",delete_override:"Tem a certeza de que pretende eliminar esta substituição de tarefa?",unreserve_event:"Tem a certeza de que pretende eliminar a sua reserva para este evento?"},reschedule:"Agendar para outra altura",save:"Guardar",save_and_publish:"Guardar e Publicar",save_changes:"Guardar alterações",time_block_errors:"Existem erros nas suas escolhas de blocos de tempo.",titles:{edit_appointment_group:"Editar grupo de compromissos",edit_event:"Editar evento"},today:"Hoje"}},ru:{calendar:{appointment_group_deletion_details:"Удаление также приведет к удалению встреч, на которые подписались студенты.",buttons:{cancel:"Отменить",send_message:"Отправить",sending_message:"Отправка..."},calendar_title:"Календарь:",cancel_appointment:"Вы уверены, что хотите отменить встречу с %{name}?",confirm_appointment_group_deletion:"Вы уверены, что хотите удалить данную групповую встречу?",confirm_deletion:"Подтвердить удаление",confirm_removal:"Подтвердить удаление",confirm_unreserve:"Подтвердите удаление бронирования",do_nothing:"Ничего не делать",end_before_start_error:"Начальное время должно быть до времени окончания",ends_in_past_error:"Вы не можете создать интервал времени для встречи, который заканчивается в прошлом",errors:{send_message_failed:"Произошла ошибка при отправке сообщения. Пожалуйста, попробуйте еще раз"},event_assignment_title:"Заголовок задания:",event_event_title:"Заголовок события:",event_on_this_day:"В этот день есть событие",labels:{due:"окончание"},messages_sent:"Сообщения отправлены",no_groups:"Группы не найдены",no_users:"Не найдено пользователей",ok:"ОК",open_appointment_on_this_day:"Имеется открытая встреча в этот день",prompts:{delete_assignment:"Вы действительно хотите удалить это задание?",delete_event:"Действительно хотите удалить это событие?",delete_override:"Вы уверены, что хотите удалить это переопределенное задание?",unreserve_event:"Вы уверены, что хотите удалить ваше бронирование на это событие?"},reschedule:"Изменен график",save:"Сохранить",save_and_publish:"Сохранить & Опубликовать",save_changes:"Сохранить изменения",time_block_errors:"Имеются ошибки в вашем выборе временных блоков",titles:{edit_appointment_group:"Отредактировать групповую встречу",edit_event:"Редактировать событие"},today:"Сегодня"}},zh:{calendar:{appointment_group_deletion_details:"删除它也会删除学生已注册的任何约会。",buttons:{cancel:"取消",send_message:"发送",sending_message:"正在发送..."},calendar_title:"日历:",cancel_appointment:"是否确定要取消您和 %{name} 的约会?",confirm_appointment_group_deletion:"是否确定要删除此约会组?",confirm_deletion:"确认删除",confirm_removal:"确认移除",confirm_unreserve:"确认预订删除",do_nothing:"不执行任何操作",end_before_start_error:"开始时间必须早于结束时间",ends_in_past_error:"无法创建结束时间已过去的约会时段",errors:{send_message_failed:"发送消息时出错，请重试"},event_assignment_title:"作业标题：",event_event_title:"事件标题：",event_on_this_day:"在这一天有一个事件",labels:{due:"到期日期"},messages_sent:"消息已发送",no_groups:"未发现小组",no_users:"未发现用户",ok:"确定",open_appointment_on_this_day:"在这一天有一个开放约会",prompts:{delete_assignment:"是否确定要删除此作业?",delete_event:"是否确定要删除此事件?",delete_override:"是否要删除此作业覆盖?",unreserve_event:"是否确定要删除您对此事件的预订?"},reschedule:"重新安排",save:"保存",save_and_publish:"保存并发布",save_changes:"保存更改",time_block_errors:"在您的时间段选择方面有错误。",titles:{edit_appointment_group:"编辑约会组",edit_event:"编辑事件"},today:"今天"}}}})}),function(){define("compiled/util/hsvToRgb",[],function(){var a;return a=function(a,b,c){var d,e,f,g,h,i,j,k,l;b/=100,c/=100,g=Math.floor(a/60%6),e=a/60-g,h=c*(1-b),i=c*(1-e*b),l=c*(1-(1-e)*b),k=[];switch(g){case 0:k=[c,l,h];break;case 1:k=[i,c,h];break;case 2:k=[h,c,l];break;case 3:k=[h,i,c];break;case 4:k=[l,h,c];break;case 5:k=[c,h,i]}return j=Math.min(255,Math.round(k[0]*256)),f=Math.min(255,Math.round(k[1]*256)),d=Math.min(255,Math.round(k[2]*256)),[j,f,d]}})}.call(this),function(){define("compiled/util/registerTemplateCss",[],function(){var a,b,c,d,e,f;return b=window.document,e={},c=function(a,b){return e[a]=b,d()},c.clear=function(){return e={},d()},d=function(){var c,d,f,g,h;f=[];for(h in e)d=e[h],f.push("/* From: "+h+" */"),f.push(d);return c=f.join("\n"),g=a(),"cssText"in g?g.cssText=c:g.appendChild(b.createTextNode(c))},f=null,a=function(){var a,c;if(f){while(a=f.firstChild)f.removeChild(a);return f}return b.createStyleSheet?f=b.createStyleSheet():(c=b.head||b.getElementsByTagName("head")[0],f=b.createElement("style"),c.appendChild(f))},c})}.call(this),define("translations/calendar.calendar_app",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{calendar_app:{create_event:"إنشاء حدث جديد",links:{calendar_month:"الشهر",calendar_scheduler:"المجدول",calendar_week:"الأسبوع"},refresh:"تحديث",use_old_calendar:"التقويم القديم"}}},es:{calendar:{calendar_app:{create_event:"Crear nuevo evento",links:{calendar_month:"Mes",calendar_scheduler:"Programador",calendar_week:"Semana"},refresh:"Actualizar",use_old_calendar:"Calendario anterior"}}},fr:{calendar:{calendar_app:{create_event:"Créer un événement",links:{calendar_month:"Mois",calendar_scheduler:"Planificateur",calendar_week:"Semaine"},refresh:"Actualiser",use_old_calendar:"Ancien calendrier"}}},ja:{calendar:{calendar_app:{create_event:"新しいイベントの作成",links:{calendar_month:"月",calendar_scheduler:"スケジューラ",calendar_week:"週"},refresh:"更新",use_old_calendar:"古いカレンダーに戻る"}}},ko:{calendar:{calendar_app:{create_event:"새 행사 만들기",links:{calendar_month:"월",calendar_scheduler:"일정 관리",calendar_week:"주"},refresh:"새로 고침",use_old_calendar:"이전 달력으로 돌아가기"}}},nl:{calendar:{calendar_app:{create_event:"Maak een nieuwe gebeurtenis",links:{calendar_month:"Maand",calendar_scheduler:"Planner",calendar_week:"Week"},refresh:"Vernieuwen",use_old_calendar:"Ga terug naar de oude agenda"}}},pt:{calendar:{calendar_app:{create_event:"Criar um novo evento",links:{calendar_month:"Mês",calendar_scheduler:"Agenda",calendar_week:"Semana"},refresh:"Atualizar",use_old_calendar:"Calendário antigo"}}},ru:{calendar:{calendar_app:{create_event:"Создать новое событие",links:{calendar_month:"Месяц",calendar_scheduler:"Планировщик",calendar_week:"Неделя"},refresh:"Обновить",use_old_calendar:"Старый календарь"}}},zh:{calendar:{calendar_app:{create_event:"创建新事件",links:{calendar_month:"月",calendar_scheduler:"计划程序",calendar_week:"周"},refresh:"刷新",use_old_calendar:"返回到旧日历"}}}}})}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/util/Popover",[],function(){var b,c,d,e;return e=function(a,b){return $(this).css(a).toggleClass("carat-bottom",b.vertical==="bottom")},d=0,c=[],b=function(){function b(b,c){var d=this;this.content=c,this.position=a(this.position,this),this.outsideClickHandler=a(this.outsideClickHandler,this),this.trigger=$(b.currentTarget),this.el=$(this.content).addClass("carat-bottom").attr("role","dialog").data("popover",this).keyup(function(a){if(a.keyCode===$.ui.keyCode.ESCAPE)return d.hide()}),this.el.delegate(".popover_close","click",function(a){return a.preventDefault(),d.hide()}),this.show(b)}return b.prototype.show=function(a){var b,e,f,g,h;while(h=c.pop())h.hide();return c.push(this),g="popover-"+d++,this.trigger.attr({"aria-haspopup":!0,"aria-owns":g}),this.el.attr({id:g,"aria-hidden":!1,"aria-expanded":!0}).appendTo(document.body).show(),this.el.find(":tabbable").not(".popover_close").first().focus(1),this.position(),this.el.find(".ui-menu-carat").remove(),f=this.trigger.offset().left-this.el.offset().left,b=a.pageX-this.trigger.offset().left,e=Math.min(Math.max(20,b),this.trigger.width()-20)+f,$('<span class="ui-menu-carat"><span /></span>').css("left",e).prependTo(this.el),this.positionInterval=setInterval(this.position,200),$(window).click(this.outsideClickHandler)},b.prototype.hide=function(){var a,b,d,e;for(a=d=0,e=c.length;d<e;a=++d)b=c[a],this===b&&c.splice(a,1);return this.el.detach(),clearInterval(this.positionInterval),$(window).unbind("click",this.outsideClickHandler)},b.prototype.ignoreOutsideClickSelector=".ui-dialog",b.prototype.outsideClickHandler=function(a){if(!$(a.target).closest(this.el.add(this.trigger).add(this.ignoreOutsideClickSelector)).length)return this.hide()},b.prototype.position=function(){return this.el.position({my:"center bottom",at:"center top",of:this.trigger,offset:"0 -10px",within:"body",collision:"flipfit flipfit",using:e})},b}()})}.call(this),define("translations/calendar.event_details",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{event_details:{attendees:"الحضور",calendar:"التقويم",details:"التفاصيل",links:{"delete":"حذف",edit:"تحرير",reserve:"حجز",unreserve:"إلغاء الحجز"},location:"الموقع",message_students:"مراسلة الطلاب",slots_available:"الأجزء الزمنية المتاحة"}}},es:{calendar:{event_details:{attendees:"Participantes",calendar:"Calendario",details:"Detalles",links:{"delete":"Borrar",edit:"Editar",reserve:"Reservar",unreserve:"No reservar"},location:"Ubicación",message_students:"Enviar mensaje a alumnos",slots_available:"Espacios disponibles"}}},fr:{calendar:{event_details:{attendees:"Participants",calendar:"Calendrier",details:"Informations",links:{"delete":"Supprimer",edit:"Modifier",reserve:"Réserver",unreserve:"Annuler la réservation"},location:"Lieu",message_students:"Envoyer un message aux étudiants",slots_available:"Créneaux horaires disponibles"}}},ja:{calendar:{event_details:{attendees:"出席者",calendar:"カレンダー",details:"詳細",links:{"delete":"削除",edit:"編集",reserve:"予約",unreserve:"予約取り消し"},location:"場所",message_students:"受講生にメッセージを送る",slots_available:"使用できるスロット"}}},ko:{calendar:{event_details:{attendees:"참석자",calendar:"달력",details:"세부 정보",links:{"delete":"삭제",edit:"편집",reserve:"예약",unreserve:"예약 취소"},location:"위치",message_students:"학생에게 메시지 보내기",slots_available:"사용 가능한 슬롯"}}},nl:{calendar:{event_details:{attendees:"Deelnemers",calendar:"Agenda",details:"Details",links:{"delete":"Verwijderen",edit:"Wijzigen",reserve:"Reserveren",unreserve:"Reservering annuleren"},location:"Locatie",message_students:"Stuur bericht naar leerlingen",slots_available:"Vakken beschikbaar"}}},pt:{calendar:{event_details:{attendees:"Participantes",calendar:"Calendário",details:"Detalhes",links:{"delete":"Excluir",edit:"Editar",reserve:"Reservar",unreserve:"Cancelar reserva"},location:"Local",message_students:"Contactar alunos",slots_available:"Entradas disponíveis"}}},ru:{calendar:{event_details:{attendees:"Участники",calendar:"Календарь",details:"Сведения",links:{"delete":"Удалить",edit:"Редактировать",reserve:"Забронировать",unreserve:"Отменить бронирование"},location:"Размещение",message_students:"Отправить сообщения студентам",slots_available:"Свободные временные интервалы"}}},zh:{calendar:{event_details:{attendees:"参加者",calendar:"日历",details:"详细信息",links:{"delete":"删除",edit:"编辑",reserve:"预订",unreserve:"取消预订"},location:"位置",message_students:"向学生发送消息",slots_available:"可用时段"}}}}})}),define("translations/calendar.delete_item",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{delete_item:{deletion_reason:"سبب الحذف:"}}},es:{calendar:{delete_item:{deletion_reason:"Razón de la eliminación:"}}},fr:{calendar:{delete_item:{deletion_reason:"Motif de la suppression :"}}},ja:{calendar:{delete_item:{deletion_reason:"削除の理由:"}}},ko:{calendar:{delete_item:{deletion_reason:"삭제 이유:"}}},nl:{calendar:{delete_item:{deletion_reason:"Reden voor verwijderen:"}}},pt:{calendar:{delete_item:{deletion_reason:"Motivo da eliminação:"}}},ru:{calendar:{delete_item:{deletion_reason:"Причина удаления:"}}},zh:{calendar:{delete_item:{deletion_reason:"删除原因:"}}}}})}),define("translations/calendar.reservation_over_limit_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{reservation_over_limit_dialog:{appointment_limit_reached:"تم الوصول لنهاية الموعد",cancel_existing_reservation:"هل تريد إلغاء الحجز والتسجيل في هذا الموعد؟",cancel_some_appointments_and_try_again:"الرجاء إلغاء واحد من حجوزاتك ثم إعادة المحاولة.",would_you_like_to_cancel_that_and_sign_up_for_this:"هل ترغب في إلغاء هذا ثم التسجيل في ذاك؟",you_are_already_signed_up_for:"أنت جاهز للتسجيل في:"}}},es:{calendar:{reservation_over_limit_dialog:{appointment_limit_reached:"Límite de citas alcanzado",cancel_existing_reservation:"¿Cancelar la reserva existente y registrarse para esta?",cancel_some_appointments_and_try_again:"Cancele una de sus reservas e inténtelo de nuevo.",would_you_like_to_cancel_that_and_sign_up_for_this:"¿Le gustaría cancelar aquella y registrarse para esta?",you_are_already_signed_up_for:"Ya se ha inscrito para:"}}},fr:{calendar:{reservation_over_limit_dialog:{appointment_limit_reached:"Limite de rendez-vous atteinte",cancel_existing_reservation:"Voulez-vous annuler la réservation existante et vous inscrire à celle-ci ?",cancel_some_appointments_and_try_again:"Annulez une autre réservation et réessayez.",would_you_like_to_cancel_that_and_sign_up_for_this:"Voulez-vous annuler cette réservation ci pour pour inscrire à celle-là ?",you_are_already_signed_up_for:"Vous êtes déjà inscrit à :"}}},ja:{calendar:{reservation_over_limit_dialog:{appointment_limit_reached:"予定の上限に達しました",cancel_existing_reservation:"既存の予定を取り消して、この予定をサインアップしますか?",cancel_some_appointments_and_try_again:"他の予定を取り消してから、もう一度試してください。",would_you_like_to_cancel_that_and_sign_up_for_this:"指定した予定を取り消して、この予定をサインアップしますか?",you_are_already_signed_up_for:"既にサインアップしています:"}}},ko:{calendar:{reservation_over_limit_dialog:{appointment_limit_reached:"약속 한도에 도달함",cancel_existing_reservation:"기존 예약을 취소하고 여기에 등록하시겠습니까?",cancel_some_appointments_and_try_again:"다른 예약을 취소하고 다시 시도하시기 바랍니다.",would_you_like_to_cancel_that_and_sign_up_for_this:"취소하고 여기에 등록하시겠습니까?",you_are_already_signed_up_for:"다음을 이미 등록했음:"}}},nl:{calendar:{reservation_over_limit_dialog:{appointment_limit_reached:"Afspraaklimiet is bereikt",cancel_existing_reservation:"Annuleer bestaande reservering en schrijf in voor deze?",cancel_some_appointments_and_try_again:"Annuleer eerst één van je andere reserveringen en probeer het dan opnieuw.",would_you_like_to_cancel_that_and_sign_up_for_this:"Wilt u dat annuleren en hier voor aanmelden?",you_are_already_signed_up_for:"U bent al aangemeld voor:"}}},pt:{calendar:{reservation_over_limit_dialog:{appointment_limit_reached:"Foi atingido o limite de compromissos",cancel_existing_reservation:"Cancelar a reserva existente e inscrever-se para esta?",cancel_some_appointments_and_try_again:"Cancele uma das outras reservas e tente novamente.",would_you_like_to_cancel_that_and_sign_up_for_this:"Pretende cancelar essa e inscrever-se para esta?",you_are_already_signed_up_for:"Já está inscrito para:"}}},ru:{calendar:{reservation_over_limit_dialog:{appointment_limit_reached:"Количество участников встречи достигло предела",cancel_existing_reservation:"Отменить действующее бронирование и подписаться на другое?",cancel_some_appointments_and_try_again:"Пожалуйста, отмените одно из ваших бронирований и попробуйте снова",would_you_like_to_cancel_that_and_sign_up_for_this:"Хотите ли вы отменить и подписаться на это?",you_are_already_signed_up_for:"Вы уже подписались на:"}}},zh:{calendar:{reservation_over_limit_dialog:{appointment_limit_reached:"约会人数已达上限",cancel_existing_reservation:"取消已有预订，并报名本门课程 ?",cancel_some_appointments_and_try_again:"请您取消其他预订，并重试一次。",would_you_like_to_cancel_that_and_sign_up_for_this:"您真的要取消该项并报名本课程吗?",you_are_already_signed_up_for:"您已报名参加:"}}}}})}),define("translations/calendar.message_participants",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{message_participants:{all_groups:"كل المجموعات",all_users:"كل المستخدمين",message_groups:"مراسلة المجموعات",message_label:"الرسالة:",message_students:"مراسلة الطلاب:",registered_groups:"المجموعات التي قامت بالتسجيل بالفعل",registered_users:"المستخدمون الذين قاموا بالتسجيل بالفعل",send_message_to:"إرسال رسالة إلى...",unregistered_groups:"المجموعات التي لم تقم بالتسجيل بعد",unregistered_users:"المستخدمون الذين لم يقوموا بالتسجيل بعد"}}},es:{calendar:{message_participants:{all_groups:"Todos los grupos",all_users:"Todos los usuarios",message_groups:"Enviar mensaje a grupos",message_label:"Mensaje:",message_students:"Enviar mensaje a alumnos",registered_groups:"Grupos que ya se han inscrito",registered_users:"Usuarios que ya se han inscrito",send_message_to:"Enviar un mensaje a...",unregistered_groups:"Grupos que aún no se han inscrito",unregistered_users:"Usuarios que aún no se han inscrito"}}},fr:{calendar:{message_participants:{all_groups:"Tous les groupes",all_users:"Tous les utilisateurs",message_groups:"Envoyer un message aux groupes",message_label:"Message :",message_students:"Envoyer un message aux étudiants",registered_groups:"Groupes déjà inscrits",registered_users:"Utilisateurs déjà inscrits",send_message_to:"Envoyer un message à...",unregistered_groups:"Groupes pas encore inscrits",unregistered_users:"Utilisateurs pas encore inscrits"}}},ja:{calendar:{message_participants:{all_groups:"すべてのグループ",all_users:"すべてのユーザ",message_groups:"メッセージ グループ",message_label:"メッセージ:",message_students:"受講生にメッセージを送る",registered_groups:"既にサインアップしているグループ",registered_users:"既にサインアップしているユーザ",send_message_to:"次の宛先にメッセージを送信する...",unregistered_groups:"まだサインアップしていないグループ",unregistered_users:"まだサインアップしていないユーザ"}}},ko:{calendar:{message_participants:{all_groups:"모든 그룹",all_users:"모든 사용자",message_groups:"그룹에 메시지 보내기",message_label:"메시지:",message_students:"학생에게 메시지 보내기",registered_groups:"이미 등록한 그룹",registered_users:"이미 등록한 사용자",send_message_to:"메시지를 보낼 대상",unregistered_groups:"아직 등록하지 않은 그룹",unregistered_users:"아직 등록하지 않은 사용자"}}},nl:{calendar:{message_participants:{all_groups:"Alle groepen",all_users:"Alle gebruikers",message_groups:"Bericht groepen",message_label:"Bericht:",message_students:"Stuur bericht naar leerlingen",registered_groups:"Groepen die reeds deelnemen",registered_users:"Gebruikers die reeds deelnemen",send_message_to:"Verstuur een bericht naar...",unregistered_groups:"Groepen die nog niet deelnemen",unregistered_users:"Gebruikers die nog niet deelnemen"}}},pt:{calendar:{message_participants:{all_groups:"Todos os grupos",all_users:"Todos os utilizadores",message_groups:"Contactar grupos",message_label:"Mensagem:",message_students:"Contactar alunos",registered_groups:"Grupos que já se inscreveram",registered_users:"Utilizadores que já se inscreveram",send_message_to:"Enviar mensagem para...",unregistered_groups:"Grupos que ainda não se inscreveram",unregistered_users:"Utilizadores que ainda não se inscreveram"}}},ru:{calendar:{message_participants:{all_groups:"Все группы",all_users:"Все пользователи",message_groups:"Сообщения групп",message_label:"Сообщение:",message_students:"Отправить сообщения студентам",registered_groups:"Группы, которые уже подписались",registered_users:"Пользователи, которые уже подписались",send_message_to:"Отправить сообщение...",unregistered_groups:"Группы, которые еще не подписались",unregistered_users:"Пользователи, которые еще не подписались"}}},zh:{calendar:{message_participants:{all_groups:"所有组",all_users:"所有用户",message_groups:"向组发送消息",message_label:"消息:",message_students:"给学生发送消息",registered_groups:"已报名的小组",registered_users:"已报名的用户",send_message_to:"发送消息给...",unregistered_groups:"未报名的小组",unregistered_users:"未报名的用户"}}}}})}),function(){define("compiled/calendar/TimeBlockListManager",["jquery"],function(a){var b;return b=function(){function a(a){var b,c,d,e,f,g;this.blocks=[];if(a)for(e=0,f=a.length;e<f;e++)g=a[e],d=g[0],b=g[1],c=g[2],this.add(d,b,c)}return a.prototype.add=function(a,b,c){return this.blocks.push({start:a,end:b,locked:c})},a.prototype.consolidate=function(){var a,b,c,d,e,f;this.sort(),b=[],b.last=function(){return this[this.length-1]},f=this.blocks;for(d=0,e=f.length;d<e;d++){a=f[d];if(!b.last()){b.push(a);continue}c=b.last(),c.end.getTime()===a.start.getTime()&&!c.locked&&!a.locked?c.end=a.end:b.push(a)}return this.blocks=b},a.prototype.split=function(a){var b,c,d,e,f,g,h;this.consolidate(),e=a*60*1e3,h=this.blocks;for(f=0,g=h.length;f<g;f++){b=h[f];if(b.locked)continue;while(b.end-b.start>a*60*1e3)d=b.start,c=new Date(b.start.getTime()+e),b.start=new Date(b.start.getTime()+e),this.add(d,c)}return this.sort()},a.prototype.sort=function(){return this.blocks=this.blocks.sort(function(a,b){return a.end<=b.start?-1:1})},a.prototype["delete"]=function(a){if(a!=null&&this.blocks.length>a&&!this.blocks[a].locked)return this.blocks.splice(a,1)},a.prototype.reset=function(){return this.blocks=[]},a}()})}.call(this),define("translations/calendar.edit_calendar_event",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{buttons:{submit:"إرسال"},calendar:{edit_calendar_event:{calendar:"التقويم:",date:"التاريخ:",from:"من:",links:{more_options:"مزيد من الخيارات"},title:"العنوان:"}}},es:{buttons:{submit:"Enviar"},calendar:{edit_calendar_event:{calendar:"Calendario:",date:"Fecha:",from:"Remitente:",links:{more_options:"Más opciones"},title:"Título:"}}},fr:{buttons:{submit:"Envoyer"},calendar:{edit_calendar_event:{calendar:"Calendrier :",date:"Date :",from:"Du :",links:{more_options:"Plus d’options"},title:"Titre :"}}},ja:{buttons:{submit:"提出"},calendar:{edit_calendar_event:{calendar:"カレンダー:",date:"日付:",from:"自:",links:{more_options:"その他のオプション"},title:"タイトル:"}}},ko:{buttons:{submit:"제출"},calendar:{edit_calendar_event:{calendar:"달력:",date:"날짜:",from:"시작:",links:{more_options:"옵션 더 보기"},title:"제목:"}}},nl:{buttons:{submit:"Verstuur"},calendar:{edit_calendar_event:{calendar:"Agenda:",date:"Datum:",from:"Van:",links:{more_options:"Meer opties"},title:"Titel:"}}},pt:{buttons:{submit:"Enviar"},calendar:{edit_calendar_event:{calendar:"Calendário:",date:"Data:",from:"De:",links:{more_options:"Mais opções"},title:"Título:"}}},ru:{buttons:{submit:"Отправить"},calendar:{edit_calendar_event:{calendar:"Календарь:",date:"Дата:",from:"От:",links:{more_options:"Дополнительные опции"},title:"Название"}}},zh:{buttons:{submit:"提交"},calendar:{edit_calendar_event:{calendar:"日历:",date:"日期:",from:"从:",links:{more_options:"更多选项"},title:"标题:"}}}}})}),define("translations/calendar.edit_assignment",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{buttons:{submit:"إرسال"},calendar:{edit_assignment:{calendar:"التقويم:",due:"الاستحقاق:",group:"المجموعة:",links:{more_options:"مزيد من الخيارات"},title:"العنوان:"}}},es:{buttons:{submit:"Enviar"},calendar:{edit_assignment:{calendar:"Calendario:",due:"Vence:",group:"Grupo:",links:{more_options:"Más opciones"},title:"Título:"}}},fr:{buttons:{submit:"Envoyer"},calendar:{edit_assignment:{calendar:"Calendrier :",due:"Échéance :",group:"Groupe :",links:{more_options:"Plus d’options"},title:"Titre :"}}},ja:{buttons:{submit:"提出"},calendar:{edit_assignment:{calendar:"カレンダー:",due:"期限:",group:"グループ:",links:{more_options:"その他のオプション"},title:"タイトル:"}}},ko:{buttons:{submit:"제출"},calendar:{edit_assignment:{calendar:"달력:",due:"기한:",group:"그룹:",links:{more_options:"추가 옵션"},title:"제목:"}}},nl:{buttons:{submit:"Verstuur"},calendar:{edit_assignment:{calendar:"Agenda:",due:"Tot:",group:"Groep:",links:{more_options:"Meer opties"},title:"Titel:"}}},pt:{buttons:{submit:"Enviar"},calendar:{edit_assignment:{calendar:"Calendário:",due:"Prazo:",group:"Grupo:",links:{more_options:"Mais opções"},title:"Título:"}}},ru:{buttons:{submit:"Отправить"},calendar:{edit_assignment:{calendar:"Календарь:",due:"До:",group:"Группа:",links:{more_options:"Дополнительные опции"},title:"Название:"}}},zh:{buttons:{submit:"提交"},calendar:{edit_assignment:{calendar:"日历:",due:"到期日期:",group:"组:",links:{more_options:"更多选项"},title:"标题:"}}}}})}),define("translations/calendar.edit_assignment_override",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{buttons:{submit:"إرسال"},calendar:{edit_assignment_override:{calendar:"التقويم:",due:"الاستحقاق:",links:{more_options:"مزيد من الخيارات"}}}},es:{buttons:{submit:"Enviar"},calendar:{edit_assignment_override:{calendar:"Calendario:",due:"Vence:",links:{more_options:"Más opciones"}}}},fr:{buttons:{submit:"Envoyer"},calendar:{edit_assignment_override:{calendar:"Calendrier :",due:"Échéance :",links:{more_options:"Plus d’options"}}}},ja:{buttons:{submit:"提出"},calendar:{edit_assignment_override:{calendar:"カレンダー:",due:"期限:",links:{more_options:"その他のオプション"}}}},ko:{buttons:{submit:"제출"},calendar:{edit_assignment_override:{calendar:"달력:",due:"기한:",links:{more_options:"추가 옵션"}}}},nl:{buttons:{submit:"Verstuur"},calendar:{edit_assignment_override:{calendar:"Agenda:",due:"Tot:",links:{more_options:"Meer opties"}}}},pt:{buttons:{submit:"Enviar"},calendar:{edit_assignment_override:{calendar:"Calendário:",due:"Prazo:",links:{more_options:"Mais opções"}}}},ru:{buttons:{submit:"Отправить"},calendar:{edit_assignment_override:{calendar:"Календарь:",due:"До:",links:{more_options:"Больше опций"}}}},zh:{buttons:{submit:"提交"},calendar:{edit_assignment_override:{calendar:"日历:",due:"到期日期:",links:{more_options:"更多选项"}}}}}})}),define("translations/appt_calendar_event_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{appt_calendar_event_dialog:{invalid_participants:"يجب عليك السماح لمستخدم واحد على الأقل بالحضور",title:"تحرير %{name}",update:"تحديث"}},es:{appt_calendar_event_dialog:{invalid_participants:"Debe permitir que acuda al menos un usuario",title:"Editar %{name}",update:"Actualizar"}},fr:{appt_calendar_event_dialog:{invalid_participants:"Vous devez autoriser au moins un utilisateur à participer.",title:"Editer %{name}",update:"Mettre à jour"}},ja:{appt_calendar_event_dialog:{invalid_participants:"少なくとも 1 人のユーザの参加を許可する必要があります",title:"%{name} の編集",update:"更新"}},ko:{appt_calendar_event_dialog:{invalid_participants:"한 명 이상의 참가자를 허용해야 함",title:"%{name} 편집",update:"업데이트"}},nl:{appt_calendar_event_dialog:{invalid_participants:"U moet minimaal één gebruiker toestaan om deel te nemen.",title:"Wijzig %{name}",update:"Wijzig"}},pt:{appt_calendar_event_dialog:{invalid_participants:"Tem de permitir a participação de pelo menos um utilizador",title:"Editar %{name}",update:"Atualizar"}},ru:{appt_calendar_event_dialog:{invalid_participants:"Вы должны допустить хотя бы одного пользователя для участия",title:"Редактировать %{name}",update:"Обновить"}},zh:{appt_calendar_event_dialog:{invalid_participants:"您至少要允许 1 名用户参加",title:"编辑 %{name}",update:"更新"}}}})}),define("translations/calendar.edit_appt_calendar_event",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{edit_appt_calendar_event:{description:"الوصف:",slot_limit:"تقييد هذا الجزء الزمني إلى",users:"مستخدمًا."}}},es:{calendar:{edit_appt_calendar_event:{description:"Descripción:",slot_limit:"Limitar este espacio a",users:"usuarios."}}},fr:{calendar:{edit_appt_calendar_event:{description:"Description :",slot_limit:"Limiter ce créneau à",users:"utilisateurs."}}},ja:{calendar:{edit_appt_calendar_event:{description:"説明:",slot_limit:"このスロットを次のものに制限する",users:"ユーザ。"}}},ko:{calendar:{edit_appt_calendar_event:{description:"설명:",slot_limit:"이 슬롯을 다음으로 제한",users:"사용자입니다."}}},nl:{calendar:{edit_appt_calendar_event:{description:"Omschrijving:",slot_limit:"Beperk dit tijdvak tot",users:"leerlingen."}}},pt:{calendar:{edit_appt_calendar_event:{description:"Descrição:",slot_limit:"Limitar esta entrada a",users:"utilizadores."}}},ru:{calendar:{edit_appt_calendar_event:{description:"Описание:",slot_limit:"Ограничить этот интервал",users:"пользователи."}}},zh:{calendar:{edit_appt_calendar_event:{description:"说明:",slot_limit:"将此时段限制为",users:"用户。"}}}}})}),define("translations/EditAppointmentGroupDetails",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{EditAppointmentGroupDetails:{affect_reservations:"كيف سيؤثر هذا على الحجوزات؟",and_n_contexts:"وعدد %{n} من الآخرين",and_n_sectionCodes:"وعدد %{n} من الآخرين",bad_max_appts:"يجب السماح بموعد واحد على الأقل لكل مشترك",bad_per_slot:"يجب عليك السماح بموعد واحد على الأقل لكل جزء زمني",context_required:"تحتاج إلى تحديد تقويم",select_calendars:"تحديد تقويمات"}},es:{EditAppointmentGroupDetails:{affect_reservations:"¿Cómo afectará esto a las reservas?",and_n_contexts:"y %{n} otros",and_n_sectionCodes:"y %{n} otros",bad_max_appts:"Debe permitir al menos una cita por participante",bad_per_slot:"Debe permitir al menos un espacio para cita por intervalo de tiempo",context_required:"Es obligatorio seleccionar un calendario",select_calendars:"Seleccionar Calendarios"}},fr:{EditAppointmentGroupDetails:{affect_reservations:"En quoi cela affectera-t-il les réservations ?",and_n_contexts:"et %{n} autres",and_n_sectionCodes:"et %{n} autres",bad_max_appts:"Vous devez autoriser au moins un rendez-vous par participant.",bad_per_slot:"Vous devez autoriser au moins un rendez-vous par créneau horaire.",context_required:"Vous devez choisir un calendrier.",select_calendars:"Choisir des calendriers"}},ja:{EditAppointmentGroupDetails:{affect_reservations:"このことは予約にどのように影響しますか?",and_n_contexts:"およびその他 %{n} 件",and_n_sectionCodes:"およびその他 %{n} 件",bad_max_appts:"参加者ごとに少なくとも 1 つの予定を許可する必要があります",bad_per_slot:"時間スロットごとに少なくとも 1 つの予定を許可する必要があります",context_required:"カレンダーを選択する必要があります",select_calendars:"カレンダーの選択"}},ko:{EditAppointmentGroupDetails:{affect_reservations:"이것이 예약에 미치는 영향은 무엇입니까?",and_n_contexts:"외 %{n}명",and_n_sectionCodes:"외 %{n}명",bad_max_appts:"참여자 당 하나 이상의 약속을 허용해야 합니다.",bad_per_slot:"시간 슬롯 당 적어도 하나의 약속을 허용해야 함",context_required:"달력을 선택해야 합니다.",select_calendars:"달력 선택"}},nl:{EditAppointmentGroupDetails:{affect_reservations:"Wat is de invloed op reserveringen?",and_n_contexts:"en %{n} anderen",and_n_sectionCodes:"en %{n} anderen",bad_max_appts:"Je moet minimaal één afspraak per deelnemer toestaan",bad_per_slot:"Je moet minstens één afspraak per tijdvak toestaan.",context_required:"Selecteer een agenda",select_calendars:"Selecteer agenda's"}},pt:{EditAppointmentGroupDetails:{affect_reservations:"De que forma é que isto irá afetar as reservas?",and_n_contexts:"e mais %{n}",and_n_sectionCodes:"e mais %{n}",bad_max_appts:"Tem de permitir pelo menos um compromisso por participante",bad_per_slot:"Tem de permitir pelo menos um compromisso por horário",context_required:"Deve escolher um calendário",select_calendars:"Selecionar calendários"}},ru:{EditAppointmentGroupDetails:{affect_reservations:"Как это повлияет на бронирование?",and_n_contexts:"и %{n} других",and_n_sectionCodes:"и %{n} других ",bad_max_appts:"Вы должны предусмотреть хотя бы одну встречу для каждого участника ",bad_per_slot:"Вы должны назначить, по крайней мере, одну встречу на каждый временной интервал",context_required:"Вы должны выбрать календарь",select_calendars:"Выберите календари"}},zh:{EditAppointmentGroupDetails:{affect_reservations:"这将如何影响预订?",and_n_contexts:"和另外 %{n} 个人",and_n_sectionCodes:"和另外 %{n} 个人",bad_max_appts:"您必须至少允许每名参加者拥有一个约会",bad_per_slot:"您必须允许一个时段至少有一个约会",context_required:"您需要选择一个日程表",select_calendars:"选择日程表"}}}})}),define("translations/calendar.edit_appointment_group",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{edit_appointment_group:{affect_reservations:"كيف سيؤثر هذا على الحجوزات؟",appt_group_options_help1:"تجاوزتْ بعض الحجوزات الموجودة الحدَ الذي قمت بإضافته. وهذا لن يؤثر على الحجوزات الموجودة، فقط سيحول دون إنشاء حجوزات جديدة.",appt_group_options_help2:"ومع هذا يمكنك إزالة أي حجوزات موجودة يدويًا.",calendar:"التقويم",date:"التاريخ",details:"التفاصيل:",group_category:"فئة المجموعة",group_signup:"اجعل الطلاب يسجلون في مجموعات.",location:"الموقع",name:"الاسم",time_range:"النطاق الزمني"}}},es:{calendar:{edit_appointment_group:{affect_reservations:"¿Cómo afectará esto a las reservas?",appt_group_options_help1:"Algunas reservas existentes sobrepasan el límite que ha agregado. Estas no serán afectadas, este cambio solo previene que se hagan nuevas reservas.",appt_group_options_help2:"No obstante, puede eliminar manualmente cualquier reserva existente",calendar:"Calendario",date:"Fecha",details:"Detalles:",group_category:"Categoría de grupo",group_signup:"Alumnos que se han registrado en grupo.",location:"Ubicación",name:"Nombre",time_range:"Intervalo de tiempo"}}},fr:{calendar:{edit_appointment_group:{affect_reservations:"En quoi cela affectera-t-il les réservations ?",appt_group_options_help1:"Certaines réservations existantes dépassent la limite que vous avez ajoutée. Celles-ci ne seront pas affectées. Cette modification empêche seulement de créer de nouvelles réservations.",appt_group_options_help2:"Cependant, vous pouvez retirer manuellement des réservations existantes.",calendar:"Calendrier",date:"Date",details:"Détails :",group_category:"Catégorie de groupe",group_signup:"Demandez aux étudiants de s’inscrire dans des groupes.",location:"Lieu",name:"Nom",time_range:"Intervalle de temps"}}},ja:{calendar:{edit_appointment_group:{affect_reservations:"このことは予約にどのように影響しますか?",appt_group_options_help1:"既存の一部の予約が、設定された上限を超えています。この変更は新しい予約にのみ適用され、既存の予約は影響を受けません。",appt_group_options_help2:"ただし、既存の予約を手動で削除することはできます。",calendar:"カレンダー",date:"日付",details:"詳細:",group_category:"グループ カテゴリ",group_signup:"受講生をグループにサインアップさせてください。",location:"場所",name:"名前",time_range:"時間の範囲"}}},ko:{calendar:{edit_appointment_group:{affect_reservations:"이것이 예약에 미치는 영향은 무엇입니까?",appt_group_options_help1:"일부 기존 예약이 여러분이 추가한 한계를 넘었습니다. 기존 예약은 영향을 받지 않지만 이 변경 사항으로 인해 새로운 예약을 만들 수는 없습니다.",appt_group_options_help2:"하지만 수동으로 기존 예약을 제거할 수 있습니다.",calendar:"달력",date:"날짜",details:"세부 정보:",group_category:"그룹 범주",group_signup:"학생이 그룹에 등록하도록 합니다.",location:"위치",name:"이름",time_range:"시간 범위"}}},nl:{calendar:{edit_appointment_group:{affect_reservations:"Wat is de invloed op reserveringen?",appt_group_options_help1:"Sommige bestaande reserveringen overschrijden de limiet die je hebt ingevoerd. Deze worden niet beïnvloed maar voorkomen wel dat er nieuwe reserveringen gemaakt kunnen worden.",appt_group_options_help2:"Je kunt deze bestaande reserveringen echter handmatig verwijderen.",calendar:"Agenda",date:"Datum",details:"Details:",group_category:"Groep categorie",group_signup:"Laat leerlingen inschrijven in groepen.",location:"Locatie",name:"Naam",time_range:"Tijdsbereik"}}},pt:{calendar:{edit_appointment_group:{affect_reservations:"De que forma é que isto irá afetar as reservas?",appt_group_options_help1:"Algumas reservas existentes estão acima do limite adicionado. Essas reservas não serão afetadas, esta alteração impede apenas a realização de novas reservas.",appt_group_options_help2:"No entanto, pode remover manualmente quaisquer reservas existentes. ",calendar:"Calendário",date:"Data",details:"Detalhes:",group_category:"Categoria de grupo",group_signup:"Pedir aos alunos que se registem em grupos.",location:"Localização",name:"Nome",time_range:"Intervalo de tempo"}}},ru:{calendar:{edit_appointment_group:{affect_reservations:"Как это повлияет на бронирование?",appt_group_options_help1:"Некоторые существующие бронирования добавлены сверх установленного вами лимита. Они не будут затронуты, это изменение предотвращает только новые бронирования.",appt_group_options_help2:"Вы можете, однако, вручную удалить все существующие бронирования.",calendar:"Календарь",date:"Дата",details:"Сведения:",group_category:"Категория группы",group_signup:"Имеется у студентов, зарегистрированных в группах.",location:"Местоположение",name:"Имя",time_range:"Временной диапазон"}}},zh:{calendar:{edit_appointment_group:{affect_reservations:"这将如何影响预订?",appt_group_options_help1:"一些现有预订已经超过您添加的限制。此更改只会限制新预订，而不会影响已有预定。",appt_group_options_help2:"不过，您可以手动删除现有预订。",calendar:"日历",date:"日期",details:"详细信息：",group_category:"组类别",group_signup:"让学生按组登录。",location:"位置",name:"名称",time_range:"时间范围"}}}}})}),define("translations/calendar.context_selector",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{context_selector:{done:"انتهاء"}}},es:{calendar:{context_selector:{done:"Completado"}}},fr:{calendar:{context_selector:{done:"Terminé"}}},ja:{calendar:{context_selector:{done:"完了"}}},ko:{calendar:{context_selector:{done:"마침"}}},nl:{calendar:{context_selector:{done:"Klaar"}}},pt:{calendar:{context_selector:{done:"Concluir"}}},ru:{calendar:{context_selector:{done:"Готово"}}},zh:{calendar:{context_selector:{done:"完成"}}}}})}),define("translations/calendar.edit_event",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{edit_event:{tabs:{assignment:"المهمة",event:"الحدث"}}}},es:{calendar:{edit_event:{tabs:{assignment:"Tarea",event:"Evento"}}}},fr:{calendar:{edit_event:{tabs:{assignment:"Tâche",event:"Événement"}}}},ja:{calendar:{edit_event:{tabs:{assignment:"課題",event:"イベント"}}}},ko:{calendar:{edit_event:{tabs:{assignment:"과제",event:"행사"}}}},nl:{calendar:{edit_event:{tabs:{assignment:"Opdracht",event:"Gebeurtenis"}}}},pt:{calendar:{edit_event:{tabs:{assignment:"Tarefa",event:"Evento"}}}},ru:{calendar:{edit_event:{tabs:{assignment:"Задание",event:"Событие"}}}},zh:{calendar:{edit_event:{tabs:{assignment:"作业",event:"事件"}}}}}})}),define("translations/calendar.appointment_group_list",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{appointment_group_list:{location:"الموقع:",message_groups:"إرسال رسالة للمجموعات التي...",message_students:"إرسال رسائل للطلاب الذين...",my_appointment_groups:"أية مجموعات مواعيد",scheduler_explanation_student_header:"ليس لديك أية مجموعات مواعيد للاشتراك فيها",scheduler_explanation_student_paragraph_1:'يمكن للمعلمين استخدام أداة الجدولة هذه لجدولة بعض الأمور لطلابهم للاشتراك فيها. أمور مثل: "ساعات العمل" أو "الأجزاء الزمنية لمجموعة العرض" أو "تناول الغداء مع مجموعة خريجين".',scheduler_explanation_student_paragraph_2:"لم يقم أي معلم من معلميك الخاص بإنشاء مواعيد يمكنك الاشتراك فيها وبالتالي لا يوجد أي شيء يمكنك القيام به الآن. سيتم إعلامك إذا قام أي شخص بإنشاء شيء يمكنك الاشتراك فيه.",scheduler_explanation_teacher_header:"لم تقم بإنشاء أي مجموعات مواعيد، ولا يوجد أي موعد للاشتراك فيه.",scheduler_explanation_teacher_paragraph_1:"هذه هي أداة الجدولة. يمكنك استخدامها لإنشاء مجموعات مواعيد لطلابك لتسجيل الاشتراك فيها.",scheduler_explanation_teacher_paragraph_2:"على سبيل المثال، لنفترض أنك تريد فحص تعيين ورقة نصف العام مع كل طالب من طلابك في المساق. يمكنك إنشاء مجموعة مواعيد جديدة، وتحدد التواريخ والأوقات التي تكون متاحًا فيها، وتقوم بتقسيم تلك الأوقات إلى مجموعات زمنية مقدار كل منها 15 دقيقة وتسمح بطالب واحد فقط لكل مجموعة زمنية.",scheduler_explanation_teacher_paragraph_3:"ثم يتم إخطار الطلاب وسوف يرون أنهم بحاجة إلى تسجيل الاشتراك في واحدة من هذه المجموعات الزمنية. وسيتم عرض تقويم أمامهم تظهر به المجموعات الزمنية متراكبة فوق كل شيء موجود في تقاويمهم الأخرى حتى يتسنى لهم اختيار الوقت المناسب لهم.",scheduler_explanation_teacher_paragraph_4:'* يمكنك البدء الآن بالنقر فوق زر "إنشاء مجموعة مواعيد" الموجود على اليمين *'}}},es:{calendar:{appointment_group_list:{location:"Ubicación:",message_groups:"Enviar un mensaje a grupos que...",message_students:"Enviar Mensajes a Estudiantes que...",my_appointment_groups:"Mi grupo de citas",scheduler_explanation_student_header:"No tiene ningún grupo de citas en el que inscribirse",scheduler_explanation_student_paragraph_1:'Los profesores pueden usar esta herramienta para planificar actividades en las que los alumnos puedan inscribirse, tales como: "horario de oficina", "horas para presentaciones de grupos" o "almuerzo con un graduado".',scheduler_explanation_student_paragraph_2:"Ninguno de sus profesores ha programado citas a las que se pueda inscribir, por lo que no podrá hacer nada por el momento. Se le notificará en caso de que alguien cree algo en lo que pueda inscribirse.",scheduler_explanation_teacher_header:"No ha creado un grupo de citas, ni hay uno en el que se pueda inscribir",scheduler_explanation_teacher_paragraph_1:"Esta es la herramienta de planificación. La puede usar para crear grupos de citas para que sus alumnos puedan inscribirse.",scheduler_explanation_teacher_paragraph_2:"Por ejemplo, digamos que desea repasar una tarea  con cada uno de los alumnos de su curso. Crearía un nuevo grupo de citas, especificaría las fechas y horarios que tiene disponibles, le diría que puede separar ese tiempo en bloques de 15 minutos y asignar a cada estudiante un solo bloque.",scheduler_explanation_teacher_paragraph_3:"Después, los alumnos recibirían una notificación en la que verán que deben inscribirse en uno de los bloques. Se les mostrará un calendario con los bloques disponibles resaltando sobre el resto de su calendario para que puedan seleccionar la hora que más les convenga."}}},fr:{calendar:{appointment_group_list:{location:"Lieu :",message_groups:"Envoyer un message aux groupes qui...",message_students:"Envoyer un message aux étudiants qui...",my_appointment_groups:"Mes groupes de rendez-vous",scheduler_explanation_student_header:"Vous n’avez aucun groupe de rendez-vous auxquels vous pouvez vous inscrire.",scheduler_explanation_student_paragraph_1:"Les enseignants peuvent utiliser cet outil de planification pour programmer des événements auxquels leurs étudiants peuvent s’inscrire, comme « heures de bureau », « créneaux horaires de présentation de groupe » ou « déjeuner avec un ancien étudiant ».",scheduler_explanation_student_paragraph_2:"Aucun de vos enseignants n’a créé de rendez-vous auxquels vous pouvez vous inscrire. Si quelqu’un crée un événement, vous en serez informé et vous pourrez vous y inscrire.",scheduler_explanation_teacher_header:"Vous n’avez créé aucun groupe de rendez-vous ; vous ne pouvez vous inscrire à aucun groupe.",scheduler_explanation_teacher_paragraph_1:"Voici l’outil de planification. Vous pouvez l’utiliser pour créer des groupes de rendez-vous auxquels vos étudiants peuvent s’inscrire.",scheduler_explanation_teacher_paragraph_2:"Par exemple, supposons que vous souhaitiez revoir le travail sur table de la mi-trimestre avec chaque étudiant du cours. Vous créez un nouveau groupe de rendez-vous, vous indiquez les dates et heures auxquelles vous êtes disponibles, vous demandez à l’outil de répartir ce temps en tranches horaires de 15 minutes et vous n’autorisez qu’un seul étudiant par tranche horaire.",scheduler_explanation_teacher_paragraph_3:"Les étudiants seront avisés et verront qu’ils doivent s’inscrire à l’une des tranches horaires indiquées. Un calendrier avec les tranches horaires disponibles s’affichera au-dessus de toutes les activités de leurs autres calendriers pour qu’ils choisissent un horaire qui leur convient.",scheduler_explanation_teacher_paragraph_4:"* Commencez en cliquant sur le bouton « Créer un groupe de rendez-vous » proposé à droite *",x_people_have_signed_up:"%{signed_up} personnes se sont inscrites"}}},ja:{calendar:{appointment_group_list:{location:"場所:",message_groups:"次の状態のグループにメッセージを送る...",message_students:"次の状態の受講生にメッセージを送る...",my_appointment_groups:"マイ予定グループ",scheduler_explanation_student_header:"サインアップできる予定グループはありません",scheduler_explanation_student_paragraph_1:'講師は、このスケジューラ ツールを使用して、受講生がサインアップできる予定 ("業務時間"、"グループ プレゼンテーション時間枠"、"同窓生との昼食" など) のスケジュールを作成できます。',scheduler_explanation_student_paragraph_2:"受講生がサインアップできる予定を講師が設定していないので、受講生が現在行えることは何もありません。サインアップできる予定が作成されたら通知します。",scheduler_explanation_teacher_header:"予定グループが作成されていないので、サインアップできる予定はありません",scheduler_explanation_teacher_paragraph_1:"これはスケジューラ ツールです。講師はこのツールを使用して、受講生がサインアップする予定グループを作成できます。",scheduler_explanation_teacher_paragraph_2:"例えば、講師がコースの各受講生に中間筆記課題を出すものとします。そのような場合は、新しい予定グループを作成し、自分の都合の良い日時を指定し、その時間を 15 分のブロックに分割して、各時間ブロックで 1 人の受講生だけを受け付けるようにします。",scheduler_explanation_teacher_paragraph_3:"その後、受講生向けに、指定の時間ブロックのいずれかにサインアップする必要があることを通知します。受講生のカレンダーには、利用できる時間ブロックが他のすべての予定と共に表示されるので、受講生は都合のよい時間を選択できます。",scheduler_explanation_teacher_paragraph_4:"* 今すぐ始めるには、右側の [予定グループの作成] ボタンをクリックします *"}}},ko:{calendar:{appointment_group_list:{location:"위치:",message_groups:"다음 그룹에게 메시지 보내기",message_students:"다음 학생에게 메시지 보내기",my_appointment_groups:"내 약속 그룹",scheduler_explanation_student_header:"등록할 약속 그룹이 없음",scheduler_explanation_student_paragraph_1:'교사는 이 일정 관리 도구를 이용하여 학생이 등록할 수 있는 일정을 배치할 수 있습니다. 예를 들어, "근무 시간", "그룹 프레젠테이션 시간", "졸업생과 점심" 등이 있습니다.',scheduler_explanation_student_paragraph_2:"어떤 교사도 여러분이 등록할 수 있는 약속을 만들지 않아서 지금 할 일이 없습니다. 누군가 무엇을 만들면 여러분이 와서 등록할 수 있도록 알림을 보낼 것입니다.",scheduler_explanation_teacher_header:"약속 그룹을 만들지 않아서 등록할 대상이 없음",scheduler_explanation_teacher_paragraph_1:"이것은 일정 관리 도구입니다. 이는 학생이 등록할 수 있는 약속 그룹을 만드는 데 사용할 수 있습니다.",scheduler_explanation_teacher_paragraph_2:"예를 들어, 과목의 각 학생과 중간 학기 보고서 과제를 이야기한다고 해봅시다. 여러분은 새 약속 그룹을 만들고, 사용 가능한 날짜와 시간을 지정한 후, 해당 시간을 15분 블록으로 나누고, 시간 블록 당 한 명의 학생만 허용하도록 할 수 있습니다.",scheduler_explanation_teacher_paragraph_3:"그러면 학생은 지정된 시간 블록 중 하나에 등록하라는 알림을 받게 됩니다. 표시되는 달력은 다른 항목 위에 사용 가능한 시간이 겹쳐서 나오므로 가능한 시간을 고를 수 있습니다.",scheduler_explanation_teacher_paragraph_4:'* 오른쪽에 있는 "약속 그룹 만들기" 버튼을 클릭해서 지금 시작 *'}}},nl:{calendar:{appointment_group_list:{location:"Locatie:",message_groups:"Verstuur een bericht naar groepen die...",message_students:"Verstuur een bericht naar leerlingen die...",my_appointment_groups:"Mijn afspraakgroepen",scheduler_explanation_student_header:"U bent nog voor geen enkele afspraakgroep aangemeld",scheduler_explanation_student_paragraph_1:'Docenten kunnen dit hulpmiddel gebruiken om dingen te plannen met leerlingen. Denk aan dingen als "kantooruren" en "tijdvakken voor presentaties".',scheduler_explanation_student_paragraph_2:"Geen van de docenten heeft een afspraak gemaakt waar u zich voor kunt aanmelden. U ontvangt een melding als dit wel mogelijk is.",scheduler_explanation_teacher_header:"U heeft nog geen afspraakgroepen gemaakt, en er zijn geen afspraakgroepen waar u zich voor kan aanmelden",scheduler_explanation_teacher_paragraph_1:"Dit is het planningshulpmiddel. Dit hulpmiddel kan gebruikt worden om afspraakgroepen voor leerlingen te maken.",scheduler_explanation_teacher_paragraph_2:"Stel, je wilt een opdracht met alle leerlingen in je cursus individueel bespreken. Je kunt dan een nieuwe afspraakgroep aanmaken. Vervolgens specificeer je de dagen en tijdstippen dat je beschikbaar bent. Splits de tijdstippen in blokken van 15 minuten en laat maximaal één leerling per blok toe.",scheduler_explanation_teacher_paragraph_3:"De leerlingen ontvangen een melding dat ze moeten aanmelden voor een van de gespecificeerde tijdblokken. De leerlingen krijgen een combinatie te zien van hun eigen agenda en de beschikbare tijdblokken, zodat ze een geschikte tijd kunnen uitkiezen."}}},pt:{calendar:{appointment_group_list:{location:"Localização:",message_groups:"Contactar grupos que...",message_students:"Enviar mensagem aos alunos que...",my_appointment_groups:"Os meus grupos de compromissos",scheduler_explanation_student_header:"Não dispõe de nenhum grupo de compromissos para se inscrever",scheduler_explanation_student_paragraph_1:'Os professores podem utilizar esta ferramenta para agendar compromissos para os quais os seus alunos se podem inscrever. Por exemplo: "horário de atendimento", "horários de apresentação de grupos" ou "almoço com um ex-aluno".',scheduler_explanation_student_paragraph_2:"Nenhum dos seus professores marcou compromissos para os quais se possa inscrever, por isso não tem de fazer nada de momento. Será notificado se alguém criar algum compromisso para se poder inscrever.",scheduler_explanation_teacher_header:"Não criou nenhum grupo de compromissos e não existem grupos para os quais se possa inscrever",scheduler_explanation_teacher_paragraph_1:"Esta é a Ferramenta de Agendamento. Pode utilizá-la para criar grupos de compromissos para os quais os seus alunos se possam inscrever.",scheduler_explanation_teacher_paragraph_2:"Por exemplo, imagine que pretende analisar o trabalho de avaliação intercalar com cada um dos alunos inscritos na sua disciplina. Teria de criar um novo grupo de compromissos, especificar as datas e as horas em que se encontra disponível, dividir esse tempo em blocos de 15 minutos e permitir apenas um aluno por cada bloco de tempo.",scheduler_explanation_teacher_paragraph_3:"Em seguida, os alunos seriam notificados e constatavam que teriam de se inscrever para obterem um dos blocos de tempo especificados. É-lhes apresentado um calendário com os blocos de tempo disponíveis colocado por cima de toda a informação constante dos seus outros calendários, para poderem escolher uma hora que lhes seja conveniente."}}},ru:{calendar:{appointment_group_list:{location:"Местоположение:",message_groups:"Сообщения групп, которые...",message_students:"Отправить сообщения студентам, которые...",my_appointment_groups:"Мои групповые встречи",scheduler_explanation_student_header:"У вас отсутствуют какие-либо групповые встречи для подписки",scheduler_explanation_student_paragraph_1:'Учителя могут использовать данный инструмент планирования, чтобы запланировать события, на которые могут подписаться студенты. Например: "Приемные часы", "Интервалы для групповой презентации" или "Обед с выпускниками".',scheduler_explanation_student_paragraph_2:"Никто из ваших учителей не создал встречу, на которую вы могли бы зарегистрироваться. Вы будете уведомлены, если кто-то создаст что-либо и у вас появится возможность подписаться. ",scheduler_explanation_teacher_header:"Вы не создали ни одной групповой встречи, и не можете зарегистрироваться на участие в них",scheduler_explanation_teacher_paragraph_1:"Это инструмент планирования. Вы можете использовать его для создания групповых встреч, на которые могут записаться ваши студенты",scheduler_explanation_teacher_paragraph_2:"Предположим, что вы хотите пройтись по каждой экзаменационной работе студентов своего курса, сданной в середине семестра. Вам необходимо создать новую групповую встречу, указать дату и время, когда вы будете свободны, и запросить, чтобы система разделила этот период времени на 15-минутные блоки и допускала только одного студента на каждый блок времени.",scheduler_explanation_teacher_paragraph_3:"Затем студенты получат уведомление и увидят, что они должны зарегистрироваться в одном из указанных блоков времени. Им будет показан календарь с имеющимися блоками времени, накладывающийся на их другие календари, чтобы они могли выбрать наиболее подходящее для себя время."}}},zh:{calendar:{appointment_group_list:{location:"位置:",message_groups:"发送消息到组...",message_students:"发送消息到学生...",my_appointment_groups:"我的约会组",scheduler_explanation_student_header:"您没有任何要注册的约会组",scheduler_explanation_student_paragraph_1:"教师可以使用此计划程序工具来为学生安排要注册的事项。例如“办公时间”、“组汇报时段”，或“与校友共进午餐”等。",scheduler_explanation_student_paragraph_2:"没有哪个教师为您创建任何要注册的约会 ，因此到目前为止，没有您要执行的约会。一旦有任何教师创建了约会，您将会获得通知以便注册。",scheduler_explanation_teacher_header:"您尚未创建任何约会组，也没有您可注册的约会",scheduler_explanation_teacher_paragraph_1:"这是计划程序工具。 您可以利用它为学生创建要注册的约会组。",scheduler_explanation_teacher_paragraph_2:"比方说，您想与参加您课程的每个学生单独讨论期中论文作业。您可以新建一个约会组， 指定对您方便的日期和时间，并将该时间分成多个时间块（每个块 15 分钟），每个时间块仅允许一个学生参与。",scheduler_explanation_teacher_paragraph_3:"然后，学生将收到通知，并了解需要注册一个指定的时间块。在随后显示的日历中，可用时间块覆盖在日历的上部，这样学生就可选择一个合适的时间。"}}}}})}),define("translations/calendar.scheduler_right_side_admin_section",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{scheduler_right_side_admin_section:{create_a_new_set_of_appointments:"إنشاء مجموعة مواعيد"}}},es:{calendar:{scheduler_right_side_admin_section:{create_a_new_set_of_appointments:"Crear un grupo de citas"}}},fr:{calendar:{scheduler_right_side_admin_section:{create_a_new_set_of_appointments:"Créer un groupe de rendez-vous"}}},ja:{calendar:{scheduler_right_side_admin_section:{create_a_new_set_of_appointments:"予定グループを作成する"}}},ko:{calendar:{scheduler_right_side_admin_section:{create_a_new_set_of_appointments:"약속 그룹 만들기"}}},nl:{calendar:{scheduler_right_side_admin_section:{create_a_new_set_of_appointments:"Maak een afspraak groep"}}},pt:{calendar:{scheduler_right_side_admin_section:{create_a_new_set_of_appointments:"Criar um grupo de compromissos"}}},ru:{calendar:{scheduler_right_side_admin_section:{create_a_new_set_of_appointments:"Создать групповую встречу"}}},zh:{calendar:{scheduler_right_side_admin_section:{create_a_new_set_of_appointments:"创建一个约会组"}}}}})}),function(){define("compiled/calendar/CalendarDefaults",["i18nObj"],function(a){return{weekMode:"variable",allDayDefault:!1,ignoreTimezone:!0,lazyFetching:!1,monthNames:a.lookup("date.month_names").slice(1,13),monthNamesShort:a.lookup("date.abbr_month_names").slice(1,13),dayNames:a.lookup("date.day_names"),dayNamesShort:a.lookup("date.abbr_day_names")}})}.call(this),define("vendor/fullcalendar",["jquery"],function(a,b){function g(b){a.extend(!0,c,b)}function h(c,d,e){function H(a){o?(R(),Q(),ab(),O(a)):I()}function I(){p=d.theme?"ui":"fc",c.addClass("fc"),d.isRTL&&c.addClass("fc-rtl"),d.theme&&c.addClass("ui-widget"),o=a("<div class='fc-content' style='position:relative'/>").prependTo(c),m=new i(g,d),n=m.render(),n&&c.prepend(n),N(d.defaultView),a(window).resize(T),M()||J()}function J(){setTimeout(function(){!t.start&&M()&&O()},0)}function K(){a(window).unbind("resize",T),m.destroy(),o.remove(),c.removeClass("fc fc-rtl ui-widget")}function L(){return k.offsetWidth!==0}function M(){return a("body")[0].offsetWidth!==0}function N(b){if(!t||b!=t.name){B++,cb();var c=t,d;c?((c.beforeHide||Z)(),Y(o,o.height()),c.element.hide()):Y(o,1),o.css("overflow","hidden"),t=u[b],t?t.element.show():t=u[b]=new f[b](d=y=a("<div class='fc-view fc-view-"+b+"' style='position:absolute'/>").appendTo(o),g),c&&m.deactivateButton(c.name),m.activateButton(b),O(),o.css("overflow",""),c&&Y(o,1),d||(t.afterShow||Z)(),B--}}function O(a){if(L()){B++,cb(),x===b&&R();var d=!1;!t.start||a||C<t.start||C>=t.end?(t.render(C,a||0),S(!0),d=!0):t.sizeDirty?(t.clearEvents(),S(),d=!0):t.eventsDirty&&(t.clearEvents(),d=!0),t.sizeDirty=!1,t.eventsDirty=!1,V(d),v=c.outerWidth(),m.updateTitle(t.title);var e=new Date;e>=t.start&&e<t.end?m.disableButton("today"):m.enableButton("today"),B--,t.trigger("viewDisplay",k)}}function P(){Q(),L()&&(R(),S(),cb(),t.clearEvents(),t.renderEvents(D),t.sizeDirty=!1)}function Q(){a.each(u,function(a,b){b.sizeDirty=!0})}function R(){d.contentHeight?x=d.contentHeight:d.height?x=d.height-(n?n.height():0)-U(o):x=Math.round(o.width()/Math.max(d.aspectRatio,.5))}function S(a){B++,t.setHeight(x,a),y&&(y.css("position","relative"),y=null),t.setWidth(o.width(),a),B--}function T(){if(!B)if(t.start){var a=++z;setTimeout(function(){a==z&&!B&&L()&&v!=(v=c.outerWidth())&&(B++,P(),t.trigger("windowResize",k),B--)},200)}else J()}function V(a){!d.lazyFetching||h(t.visStart,t.visEnd)?W():a&&_()}function W(){j(t.visStart,t.visEnd)}function X(a){D=a,_()}function $(a){_(a)}function _(a){ab(),L()&&(t.clearEvents(),t.renderEvents(D,a),t.eventsDirty=!1)}function ab(){a.each(u,function(a,b){b.eventsDirty=!0})}function bb(a,c,d){t.select(a,c,d===b?!0:d)}function cb(){t&&t.unselect()}function db(){O(-1)}function eb(){O(1)}function fb(){q(C,-1),O()}function gb(){q(C,1),O()}function hb(){C=new Date,O()}function ib(a,b,c){a instanceof Date?C=w(a):A(C,a,b,c),O()}function jb(a,c,d){a!==b&&q(C,a),c!==b&&r(C,c),d!==b&&s(C,d),O()}function kb(){return w(C)}function lb(){return t}function mb(a,c){if(c===b)return d[a];if(a=="height"||a=="contentHeight"||a=="aspectRatio")d[a]=c,P()}function nb(a,b){if(d[a])return d[a].apply(b||k,Array.prototype.slice.call(arguments,2))}var g=this;g.options=d,g.render=H,g.destroy=K,g.refetchEvents=W,g.reportEvents=X,g.reportEventChange=$,g.rerenderEvents=_,g.changeView=N,g.select=bb,g.unselect=cb,g.prev=db,g.next=eb,g.prevYear=fb,g.nextYear=gb,g.today=hb,g.gotoDate=ib,g.incrementDate=jb,g.formatDate=function(a,b){return E(a,b,d)},g.formatDates=function(a,b,c){return F(a,b,c,d)},g.getDate=kb,g.getView=lb,g.option=mb,g.trigger=nb,l.call(g,d,e);var h=g.isFetchNeeded,j=g.fetchEvents,k=c[0],m,n,o,p,t,u={},v,x,y,z=0,B=0,C=new Date,D=[],G;A(C,d.year,d.month,d.date),d.droppable&&a(document).bind("dragstart",function(b,c){var e=b.target,f=a(e);if(!f.parents(".fc").length){var g=d.dropAccept;if(a.isFunction(g)?g.call(e,f):f.is(g))G=e,t.dragStart(G,b,c)}}).bind("dragstop",function(a,b){G&&(t.dragStop(G,a,b),G=null)})}function i(b,c){function h(){g=c.theme?"ui":"fc";var b=c.header;if(b)return e=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(j("left")).append(j("center")).append(j("right"))),e}function i(){e.remove()}function j(d){var e=a("<td class='fc-header-"+d+"'/>"),h=c.header[d];return h&&a.each(h.split(" "),function(d){d>0&&e.append("<span class='fc-header-space'/>");var h;a.each(this.split(","),function(d,i){if(i=="title")e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),h&&h.addClass(g+"-corner-right"),h=null;else{var j;b[i]?j=b[i]:f[i]&&(j=function(){m.removeClass(g+"-state-hover"),b.changeView(i)});if(j){var k=c.theme?bb(c.buttonIcons,i):null,l=bb(c.buttonText,i),m=a("<span class='fc-button fc-button-"+i+" "+g+"-state-default'>"+"<span class='fc-button-inner'>"+"<span class='fc-button-content'>"+(k?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+k+"'/>"+"</span>":l)+"</span>"+"<span class='fc-button-effect'><span></span></span>"+"</span>"+"</span>");m&&(m.click(function(){m.hasClass(g+"-state-disabled")||j()}).mousedown(function(){m.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){m.removeClass(g+"-state-down")}).hover(function(){m.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){m.removeClass(g+"-state-hover").removeClass(g+"-state-down")}).appendTo(e),h||m.addClass(g+"-corner-left"),h=m)}}}),h&&h.addClass(g+"-corner-right")}),e}function k(a){e.find("h2").html(a)}function l(a){e.find("span.fc-button-"+a).addClass(g+"-state-active")}function m(a){e.find("span.fc-button-"+a).removeClass(g+"-state-active")}function n(a){e.find("span.fc-button-"+a).addClass(g+"-state-disabled")}function o(a){e.find("span.fc-button-"+a).removeClass(g+"-state-disabled")}var d=this;d.render=h,d.destroy=i,d.updateTitle=k,d.activateButton=l,d.deactivateButton=m,d.disableButton=n,d.enableButton=o;var e=a([]),g}function l(c,d){function u(a,b){return!n||a<n||b>o}function v(a,b){n=a,o=b,s=[];var c=++p,d=m.length;q=d;for(var e=0;e<d;e++)x(m[e],c)}function x(a,b){y(a,function(c){if(b==p){if(c){for(var d=0;d<c.length;d++)c[d].source=a,J(c[d]);s=s.concat(c)}q--,q||i(s)}})}function y(b,d){var f,g=e.sourceFetchers,h;for(f=0;f<g.length;f++){h=g[f](b,n,o,d);if(h===!0)return;if(typeof h=="object"){y(h,d);return}}var i=b.events;if(i)a.isFunction(i)?(H(),i(w(n),w(o),function(a){d(a),I()})):a.isArray(i)?d(i):d();else{var k=b.url;if(k){var l=b.success,m=b.error,p=b.complete,q=a.extend({},b.data||{}),r=jb(b.startParam,c.startParam),s=jb(b.endParam,c.endParam);r&&(q[r]=Math.round(+n/1e3)),s&&(q[s]=Math.round(+o/1e3)),H(),a.ajax(a.extend({},j,b,{data:q,success:function(b){b=b||[];var c=ib(l,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){ib(m,this,arguments),d()},complete:function(){ib(p,this,arguments),I()}}))}else d()}}function z(a){a=A(a),a&&(q++,x(a,p))}function A(b){a.isFunction(b)||a.isArray(b)?b={events:b}:typeof b=="string"&&(b={url:b});if(typeof b=="object")return K(b),m.push(b),b}function C(b){m=a.grep(m,function(a){return!L(a,b)}),s=a.grep(s,function(a){return!L(a.source,b)}),i(s)}function D(a){var b,c=s.length,d,e=h().defaultEventEnd,f=a.start-a._start,g=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)d=s[b],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+f),a.end?d.end?d.end=new Date(+d.end+g):d.end=new Date(+e(d)+g):d.end=null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroudColor=a.backgroudColor,d.borderColor=a.borderColor,d.textColor=a.textColor,J(d));J(a),i(s)}function E(a,b){J(a),a.source||(b&&(l.events.push(a),a.source=l),s.push(a)),i(s)}function F(b){if(!b){s=[];for(var c=0;c<m.length;c++)a.isArray(m[c].events)&&(m[c].events=[])}else{if(!a.isFunction(b)){var d=b+"";b=function(a){return a._id==d}}s=a.grep(s,b,!0);for(var c=0;c<m.length;c++)a.isArray(m[c].events)&&(m[c].events=a.grep(m[c].events,b,!0))}i(s)}function G(b){return a.isFunction(b)?a.grep(s,b):b?(b+="",a.grep(s,function(a){return a._id==b})):s}function H(){r++||g("loading",null,!0)}function I(){--r||g("loading",null,!1)}function J(a){var d=a.source||{},e=jb(d.ignoreTimezone,c.ignoreTimezone);a._id=a._id||(a.id===b?"_fc"+k++:a.id+""),a.date&&(a.start||(a.start=a.date),delete a.date),a._start=w(a.start=B(a.start,e)),a.end=B(a.end,e),a.end&&a.end<=a.start&&(a.end=null),a._end=a.end?w(a.end):null,a.allDay===b&&(a.allDay=jb(d.allDayDefault,c.allDayDefault)),a.className?typeof a.className=="string"&&(a.className=a.className.split(/\s+/)):a.className=[]}function K(a){a.className?typeof a.className=="string"&&(a.className=a.className.split(/\s+/)):a.className=[];var b=e.sourceNormalizers;for(var c=0;c<b.length;c++)b[c](a)}function L(a,b){return a&&b&&M(a)==M(b)}function M(a){return(typeof a=="object"?a.events||a.url:"")||a}var f=this;f.isFetchNeeded=u,f.fetchEvents=v,f.addEventSource=z,f.removeEventSource=C,f.updateEvent=D,f.renderEvent=E,f.removeEvents=F,f.clientEvents=G,f.normalizeEvent=J;var g=f.trigger,h=f.getView,i=f.reportEvents,l={events:[]},m=[l],n,o,p=0,q=0,r=0,s=[];for(var t=0;t<d.length;t++)A(d[t])}function q(a,b,c){return a.setFullYear(a.getFullYear()+b),c||v(a),a}function r(a,b,c){if(+a){var d=a.getMonth()+b,e=w(a);e.setDate(1),e.setMonth(d),a.setMonth(d),c||v(a);while(a.getMonth()!=e.getMonth())a.setDate(a.getDate()+(a<e?1:-1))}return a}function s(a,b,c){if(+a){var d=a.getDate()+b,e=w(a);e.setHours(9),e.setDate(d),a.setDate(d),c||v(a),t(a,e)}return a}function t(a,b){if(+a)while(a.getDate()!=b.getDate())a.setTime(+a+(a<b?1:-1)*o)}function u(a,b){return a.setMinutes(a.getMinutes()+b),a}function v(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function w(a,b){return b?v(new Date(+a)):new Date(+a)}function x(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function y(a,b,c){b=b||1;while(!a.getDay()||c&&a.getDay()==1||!c&&a.getDay()==6)s(a,b);return a}function z(a,b){return Math.round((w(a,!0)-w(b,!0))/n)}function A(a,c,d,e){c!==b&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c)),d!==b&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d)),e!==b&&a.setDate(e)}function B(a,c){return typeof a=="object"?a:typeof a=="number"?new Date(a*1e3):typeof a=="string"?a.match(/^\d+(\.\d+)?$/)?new Date(parseFloat(a)*1e3):(c===b&&(c=!0),C(a,c)||(a?new Date(a):null)):null}function C(a,b){var c=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!c)return null;var d=new Date(c[1],0,1);if(b||!c[13]){var e=new Date(c[1],0,1,9,0);c[3]&&(d.setMonth(c[3]-1),e.setMonth(c[3]-1)),c[5]&&(d.setDate(c[5]),e.setDate(c[5])),t(d,e),c[7]&&d.setHours(c[7]),c[8]&&d.setMinutes(c[8]),c[10]&&d.setSeconds(c[10]),c[12]&&d.setMilliseconds(Number("0."+c[12])*1e3),t(d,e)}else{d.setUTCFullYear(c[1],c[3]?c[3]-1:0,c[5]||1),d.setUTCHours(c[7]||0,c[8]||0,c[10]||0,c[12]?Number("0."+c[12])*1e3:0);if(c[14]){var f=Number(c[16])*60+(c[18]?Number(c[18]):0);f*=c[15]=="-"?1:-1,d=new Date(+d+f*60*1e3)}}return d}function D(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();var b=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(b){var c=parseInt(b[1],10);return b[3]&&(c%=12,b[3].toLowerCase().charAt(0)=="p"&&(c+=12)),c*60+(b[2]?parseInt(b[2],10):0)}}function E(a,b,c){return F(a,null,b,c)}function F(a,b,d,e){e=e||c;var f=a,g=b,h,i=d.length,j,k,l,m="";for(h=0;h<i;h++){j=d.charAt(h);if(j=="'"){for(k=h+1;k<i;k++)if(d.charAt(k)=="'"){f&&(k==h+1?m+="'":m+=d.substring(h+1,k),h=k);break}}else if(j=="("){for(k=h+1;k<i;k++)if(d.charAt(k)==")"){var n=E(f,d.substring(h+1,k),e);parseInt(n.replace(/\D/,""),10)&&(m+=n),h=k;break}}else if(j=="["){for(k=h+1;k<i;k++)if(d.charAt(k)=="]"){var o=d.substring(h+1,k),n=E(f,o,e);n!=E(g,o,e)&&(m+=n),h=k;break}}else if(j=="{")f=b,g=a;else if(j=="}")f=a,g=b;else{for(k=i;k>h;k--)if(l=G[d.substring(h,k)]){f&&(m+=l(f,e)),h=k-1;break}k==h&&f&&(m+=j)}}return m}function H(a){return a.end?I(a.end,a.allDay):s(w(a.start),1)}function I(a,b){return a=w(a),b||a.getHours()||a.getMinutes()?s(a,1):v(a)}function J(a,b){return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function K(a,b){return a.end>b.start&&a.start<b.end}function L(a,b,c,d){var e=[],f,g=a.length,h,i,j,k,l,m,n;for(f=0;f<g;f++)h=a[f],i=h.start,j=b[f],j>c&&i<d&&(i<c?(k=w(c),m=!1):(k=i,m=!0),j>d?(l=w(d),n=!1):(l=j,n=!0),e.push({event:h,start:k,end:l,isStart:m,isEnd:n,msLength:l-k}));return e.sort(J)}function M(a){var b=[],c,d=a.length,e,f,g,h;for(c=0;c<d;c++){e=a[c],f=0;for(;;){g=!1;if(b[f])for(h=0;h<b[f].length;h++)if(K(b[f][h],e)){g=!0;break}if(!g)break;f++}b[f]?b[f].push(e):b[f]=[e]}return b}function N(c,d,e){c.unbind("mouseover").mouseover(function(c){var f=c.target,g,h,i;while(f!=this)g=f,f=f.parentNode;(h=g._fci)!==b&&(g._fci=b,i=d[h],e(i.event,i.element,i),a(c.target).trigger(c)),c.stopPropagation()})}function O(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.width(Math.max(0,c-Q(f,d)))}function P(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.height(Math.max(0,c-U(f,d)))}function Q(a,b){return R(a)+T(a)+(b?S(a):0)}function R(b){return(parseFloat(a.curCSS(b[0],"paddingLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingRight",!0))||0)}function S(b){return(parseFloat(a.curCSS(b[0],"marginLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"marginRight",!0))||0)}function T(b){return(parseFloat(a.curCSS(b[0],"borderLeftWidth",!0))||0)+(parseFloat(a.curCSS(b[0],"borderRightWidth",!0))||0)}function U(a,b){return V(a)+X(a)+(b?W(a):0)}function V(b){return(parseFloat(a.curCSS(b[0],"paddingTop",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingBottom",!0))||0)}function W(b){return(parseFloat(a.curCSS(b[0],"marginTop",!0))||0)+(parseFloat(a.curCSS(b[0],"marginBottom",!0))||0)}function X(b){return(parseFloat(a.curCSS(b[0],"borderTopWidth",!0))||0)+(parseFloat(a.curCSS(b[0],"borderBottomWidth",!0))||0)}function Y(a,b){b=typeof b=="number"?b+"px":b,a.each(function(a,c){c.style.cssText+=";min-height:"+b+";_height:"+b})}function Z(){}function $(a,b){return a-b}function _(a){return Math.max.apply(Math,a)}function ab(a){return(a<10?"0":"")+a}function bb(a,c){if(a[c]!==b)return a[c];var d=c.split(/(?=[A-Z])/),e=d.length-1,f;for(;e>=0;e--){f=a[d[e].toLowerCase()];if(f!==b)return f}return a[""]}function cb(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function db(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function eb(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function fb(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function gb(a,b){a.each(function(a,c){c.className=c.className.replace(/^fc-\w*/,"fc-"+m[b.getDay()])})}function hb(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f,h=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,i=a.textColor||c.textColor||b("eventTextColor"),j=[];return g&&j.push("background-color:"+g),h&&j.push("border-color:"+h),i&&j.push("color:"+i),j.join(";")}function ib(b,c,d){a.isFunction(b)&&(b=[b]);if(b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function jb(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==b)return arguments[a]}function kb(a,b){function g(a,b){b&&(r(a,b),a.setDate(1));var g=w(a,!0);g.setDate(1);var h=r(w(g),1),i=w(g),j=w(h),k=d("firstDay"),l=d("weekends")?0:1;l&&(y(i),y(j,-1,!0)),s(i,-((i.getDay()-Math.max(k,l)+7)%7)),s(j,(7-j.getDay()+Math.max(k,l))%7);var m=Math.round((j-i)/(n*7));d("weekMode")=="fixed"&&(s(j,(6-m)*7),m=6),c.title=f(g,d("titleFormat")),c.start=g,c.end=h,c.visStart=i,c.visEnd=j,e(6,m,l?5:7,!0)}var c=this;c.render=g,nb.call(c,a,b,"month");var d=c.opt,e=c.renderBasic,f=b.formatDate}function lb(a,b){function g(a,b){b&&s(a,b*7);var g=s(w(a),-((a.getDay()-d("firstDay")+7)%7)),h=s(w(g),7),i=w(g),j=w(h),k=d("weekends");k||(y(i),y(j,-1,!0)),c.title=f(i,s(w(j),-1),d("titleFormat")),c.start=g,c.end=h,c.visStart=i,c.visEnd=j,e(1,1,k?7:5,!1)}var c=this;c.render=g,nb.call(c,a,b,"basicWeek");var d=c.opt,e=c.renderBasic,f=b.formatDates}function mb(a,b){function g(a,b){b&&(s(a,b),d("weekends")||y(a,b<0?-1:1)),c.title=f(a,d("titleFormat")),c.start=c.visStart=w(a,!0),c.end=c.visEnd=s(w(c.start),1),e(1,1,1,!1)}var c=this;c.render=g,nb.call(c,a,b,"basicDay");var d=c.opt,e=c.renderBasic,f=b.formatDate}function nb(b,c,d){function N(a,b,c,d){B=b,C=c,P();var e=!o;e?Q(a,d):h(),R(e)}function P(){G=f("isRTL"),G?(H=-1,I=C-1):(H=1,I=0),J=f("firstDay"),K=f("weekends")?0:1,L=f("theme")?"ui":"fc",M=f("columnFormat")}function Q(c,d){var e,f=L+"-widget-header",g=L+"-widget-content",h,i,j;e="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(h=0;h<C;h++)e+="<th class='fc- "+f+"'/>";e+="</tr></thead><tbody>";for(h=0;h<c;h++){e+="<tr class='fc-week"+h+"'>";for(i=0;i<C;i++)e+="<td class='fc- "+g+" fc-day"+(h*C+i)+"'>"+"<div>"+(d?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";e+="</tr>"}e+="</tbody></table>",j=a(e).appendTo(b),m=j.find("thead"),n=m.find("th"),o=j.find("tbody"),p=o.find("tr"),q=o.find("td"),r=q.filter(":first-child"),t=p.eq(0).find("div.fc-day-content div"),fb(m.add(m.find("tr"))),fb(p),p.eq(0).addClass("fc-first"),V(q),u=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}function R(b){var c=b||B==1,d=e.start.getMonth(),f=v(new Date),g,h,i;c&&n.each(function(b,c){g=a(c),h=nb(b),g.html(l(h,M)),gb(g,h)}),q.each(function(b,e){g=a(e),h=nb(b),h.getMonth()==d?g.removeClass("fc-other-month"):g.addClass("fc-other-month"),+h==+f?g.addClass(L+"-state-highlight fc-today"):g.removeClass(L+"-state-highlight fc-today"),g.find("div.fc-day-number").text(h.getDate()),c&&gb(g,h)}),p.each(function(b,c){i=a(c),b<B?(i.show(),b==B-1?i.addClass("fc-last"):i.removeClass("fc-last")):i.hide()})}function S(b){y=b;var c=y-m.height(),d,e,g;f("weekMode")=="variable"?d=e=Math.floor(c/(B==1?2:6)):(d=Math.floor(c/B),e=c-d*(B-1)),r.each(function(b,c){b<B&&(g=a(c),Y(g.find("> div"),(b==B-1?e:d)-U(g)))})}function T(a){x=a,F.clear(),A=Math.floor(x/C),O(n.slice(0,-1),A)}function V(a){a.click(W).mousedown(k)}function W(a){if(!f("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]),c=nb(b);g("dayClick",this,c,!0,a)}}function X(a,b,c){c&&D.build();var d=w(e.visStart),f=s(w(d),C);for(var g=0;g<B;g++){var h=new Date(Math.max(d,a)),i=new Date(Math.min(f,b));if(h<i){var j,k;G?(j=z(i,d)*H+I+1,k=z(h,d)*H+I+1):(j=z(h,d),k=z(i,d)),V(Z(g,j,g,k-1))}s(d,7),s(f,7)}}function Z(a,c,d,e){var f=D.rect(a,c,d,e,b);return i(f,b)}function $(a,b){return w(a)}function _(a,b,c){X(a,s(w(b),1),!0)}function ab(){j()}function bb(a,b,c){var d=kb(a),e=q[d.row*C+d.col];g("dayClick",e,a,b,c)}function cb(a,b,c){E.start(function(a){j(),a&&Z(a.row,a.col,a.row,a.col)},b)}function db(a,b,c){var d=E.stop();j();if(d){var e=lb(d);g("drop",a,e,!0,b,c)}}function hb(a){return w(a.start)}function ib(a){return F.left(a)}function jb(a){return F.right(a)}function kb(a){return{row:Math.floor(z(a,e.visStart)/7),col:pb(a.getDay())}}function lb(a){return mb(a.row,a.col)}function mb(a,b){return s(w(e.visStart),a*7+b*H+I)}function nb(a){return mb(Math.floor(a/C),a%C)}function pb(a){return(a-Math.max(J,K)+C)%C*H+I}function qb(a){return p.eq(a)}function rb(a){return{left:0,right:x}}var e=this;e.renderBasic=N,e.setHeight=S,e.setWidth=T,e.renderDayOverlay=X,e.defaultSelectionEnd=$,e.renderSelection=_,e.clearSelection=ab,e.reportDayClick=bb,e.dragStart=cb,e.dragStop=db,e.defaultEventEnd=hb,e.getHoverListener=function(){return E},e.colContentLeft=ib,e.colContentRight=jb,e.dayOfWeekCol=pb,e.dateCell=kb,e.cellDate=lb,e.cellIsAllDay=function(){return!0},e.allDayRow=qb,e.allDayBounds=rb,e.getRowCnt=function(){return B},e.getColCnt=function(){return C},e.getColWidth=function(){return A},e.getDaySegmentContainer=function(){return u},ub.call(e,b,c,d),xb.call(e),wb.call(e),ob.call(e);var f=e.opt,g=e.trigger,h=e.clearEvents,i=e.renderOverlay,j=e.clearOverlays,k=e.daySelectionMousedown,l=c.formatDate,m,n,o,p,q,r,t,u,x,y,A,B,C,D,E,F,G,H,I,J,K,L,M;eb(b.addClass("fc-grid")),D=new yb(function(b,c){var d,e,f;n.each(function(b,g){d=a(g),e=d.offset().left,b&&(f[1]=e),f=[e],c[b]=f}),f[1]=e+d.outerWidth(),p.each(function(c,g){c<B&&(d=a(g),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)}),f[1]=e+d.outerHeight()}),E=new zb(D),F=new Bb(function(a){return t.eq(a)})}function ob(){function v(a,b){g(a),t(y(a),b)}function x(){h(),m().empty()}function y(c){var d=q(),e=r(),f=w(b.visStart),g=s(w(f),e),h=a.map(c,H),i,j,k,l,m,n,o=[];for(i=0;i<d;i++){j=M(L(c,h,f,g));for(k=0;k<j.length;k++){l=j[k];for(m=0;m<l.length;m++)n=l[m],n.row=i,n.level=k,o.push(n)}s(f,7),s(g,7)}return o}function z(a,b,c){e(a)&&A(a,b),c.isEnd&&f(a)&&u(a,b,c),i(a,b)}function A(a,b){var e=n(),f;b.draggable({zIndex:9,delay:50,opacity:c("dragOpacity"),revertDuration:c("dragRevertDuration"),start:function(g,h){d("eventDragStart",b,a,g,h),k(a,b),e.start(function(d,e,g,h){b.draggable("option","revert",!d||!g&&!h),p(),d?(f=g*7+h*(c("isRTL")?-1:1),o(s(w(a.start),f),s(H(a),f))):f=0},g,"drag")},stop:function(c,g){e.stop(),p(),d("eventDragStop",b,a,c,g),f?l(this,a,f,0,a.allDay,c,g):(b.css("filter",""),j(a,b))}})}var b=this;b.renderEvents=v,b.compileDaySegs=y,b.clearEvents=x,b.bindDaySeg=z,vb.call(b);var c=b.opt,d=b.trigger,e=b.isEventDraggable,f=b.isEventResizable,g=b.reportEvents,h=b.reportEventClear,i=b.eventElementHandlers,j=b.showEvents,k=b.hideEvents,l=b.eventDrop,m=b.getDaySegmentContainer,n=b.getHoverListener,o=b.renderDayOverlay,p=b.clearOverlays,q=b.getRowCnt,r=b.getColCnt,t=b.renderDaySegs,u=b.resizableDayEvent}function pb(a,b){function g(a,b){b&&s(a,b*7);var g=s(w(a),-((a.getDay()-d("firstDay")+7)%7)),h=s(w(g),7),i=w(g),j=w(h),k=d("weekends");k||(y(i),y(j,-1,!0)),c.title=f(i,s(w(j),-1),d("titleFormat")),c.start=g,c.end=h,c.visStart=i,c.visEnd=j,e(k?7:5)}var c=this;c.render=g,rb.call(c,a,b,"agendaWeek");var d=c.opt,e=c.renderAgenda,f=b.formatDates}function qb(a,b){function g(a,b){b&&(s(a,b),d("weekends")||y(a,b<0?-1:1));var g=w(a,!0),h=s(w(g),1);c.title=f(a,d("titleFormat")),c.start=c.visStart=g,c.end=c.visEnd=h,e(1)}var c=this;c.render=g,rb.call(c,a,b,"agendaDay");var d=c.opt,e=c.renderAgenda,f=b.formatDate}function rb(c,d,e){function tb(a){ab=a,vb(),q?i():Ab(),Cb()}function vb(){jb=g("theme")?"ui":"fc",lb=g("weekends")?0:1,kb=g("firstDay"),(mb=g("isRTL"))?(nb=-1,ob=ab-1):(nb=1,ob=0),pb=D(g("minTime")),qb=D(g("maxTime")),rb=g("columnFormat")}function Ab(){var b=jb+"-widget-header",d=jb+"-widget-content",e,f,h,i,j,k=g("slotMinutes")%15==0;e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ab;f++)e+="<th class='fc- fc-col"+f+" "+b+"'/>";e+="<th class='fc-agenda-gutter "+b+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ab;f++)e+="<td class='fc- fc-col"+f+" "+d+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";e+="<td class='fc-agenda-gutter "+d+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",q=a(e).appendTo(c),r=q.find("thead"),t=r.find("th").slice(1,-1),y=q.find("tbody"),A=y.find("td").slice(0,-1),B=A.find("div.fc-day-content div"),C=A.eq(0),E=C.find("> div"),fb(r.add(r.find("tr"))),fb(y.add(y.find("tr"))),Q=r.find("th:first"),R=q.find(".fc-agenda-gutter"),F=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c),g("allDaySlot")?(G=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(F),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+g("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+b+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",H=a(e).appendTo(F),I=H.find("tr"),Ib(I.find("td")),Q=Q.add(H.find("th:first")),R=R.add(H.find("th.fc-agenda-gutter")),F.append("<div class='fc-agenda-divider "+b+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):G=a([]),J=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(F),K=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(J),L=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(K),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",h=x(),i=u(w(h),qb),u(h,pb),bb=0;for(f=0;h<i;f++)j=h.getMinutes(),e+="<tr class='fc-slot"+f+" "+(j?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+b+"'>"+(!k||!j?p(h,g("axisFormat")):"&nbsp;")+"</th>"+"<td class='"+d+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(h,g("slotMinutes")),bb++;e+="</tbody></table>",M=a(e).appendTo(K),N=M.find("div:first"),Jb(M.find("td")),Q=Q.add(M.find("th:first"))}function Cb(){var a,b,c,d,e=v(new Date);for(a=0;a<ab;a++)d=Sb(a),b=t.eq(a),b.html(p(d,rb)),c=A.eq(a),+d==+e?c.addClass(jb+"-state-highlight fc-today"):c.removeClass(jb+"-state-highlight fc-today"),gb(b.add(c),d)}function Db(a,c){a===b&&(a=V),V=a,ib={};var d=y.position().top,e=J.position().top,f=Math.min(a-d,M.height()+e+1);E.height(f-U(C)),F.css("top",d),J.height(f-e-1),Z=N.height()+1,c&&Fb()}function Eb(b){T=b,hb.clear(),W=0,O(Q.width("").each(function(b,c){W=Math.max(W,a(c).outerWidth())}),W);var c=J[0].clientWidth;Y=J.width()-c,Y?(O(R,Y),R.show().prev().removeClass("fc-last")):R.hide().prev().addClass("fc-last"),X=Math.floor((c-W)/ab),O(t.slice(0,-1),X)}function Fb(){function d(){J.scrollTop(c)}var a=x(),b=w(a);b.setHours(g("firstHour"));var c=Vb(a,b)+1;d(),setTimeout(d,0)}function Gb(){_=J.scrollTop()}function Hb(){J.scrollTop(_)}function Ib(a){a.click(Kb).mousedown(n)}function Jb(a){a.click(Kb).mousedown(bc)}function Kb(a){if(!g("selectable")){var b=Math.min(ab-1,Math.floor((a.pageX-q.offset().left-W)/X)),c=Sb(b),d=this.parentNode.className.match(/fc-slot(\d+)/);if(d){var e=parseInt(d[1])*g("slotMinutes"),f=Math.floor(e/60);c.setHours(f),c.setMinutes(e%60+pb),h("dayClick",A[b],c,!1,a)}else h("dayClick",A[b],c,!0,a)}}function Lb(a,b,c){c&&cb.build();var d=w(f.visStart),e,g;mb?(e=z(b,d)*nb+ob+1,g=z(a,d)*nb+ob+1):(e=z(a,d),g=z(b,d)),e=Math.max(0,e),g=Math.min(ab,g),e<g&&Ib(Mb(0,e,0,g-1))}function Mb(a,b,c,d){var e=cb.rect(a,b,c,d,F);return j(e,F)}function Nb(a,b){var c=w(f.visStart),d=s(w(c),1);for(var e=0;e<ab;e++){var g=new Date(Math.max(c,a)),h=new Date(Math.min(d,b));if(g<h){var i=e*nb+ob,k=cb.rect(0,i,0,i,K),l=Vb(c,g),m=Vb(c,h);k.top=l,k.height=m-l,Jb(j(k,K))}s(c,1),s(d,1)}}function Ob(a){return hb.left(a)}function Pb(a){return hb.right(a)}function Qb(a){return{row:Math.floor(z(a,f.visStart)/7),col:Ub(a.getDay())}}function Rb(a){var b=Sb(a.col),c=a.row;return g("allDaySlot")&&c--,c>=0&&u(b,pb+c*g("slotMinutes")),b}function Sb(a){return s(w(f.visStart),a*nb+ob)}function Tb(a){return g("allDaySlot")&&!a.row}function Ub(a){return(a-Math.max(kb,lb)+ab)%ab*nb+ob}function Vb(a,c){a=w(a,!0);if(c<u(w(a),pb))return 0;if(c>=u(w(a),qb))return M.height();var d=g("slotMinutes"),e=c.getHours()*60+c.getMinutes()-pb,f=Math.floor(e/d),h=ib[f];return h===b&&(h=ib[f]=M.find("tr:eq("+f+") td div")[0].offsetTop),Math.max(0,Math.round(h-1+Z*(e%d/d)))}function Wb(){return{left:W,right:T-Y}}function Xb(a){return I}function Yb(a){var b=w(a.start);return a.allDay?b:u(b,g("defaultEventMinutes"))}function Zb(a,b){return b?w(a):u(w(a),g("slotMinutes"))}function $b(a,b,c){c?g("allDaySlot")&&Lb(a,s(w(b),1),!0):_b(a,b)}function _b(b,c){var d=g("selectHelper");cb.build();if(d){var e=z(b,f.visStart)*nb+ob;if(e>=0&&e<ab){var h=cb.rect(0,e,0,e,K),i=Vb(b,b),j=Vb(b,c);if(j>i){h.top=i,h.height=j-i,h.left+=2,h.width-=5;if(a.isFunction(d)){var k=d(b,c);k&&(h.position="absolute",h.zIndex=8,S=a(k).css(h).appendTo(K))}else h.isStart=!0,h.isEnd=!0,S=a(o({title:"",start:b,end:c,className:["fc-select-helper"],editable:!1},h)),S.css("opacity",g("dragOpacity"));S&&(Jb(S),K.append(S),O(S,h.width,!0),P(S,h.height,!0))}}}else Nb(b,c)}function ac(){k(),S&&(S.remove(),S=null)}function bc(b){if(b.which==1&&g("selectable")){m(b);var c;db.start(function(a,b){ac();if(a&&a.col==b.col&&!Tb(a)){var d=Rb(b),e=Rb(a);c=[d,u(w(d),g("slotMinutes")),e,u(w(e),g("slotMinutes"))].sort($),_b(c[0],c[3])}else c=null},b),a(document).one("mouseup",function(a){db.stop(),c&&(+c[0]==+c[1]&&cc(c[0],!1,a),l(c[0],c[3],!1,a))})}}function cc(a,b,c){h("dayClick",A[Ub(a.getDay())],a,b,c)}function dc(a,b,c){db.start(function(a){k();if(a)if(Tb(a))Mb(a.row,a.col,a.row,a.col);else{var b=Rb(a),c=u(w(b),g("defaultEventMinutes"));Nb(b,c)}},b)}function ec(a,b,c){var d=db.stop();k(),d&&h("drop",a,Rb(d),Tb(d),b,c)}var f=this;f.renderAgenda=tb,f.setWidth=Eb,f.setHeight=Db,f.beforeHide=Gb,f.afterShow=Hb,f.defaultEventEnd=Yb,f.timePosition=Vb,f.dayOfWeekCol=Ub,f.dateCell=Qb,f.cellDate=Rb,f.cellIsAllDay=Tb,f.allDayRow=Xb,f.allDayBounds=Wb,f.getHoverListener=function(){return db},f.colContentLeft=Ob,f.colContentRight=Pb,f.getDaySegmentContainer=function(){return G},f.getSlotSegmentContainer=function(){return L},f.getMinMinute=function(){return pb},f.getMaxMinute=function(){return qb},f.getBodyContent=function(){return K},f.getRowCnt=function(){return 1},f.getColCnt=function(){return ab},f.getColWidth=function(){return X},f.getSlotHeight=function(){return Z},f.defaultSelectionEnd=Zb,f.renderDayOverlay=Lb,f.renderSelection=$b,f.clearSelection=ac,f.reportDayClick=cc,f.dragStart=dc,f.dragStop=ec,ub.call(f,c,d,e),xb.call(f),wb.call(f),sb.call(f);var g=f.opt,h=f.trigger,i=f.clearEvents,j=f.renderOverlay,k=f.clearOverlays,l=f.reportSelection,m=f.unselect,n=f.daySelectionMousedown,o=f.slotSegHtml,p=d.formatDate,q,r,t,y,A,B,C,E,F,G,H,I,J,K,L,M,N,Q,R,S,T,V,W,X,Y,Z,_,ab,bb,cb,db,hb,ib={},jb,kb,lb,mb,nb,ob,pb,qb,rb;eb(c.addClass("fc-agenda")),cb=new yb(function(b,c){function k(a){return Math.max(i,Math.min(j,a))}var d,e,f;t.each(function(b,g){d=a(g),e=d.offset().left,b&&(f[1]=e),f=[e],c[b]=f}),f[1]=e+d.outerWidth(),g("allDaySlot")&&(d=I,e=d.offset().top,b[0]=[e,e+d.outerHeight()]);var h=K.offset().top,i=J.offset().top,j=i+J.outerHeight();for(var l=0;l<bb;l++)b.push([k(h+Z*l),k(h+Z*(l+1))])}),db=new zb(cb),hb=new Bb(function(a){return B.eq(a)})}function sb(){function V(a,b){i(a);var c,e=a.length,f=[],g=[];for(c=0;c<e;c++)a[c].allDay?f.push(a[c]):g.push(a[c]);d("allDaySlot")&&(y(X(f),b),l()),$(Y(g),b)}function W(){j(),m().empty(),n().empty()}function X(b){var d=M(L(b,a.map(b,H),c.visStart,c.visEnd)),e,f=d.length,g,h,i,j=[];for(e=0;e<f;e++){g=d[e];for(h=0;h<g.length;h++)i=g[h],i.row=0,i.level=e,j.push(i)}return j}function Y(b){var d=A(),e=r(),f=q(),g=u(w(c.visStart),e),h=a.map(b,Z),i,j,k,l,m,n,o=[];for(i=0;i<d;i++){j=M(L(b,h,g,u(w(g),f-e))),tb(j);for(k=0;k<j.length;k++){l=j[k];for(m=0;m<l.length;m++)n=l[m],n.col=i,n.level=k,o.push(n)}s(g,1,!0)}return o}function Z(a){return a.end?w(a.end):u(w(a.start),d("defaultEventMinutes"))}function $(c,f){var g,h=c.length,i,j,k,l,m,o,p,q,r,s,u,w,y="",z,B,C,D={},F={},G,H,I,J,K=n(),L,M,O,P=A();(L=d("isRTL"))?(M=-1,O=P-1):(M=1,O=0);for(g=0;g<h;g++)i=c[g],j=i.event,l=t(i.start,i.start),m=t(i.start,i.end),o=i.col,p=i.level,q=i.forward||0,r=v(o*M+O),s=x(o*M+O)-r,s=Math.min(s-6,s*.95),p?u=s/(p+q+1):q?u=(s/(q+1)-6)*2:u=s,w=r+s/(p+q+1)*p*M+(L?s-u:0),i.top=l,i.left=w,i.outerWidth=u,i.outerHeight=m-l,y+=_(j,i);K[0].innerHTML=y,z=K.children();for(g=0;g<h;g++)i=c[g],j=i.event,B=a(z[g]),C=e("eventRender",j,j,B),C===!1?B.remove():(C&&C!==!0&&(B.remove(),B=a(C).css({position:"absolute",top:i.top,left:i.left}).appendTo(K)),i.element=B,j._id===f?bb(j,B,i):B[0]._fci=g,E(j,B));N(K,c,bb);for(g=0;g<h;g++){i=c[g];if(B=i.element)H=D[G=i.key=db(B[0])],i.vsides=H===b?D[G]=U(B,!0):H,H=F[G],i.hsides=H===b?F[G]=Q(B,!0):H,I=B.find("div.fc-event-content"),I.length&&(i.contentTop=I[0].offsetTop)}for(g=0;g<h;g++){i=c[g];if(B=i.element)B[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px",J=Math.max(0,i.outerHeight-i.vsides),B[0].style.height=J+"px",j=i.event,i.contentTop!==b&&J-i.contentTop<10&&(B.find("div.fc-event-time").text(S(j.start,d("timeFormat"))+" - "+j.title),B.find("div.fc-event-title").remove()),e("eventAfterRender",j,j,B)}}function _(a,b){var c="<",e=a.url,h=hb(a,d),i=h?" style='"+h+"'":"",j=["fc-event","fc-event-skin","fc-event-vert"];return f(a)&&j.push("fc-event-draggable"),b.isStart&&j.push("fc-corner-top"),b.isEnd&&j.push("fc-corner-bottom"),j=j.concat(a.className),a.source&&(j=j.concat(a.source.className||[])),e?c+="a href='"+cb(a.url)+"'":c+="div",c+=" class='"+j.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+h+"'"+">"+"<div class='fc-event-inner fc-event-skin'"+i+">"+"<div class='fc-event-head fc-event-skin'"+i+">"+"<div class='fc-event-time'>"+cb(T(a.start,a.end,d("timeFormat")))+"</div>"+"</div>"+"<div class='fc-event-content'>"+"<div class='fc-event-title'>"+cb(a.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>"+"</div>",b.isEnd&&g(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),c+="</"+(e?"a":"div")+">",c}function ab(a,b,c){f(a)&&eb(a,b,c.isStart),c.isEnd&&g(a)&&z(a,b,c),k(a,b)}function bb(a,b,c){var d=b.find("div.fc-event-time");f(a)&&fb(a,b,d),c.isEnd&&g(a)&&gb(a,b,d),k(a,b)}function eb(a,b,c){function q(){h||(b.width(f).height("").draggable("option","grid",null),h=!0)}var f,g,h=!0,i,j=d("isRTL")?-1:1,k=o(),l=B(),m=C(),n=r();b.draggable({zIndex:9,opacity:d("dragOpacity","month"),revertDuration:d("dragRevertDuration"),start:function(n,o){e("eventDragStart",b,a,n,o),G(a,b),f=b.width(),k.start(function(e,f,k,n){O(),e?(g=!1,i=n*j,e.row?c?h&&(b.width(l-10),P(b,m*Math.round((a.end?(a.end-a.start)/p:d("defaultEventMinutes"))/d("slotMinutes"))),b.draggable("option","grid",[l,1]),h=!1):g=!0:(K(s(w(a.start),i),s(H(a),i)),q()),g=g||h&&!i):(q(),g=!0),b.draggable("option","revert",g)},n,"drag")},stop:function(c,f){k.stop(),O(),e("eventDragStop",b,a,c,f);if(g)q(),b.css("filter",""),F(a,b);else{var j=0;h||(j=Math.round((b.offset().top-D().offset().top)/m)*d("slotMinutes")+n-(a.start.getHours()*60+a.start.getMinutes())),I(this,a,i,j,h,c,f)}}})}function fb(a,b,c){function q(b){var e=u(w(a.start),b),f;a.end&&(f=u(w(a.end),b)),c.text(T(e,f,d("timeFormat")))}function r(){g&&(c.css("display",""),b.draggable("option","grid",[n,p]),g=!1)}var f,g=!1,h,i,j,k=d("isRTL")?-1:1,l=o(),m=A(),n=B(),p=C();b.draggable({zIndex:9,scroll:!1,grid:[n,p],axis:m==1?"y":!1,opacity:d("dragOpacity"),revertDuration:d("dragRevertDuration"),start:function(m,n){e("eventDragStart",b,a,m,n),G(a,b),f=b.position(),i=j=0,l.start(function(e,f,i,j){b.draggable("option","revert",!e),O(),e&&(h=j*k,d("allDaySlot")&&!e.row?(g||(g=!0,c.hide(),b.draggable("option","grid",null)),K(s(w(a.start),h),s(H(a),h))):r())},m,"drag")},drag:function(a,b){i=Math.round((b.position.top-f.top)/p)*d("slotMinutes"),i!=j&&(g||q(i),j=i)},stop:function(c,d){var j=l.stop();O(),e("eventDragStop",b,a,c,d),j&&(h||i||g)?I(this,a,h,g?0:i,g,c,d):(r(),b.css("filter",""),b.css(f),q(0),F(a,b))}})}function gb(a,b,c){var f,g,i=C();b.resizable({handles:{s:"div.ui-resizable-s"},grid:i,start:function(c,d){f=g=0,G(a,b),b.css("z-index",9),e("eventResizeStart",this,a,c,d)},resize:function(e,j){f=Math.round((Math.max(i,b.height())-j.originalSize.height)/i),f!=g&&(c.text(T(a.start,!f&&!a.end?null:u(h(a),d("slotMinutes")*f),d("timeFormat"))),g=f)},stop:function(c,g){e("eventResizeStop",this,a,c,g),f?J(this,a,0,d("slotMinutes")*f,c,g):(b.css("z-index",8),F(a,b))}})}var c=this;c.renderEvents=V,c.compileDaySegs=X,c.clearEvents=W,c.slotSegHtml=_,c.bindDaySeg=ab,vb.call(c);var d=c.opt,e=c.trigger,f=c.isEventDraggable,g=c.isEventResizable,h=c.eventEnd,i=c.reportEvents,j=c.reportEventClear,k=c.eventElementHandlers,l=c.setHeight,m=c.getDaySegmentContainer,n=c.getSlotSegmentContainer,o=c.getHoverListener,q=c.getMaxMinute,r=c.getMinMinute,t=c.timePosition,v=c.colContentLeft,x=c.colContentRight,y=c.renderDaySegs,z=c.resizableDayEvent,A=c.getColCnt,B=c.getColWidth,C=c.getSlotHeight,D=c.getBodyContent,E=c.reportEventElement,F=c.showEvents,G=c.hideEvents,I=c.eventDrop,J=c.eventResize,K=c.renderDayOverlay,O=c.clearOverlays,R=c.calendar,S=R.formatDate,T=R.formatDates}function tb(a){var b,c,d,e,f,g;for(b=a.length-1;b>0;b--){e=a[b];for(c=0;c<e.length;c++){f=e[c];for(d=0;d<a[b-1].length;d++)g=a[b-1][d],K(f,g)&&(g.forward=Math.max(g.forward||0,(f.forward||0)+1))}}}function ub(a,c,d){function m(a,b){var c=l[a];return typeof c=="object"?bb(c,b||d):c}function n(a,b){return c.trigger.apply(c,[a,b||e].concat(Array.prototype.slice.call(arguments,2),[e]))}function o(a){return q(a)&&!m("disableDragging")}function p(a){return q(a)&&!m("disableResizing")}function q(a){return jb(a.editable,(a.source||{}).editable,m("editable"))}function r(a){i={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],i[d._id]?i[d._id].push(d):i[d._id]=[d]}function t(a){return a.end?w(a.end):f(a)}function v(a,b){j.push(b),k[a._id]?k[a._id].push(b):k[a._id]=[b]}function x(){j=[],k={}}function y(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return n("eventClick",this,a,c)}).hover(function(b){n("eventMouseover",this,a,b)},function(b){n("eventMouseout",this,a,b)})}function z(a,b){B(a,b,"show")}function A(a,b){B(a,b,"hide")}function B(a,b,c){var d=k[a._id],e,f=d.length;for(e=0;e<f;e++)(!b||d[e][0]!=b[0])&&d[e][c]()}function C(a,b,c,d,e,f,g){var j=b.allDay,k=b._id;E(i[k],c,d,e),n("eventDrop",a,b,c,d,e,function(){E(i[k],-c,-d,j),h(k)},f,g),h(k)}function D(a,b,c,d,e,f){var g=b._id;F(i[g],c,d),n("eventResize",a,b,c,d,function(){F(i[g],-c,-d),h(g)},e,f),h(g)}function E(a,c,d,e){d=d||0;for(var f,h=a.length,i=0;i<h;i++)f=a[i],e!==b&&(f.allDay=e),u(s(f.start,c,!0),d),f.end&&(f.end=u(s(f.end,c,!0),d)),g(f,l)}function F(a,b,c){c=c||0;for(var d,e=a.length,f=0;f<e;f++)d=a[f],d.end=u(s(t(d),b,!0),c),g(d,l)}var e=this;e.element=a,e.calendar=c,e.name=d,e.opt=m,e.trigger=n,e.isEventDraggable=o,e.isEventResizable=p,e.reportEvents=r,e.eventEnd=t,e.reportEventElement=v,e.reportEventClear=x,e.eventElementHandlers=y,e.showEvents=z,e.hideEvents=A,e.eventDrop=C,e.eventResize=D;var f=e.defaultEventEnd,g=c.normalizeEvent,h=c.reportEventChange,i={},j=[],k={},l=c.options}function vb(){function E(a,b){var c=y(),d,e=m(),f=n(),g=0,h,i,j,k,l=a.length,o,p,q;c[0].innerHTML=G(a),H(a,c.children()),I(a),J(a,c,b),K(a),L(a),M(a),d=O();for(h=0;h<e;h++){i=0,j=[];for(k=0;k<f;k++)j[k]=0;while(g<l&&(o=a[g]).row==h){p=_(j.slice(o.startCol,o.endCol)),o.top=p,p+=o.outerHeight;for(q=o.startCol;q<o.endCol;q++)j[q]=p;g++}d[h].height(_(j))}R(a,P(d))}function F(b,c,d){var e=a("<div/>"),f,g=y(),h,i=b.length,j;e[0].innerHTML=G(b),f=e.children(),g.append(f),H(b,f),K(b),L(b),M(b),R(b,P(O())),f=[];for(h=0;h<i;h++)j=b[h].element,j&&(b[h].row===c&&j.css("top",d),f.push(j[0]));return a(f)}function G(a){var b=d("isRTL"),c,e=a.length,h,i,j,k,l=q(),m=l.left,n=l.right,o,p,s,v,w,x="";for(c=0;c<e;c++)h=a[c],i=h.event,k=["fc-event","fc-event-skin","fc-event-hori"],f(i)&&k.push("fc-event-draggable"),b?(h.isStart&&k.push("fc-corner-right"),h.isEnd&&k.push("fc-corner-left"),o=u(h.end.getDay()-1),p=u(h.start.getDay()),s=h.isEnd?r(o):m,v=h.isStart?t(p):n):(h.isStart&&k.push("fc-corner-left"),h.isEnd&&k.push("fc-corner-right"),o=u(h.start.getDay()),p=u(h.end.getDay()-1),s=h.isStart?r(o):m,v=h.isEnd?t(p):n),k=k.concat(i.className),i.source&&(k=k.concat(i.source.className||[])),j=i.url,w=hb(i,d),j?x+="<a href='"+cb(j)+"'":x+="<div",x+=" class='"+k.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+s+"px;"+w+"'"+">"+"<div"+" class='fc-event-inner fc-event-skin'"+(w?" style='"+w+"'":"")+">",!i.allDay&&h.isStart&&(x+="<span class='fc-event-time'>"+cb(A(i.start,i.end,d("timeFormat")))+"</span>"),x+="<span class='fc-event-title'>"+cb(i.title)+"</span>"+"</div>",h.isEnd&&g(i)&&(x+="<div class='ui-resizable-handle ui-resizable-"+(b?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),x+="</"+(j?"a":"div")+">",h.left=s,h.outerWidth=v-s,h.startCol=o,h.endCol=p+1;return x}function H(b,c){var d,f=b.length,g,h,i,j;for(d=0;d<f;d++)g=b[d],h=g.event,i=a(c[d]),j=e("eventRender",h,h,i),j===!1?i.remove():(j&&j!==!0&&(j=a(j).css({position:"absolute",left:g.left}),i.replaceWith(j),i=j),g.element=i)}function I(a){var b,c=a.length,d,e;for(b=0;b<c;b++)d=a[b],e=d.element,e&&i(d.event,e)}function J(a,b,c){var d,e=a.length,f,g,h;for(d=0;d<e;d++)f=a[d],g=f.element,g&&(h=f.event,h._id===c?z(h,g,f):g[0]._fci=d);N(b,a,z)}function K(a){var c,d=a.length,e,f,g,h,i={};for(c=0;c<d;c++)e=a[c],f=e.element,f&&(g=e.key=db(f[0]),h=i[g],h===b&&(h=i[g]=Q(f,!0)),e.hsides=h)}function L(a){var b,c=a.length,d,e;for(b=0;b<c;b++)d=a[b],e=d.element,e&&(e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px")}function M(a){var c,d=a.length,e,f,g,h,i={};for(c=0;c<d;c++)e=a[c],f=e.element,f&&(g=e.key,h=i[g],h===b&&(h=i[g]=W(f)),e.outerHeight=f[0].offsetHeight+h)}function O(){var a,b=m(),c=[];for(a=0;a<b;a++)c[a]=p(a).find("td:first div.fc-day-content > div");return c}function P(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function R(a,b){var c,d=a.length,f,g,h;for(c=0;c<d;c++)f=a[c],g=f.element,g&&(g[0].style.top=b[f.row]+(f.top||0)+"px",h=f.event,e("eventAfterRender",h,h,g))}function S(b,f,g){var i=d("isRTL"),o=i?"w":"e",p=f.find("div.ui-resizable-"+o),q=!1;eb(f),f.mousedown(function(a){a.preventDefault()}).click(function(a){q&&(a.preventDefault(),a.stopImmediatePropagation())}),p.mousedown(function(d){function I(c){e("eventResizeStop",this,b,c),a("body").css("cursor",""),p.stop(),C(),A&&l(this,b,A,0,c),setTimeout(function(){q=!1},0)}if(d.which!=1)return;q=!0;var p=c.getHoverListener(),r=m(),t=n(),u=i?-1:1,y=i?t-1:0,z=f.css("top"),A,E,G=a.extend({},b),H=v(b.start);D(),a("body").css("cursor",o+"-resize").one("mouseup",I),e("eventResizeStart",this,b,d),p.start(function(a,c){if(a){var d=Math.max(H.row,a.row),e=a.col;r==1&&(d=0),d==H.row&&(i?e=Math.min(H.col,e):e=Math.max(H.col,e)),A=d*7+e*u+y-(c.row*7+c.col*u+y);var f=s(h(b),A,!0);if(A){G.end=f;var l=E;E=F(x([G]),g.row,z),E.find("*").css("cursor",o+"-resize"),l&&l.remove(),k(b)}else E&&(j(b),E.remove(),E=null);C(),B(b.start,s(w(f),1))}},d)})}var c=this;c.renderDaySegs=E,c.resizableDayEvent=S;var d=c.opt,e=c.trigger,f=c.isEventDraggable,g=c.isEventResizable,h=c.eventEnd,i=c.reportEventElement,j=c.showEvents,k=c.hideEvents,l=c.eventResize,m=c.getRowCnt,n=c.getColCnt,o=c.getColWidth,p=c.allDayRow,q=c.allDayBounds,r=c.colContentLeft,t=c.colContentRight,u=c.dayOfWeekCol,v=c.dateCell,x=c.compileDaySegs,y=c.getDaySegmentContainer,z=c.bindDaySeg,A=c.calendar.formatDates,B=c.renderDayOverlay,C=c.clearOverlays,D=c.clearSelection}function wb(){function i(a,b,c){j(),b||(b=e(a,c)),f(a,b,c),k(a,b,c)}function j(a){h&&(h=!1,g(),d("unselect",null,a))}function k(a,b,c,e){h=!0,d("select",null,a,b,c,e)}function l(d){var e=b.cellDate,h=b.cellIsAllDay,i=b.getHoverListener(),l=b.reportDayClick;if(d.which==1&&c("selectable")){j(d);var m=this,n;i.start(function(a,b){g(),a&&h(a)?(n=[e(b),e(a)].sort($),f(n[0],n[1],!0)):n=null},d),a(document).one("mouseup",function(a){i.stop(),n&&(+n[0]==+n[1]&&l(n[0],!0,a),k(n[0],n[1],!0,a))})}}var b=this;b.select=i,b.unselect=j,b.reportSelection=k,b.daySelectionMousedown=l;var c=b.opt,d=b.trigger,e=b.defaultSelectionEnd,f=b.renderSelection,g=b.clearSelection,h=!1;c("selectable")&&c("unselectAuto")&&a(document).mousedown(function(b){var d=c("unselectCancel");if(d&&a(b.target).parents(d).length)return;j(b)})}function xb(){function e(b,e){var f=d.shift();return f||(f=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),f[0].parentNode!=e[0]&&f.appendTo(e),c.push(f.css(b).show()),f}function f(){var a;while(a=c.shift())d.push(a.hide().unbind())}var b=this;b.renderOverlay=e,b.clearOverlays=f;var c=[],d=[]}function yb(a){var b=this,c,d;b.build=function(){c=[],d=[],a(c,d)},b.cell=function(a,b){var e=c.length,f=d.length,g,h=-1,i=-1;for(g=0;g<e;g++)if(b>=c[g][0]&&b<c[g][1]){h=g;break}for(g=0;g<f;g++)if(a>=d[g][0]&&a<d[g][1]){i=g;break}return h>=0&&i>=0?{row:h,col:i}:null},b.rect=function(a,b,e,f,g){var h=g.offset();return{top:c[a][0]-h.top,left:d[b][0]-h.left,width:d[f][1]-d[b][0],height:c[e][1]-c[a][0]}}}function zb(b){function h(a){Ab(a);var c=b.cell(a.pageX,a.pageY);if(!c!=!g||c&&(c.row!=g.row||c.col!=g.col))c?(f||(f=c),e(c,f,c.row-f.row,c.col-f.col)):e(c,f),g=c}var c=this,d,e,f,g;c.start=function(c,i,j){e=c,f=g=null,b.build(),h(i),d=j||"mousemove",a(document).bind(d,h)},c.stop=function(){return a(document).unbind(d,h),g}}function Ab(a){a.pageX===b&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY)}function Bb(a){function g(b){return d[b]=d[b]||a(b)}var c=this,d={},e={},f={};c.left=function(a){return e[a]=e[a]===b?g(a).position().left:e[a]},c.right=function(a){return f[a]=f[a]===b?c.left(a)+g(a).width():f[a]},c.clear=function(){d={},e={},f={}}}var c={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},d={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},e=a.fullCalendar={version:"1.5.2"},f=e.views={};a.fn.fullCalendar=function(e){if(typeof e=="string"){var f=Array.prototype.slice.call(arguments,1),g;return this.each(function(){var c=a.data(this,"fullCalendar");if(c&&a.isFunction(c[e])){var d=c[e].apply(c,f);g===b&&(g=d),e=="destroy"&&a.removeData(this,"fullCalendar")}}),g!==b?g:this}var i=e.eventSources||[];return delete e.eventSources,e.events&&(i.push(e.events),delete e.events),e=a.extend(!0,{},c,e.isRTL||e.isRTL===b&&c.isRTL?d:{},e),this.each(function(b,c){var d=a(c),f=new h(d,e,i);d.data("fullCalendar",f),f.render()}),this},e.sourceNormalizers=[],e.sourceFetchers=[];var j={dataType:"json",cache:!1},k=1;e.addDays=s,e.cloneDate=w,e.parseDate=B,e.parseISO8601=C,e.parseTime=D,e.formatDate=E,e.formatDates=F;var m=["sun","mon","tue","wed","thu","fri","sat"],n=864e5,o=36e5,p=6e4,G={s:function(a){return a.getSeconds()},ss:function(a){return ab(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return ab(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return ab(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return ab(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return ab(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return ab(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return E(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){var b=a.getDate();return b>10&&b<20?"th":["st","nd","rd"][b%10-1]||"th"}};e.applyAll=ib,f.month=kb,f.basicWeek=lb,f.basicDay=mb,g({weekMode:"fixed"}),f.agendaWeek=pb,f.agendaDay=qb,g({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/CommonEvent",["jquery","jquery.ajaxJSON","vendor/jquery.ba-tinypubsub"],function(b){return function(){function c(b,c,d){this.save=a(this.save,this),this.removeClass=a(this.removeClass,this),this.addClass=a(this.addClass,this),this.isUndated=a(this.isUndated,this),this.contextCode=a(this.contextCode,this),this.isAppointmentGroupEvent=a(this.isAppointmentGroupEvent,this),this.isAppointmentGroupFilledEvent=a(this.isAppointmentGroupFilledEvent,this),this.isNewEvent=a(this.isNewEvent,this),this.eventType="generic",this.contextInfo=c,this.actualContextInfo=d,this.allPossibleContexts=null,this.className=[],this.object={},this.copyDataFromObject(b)}return c.prototype.isNewEvent=function(){var a;return this.eventType==="generic"||((a=this.object)!=null?!a.id:!void 0)},c.prototype.isAppointmentGroupFilledEvent=function(){var a,b;return((a=this.object)!=null?(b=a.child_events)!=null?b.length:void 0:void 0)>0},c.prototype.isAppointmentGroupEvent=function(){var a;return(a=this.object)!=null?a.appointment_group_url:void 0},c.prototype.contextCode=function(){var a,b,c;return((a=this.object)!=null?a.effective_context_code:void 0)||((b=this.object)!=null?b.context_code:void 0)||((c=this.contextInfo)!=null?c.asset_string:void 0)},c.prototype.isUndated=function(){return this.start===null},c.prototype.displayTimeString=function(){return""},c.prototype.readableType=function(){return""},c.prototype.fullDetailsURL=function(){return null},c.prototype.startDate=function(){return this.date},c.prototype.endDate=function(){return this.startDate()},c.prototype.possibleContexts=function(){return this.allPossibleContexts||[this.contextInfo]},c.prototype.addClass=function(a){var b,c,d,e,f;c=!1,f=this.className;for(d=0,e=f.length;d<e;d++){b=f[d];if(b===a){c=!0;break}}if(!c)return this.className.push(a)},c.prototype.removeClass=function(a){var b,c,d,e,f,g;c=0,f=this.className,g=[];for(d=0,e=f.length;d<e;d++)b=f[d],b===a?g.push(this.className.splice(c,1)):g.push(c+=1);return g},c.prototype.save=function(a,c,d){var e,f,g,h,i,j=this;return g=function(a){return j.copyDataFromObject(a),b.publish("CommonEvent/eventSaved",j),typeof c=="function"?c():void 0},f=function(a){return b.publish("CommonEvent/eventSaveFailed",j),typeof d=="function"?d():void 0},i=this.methodAndURLForSave(),e=i[0],h=i[1],this.forceMinimumDuration(),b.publish("CommonEvent/eventSaving",this),b.ajaxJSON(h,e,a,g,f)},c.prototype.isDueAtMidnight=function(){return this.start&&(this.midnightFudged||this.start.getHours()===23&&this.start.getMinutes()===59)},c.prototype.copyDataFromObject=function(a){return this.isDueAtMidnight()&&(this.midnightFudged=!0,this.start.setMinutes(30)),this.forceMinimumDuration()},c.prototype.forceMinimumDuration=function(){var a;a=18e5;if(this.end&&this.end.getTime()-this.start.getTime()<a)return this.end=new Date(this.start.getTime()+a)},c}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/MiniCalendar",["jquery","i18n!calendar","underscore","compiled/calendar/CalendarDefaults","vendor/jquery.ba-tinypubsub"],function(b,c,d,e){var f;return f=function(){function f(c,f){this.mainCalendar=f,this.refetchEvents=a(this.refetchEvents,this),this.visibleContextListChanged=a(this.visibleContextListChanged,this),this.eventRender=a(this.eventRender,this),this.dayClick=a(this.dayClick,this),this.getEvents=a(this.getEvents,this),this.calendar=b(c),this.calendar.fullCalendar(d.defaults({height:240,header:{left:"prev",center:"title",right:"next"},dayClick:this.dayClick,events:this.getEvents,eventRender:this.eventRender},e),b.subscribe({"Calendar/visibleContextListChanged":this.visibleContextListChanged,"Calendar/refetchEvents":this.refetchEvents}))}return f.prototype.getEvents=function(a,b,c){return this.calendar.find(".fc-content td").removeClass("event slot-available").removeAttr("title"),this.mainCalendar.getEvents(a,b,c)},f.prototype.dayClick=function(a){return this.mainCalendar.gotoDate(a)},f.prototype.eventRender=function(a,b,d){var e,f,g,h,i,j;return f=d.dateCell(a.start),g=d.element.find("tr:nth-child("+(f.row+1)+") td:nth-child("+(f.col+1)+")"),g.addClass("event"),h=c.t("event_on_this_day","There is an event on this day"),e=(i=this.mainCalendar.displayAppointmentEvents)!=null?i.id:void 0,e&&e===((j=a.calendarEvent)!=null?j.appointment_group_id:void 0)&&a.object.available_slots&&(g.addClass("slot-available"),h=c.t("open_appointment_on_this_day","There is an open appointment on this day")),g.attr("title",h),!1},f.prototype.visibleContextListChanged=function(a){return this.calendar.fullCalendar("refetchEvents")},f.prototype.refetchEvents=function(){return this.calendar.fullCalendar("refetchEvents")},f}()})}.call(this),define("translations/calendar.undated_events",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{calendar:{undated_events:{loading_undated_events:"جارٍ تحميل الأحداث غير المؤرخة...",show_undated_events:"عرض أحداث غير مؤرخة",undated_events:"أحداث غير مؤرخة"}}},es:{calendar:{undated_events:{loading_undated_events:"Cargando eventos sin fecha...",show_undated_events:"Mostar eventos sin fecha",undated_events:"Eventos sin fecha"}}},fr:{calendar:{undated_events:{loading_undated_events:"Chargement des événements non datés...",show_undated_events:"Afficher les événements non datés",undated_events:"Événements non datés"}}},ja:{calendar:{undated_events:{loading_undated_events:"日付のないイベントを読み込んでいます...",show_undated_events:"日付のないイベントを表示",undated_events:"日付のないイベント"}}},ko:{calendar:{undated_events:{loading_undated_events:"날짜 없는 행사 로드 중...",show_undated_events:"날짜 없는 행사 표시",undated_events:"날짜 없는 행사"}}},nl:{calendar:{undated_events:{loading_undated_events:"Laden van ongedateerde gebeurtenissen...",show_undated_events:"Toon ongedateerde gebeurtenissen",undated_events:"Ongedateerde gebeurtenissen"}}},pt:{calendar:{undated_events:{loading_undated_events:"A carregar eventos sem data...",show_undated_events:"Mostrar eventos sem data",undated_events:"Eventos sem data"}}},ru:{calendar:{undated_events:{loading_undated_events:"Загрузка событий без даты...",show_undated_events:"Отобразить события без даты",undated_events:"События без даты"}}},zh:{calendar:{undated_events:{loading_undated_events:"正在加载无日期的事件...",show_undated_events:"显示无日期的事件",undated_events:"无日期的事件"}}}}})}),function(){require(["compiled/jquery.kylemenu"])}.call(this),define("compiled/bundles/jquery_ui_menu",function(){}),define("jst/calendar/calendarApp",["compiled/handlebars_helpers","compiled/util/registerTemplateCss","i18n!calendar.calendar_app"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/calendarApp"]=b(function(a,b,c,d,e){function q(a,b){return'class="with-scheduler"'}function r(a,b){var d="",e,f,g,h;d+='\n  <a id="change-calendar-version" href="/switch_calendar/1" data-method="post" rel="nofollow" class="btn">',e="Old Calendar",f="use_old_calendar",g={},h="calendar.calendar_app",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</a>\n  ",d}function s(a,b){var d="",e,f,g,h;d+='\n    <input type="radio" id="scheduler" name="calendar_view" /><label for="scheduler">',e="Scheduler",f="links.calendar_scheduler",g={},h="calendar.calendar_app",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+=' <span stye="display: none" class="counter-badge"></span></label>\n    ',d}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+='<div id="calendar-header" ',k=c.showScheduler,g=k||b.showScheduler,h=c["if"],l=m.program(1,q,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='>\n  <a href="#" id="refresh_calendar_link" title="',g="Refresh",h="refresh",i={},j="calendar.calendar_app",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='" data-tooltip>',g="Refresh",h="refresh",i={},j="calendar.calendar_app",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</a>\n  <a href="#" id="create_new_event_link" class="icon-add" title="',g="Create New Event",h="create_event",i={},j="calendar.calendar_app",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='" data-tooltip></a>\n\n  ',k=c.calendar2Only,g=k||b.calendar2Only,h=c.unless,l=m.program(3,r,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n  <a href="http://guides.instructure.com/s/2204/m/4152/l/59600-how-is-the-new-calendar-different-from-the-old-calendar" class="whats-new">What\'s new?</a>\n\n  <span id="calendar_views">\n    <input type="radio" id="week"      name="calendar_view" /><label for="week">',g="Week",h="links.calendar_week",i={},j="calendar.calendar_app",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label>\n    <input type="radio" id="month"     name="calendar_view" checked="checked" /><label for="month">',g="Month",h="links.calendar_month",i={},j="calendar.calendar_app",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="</label>\n    ",k=c.showScheduler,g=k||b.showScheduler,h=c["if"],l=m.program(5,s,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;return f+='\n  </span>\n</div>\n\n<div class="scheduler-wrapper" style="display: none">\n  <div class="appointment-list">\n    <div class="list-wrapper"></div>\n  </div>\n</div>\n<div class="calendar"></div>\n',f}),arguments[1]("calendar/calendarApp","#main {\n  background-color: transparent;\n  border: none; }\n\n#content {\n  padding-right: 0; }\n\n#calendar-app {\n  position: relative; }\n\n#calendar-header {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 55%; }\n  #calendar-header.with-scheduler {\n    width: 58%; }\n\n#change-calendar-version {\n  float: right; }\n\n.calendar .fc-content {\n  background-color: white; }\n.calendar .fc-view-month .fc-widget-header {\n  color: #627382;\n  font-size: 14px;\n  background-color: #f6f7f9;\n  line-height: 35px; }\n.calendar .fc-widget-header, .calendar .fc-widget-content {\n  border-color: #dadada; }\n.calendar .fc-header h2, .calendar .fc-header .h2 {\n  font-size: 18px;\n  padding: 0 16px;\n  line-height: 32px; }\n.calendar .fc-other-month {\n  color: #b4b3b3;\n  background-color: #f8f9f9; }\n.calendar .fc-state-highlight {\n  background-color: #ecf3f6;\n  box-shadow: inset 0px 0px 5px rgba(0, 0, 0, 0.3); }\n.calendar .fc-event-inner {\n  border-color: inherit;\n  width: auto;\n  padding-left: 3px; }\n.calendar .fc-event-time {\n  font-weight: bold; }\n.calendar .fc-agenda .fc-agenda-slots .fc-agenda-axis {\n  border-top-color: transparent; }\n.calendar .fc-agenda .fc-widget-header {\n  background-color: #f6f7f9; }\n.calendar .fc-agenda .scheduler-reserved {\n  font-weight: bold; }\n.calendar .fc-agenda .scheduler-full {\n  background-color: #eeeeee !important; }\n.calendar .agenda-col-wrapper {\n  overflow: hidden;\n  display: inline-block;\n  color: #617582;\n  font-size: 9px;\n  font-weight: bold;\n  padding: 10px 0;\n  text-transform: uppercase;\n  text-align: left; }\n  .calendar .agenda-col-wrapper .day-num {\n    font-size: 24px;\n    float: left;\n    padding-right: 5px;\n    line-height: 23px;\n    text-shadow: -1px -1px 1px white; }\n  .calendar .agenda-col-wrapper .day-name {\n    float: left;\n    line-height: 13px; }\n  .calendar .agenda-col-wrapper .month-name {\n    line-height: 10px;\n    float: left;\n    color: #9da5ab; }\n\n.fc-event.assignment, .fc-event.assignment_override {\n  background-color: white; }\n  .fc-event.assignment .fc-event-inner div, .fc-event.assignment_override .fc-event-inner div {\n    display: inline; }\n\n.counter-badge {\n  -webkit-border-radius: 8px;\n  -moz-border-radius: 8px;\n  -ms-border-radius: 8px;\n  -o-border-radius: 8px;\n  border-radius: 8px;\n  background-color: #3cb5fb;\n  color: white;\n  text-shadow: 1px 0px 1px rgba(0, 0, 0, 0.3);\n  box-shadow: inset 1px 0px 1px rgba(0, 0, 0, 0.3);\n  padding: 1px 6px; }\n\n#refresh_calendar_link {\n  text-indent: -119988px;\n  overflow: hidden;\n  text-align: left;\n  width: 16px;\n  height: 16px;\n  float: right;\n  background-image: url(\"/images/ajax-loader-black-on-white-static.gif\");\n  background-position: 50% 50%;\n  margin-left: 3px;\n  position: relative;\n  top: 7px; }\n  #refresh_calendar_link.loading {\n    background-image: url(\"/images/ajax-loader-black-on-white.gif\"); }\n\n#create_new_event_link {\n  float: right;\n  position: relative;\n  top: 3px;\n  color: #444444;\n  margin-left: 5px; }\n\n.event-details {\n  position: absolute;\n  z-index: 1000;\n  border: 1px solid #b0afaf;\n  box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.6);\n  background-color: white;\n  min-width: 250px;\n  max-width: 500px; }\n  .event-details h3, .event-details .h3 {\n    margin-bottom: 0; }\n  .event-details.carat-bottom .ui-menu-carat span {\n    border-color: white transparent; }\n  .event-details ul {\n    margin: 0;\n    padding: 0;\n    list-style: none; }\n    .event-details ul li {\n      margin: 0;\n      padding: 0; }\n  .event-details th {\n    font-weight: bold;\n    padding-bottom: 3px;\n    padding-right: 8px; }\n  .event-details td, .event-details th {\n    vertical-align: top; }\n  .event-details .delete_event_link {\n    float: right !important; }\n  .event-details .event-details-content {\n    overflow: auto; }\n\n.event-details-timestring {\n  margin: 5px 0 10px;\n  color: #666666;\n  font-size: 14px; }\n\n.event-details-links a {\n  padding-right: 6px;\n  line-height: 28px;\n  border-right: 1px solid #333333; }\n.event-details-links a:last-child {\n  border-right: none; }\n\n.event-details-header,\n.event-details-content,\n.event-details-footer {\n  overflow: hidden;\n  *zoom: 1;\n  padding: 10px;\n  border-bottom: 1px solid #eeeeee;\n  word-wrap: normal;\n  max-height: 225px; }\n  .event-details-header:last-child,\n  .event-details-content:last-child,\n  .event-details-footer:last-child {\n    border-bottom: none; }\n\n.event-details-header {\n  max-width: 460px;\n  overflow: auto; }\n\n.event-details-content table th[scope=row] {\n  width: 55px; }\n\n.event-details-actual-context {\n  font-size: 0.8em;\n  font-style: italic;\n  color: #666666; }\n\n.event-detail-overflow {\n  min-height: 30px;\n  max-width: 395px;\n  margin-bottom: 6px;\n  overflow: auto; }\n\n.x-close-link {\n  padding-right: 5px;\n  opacity: 0.5; }\n\n#attendees li {\n  white-space: nowrap;\n  float: left;\n  margin: 1px 2px 1px 4px;\n  color: black;\n  background-color: #85ace0;\n  border: 1px solid #a5bcf0;\n  -webkit-border-radius: 10px;\n  -moz-border-radius: 10px;\n  -ms-border-radius: 10px;\n  -o-border-radius: 10px;\n  border-radius: 10px;\n  cursor: default;\n  position: relative; }\n  #attendees li div {\n    background-color: #dee7fa;\n    -webkit-border-radius: 10px;\n    -moz-border-radius: 10px;\n    -ms-border-radius: 10px;\n    -o-border-radius: 10px;\n    border-radius: 10px;\n    padding: 0 14px 0 11px;\n    display: inline-block;\n    overflow: hidden; }\n  #attendees li span {\n    color: white;\n    font-size: 0.8em;\n    vertical-align: top;\n    display: inline-block; }\n  #attendees li a {\n    position: absolute;\n    right: 1px;\n    top: 1px;\n    width: 13px;\n    height: 100%;\n    color: #c4cbcf;\n    vertical-align: top;\n    cursor: pointer;\n    background: transparent url(/images/messages/token-delete.png) 12px center no-repeat; }\n  #attendees li:hover {\n    border-color: #6f94e6; }\n    #attendees li:hover div {\n      background-color: #bccef4; }\n    #attendees li:hover a {\n      background-position: 1px center; }\n\n/*replicate button styles to work for fullcalendar */\n.calendar .fc-button {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  padding: 4px 10px;\n  font-size: 12px;\n  border: 1px solid #cccccc;\n  color: #333333;\n  font-weight: normal;\n  background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #ffffff), color-stop(25%, #ffffff), color-stop(100%, #e6e6e6));\n  background-image: -webkit-linear-gradient(#ffffff, #ffffff 25%, #e6e6e6);\n  background-image: -moz-linear-gradient(#ffffff, #ffffff 25%, #e6e6e6);\n  background-image: -o-linear-gradient(#ffffff, #ffffff 25%, #e6e6e6);\n  background-image: linear-gradient(#ffffff, #ffffff 25%, #e6e6e6);\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);\n  border-bottom-color: #bbbbbb;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05); }\n  .calendar .fc-button ~ .fc-button {\n    border-left: 0;\n    margin-left: 0; }\n  .calendar .fc-button.fc-state-hover {\n    background-color: #efefef;\n    background-image: -webkit-gradient(linear, left top, left bottom, from(white), to(#dfdfdf));\n    background-image: -webkit-linear-gradient(top, white, #dfdfdf);\n    background-image: -moz-linear-gradient(top, white, #dfdfdf);\n    background-image: -ms-linear-gradient(top, white, #dfdfdf);\n    background-image: -o-linear-gradient(top, white, #dfdfdf);\n    background-image: linear-gradient(top, #ffffff, #dfdfdf);\n    -ms-filter: \"progid:DXImageTransform.Microsoft.gradient(startColorStr='white',EndColorStr='#dfdfdf')\";\n    zoom: 1; }\n    .ie9 .calendar .fc-button.fc-state-hover {\n      border-radius: 0 !important; }\n  .calendar .fc-button.fc-state-down {\n    background-color: #b7b7b7;\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#a8a8a8), to(#c6c6c6));\n    background-image: -webkit-linear-gradient(top, #a8a8a8, #c6c6c6);\n    background-image: -moz-linear-gradient(top, #a8a8a8, #c6c6c6);\n    background-image: -ms-linear-gradient(top, #a8a8a8, #c6c6c6);\n    background-image: -o-linear-gradient(top, #a8a8a8, #c6c6c6);\n    background-image: linear-gradient(top, #a8a8a8, #c6c6c6);\n    -ms-filter: \"progid:DXImageTransform.Microsoft.gradient(startColorStr='#a8a8a8',EndColorStr='#c6c6c6')\";\n    zoom: 1; }\n    .ie9 .calendar .fc-button.fc-state-down {\n      border-radius: 0 !important; }\n  .calendar .fc-button.fc-state-disabled {\n    opacity: 0.7; }\n  .calendar .fc-button .fc-button-content {\n    color: #333333;\n    text-shadow: white 0 1px 1px; }\n  .calendar .fc-button.fc-corner-left {\n    -moz-border-radius-topleft: 4px;\n    -webkit-border-top-left-radius: 4px;\n    border-top-left-radius: 4px;\n    -moz-border-radius-bottomleft: 4px;\n    -webkit-border-bottom-left-radius: 4px;\n    border-bottom-left-radius: 4px; }\n  .calendar .fc-button.fc-corner-right {\n    -moz-border-radius-topright: 4px;\n    -webkit-border-top-right-radius: 4px;\n    border-top-right-radius: 4px;\n    -moz-border-radius-bottomright: 4px;\n    -webkit-border-bottom-right-radius: 4px;\n    border-bottom-right-radius: 4px; }\n\n#edit_appt_calendar_event_form p {\n  margin-bottom: 0.5em; }\n#edit_appt_calendar_event_form textarea {\n  width: 500px;\n  height: 100px; }\n#edit_appt_calendar_event_form .max-participants {\n  width: 40px; }\n\n.whats-new {\n  float: right;\n  margin-right: 10px;\n  line-height: 32px;\n  font-size: 11px; }\n\n.event_button {\n  margin-left: 3px; }\n"),c["calendar/calendarApp"]}),define("jst/calendar/eventDetails",["compiled/handlebars_helpers","i18n!calendar.event_details"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/eventDetails"]=b(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n        <a href="',i=c.fullDetailsURL,e=i||a.fullDetailsURL,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"fullDetailsURL",{hash:{}})),d+=o(e)+'" class="view_event_link">',i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+"</a>\n      ",d}function q(a,b){var d="",e;return d+="\n        ",i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+"\n      ",d}function r(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Calendar",f="calendar",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+='</th>\n          <td><a href="',i=c.contextInfo,e=i||a.contextInfo,e=e===null||e===undefined||e===!1?e:e.url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"contextInfo.url",{hash:{}})),d+=o(e)+'">',i=c.contextInfo,e=i||a.contextInfo,e=e===null||e===undefined||e===!1?e:e.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"contextInfo.name",{hash:{}})),d+=o(e)+"</a>\n            ",i=c.actualContextInfo,e=i||a.actualContextInfo,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n          </td>\n        </tr>\n      ",d}function s(a,b){var d="",e;return d+='\n              <br><span class="event-details-actual-context">',i=c.actualContextInfo,e=i||a.actualContextInfo,e=e===null||e===undefined||e===!1?e:e.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"actualContextInfo.name",{hash:{}})),d+=o(e)+"</span>\n            ",d}function t(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Location",f="location",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</th>\n          <td>",i=c.location_name,e=i||a.location_name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"location_name",{hash:{}})),d+=o(e)+"</td>\n        </tr>\n      ",d}function u(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Details",f="details",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+='</th>\n          <td class="user_content">\n            <div class="event-detail-overflow">',i=c.description,e=i||a.description,i=c.convertApiUserContent,f=i||a.convertApiUserContent,typeof f===l?e=f.call(a,e,{hash:{}}):f===n?e=m.call(a,"convertApiUserContent",e,{hash:{}}):e=f,d+=o(e)+"</div>\n          </td>\n        </tr>\n      ",d}function v(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Attendees",f="attendees",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="</th>\n          <td>\n            ",i=c.can_edit,e=i||a.can_edit,f=c["if"],j=k.program(13,w,b),j.hash={},j.fn=j,j.inverse=k.program(16,y,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n          </td>\n        </tr>\n      ",d}function w(a,b){var d="",e,f;d+='\n              <ul id="attendees">\n                ',i=c.reservations,e=i||a.reservations,f=c.each,j=k.program(14,x,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n              </ul>\n            ",d}function x(a,b){var d="",e;return d+='\n                  <li data-url="',i=c.event_url,e=i||a.event_url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"event_url",{hash:{}})),d+=o(e)+'">\n                    <div class="ellipsis">',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+'</div>\n                    <a href="javascript:void(0)" class="cancel_appointment_link"></a>\n                  </li>\n                ',d}function y(a,b){var d="",e,f;d+="\n              <ul>\n                ",i=c.reservations,e=i||a.reservations,f=c.each,j=k.program(17,z,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n              </ul>\n            ",d}function z(a,b){var d="",e;return d+="\n                  <li>",i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"</li>\n                ",d}function A(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Slots available",f="slots_available",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</th>\n          <td>",i=c.availableSlotsText,e=i||a.availableSlotsText,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"availableSlotsText",{hash:{}})),d+=o(e)+"</td>\n        </tr>\n      ",d}function B(a,b){var d="",e;return d+='\n      <div class="available_slots">\n        ',i=c.available_slots_text,e=i||a.available_slots_text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"available_slots_text",{hash:{}})),d+=o(e)+"\n      </div>\n    ",d}function C(a,b){var d="",e,f,g,h;d+='\n      <a href="#" class="event_button edit_event_link btn btn-primary btn-small pull-right">',e="Edit",f="links.edit",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</a>\n    ",d}function D(a,b){var d="",e,f,g,h;d+='\n      <a href="#" class="event_button btn button-secondary btn-small delete_event_link pull-right">',e="Delete",f="links.delete",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</a>\n    ",d}function E(a,b){var d="",e,f,g,h;d+='\n        <a href="#" class="reserve_event_link"><strong>',e="Reserve",f="links.reserve",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</strong></a>\n      ",d}function F(a,b){var d="",e,f,g,h;d+='\n        <a href="#" class="unreserve_event_link">',e="Un-reserve",f="links.unreserve",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</a>\n      ",d}function G(a,b){var d="",e,f,g,h;d+='\n        <a href="#" class="message_students">\n          ',e="Message students",f="message_students",g={},h="calendar.event_details",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="\n        </a>\n      ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="event-details carat-bottom">\n  <a href="#" class="popover_close x-close-link close">×</a>\n  <div class=\'event-details-header\'>\n    <h3 class="details_title title">\n      ',i=c.showEventLink,g=i||b.showEventLink,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(3,q,e),g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n    </h3>\n  </div>\n  <div class="event-details-content">\n    <div class="event-details-timestring">',i=c.displayTimeString,g=i||b.displayTimeString,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"displayTimeString",{hash:{}}));if(g||g===0)f+=g;f+='</div>\n    <table cellspacing="0">\n      ',i=c.contextInfo,g=i||b.contextInfo,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.location_name,g=i||b.location_name,h=c["if"],j=k.program(8,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.description,g=i||b.description,h=c["if"],j=k.program(10,u,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.reservations,g=i||b.reservations,h=c["if"],j=k.program(12,v,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.availableSlotsText,g=i||b.availableSlotsText,h=c["if"],j=k.program(19,A,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n    </table>\n    <div class="details_description lock_explanation">',i=c.lock_explanation,g=i||b.lock_explanation,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"lock_explanation",{hash:{}}));if(g||g===0)f+=g;f+="</div>\n    ",i=c.available_slots_text,g=i||b.available_slots_text,h=c["if"],j=k.program(21,B,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n  </div>\n  <div class="popover-links-holder event-details-footer">\n    ',i=c.can_edit,g=i||b.can_edit,h=c["if"],j=k.program(23,C,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n    ",i=c.can_delete,g=i||b.can_delete,h=c["if"],j=k.program(25,D,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n    <div class="event-details-links">\n      ',i=c.can_reserve,g=i||b.can_reserve,h=c["if"],j=k.program(27,E,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.can_unreserve,g=i||b.can_unreserve,h=c["if"],j=k.program(29,F,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.reservations,g=i||b.reservations,h=c["if"],j=k.program(31,G,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n    </div>\n  </div>\n</div>\n",f}),c["calendar/eventDetails"]}),define("jst/calendar/deleteItem",["compiled/handlebars_helpers","i18n!calendar.delete_item"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/deleteItem"]=b(function(a,b,c,d,e){function p(a,b){var d="",e;return d+="\n  <p>\n    ",i=c.details,e=i||a.details,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"details",{hash:{}})),d+=o(e)+"\n  </p>\n  ",d}function q(a,b){var d="",e,f,g,h;d+='\n  <div>\n    <label for="cancel_reason">',e="Reason for deletion:",f="deletion_reason",g={},h="calendar.delete_item",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+='</label><br />\n    <textarea id="cancel_reason" class="input-block-level"></textarea>\n  </div>\n  ',d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div id="delete_event_dialog">\n  <p>\n    ',i=c.message,g=i||b.message,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"message",{hash:{}})),f+=o(g)+"\n  </p>\n  ",i=c.details,g=i||b.details,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.hide_reason,g=i||b.hide_reason,h=c.unless,j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</div>",f}),c["calendar/deleteItem"]}),define("jst/calendar/reservationOverLimitDialog",["compiled/handlebars_helpers","i18n!calendar.reservation_over_limit_dialog"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/reservationOverLimitDialog"]=b(function(a,b,c,d,e){function r(a,b){var d="",e,f,g,h;d+="\n    ",e="Cancel existing reservation and sign up for this one?",f="cancel_existing_reservation",g={},h="calendar.reservation_over_limit_dialog",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="\n  ",d}function s(a,b){var d="",e,f,g,h;d+="\n    ",e="Appointment limit reached",f="appointment_limit_reached",g={},h="calendar.reservation_over_limit_dialog",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="\n  ",d}function t(a,b){var d="",e,f,g;return d+="\n    <div>\n      ",k=c.end_at,e=k||a.end_at,k=c.start_at,f=k||a.start_at,k=c.semanticDateRange,g=k||a.semanticDateRange,typeof g===n?e=g.call(a,f,e,{hash:{}}):g===p?e=o.call(a,"semanticDateRange",f,e,{hash:{}}):e=g,d+=q(e)+"\n    </div>\n  ",d}function u(a,b){var d="",e,f,g,h;d+="\n    ",e="Would you like to cancel that and sign up for this?",f="would_you_like_to_cancel_that_and_sign_up_for_this",g={},h="calendar.reservation_over_limit_dialog",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="\n  ",d}function v(a,b){var d="",e,f,g,h;d+="\n    ",e="Please cancel one of your other reservations and try again.",f="cancel_some_appointments_and_try_again",g={},h="calendar.reservation_over_limit_dialog",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="\n  ",d}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<div title="\n  ',k=c.reschedulable,g=k||b.reschedulable,h=c["if"],l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.program(3,s,e),g=h.call(b,g,l);if(g||g===0)f+=g;f+='">\n\n  ',g="You are already signed up for:",h="you_are_already_signed_up_for",i={},j="calendar.reservation_over_limit_dialog",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="<br>\n  ",k=c.reservations,g=k||b.reservations,h=c.each,l=m.program(5,t,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+="\n  ",k=c.reschedulable,g=k||b.reschedulable,h=c["if"],l=m.program(7,u,e),l.hash={},l.fn=l,l.inverse=m.program(9,v,e),g=h.call(b,g,l);if(g||g===0)f+=g;return f+="\n</div>\n",f}),c["calendar/reservationOverLimitDialog"]}),define("jst/calendar/messageParticipants",["compiled/handlebars_helpers","i18n!calendar.message_participants"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/messageParticipants"]=b(function(a,b,c,d,e){function r(a,b){var d="",e,f,g,h;d+="\n  ",e="Message Groups",f="message_groups",g={},h="calendar.message_participants",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="\n",d}function s(a,b){var d="",e,f,g,h;d+="\n  ",e="Message Students",f="message_students",g={},h="calendar.message_participants",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="\n",d}function t(a,b){var d="",e,f,g,h;d+='\n      <option value="all">',e="All groups",f="all_groups",g={},h="calendar.message_participants",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;d+='</option>\n      <option value="unregistered">',e="Groups who haven't signed up yet",f="unregistered_groups",g={},h="calendar.message_participants",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;d+='</option>\n      <option value="registered">',e="Groups who have already signed up",f="registered_groups",g={},h="calendar.message_participants",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</option>\n      ",d}function u(a,b){var d="",e,f,g,h;d+='\n      <option value="all">',e="All users",f="all_users",g={},h="calendar.message_participants",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;d+='</option>\n      <option value="unregistered">',e="Users who haven't signed up yet",f="unregistered_users",g={},h="calendar.message_participants",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;d+='</option>\n      <option value="registered">',e="Users who have already signed up",f="registered_users",g={},h="calendar.message_participants",g.scope=h,k=c.t,h=k||a.t,l={},l.hash=g,typeof h===n?e=h.call(a,f,e,l):h===p?e=o.call(a,"t",f,e,l):e=h;if(e||e===0)d+=e;return d+="</option>\n      ",d}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=c.blockHelperMissing;f+='<form title="',g="Group",k=c.participant_type,h=k||b.participant_type,k=c.ifEqual,i=k||b.ifEqual,l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.program(3,s,e),k&&typeof i===n?g=i.call(b,h,g,l):g=q.call(b,i,h,g,l);if(g||g===0)f+=g;f+="\" action='#' id='message_participants_form'>\n  <h2>",g="Send a message to...",h="send_message_to",i={},j="calendar.message_participants",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</h2>\n  <div>\n    <select class="message_groups">\n      ',g="Group",k=c.participant_type,h=k||b.participant_type,k=c.ifEqual,i=k||b.ifEqual,l=m.program(5,t,e),l.hash={},l.fn=l,l.inverse=m.program(7,u,e),k&&typeof i===n?g=i.call(b,h,g,l):g=q.call(b,i,h,g,l);if(g||g===0)f+=g;f+='\n    </select>\n  </div>\n  <ul class="participant_list"></ul>\n  <div class="clear"></div>\n  <div>\n    <label for="body">',g="Message:",h="message_label",i={},j="calendar.message_participants",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+='</label><br />\n    <textarea id="body" name="body"></textarea>\n  </div>\n  <div class="error"></div>\n</form>\n',f}),c["calendar/messageParticipants"]}),define("jst/calendar/recipientList",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/recipientList"]=b(function(a,b,c,d,e){function r(a,b){var d="",e,f;d+="\n  ",j=c.recipients,e=j||a.recipients,f=c.each,k=l.program(2,s,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n",d}function s(a,b){var d="",e;return d+="\n    <li>\n      <span>",j=c.name,e=j||a.name,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"name",{hash:{}})),d+=p(e)+'</span>\n      <input name="recipients[]" type="hidden" value="group_',j=c.id,e=j||a.id,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"id",{hash:{}})),d+=p(e)+'" />\n    </li>\n  ',d}function t(a,b){var d="",e,f;d+="\n  ",j=c.recipients,e=j||a.recipients,f=c.each,k=l.program(5,u,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n",d}function u(a,b){var d="",e;return d+="\n    <li>\n      <span>",j=c.name,e=j||a.name,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"name",{hash:{}})),d+=p(e)+'</span>\n      <input name="recipients[]" type="hidden" value="',j=c.id,e=j||a.id,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"id",{hash:{}})),d+=p(e)+'" />\n    </li>\n  ',d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression,q=c.blockHelperMissing;g="Group",j=c.recipientType,h=j||b.recipientType,j=c.ifEqual,i=j||b.ifEqual,k=l.program(1,r,e),k.hash={},k.fn=k,k.inverse=l.program(4,t,e),j&&typeof i===m?g=i.call(b,h,g,k):g=q.call(b,i,h,g,k);if(g||g===0)f+=g;return f+="\n",f}),c["calendar/recipientList"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/MessageParticipantsDialog",["jquery","underscore","i18n!calendar","jst/calendar/messageParticipants","jst/calendar/recipientList"],function(b,c,d,e,f){var g;return g=function(){function g(d){var g;this.opts=d,this.messageFailed=a(this.messageFailed,this),this.messageSent=a(this.messageSent,this),this.sendMessage=a(this.sendMessage,this),this.loadParticipants=a(this.loadParticipants,this),this.opts.timeslot?(this.recipients=c(this.opts.timeslot.child_events).map(function(a){return a.user||a.group}),g=this.recipients[0].short_name===void 0?"Group":"User",this.$form=b(e({participant_type:g})),this.$form.find("select.message_groups").remove()):(this.group=this.opts.group,this.$form=b(e({participant_type:this.group.participant_type})),this.dataSource=this.opts.dataSource,this.$select=this.$form.find("select.message_groups").change(this.loadParticipants).val("unregistered")),this.$form.submit(this.sendMessage),this.$participantList=this.$form.find("ul"),this.recipients&&this.$participantList.html(f({recipientType:g,recipients:this.recipients}))}return g.prototype.show=function(){return this.$form.dialog({width:400,resizable:!1,buttons:[{text:d.t("buttons.cancel","Cancel"),click:function(){return b(this).dialog("close")}},{text:d.t("buttons.send_message","Send"),"data-text-while-loading":d.t("buttons.sending_message","Sending..."),"class":"btn-primary",click:function(){return b(this).submit()}}],close:function(){return b(this).remove()}}),this.loadParticipants()},g.prototype.participantStatus=function(a){var c;return a==null&&(a=null),c=b('<li class="status" />'),this.$participantList.html(c),a?c.text(a):c.spin()},g.prototype.loadParticipants=function(){var a,b=this;if(this.recipients)return;return a=this.$select.val(),this.loading=!0,this.participantStatus(),this.dataSource.getParticipants(this.group,a,function(a){var c;return delete b.loading,a.length?b.$participantList.html(f({recipientType:b.group.participant_type,recipients:a})):(c=b.group.participant_type==="Group"?d.t("no_groups","No groups found"):d.t("no_users","No users found"),b.participantStatus(c))})},g.prototype.sendMessage=function(a){var c,d;a.preventDefault();if(this.loading)return;c=this.$form.getFormData();if(!c["recipients[]"]||!c.body)return;return d=b.ajaxJSON("/conversations","POST",c,this.messageSent,this.messageFailed),this.$form.disableWhileLoading(d,{buttons:["[data-text-while-loading] .ui-button-text"]})},g.prototype.messageSent=function(a){return this.$form.dialog("close"),b.flashMessage(d.t("messages_sent","Messages Sent"))},g.prototype.messageFailed=function(a){return this.$form.find(".error").text(d.t("errors.send_message_failed","There was an error sending your message, please try again"))},g}()})}.call(this),define("jst/calendar/TimeBlockRow",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/TimeBlockRow"]=b(function(a,b,c,d,e){function q(a,b){return'class="locked"'}function r(a,b){return" disabled"}function s(a,b){return" disabled"}function t(a,b){return" disabled"}function u(a,b){return'\n      <a href="#" class="delete-block-link icon-end"></a>\n    '}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+="<tr ",j=c.locked,g=j||b.locked,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='>\n  <td class="date-column"><input name="date" class="date_field" value="',g="medium_with_weekday",j=c.start,h=j||b.start,j=c.tDateToString,i=j||b.tDateToString,typeof i===m?g=i.call(b,h,g,{hash:{}}):i===o?g=n.call(b,"tDateToString",h,g,{hash:{}}):g=i,f+=p(g)+'"',j=c.locked,g=j||b.locked,h=c["if"],k=l.program(3,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=' type="text"/></td>\n  <td class="start-time-column"><input name="start_time" class="time_field start_time" value="',g="tiny",j=c.start,h=j||b.start,j=c.tTimeToString,i=j||b.tTimeToString,typeof i===m?g=i.call(b,h,g,{hash:{}}):i===o?g=n.call(b,"tTimeToString",h,g,{hash:{}}):g=i,f+=p(g)+'"',j=c.locked,g=j||b.locked,h=c["if"],k=l.program(5,s,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=' type="text"/></td>\n  <td class="separator-column">-</td>\n  <td class="end-time-column"><input name="end_time" class="time_field end_time" value="',g="tiny",j=c.end,h=j||b.end,j=c.tTimeToString,i=j||b.tTimeToString,typeof i===m?g=i.call(b,h,g,{hash:{}}):i===o?g=n.call(b,"tTimeToString",h,g,{hash:{}}):g=i,f+=p(g)+'"',j=c.locked,g=j||b.locked,h=c["if"],k=l.program(7,t,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=' type="text"/></td>\n  <td class="delete-column">\n    ',j=c.locked,g=j||b.locked,h=c.unless,k=l.program(9,u,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n  </td>\n</tr>\n",f}),c["calendar/TimeBlockRow"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty;define("compiled/calendar/TimeBlockRow",["i18n!calendar","jst/calendar/TimeBlockRow"],function(c,d){var e;return e=function(){function e(b,c){var e,f=this;this.TimeBlockList=b,c==null&&(c={}),this.focus=a(this.focus,this),this.remove=a(this.remove,this),this.locked=c.locked,e=null,this.$row=$(d(c)).bind({focusin:function(){return clearTimeout(e),f.focus()},focusout:function(){return e=setTimeout(function(){return f.$row.removeClass("focused")},50)}}),this.inputs={},this.locked||(this.$row.find(".date_field").date_field(),this.$row.find(".time_field").time_field()),$.each(this.inputNames,function(a,b){f.inputs[b]={},f.inputs[b].$el=f.$row.find("input[name='"+b+"']").change(function(){return f.handleInputChange(b)}),f.updateModel(b);if(f.locked)return f.inputs[b].valid=!0}),this.$row.find(".delete-block-link").click(this.remove)}return e.prototype.inputNames=["date","start_time","end_time"],e.prototype.updateModel=function(a){return this.inputs[a].val=$.trim(this.inputs[a].$el.val())},e.prototype.handleInputChange=function(a){this.updateModel(a),this.validateField(a),this.validate()},e.prototype.updateDom=function(a,b){return this.inputs[a].val=b,this.inputs[a].$el.val(b)},e.prototype.remove=function(a){return a!=null&&a.preventDefault(),this.$row.remove(),this.TimeBlockList.rowRemoved(this)},e.prototype.focus=function(){this.$row.addClass("focused");if(this.$row.is(":last-child"))return this.$row.parents(".time-block-list-body-wrapper").scrollTop(9999)},e.prototype.validateField=function(a){var b,c;return b=this.inputs[a].$el.closest("td").find(".datetime_suggest"),c=b.hasClass("invalid_datetime"),c||this.updateDom(a,b.text()),this.inputs[a].$el.toggleClass("error",c),this.inputs[a].valid=!c},e.prototype.validate=function(){var a,d,e,f,g,h;if(this.locked)return!0;f=!0,g=this.inputs;for(d in g){if(!b.call(g,d))continue;a=g[d],(h=a.$el.data("associated_error_box"))!=null&&h.remove(),this.validateField(d)||(f=!1)}return f&&!this.blank()&&(this.validDate()&&this.inputs.end_time.val&&this.endAt()<new Date&&(f=!1,this.inputs.end_time.$el.addClass("error").errorBox(c.t("ends_in_past_error","You cannot create an appointment slot that ends in the past"))),this.inputs.start_time.val&&this.inputs.end_time.val&&(e=this.validDate()||"Today",this.timeToDate(e,this.inputs.end_time.val)<=this.timeToDate(e,this.inputs.start_time.val)&&(f=!1,this.inputs.start_time.$el.addClass("error").errorBox(c.t("end_before_start_error","Start time must be before end time"))))),this.blank()||f},e.prototype.timeToDate=function(a,b){return Date.parse(a+" "+b)},e.prototype.endAt=function(){if(this.validDate())return this.timeToDate(this.inputs.date.val,this.inputs.end_time.val)},e.prototype.startAt=function(){if(this.validDate())return this.timeToDate(this.inputs.date.val,this.inputs.start_time.val)},e.prototype.validDate=function(){if(this.inputs.date.val&&this.inputs.date.valid)return this.inputs.date.val},e.prototype.getData=function(){return[this.startAt(),this.endAt(),!!this.locked]},e.prototype.blank=function(){return this.inputs.date.val===""&&this.inputs.start_time.val===""&&this.inputs.end_time.val===""},e}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/TimeBlockList",["jquery","i18n!calendar","compiled/calendar/TimeBlockListManager","compiled/calendar/TimeBlockRow","jquery.instructure_date_and_time","jquery.instructure_forms","vendor/date"],function(b,c,d,e){var f;return f=function(){function f(c,e,f){this.handleSplitClick=a(this.handleSplitClick,this),this.addRow=a(this.addRow,this);var g=this;this.element=b(c),this.splitterDiv=b(e),this.blocksManager=new d(f),this.splitterDiv.find(".split-link").click(this.handleSplitClick),this.element.delegate("input","change",function(a){if(b(a.currentTarget).closest("tr").is(":last-child"))return g.addRow()}),this.render()}return f.prototype.render=function(){var a,b,c,d;this.rows=[],this.element.empty(),d=this.blocksManager.blocks;for(b=0,c=d.length;b<c;b++)a=d[b],this.addRow(a);return this.addRow()},f.prototype.rowRemoved=function(a){var b,c;this.rows=function(){var d,e,f,g;f=this.rows,g=[];for(d=0,e=f.length;d<e;d++){c=f[d];if(c===a)continue;c.locked||(b=!0),g.push(c)}return g}.call(this);if(!b)return this.addRow()},f.prototype.addRow=function(a){var b;return b=new e(this,a),this.element.append(b.$row),this.rows.push(b),b},f.prototype.handleSplitClick=function(a){var b;return a.preventDefault(),b=this.splitterDiv.find("[name=duration]").val(),this.split(b)},f.prototype.split=function(a){if(a&&this.validate())return this.blocksManager.split(a),this.render()},f.prototype.validate=function(){var a,b,d,e,f,g;b=!0,this.blocksManager.reset(),f=this.rows;for(d=0,e=f.length;d<e;d++)a=f[d],a.validate()?a.blank()||(g=this.blocksManager).add.apply(g,a.getData()):b=!1;return b||alert(c.t("time_block_errors","There are errors in your time block selections.")),b},f.prototype.blocks=function(){var a,b,c,d,e;d=this.blocksManager.blocks,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],a.locked||e.push([a.start,a.end]);return e},f}()})}.call(this),define("jst/calendar/editCalendarEvent",["compiled/handlebars_helpers","i18n!calendar.edit_calendar_event"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editCalendarEvent"]=b(function(a,b,c,d,e){function r(a,b){var d="",e;return d+="\n            ",k=c.title,e=k||a.title,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"title",{hash:{}})),d+=q(e)+"\n          ",d}function s(a,b){var d="",e;return d+='\n            <input id="calendar_event_title" name="calendar_event[title]" size="30" maxlength="255" style="width: 150px;" type="text" value="',k=c.title,e=k||a.title,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"title",{hash:{}})),d+=q(e)+'"/>\n          ',d}function t(a,b){var d="",e,f;d+="\n              ",k=c.can_create_calendar_events,e=k||a.can_create_calendar_events,f=c["if"],l=m.program(6,u,b),l.hash={},l.fn=l,l.inverse=m.noop,e=f.call(a,e,l);if(e||e===0)d+=e;return d+="\n            ",d}function u(a,b){var d="",e;return d+='\n                <option value="',k=c.asset_string,e=k||a.asset_string,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"asset_string",{hash:{}})),d+=q(e)+'">',k=c.name,e=k||a.name,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"name",{hash:{}})),d+=q(e)+"</option>\n              ",d}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<form action=\'#\' id=\'edit_calendar_event_form\' style=\'padding: 5px; width: 400px\'>\n  <div class="event-details-content">\n    <table class="formtable" style="width: 100%;">\n      <tr>\n        <td style="vertical-align: top;"><label for="calendar_event_title">',g="Title:",h="title",i={},j="calendar.edit_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="</label></td>\n        <td>\n          ",k=c.lockedTitle,g=k||b.lockedTitle,h=c["if"],l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.program(3,s,e),g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n        </td>\n      </tr>\n      <tr>\n        <td style="vertical-align: top;"><label for="calendar_event_date">',g="Date:",h="date",i={},j="calendar.edit_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label></td>\n        <td><input id="calendar_event_date"type="text" name="date" style="width: 100px;" class="date_field"/></td>\n      </tr>\n      <tr>\n        <td style="vertical-align: top;"><label for="calendar_event_start_time">',g="From:",h="from",i={},j="calendar.edit_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label></td>\n        <td>\n          <div style="float: left;"><input id="calendar_event_start_time" type="text" name="start_time" style="width: 60px;" class="time_field start_time"/></div>\n          <div style="float: left; margin: 5px"><label for="calendar_event_end_time">',g="to",h="timespan_separator",i={},j="calendar.edit_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label></div>\n          <div style="float: left;"><input id="calendar_event_end_time" type="text" name="end_time" style="width: 60px;" class="time_field end_time"/></div>\n          <div class="clear"></div>\n        </td>\n      </tr>\n      <tr class="context_select">\n        <td><label for="calendar_event_context">',g="Calendar:",h="calendar",i={},j="calendar.edit_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</td>\n        <td>\n          <select id="calendar_event_context" class="context_id" name="calendar_event[context_code]">\n            ',k=c.contexts,g=k||b.contexts,h=c.each,l=m.program(5,t,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n          </select>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class="popover-links-holder event-details-footer">\n    <button type="submit" class="event_button btn btn-primary pull-right">',g="Submit",h="#buttons.submit",i={},j="calendar.edit_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</button>\n    <a href="#" class="event_button btn btn-secondary pull-right more_options_link">',g="More Options",h="links.more_options",i={},j="calendar.edit_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</a>\n  </div>\n</form>\n",f}),c["calendar/editCalendarEvent"]}),define("jst/calendar/editAssignment",["compiled/handlebars_helpers","i18n!calendar.edit_assignment"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editAssignment"]=b(function(a,b,c,d,e){function r(a,b){var d="",e,f;d+="\n              ",k=c.can_create_assignments,e=k||a.can_create_assignments,f=c["if"],l=m.program(2,s,b),l.hash={},l.fn=l,l.inverse=m.noop,e=f.call(a,e,l);if(e||e===0)d+=e;return d+="\n            ",d}function s(a,b){var d="",e;return d+='\n                <option value="',k=c.asset_string,e=k||a.asset_string,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"asset_string",{hash:{}})),d+=q(e)+'">',k=c.name,e=k||a.name,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"name",{hash:{}})),d+=q(e)+"</option>\n              ",d}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<form action=\'#\' id=\'edit_assignment_form\' style=\'padding: 5px; width: 400px\'>\n  <div class="event-details-content">\n    <table class="formtable" style="width: 100%;">\n      <tr>\n        <td><label for="assignment_title">',g="Title:",h="title",i={},j="calendar.edit_assignment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label></td>\n        <td><input id="assignment_title" name="assignment[title]" size="30" maxlength="255" style="width: 200px;" type="text" value="',k=c.title,g=k||b.title,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"title",{hash:{}})),f+=q(g)+'"/></td>\n      </tr>\n      <tr>\n        <td><label for="assignment_due_at">',g="Due:",h="due",i={},j="calendar.edit_assignment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label></td>\n        <td>\n          <input class="datetime_field" id="assignment_due_at" name="assignment[due_at]" size="30" style="width: 150px;" type="text"/>\n        </td>\n      </tr>\n      <tr class="context_select">\n        <td><label for="assignment_context">',g="Calendar:",h="calendar",i={},j="calendar.edit_assignment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label></td>\n        <td>\n          <select id="assignment_context" class="context_id">\n            ',k=c.contexts,g=k||b.contexts,h=c.each,l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n          </select>\n        </td>\n      </tr>\n      <tr>\n        <td><label for="assignment_group">',g="Group:",h="group",i={},j="calendar.edit_assignment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label></td>\n        <td class="assignment_group_select">\n          <select id="assignment_group" class="assignment_group" name="assignment[assignment_group_id]" aria-label="',g="Group:",h="group",i={},j="calendar.edit_assignment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">\n            <option value="new">[ New Group ]</option>\n          </select>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class="popover-links-holder event-details-footer">\n    <button type="submit" class="event_button btn btn-primary pull-right">',g="Submit",h="#buttons.submit",i={},j="calendar.edit_assignment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</button>\n    <a href="#" class="event_button btn btn-secondary pull-right more_options_link">',g="More Options",h="links.more_options",i={},j="calendar.edit_assignment",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</a>\n  </div>\n</form>\n",f}),c["calendar/editAssignment"]}),define("jst/calendar/editAssignmentOverride",["compiled/handlebars_helpers","i18n!calendar.edit_assignment_override"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editAssignmentOverride"]=b(function(a,b,c,d,e){function r(a,b){var d="",e,f;d+="\n              ",k=c.can_create_assignments,e=k||a.can_create_assignments,f=c["if"],l=m.program(2,s,b),l.hash={},l.fn=l,l.inverse=m.noop,e=f.call(a,e,l);if(e||e===0)d+=e;return d+="\n            ",d}function s(a,b){var d="",e;return d+='\n                <option value="',k=c.asset_string,e=k||a.asset_string,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"asset_string",{hash:{}})),d+=q(e)+'">',k=c.name,e=k||a.name,typeof e===n?e=e.call(a,{hash:{}}):e===p&&(e=o.call(a,"name",{hash:{}})),d+=q(e)+"</option>\n              ",d}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+="<form action='#' id='edit_assignment_form' style='padding: 5px; width: 400px'>\n  <div class=\"event-details-content\">\n    <table class=\"formtable\" style=\"width: 100%;\">\n      <tr>\n        <td>",g="Due:",h="due",i={},j="calendar.edit_assignment_override",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</td>\n        <td>\n          <input class="datetime_field" id="assignment_override_due_at" name="assignment_override[due_at]" size="30" style="width: 150px;" type="text" />\n        </td>\n      </tr>\n      <tr class="context_select">\n        <td>',g="Calendar:",h="calendar",i={},j="calendar.edit_assignment_override",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</td>\n        <td>\n          <select class="context_id">\n            ',k=c.contexts,g=k||b.contexts,h=c.each,l=m.program(1,r,e),l.hash={},l.fn=l,l.inverse=m.noop,g=h.call(b,g,l);if(g||g===0)f+=g;f+='\n          </select>\n        </td>\n      </tr>\n    </table>\n    <div class="popover-links-holder event-details-footer">\n      <button type="submit" class="event_button btn btn-primary pull-right">',g="Submit",h="#buttons.submit",i={},j="calendar.edit_assignment_override",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</button>\n      <a href="#" class="event_button btn btn-secondary pull-right more_options_link">',g="More Options",h="links.more_options",i={},j="calendar.edit_assignment_override",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</a>\n    </div>\n  </div>\n</form>\n",f}),c["calendar/editAssignmentOverride"]}),define("jst/calendar/genericSelectOptions",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/genericSelectOptions"]=b(function(a,b,c,d,e){function o(a,b){var d="",e,f;d+='\n  <option value="',h=c.asset_string,e=h||a.asset_string,f=c["if"],i=j.program(2,p,b),i.hash={},i.fn=i,i.inverse=j.program(4,q,b),e=f.call(a,e,i);if(e||e===0)d+=e;return d+='">',h=c.name,e=h||a.name,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"name",{hash:{}})),d+=n(e)+"</option>\n",d}function p(a,b){var d;return h=c.asset_string,d=h||a.asset_string,typeof d===k?d=d.call(a,{hash:{}}):d===m&&(d=l.call(a,"asset_string",{hash:{}})),n(d)}function q(a,b){var d;return h=c.id,d=h||a.id,typeof d===k?d=d.call(a,{hash:{}}):d===m&&(d=l.call(a,"id",{hash:{}})),n(d)}c=c||a.helpers;var f,g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;return h=c.collection,f=h||b.collection,g=c.each,i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,f=g.call(b,f,i),f||f===0?f:""}),c["calendar/genericSelectOptions"]}),define("jst/calendar/editApptCalendarEvent",["compiled/handlebars_helpers","i18n!calendar.edit_appt_calendar_event"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editApptCalendarEvent"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression;f+='<form action="',k=c.calendarEvent,g=k||b.calendarEvent,g=g===null||g===undefined||g===!1?g:g.appointment_group_url,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"calendarEvent.appointment_group_url",{hash:{}})),f+=q(g)+'" id="edit_appt_calendar_event_form">\n  <p>\n    <strong>',g="Description:",h="description",i={},j="calendar.edit_appt_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</strong><br>\n    <textarea name="description">',k=c.description,g=k||b.description,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"description",{hash:{}})),f+=q(g)+'</textarea>\n  </p>\n  <p>\n    <input type="checkbox" name="max_participants_option">\n    ',g="Limit this slot to",h="slot_limit",i={},j="calendar.edit_appt_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='\n    <input type="number" name="max_participants" class="max-participants" min="1" disabled>\n    ',g="users.",h="users",i={},j="calendar.edit_appt_calendar_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="\n  </p>\n</form>\n",f}),c["calendar/editApptCalendarEvent"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditApptCalendarEventDialog",["i18n!appt_calendar_event_dialog","jst/calendar/editApptCalendarEvent"],function(b,c){var d;return d=function(){function d(d){var e,f=this;this.event=d,this.save=a(this.save,this),this.form=$("<div></div>").html(c(this.event)).appendTo("body"),e=this.form.find("[name=max_participants_option]"),this.$maxParticipants=this.form.find("[name=max_participants]"),e.change(function(){return f.$maxParticipants.prop("disabled",!e.prop("checked"))}),this.event.calendarEvent.participants_per_appointment&&(e.click(),this.$maxParticipants.val(this.event.calendarEvent.participants_per_appointment)),this.dialog=this.form.dialog({autoOpen:!1,width:"auto",resizable:!1,title:b.t("title","Edit %{name}",{name:this.event.title}),buttons:[{text:b.t("update","Update"),click:this.save}]})}return d.prototype.show=function(){return this.dialog.dialog("open")},d.prototype.save=function(){var a,c,d,e;return a=this.dialog.getFormData(),c=a.max_participants_option==="on",d=a.max_participants,c&&d<=0?(this.$maxParticipants.errorBox(b.t("invalid_participants","You must allow at least one user to attend")),!1):(this.event.calendarEvent.description=a.description,c?(this.event.calendarEvent.total_slots=d,this.event.calendarEvent.remaining_slots=d-this.event.calendarEvent.child_events.length):(this.event.calendarEvent.total_slots=void 0,this.event.calendarEvent.remaining_slots=void 0),e=c?d:"",this.event.save({"calendar_event[description]":a.description,"calendar_event[participants_per_appointment]":e}),this.dialog.dialog("destroy"),this.form.remove())},d}()})}.call(this),define("jst/calendar/editAppointmentGroup",["compiled/handlebars_helpers","i18n!calendar.edit_appointment_group"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editAppointmentGroup"]=b(function(a,b,c,d,e){function s(a,b){return"checked"}function t(a,b){return" "}function u(a,b){return' style="display:none;" '}function v(a,b){return' style="display:none;" '}c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0,q=this.escapeExpression,r=c.blockHelperMissing;f+="<form action='#' id='edit_appointment_form'>\n  <div class=\"left-column-wrapper\">\n    <p>\n      <b>",g="Name",h="name",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</b><br />\n      <input type="text" name="title" value="',k=c.appointment_group,g=k||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.title,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"appointment_group.title",{hash:{}})),f+=q(g)+'">\n    </p>\n    <p>\n      <b>',g="Location",h="location",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</b><br />\n      <input type="text" name="location" value="',k=c.appointment_group,g=k||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.location_name,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"appointment_group.location_name",{hash:{}})),f+=q(g)+'">\n    </p>\n    <div class="select-calendar-container">\n      <b>',g="Calendar",h="calendar",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</b><br />\n      <button class="btn ag_contexts_selector"></button>\n      <div class="ag-menu-container"></div>\n    </div>\n    <p>\n      <input type="checkbox" class="group-signup-checkbox" id="group-signup-checkbox" name="use_group_signup" value="1" ',g="Group",k=c.participant_type,h=k||b.participant_type,k=c.ifEqual,i=k||b.ifEqual,l=m.program(1,s,e),l.hash={},l.fn=l,l.inverse=m.noop,k&&typeof i===n?g=i.call(b,h,g,l):g=r.call(b,i,h,g,l);if(g||g===0)f+=g;f+='>\n      <label for="group-signup-checkbox">',g="Have students sign up in groups.",h="group_signup",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</label>\n    </p>\n    <div class="group-signup" style="display: none">\n      <b>',g="Group Category",h="group_category",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</b><br />\n      <div class="group_select">\n        <select name="group_category_id"></select>\n      </div>\n    </div>\n  </div>\n  <div class="right-column-wrapper">\n    <div class="time-block-list-wrapper">\n      <div class="time-block-list">\n        <table class="time-block-list-header">\n          <tr>\n            <th class="date-column">',g="Date",h="date",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</th>\n            <th class="time-range-column" colspan="4">',g="Time Range",h="time_range",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</th>\n          </tr>\n        </table>\n        <div class="time-block-list-body-wrapper form-inline">\n          <table class="time-block-list-body"></table>\n        </div>\n        <div class="splitter">\n          <p>\n            <a class="split-link btn" href="#">Split</a>into slots of <input type="number" name="duration" value="30" style="width: 40px" /> minutes each.\n          </p>\n        </div>\n      </div>\n    </div>\n    <div style="margin-top: 1.5em">\n      <div id="options_help_dialog" style="display: none;">\n        <p>',g="Some existing reservations are over the limit you have added. These will not be affected, this change only prevents new reservations from being made.",h="appt_group_options_help1",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+="</p>\n        <p>",g="You can, however, manually remove any existing reservations.",h="appt_group_options_help2",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</p>\n      </div>\n      <b>Options</b>\n      <ul class="ag-options">\n        <li>\n          <input type="checkbox" id="appointment-blocks-per-slot-option-button" name="per_slot_option" value="1" />\n          <label for="appointment-blocks-per-slot-option-button">Limit each time slot to</label>\n          <input type="number" name="participants_per_appointment" value="',k=c.appointment_group,g=k||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.participants_per_appointment,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"appointment_group.participants_per_appointment",{hash:{}})),f+=q(g)+'" min="1" style="width: 40px;" />\n          <label for="appointment-blocks-per-slot-option-button">\n            <span ',g="Group",k=c.participant_type,h=k||b.participant_type,k=c.ifEqual,i=k||b.ifEqual,l=m.program(3,t,e),l.hash={},l.fn=l,l.inverse=m.program(5,u,e),k&&typeof i===n?g=i.call(b,h,g,l):g=r.call(b,i,h,g,l);if(g||g===0)f+=g;f+=' class="per_appointment_groups_label">groups.</span>\n            <span ',g="Group",k=c.participant_type,h=k||b.participant_type,k=c.ifEqual,i=k||b.ifEqual,l=m.program(7,v,e),l.hash={},l.fn=l,l.inverse=m.noop,k&&typeof i===n?g=i.call(b,h,g,l):g=r.call(b,i,h,g,l);if(g||g===0)f+=g;f+=' class="per_appointment_users_label">users.</span>\n          </label>\n          <a href="#" class="reservation_help hidden" title="',g="How will this affect reservations?",h="affect_reservations",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">\n            <img alt="Help" src="/images/help.png">\n          </a>\n        </li>\n        <li>\n          <label for="appointment-blocks-participant-visibility-button"><input type="checkbox" id="appointment-blocks-participant-visibility-button" name="participant_visibility" value="1" /> Allow students to see who has signed up for time slots.</label>\n        </li>\n        <li>\n          <input type="checkbox" id="max-per-student-option" name="max_appointments_per_participant_option" value="1">\n          <label for="max-per-student-option">Limit participants to attend</label>\n          <input type="number" name="max_appointments_per_participant" value="',k=c.appointment_group,g=k||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.max_appointments_per_participant,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"appointment_group.max_appointments_per_participant",{hash:{}})),f+=q(g)+'" min="1" style="width: 40px">\n          <label for="max-per-student-option">appointment(s).</label>\n          <a href="#" class="reservation_help hidden" title="',g="How will this affect reservations?",h="affect_reservations",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='">\n            <img alt="Help" src="/images/help.png">\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="details-wrapper">\n    <b>',g="Details:",h="details",i={},j="calendar.edit_appointment_group",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+='</b><br />\n    <textarea name="description" class="input-block-level">',k=c.appointment_group,g=k||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.description,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"appointment_group.description",{hash:{}})),f+=q(g)+"</textarea>\n  </div>\n</form>\n",f}),c["calendar/editAppointmentGroup"]}),define("jst/calendar/genericSelect",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/genericSelect"]=b(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n    <option value="',i=c.asset_string,e=i||a.asset_string,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.program(4,r,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='">',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"</option>\n  ",d}function q(a,b){var d;return i=c.asset_string,d=i||a.asset_string,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"asset_string",{hash:{}})),o(d)}function r(a,b){var d;return i=c.id,d=i||a.id,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"id",{hash:{}})),o(d)}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<select class="',i=c.cssClass,g=i||b.cssClass,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"cssClass",{hash:{}})),f+=o(g)+'" name="',i=c.name,g=i||b.name,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"name",{hash:{}})),f+=o(g)+'">\n  ',i=c.collection,g=i||b.collection,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</select>",f}),c["calendar/genericSelect"]}),define("jst/calendar/sectionCheckboxes",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/sectionCheckboxes"]=b(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n    <li>\n      <input type="checkbox" name="section_ids[]" value="',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'" id="',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'_checkbox" ',i=c.selected,e=i||a.selected,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='>\n      <label for="',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'_checkbox">',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"</label>\n    </li>\n  ",d}function q(a,b){return"checked"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+="<ul>\n  ",i=c.sections,g=i||b.sections,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</ul>\n",f}),c["calendar/sectionCheckboxes"]}),define("jst/calendar/contextSelector",["compiled/handlebars_helpers","i18n!calendar.context_selector"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/contextSelector"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+='<div class="ag_contexts_menu hidden">\n  <ul class="ag-contexts"></ul>\n  <button class="btn btn-small ag_contexts_done">',g="Done",h="done",i={},j="calendar.context_selector",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</button>\n</div>\n",f}),c["calendar/contextSelector"]}),define("jst/calendar/contextSelectorItem",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/contextSelectorItem"]=b(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n      <li>\n        <input type="checkbox" name="sections[]" value="',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'" id="option_',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'">\n        <label for="option_',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'">',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"</label>\n      </li>\n    ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<li>\n  <a class="ag_sections_toggle"></a>\n  <input type="checkbox" name="context_codes[]" value="',i=c.asset_string,g=i||b.asset_string,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"asset_string",{hash:{}})),f+=o(g)+'" id="option_',i=c.asset_string,g=i||b.asset_string,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"asset_string",{hash:{}})),f+=o(g)+'">\n  <label for="option_',i=c.asset_string,g=i||b.asset_string,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"asset_string",{hash:{}})),f+=o(g)+'">',i=c.name,g=i||b.name,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"name",{hash:{}})),f+=o(g)+'</label>\n  <ul class="ag_sections hidden">\n    ',i=c.course_sections,g=i||b.course_sections,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n  </ul>\n</li>\n",f}),c["calendar/contextSelectorItem"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/ContextSelector",["jquery","underscore","jst/calendar/contextSelector","jst/calendar/contextSelectorItem","compiled/fn/preventDefault"],function(b,c,d,e,f){var g,h;return h=function(){function d(b){this.context=b,this.sectionChange=a(this.sectionChange,this),this.setState=a(this.setState,this),this.change=a(this.change,this),this.toggleSections=a(this.toggleSections,this),this.state="off",this.locked=!1}return d.prototype.render=function(a){return this.$listItem=b(e(this.context)),this.$listItem.appendTo(a),this.$sectionsList=this.$listItem.find(".ag_sections"),this.$listItem.find(".ag_sections_toggle").click(f(this.toggleSections)),this.$contentCheckbox=this.$listItem.find('[name="context_codes[]"]'),this.$contentCheckbox.change(f(this.change)),this.$sectionCheckboxes=this.$listItem.find('[name="sections[]"]'),this.$sectionCheckboxes.change(this.sectionChange)},d.prototype.toggleSections=function(a){return b(a.target).toggleClass("ag-sections-expanded"),this.$sectionsList.toggleClass("hidden")},d.prototype.change=function(){var a;return a=function(){switch(this.state){case"off":return"on";case"on":return"off";case"partial":return"on"}}.call(this),this.setState(a)},d.prototype.setState=function(a){var c;if(this.locked)return;this.state=a;switch(this.state){case"on":case"off":c=this.state==="on",this.$contentCheckbox.prop("checked",c),this.$contentCheckbox.prop("indeterminate",!1),this.$sectionCheckboxes.prop("checked",c);break;case"partial":this.$contentCheckbox.prop("checked",!0),this.$contentCheckbox.prop("indeterminate",!0)}return b.publish("/contextSelector/changed")},d.prototype.sectionChange=function(){switch(this.$sectionCheckboxes.filter(":checked").length){case 0:return this.setState("off");case this.$sectionCheckboxes.length:return this.setState("on");default:return this.setState("partial")}},d.prototype.disable=function(){return this.$contentCheckbox.prop("disabled",!0),this.disableSections()},d.prototype.disableSections=function(){return this.$sectionCheckboxes.prop("disabled",!0)},d.prototype.lock=function(){return this.locked=!0,this.disable(),this.disableSections()},d.prototype.isChecked=function(){return this.state!=="off"},d.prototype.sections=function(){var a;return a=this.$sectionCheckboxes.filter(":checked"),a.length===this.$sectionCheckboxes.length?[]:c.map(a,function(a){return a.value})},d}(),g=function(){function a(a,c,e,g,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=this;this.apptGroup=c,this.contexts=e,this.$menu=b(a).html(d()),j=this.$menu.find(".ag-contexts"),b.subscribe("/contextSelector/changed",function(){return g(H.selectedContexts(),H.selectedSections())}),this.contextSelectorItems={},B=this.contexts;for(r=0,v=B.length;r<v;r++)k=B[r],o=new h(k),o.render(j),this.contextSelectorItems[o.context.asset_string]=o;if(this.apptGroup.sub_context_codes.length>0&&this.apptGroup.sub_context_codes[0].match(/^group_category_/)){C=this.contextSelectorItems;for(k in C)o=C[k],k===this.apptGroup.context_codes[0]&&o.setState("on"),o.lock()}else{n={},D=this.contexts;for(s=0,w=D.length;s<w;s++){k=D[s],E=k.course_sections;for(t=0,x=E.length;t<x;t++)p=E[t],n[p.asset_string]=k.asset_string}F=this.apptGroup.sub_context_codes;for(u=0,y=F.length;u<y;u++)q=F[u],b("[value='"+q+"']").prop("checked",!0),l=n[q],o=this.contextSelectorItems[l],o.sectionChange(),o.lock();G=this.apptGroup.context_codes;for(A=0,z=G.length;A<z;A++)m=G[A],o=this.contextSelectorItems[m],o.state==="off"&&(o.setState("on"),o.lock())}b(".ag_contexts_done").click(f(i)),g(this.selectedContexts(),this.selectedSections())}return a.prototype.selectedContexts=function(){var a;return a=c.chain(this.contextSelectorItems).values().filter(function(a){return a.state!=="off"}).map(function(a){return a.context.asset_string}).value(),a},a.prototype.selectedSections=function(){var a;return a=c.chain(this.contextSelectorItems).values().map(function(a){return a.sections()}).reject(function(a){return a.length===0}).flatten().value(),a},a}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditAppointmentGroupDetails",["jquery","underscore","i18n!EditAppointmentGroupDetails","compiled/calendar/TimeBlockList","jst/calendar/editAppointmentGroup","jst/calendar/genericSelect","jst/calendar/sectionCheckboxes","compiled/calendar/ContextSelector","compiled/fn/preventDefault","jquery.ajaxJSON","jquery.disableWhileLoading","jquery.instructure_forms"],function(b,c,d,e,f,g,h,i,j){var k;return k=function(){function h(c,d,g,h){var k,l,m,n,o,p,q,r,s,t,u,v,w,x=this;this.apptGroup=d,this.contexts=g,this.closeCB=h,this.toggleContextsMenu=a(this.toggleContextsMenu,this),this.contextsChanged=a(this.contextsChanged,this),this.save=a(this.save,this),this.saveClick=a(this.saveClick,this),this.saveWithoutPublishingClick=a(this.saveWithoutPublishingClick,this),this.openHelpDialog=a(this.openHelpDialog,this),this.currentContextInfo=null,b(c).html(f({title:this.apptGroup.title,contexts:this.contexts,appointment_group:this.apptGroup})),this.contextsHash={},w=this.contexts;for(u=0,v=w.length;u<v;u++)p=w[u],this.contextsHash[p.asset_string]=p;this.form=b(c).find("form"),this.contextSelector=new i(".ag-menu-container",this.apptGroup,this.contexts,this.contextsChanged,this.toggleContextsMenu),this.editing()?(this.form.attr("action",this.apptGroup.url),this.form.find(".context_id").val(this.apptGroup.context_code).attr("disabled",!0),this.form.find("select.context_id").change(),this.disableGroups(),this.apptGroup.participant_type==="Group"?(this.form.find(".group-signup-checkbox").prop("checked",!0),this.form.find(".group_category").val(this.apptGroup.sub_context_codes[0])):this.form.find(".group-signup-checkbox").prop("checked",!1),b(".reservation_help").click(this.openHelpDialog)):this.form.attr("action","/api/v1/appointment_groups"),this.form.find(".ag_contexts_selector").click(j(this.toggleContextsMenu)),t=function(){var a,b,c,d;c=this.apptGroup.appointmentEvents||[],d=[];for(a=0,b=c.length;a<b;a++)o=c[a],d.push([o.start,o.end,!0]);return d}.call(this),this.timeBlockList=new e(this.form.find(".time-block-list-body"),this.form.find(".splitter"),t),this.form.find('[name="slot_duration"]').change(function(a){if(x.form.find('[name="autosplit_option"]').is(":checked"))return x.timeBlockList.split(a.target.value),x.timeBlockList.render()}),this.form.find('[name="participant_visibility"]').prop("checked",this.apptGroup.participant_visibility==="protected"),this.form.find(".group-signup-checkbox").change(function(a){var b;return b=!!a.target.checked,x.form.find(".per_appointment_groups_label").toggle(b),x.form.find(".per_appointment_users_label").toggle(!b),x.form.find(".group-signup").toggle(b)}),this.form.find(".group-signup-checkbox").change(),m=this.form.find('[name="per_slot_option"]'),n=this.form.find('[name="participants_per_appointment"]'),s=function(a){return x.perSlotChange(m,n)},b.merge(m,n).on("change",s),this.apptGroup.participants_per_appointment>0?(m.prop("checked",!0),n.val(this.apptGroup.participants_per_appointment)):n.attr("disabled",!0),k=this.form.find("#max-per-student-option"),l=this.form.find('[name="max_appointments_per_participant"]'),r=function(a){return x.maxStudentAppointmentsChange(k,l)},b.merge(k,l).on("change",r),q=this.apptGroup.max_appointments_per_participant,l.val(q),q>0||this.creating()?(k.prop("checked",!0),this.creating()&&l.val()===""&&l.val("1")):l.attr("disabled",!0),this.apptGroup.workflow_state==="active"&&this.form.find("#appointment-blocks-active-button").attr("disabled",!0).prop("checked",!0)}return h.prototype.creating=function(){return!this.editing()},h.prototype.editing=function(){return this.apptGroup.id!=null},h.prototype.perSlotChange=function(a,b){var d;return this.checkBoxInputChange(a,b),d=parseInt(b.val()),this.helpIconShowIf(a,c.any(this.apptGroup.appointments,function(a){return a.child_events_count>d}))},h.prototype.maxStudentAppointmentsChange=function(a,b){var d,e,f,g,h,i,j,k,l,m,n;this.checkBoxInputChange(a,b),f=parseInt(b.val()),e={},m=this.apptGroup.appointments;for(h=0,j=m.length;h<j;h++){d=m[h],n=d.child_events;for(i=0,k=n.length;i<k;i++)g=n[i],e[l=g.user.id]||(e[l]=0),e[g.user.id]+=1}return this.helpIconShowIf(a,c.any(e,function(a,b){return a>f}))},h.prototype.helpIconShowIf=function(a,b){var c;return c=a.closest("li").find(".reservation_help"),b&&a.is(":checked")?c.removeClass("hidden"):c.addClass("hidden")},h.prototype.checkBoxInputChange=function(a,b){return a.prop("checked")&&b.val()===""&&b.val("1"),b.prop("disabled",!a.prop("checked"))},h.prototype.openHelpDialog=function(a){return a.preventDefault(),b("#options_help_dialog").dialog({title:d.t("affect_reservations","How will this affect reservations?"),width:400})},h.prototype.saveWithoutPublishingClick=function(a){return a.preventDefault(),this.save(!1)},h.prototype.saveClick=function(a){return a.preventDefault(),this.save(!0)},h.prototype.save=function(a){var c,e,f,g,h,i,j,k,l,m,n,o,p=this;e=this.form.getFormData({object_name:"appointment_group"}),j={"appointment_group[title]":e.title,"appointment_group[description]":e.description,"appointment_group[location_name]":e.location};if(e.max_appointments_per_participant_option){if(e.max_appointments_per_participant<1)return b('[name="max_appointments_per_participant"]').errorBox(d.t("bad_max_appts","You must allow at least one appointment per participant")),!1;j["appointment_group[max_appointments_per_participant]"]=e.max_appointments_per_participant}else j["appointment_group[max_appointments_per_participant]"]="";j["appointment_group[new_appointments]"]=[];if(!this.timeBlockList.validate())return!1;o=this.timeBlockList.blocks();for(m=0,n=o.length;m<n;m++)k=o[m],j["appointment_group[new_appointments]"].push([b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(k[0])),b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(k[1]))]);if(e.per_slot_option){if(e.participants_per_appointment<1)return b('[name="participants_per_appointment"]').errorBox(d.t("bad_per_slot","You must allow at least one appointment per time slot")),!1;j["appointment_group[participants_per_appointment]"]=e.participants_per_appointment}else j["appointment_group[participants_per_appointment]"]="";a&&this.apptGroup.workflow_state!=="active"&&(j["appointment_group[publish]"]="1"),j["appointment_group[participant_visibility]"]=e.participant_visibility==="1"?"protected":"private",delete e["context_codes[]"],delete e["sections[]"],c=this.contextSelector.selectedContexts();if(c.length===0){b(".ag_contexts_selector").errorBox(d.t("context_required","You need to select a calendar"));return}return j["appointment_group[context_codes]"]=c,this.creating()&&(e.use_group_signup==="1"&&e.group_category_id?j["appointment_group[sub_context_codes]"]=[e.group_category_id]:(l=this.contextSelector.selectedSections(),l&&(j["appointment_group[sub_context_codes]"]=l)),j["appointment_group[min_appointments_per_participant]"]=1),i=function(){return p.closeCB(!0)},h=function(){},g=this.editing()?"PUT":"POST",f=b.ajaxJSON(this.form.attr("action"),g,j,i,h),this.form.disableWhileLoading(f)},h.prototype.contextsChanged=function(a,b){var e,f,g,h,i,j;b.length===0&&a.length===0?this.form.find(".ag_contexts_selector").text(d.t("select_calendars","Select Calendars")):(a.length>0&&(f=a[0],i=this.contextsHash[f].name,a.length>1&&(i+=d.t("and_n_contexts"," and %{n} others",{n:a.length-1})),this.form.find(".ag_contexts_selector").text(i)),b.length>0&&(h=b[0],g=c.chain(this.contexts).pluck("course_sections").flatten().find(function(a){return a.asset_string===h}).value(),i=g.name,b.length>1&&(i+=d.t("and_n_sectionCodes"," and %{n} others",{n:b.length-1})),this.form.find(".ag_contexts_selector").text(i))),e=this.contextsHash[a[0]];if(!(a.length===1&&b.length===0&&((j=e.group_categories)!=null?j.length:void 0)>0))return this.disableGroups();this.enableGroups(e);if(this.apptGroup.sub_context_codes.length>0)return this.form.find("[name=group_category_id]").prop("disabled",!0)},h.prototype.disableGroups=function(){return this.form.find(".group-signup-checkbox").attr("disabled",!0).prop("checked",!1),this.form.find(".group-signup").hide()},h.prototype.enableGroups=function(a){var b;return this.form.find(".group-signup-checkbox").attr("disabled",!1),b={cssClass:"group_category",name:"group_category_id",collection:a.group_categories},this.form.find(".group_select").html(g(b))},h.prototype.toggleContextsMenu=function(a){return b(".ag_contexts_menu").toggleClass("hidden")},h}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditAppointmentGroupDialog",["jquery","i18n!calendar","compiled/calendar/EditAppointmentGroupDetails","jst/calendar/editAppointmentGroup","jqueryui/dialog"],function(b,c,d,e){var f,g;return g=b('<div id="edit_event"><div class="wrapper"></div>').appendTo("body").dialog({autoOpen:!1,width:"auto",resizable:!1,title:c.t("titles.edit_appointment_group","Edit Appointment Group")}),g.dialog("widget").find("#edit_event").css("overflow","visible"),f=function(){function b(b,c,d){this.apptGroup=b,this.contexts=c,this.parentCloseCB=d,this.show=a(this.show,this),this.closeCB=a(this.closeCB,this),this.currentContextInfo=null}return b.prototype.closeCB=function(a){return g.dialog("close"),this.parentCloseCB(a)},b.prototype.show=function(){var a;return this.appointmentGroupsForm=new d(g.find(".wrapper"),this.apptGroup,this.contexts,this.closeCB),a=this.apptGroup.workflow_state==="active"?[{text:c.t("save_changes","Save Changes"),"class":"btn-primary",click:this.appointmentGroupsForm.saveClick}]:[{text:c.t("save","Save"),click:this.appointmentGroupsForm.saveWithoutPublishingClick},{text:c.t("save_and_publish","Save & Publish"),"class":"btn-primary",click:this.appointmentGroupsForm.saveClick}],g.dialog("option","buttons",a).dialog("open")},b}()})}.call(this),define("jst/calendar/editEvent",["compiled/handlebars_helpers","i18n!calendar.edit_event"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editEvent"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+='<div class="content" id="edit_event_tabs">\n  <ul class="tab_list">\n    <li><a href="#edit_calendar_event_form_holder" class="edit_calendar_event_option">',g="Event",h="tabs.event",i={},j="calendar.edit_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;f+='</a></li>\n    <li><a href="#edit_assignment_form_holder" class="edit_assignment_option">',g="Assignment",h="tabs.assignment",i={},j="calendar.edit_event",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+='</a></li>\n  </ul>\n  <div id="edit_calendar_event_form_holder" class="tab_holder"></div>\n  <div id="edit_assignment_form_holder" class="tab_holder"></div>\n</div>',f}),c["calendar/editEvent"]}),define("jst/calendar/appointmentGroupList",["compiled/handlebars_helpers","i18n!calendar.appointment_group_list"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/appointmentGroupList"]=b(function(a,b,c,d,e){function q(a,b){var d="",e,f,g,h;d+='\n  <div class="scheduler-header">\n    <h2 id="appointment-group-list-header">',e="My Appointment Groups",f="my_appointment_groups",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+='</h2>\n    <button class="btn single_item_done_button">Done, Go Back To List</button>\n  </div>\n  <ul class="scheduler-content" id="appointment-group-list">\n    ',i=c.appointment_groups,e=i||a.appointment_groups,f=c.each,j=k.program(2,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n  </ul>\n",d}function r(a,b){var d="",e,f;d+="\n      <li class='appointment-group-item admin-link-hover-area ",i=c.requiring_action,e=i||a.requiring_action,f=c["if"],j=k.program(3,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=" ",i=c.published,e=i||a.published,f=c.unless,j=k.program(5,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="' data-appointment-group-id='",i=c.id,e=i||a.id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"id",{hash:{}})),d+=p(e)+"'>\n        ",i=c.is_manageable,e=i||a.is_manageable,f=c["if"],j=k.program(7,u,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="\n        ",i=c.requiring_action,e=i||a.requiring_action,f=c["if"],j=k.program(12,x,b),j.hash={},j.fn=j,j.inverse=k.program(14,y,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='\n\n        <h3><a class="view_calendar_link" href="#">',i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=p(e)+"</a></h3>\n        <div class='ag-context'>\n          ",i=c.contexts,e=i||a.contexts,i=c.toSentence,f=i||a.toSentence,j=k.program(18,B,b),j.hash={},j.fn=j,j.inverse=k.noop,i&&typeof f===l?e=f.call(a,e,j):e=o.call(a,f,e,j);if(e||e===0)d+=e;d+="\n        </div>\n        ",i=c.location_name,e=i||a.location_name,f=c["if"],j=k.program(20,C,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="\n        ",i=c.description,e=i||a.description,f=c["if"],j=k.program(22,D,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="\n        ",i=c.is_manageable,e=i||a.is_manageable,f=c["if"],j=k.program(24,E,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n      </li>\n    ",d}function s(a,b){return"requiring-action"}function t(a,b){return"unpublished-ag"}function u(a,b){var d="",e,f,g;d+='\n          <div class="admin-links">\n            <button class="al-trigger btn btn-mini">\n              <i class="icon-settings"></i><i class="icon-mini-arrow-down"></i>\n              <span class="screenreader-only">Manage</span>\n            </button>\n            <ul class="al-options">\n              <li><a class="edit_link" href="#"><i class="icon-edit"></i> Edit</a></li>\n              <li><a class="message_link" href="#"><i class="icon-message"></i>&nbsp; ',e="Group",i=c.participant_type,f=i||a.participant_type,i=c.ifEqual,g=i||a.ifEqual,j=k.program(8,v,b),j.hash={},j.fn=j,j.inverse=k.program(10,w,b),i&&typeof g===l?e=g.call(a,f,e,j):e=o.call(a,g,f,e,j);if(e||e===0)d+=e;return d+='</a></li>\n              <li><a class="delete_link" href="#"><i class="icon-trash"></i> Delete</a></li>\n            </ul>\n          </div>\n        ',d}function v(a,b){var d,e,f,g;return d="Message Groups Who...",e="message_groups",f={},g="calendar.appointment_group_list",f.scope=g,i=c.t,g=i||a.t,j={},j.hash=f,typeof g===l?d=g.call(a,e,d,j):g===n?d=m.call(a,"t",e,d,j):d=g,d||d===0?d:""}function w(a,b){var d,e,f,g;return d="Message Students Who...",e="message_students",f={},g="calendar.appointment_group_list",f.scope=g,i=c.t,g=i||a.t,j={},j.hash=f,typeof g===l?d=g.call(a,e,d,j):g===n?d=m.call(a,"t",e,d,j):d=g,d||d===0?d:""}function x(a,b){return'\n          <div class="alert alert-warning">\n            <div>\n              You can <a class="view_calendar_link" href="#">sign up</a> for this.\n            </div>\n          </div>\n        '}function y(a,b){var d="",e,f;d+="\n          ",i=c.reserved_times,e=i||a.reserved_times,f=c["if"],j=k.program(15,z,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n        ",d}function z(a,b){var d="",e,f;d+='\n            <div class="alert alert-success">\n              <div>You\'re signed up for</div>\n              ',i=c.reserved_times,e=i||a.reserved_times,f=c.each,j=k.program(16,A,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n            </div>\n          ",d}function A(a,b){var d="",e;d+='\n                <div><strong><a href="#" class="show_event_link" data-event-id="',i=c.id,e=i||a.id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"id",{hash:{}})),d+=p(e)+'">',i=c.formatted_time,e=i||a.formatted_time,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"formatted_time",{hash:{}}));if(e||e===0)d+=e;return d+="</a></strong></div>\n              ",d}function B(a,b){var d="",e;return d+='<a href="',i=c.url,e=i||a.url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"url",{hash:{}})),d+=p(e)+'">',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=p(e)+"</a>",d}function C(a,b){var d="",e,f,g,h;d+='\n          <div class="ag-location">\n            <strong>',e="Location:",f="location",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</strong>\n            <span>",i=c.location_name,e=i||a.location_name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"location_name",{hash:{}})),d+=p(e)+"</span>\n          </div>\n        ",d}function D(a,b){var d="",e,f;return d+='\n          <p class="ag-description">',i=c.description,e=i||a.description,i=c.newlinesToBreak,f=i||a.newlinesToBreak,typeof f===l?e=f.call(a,e,{hash:{}}):f===n?e=m.call(a,"newlinesToBreak",e,{hash:{}}):e=f,d+=p(e)+"</p>\n        ",d}function E(a,b){var d="",e,f,g;d+='\n          <div class="ag-x-of-x-signed-up">\n            ',e="Group",i=c.participant_type,f=i||a.participant_type,i=c.ifEqual,g=i||a.ifEqual,j=k.program(25,F,b),j.hash={},j.fn=j,j.inverse=k.program(27,G,b),i&&typeof g===l?e=g.call(a,f,e,j):e=o.call(a,g,f,e,j);if(e||e===0)d+=e;d+="\n            ",i=c.published,e=i||a.published,f=c.unless,j=k.program(29,H,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n          </div>\n        ",d}function F(a,b){var d="",e,f,g,h;d+="\n              ",e="%{participant_count} groups have signed up",f="x_groups_have_signed_up",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="\n            ",d}function G(a,b){var d="",e,f,g,h;d+="\n              ",e="%{participant_count} people have signed up",f="x_people_have_signed_up",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="\n            ",d}function H(a,b){return"(unpublished)"}function I(a,b){var d="",e,f;d+='\n  <div class="scheduler-header"></div>\n  <div class="scheduler-content">\n    ',i=c.canManageAGroup,e=i||a.canManageAGroup,f=c["if"],j=k.program(32,J,b),j.hash={},j.fn=j,j.inverse=k.program(34,K,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n  </div>\n",d}function J(a,b){var d="",e,f,g,h;d+="\n      <h2>\n        ",e="You have not created any appointment groups, and there are none you can sign up for",f="scheduler_explanation_teacher_header",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="\n      </h2>\n      <p>\n        ",e="This is the Scheduler Tool. You can use it to create appointment groups for your students to sign up for.",f="scheduler_explanation_teacher_paragraph_1",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="\n      </p>\n      <p>\n        ",e="For example, lets say you want to go over the midterm paper assignment with each of the students in your course. You would create a new appointment group, specify the dates and times that you're available, tell it to split that time into 15 minute blocks and only allow one student per time-block.",f="scheduler_explanation_teacher_paragraph_2",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="\n      </p>\n      <p>\n        ",e="Then students would get notified and see that they need to sign up for one of the specified time blocks. They will be shown a calendar with the available time blocks overlaid on top of everything on their other calendars so they can pick a time that works for them.",f="scheduler_explanation_teacher_paragraph_3",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="\n      </p>\n      <p>\n        ",e='*Get started now by clicking the "Create an appointment group" button to the right *',f="scheduler_explanation_teacher_paragraph_4",g={},h="calendar.appointment_group_list",g.scope=h,h="<strong>\\n            $1</strong>",g.w0=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="\n      </p>\n    ",d}function K(a,b){var d="",e,f,g,h;d+="\n      <h2>\n        ",e="You do not have any appointment groups to sign up for",f="scheduler_explanation_student_header",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="\n      </h2>\n      <p>\n        ",e='Teachers can use this scheduler tool to schedule things for their students to sign up for. Things like: "office hours", "group presentation time-slots" or "lunch with an alumnus".',f="scheduler_explanation_student_paragraph_1",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="\n      </p>\n      <p>\n        ",e="None of your teachers have made any appointments you can sign up for so there is not anything for you do to now. You will be notified if anyone does create something so you can come sign up for it.",f="scheduler_explanation_student_paragraph_2",g={},h="calendar.appointment_group_list",g.scope=h,i=c.t,h=i||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="\n      </p>\n    ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=c.blockHelperMissing,p=this.escapeExpression;i=c.appointment_groups,g=i||b.appointment_groups,h=c["if"],j=k.program(1,q,e),j.hash={},j.fn=j,j.inverse=k.program(31,I,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f}),c["calendar/appointmentGroupList"]}),define("jst/calendar/schedulerRightSideAdminSection",["compiled/handlebars_helpers","i18n!calendar.scheduler_right_side_admin_section"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/schedulerRightSideAdminSection"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l,m=this,n="function",o=c.helperMissing,p=void 0;f+='<div class="rs-section">\n  <p>The scheduler tool lets you set up time slots that students (or student groups) can sign up for. To get started, click the button below.</p>\n  <button class="create_link btn">',g="Create an appointment group",h="create_a_new_set_of_appointments",i={},j="calendar.scheduler_right_side_admin_section",i.scope=j,k=c.t,j=k||b.t,l={},l.hash=i,typeof j===n?g=j.call(b,h,g,l):j===p?g=o.call(b,"t",h,g,l):g=j;if(g||g===0)f+=g;return f+="</button>\n</div>\n",f}),c["calendar/schedulerRightSideAdminSection"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("compiled/calendar/Scheduler",["jquery","underscore","i18n!calendar","jst/calendar/appointmentGroupList","jst/calendar/schedulerRightSideAdminSection","compiled/calendar/EditAppointmentGroupDialog","compiled/calendar/MessageParticipantsDialog","jst/calendar/deleteItem","compiled/util/semanticDateRange","jquery.instructure_date_and_time","jqueryui/dialog","jquery.instructure_misc_plugins","vendor/jquery.ba-tinypubsub","vendor/jquery.spin"],function(c,d,e,f,g,h,i,j,k){var l;return l=function(){function l(b,e){this.calendar=e,this.messageLinkClick=a(this.messageLinkClick,this),this.deleteLinkClick=a(this.deleteLinkClick,this),this.editLinkClick=a(this.editLinkClick,this),this.showList=a(this.showList,this),this.doneClick=a(this.doneClick,this),this.viewCalendarForGroup=a(this.viewCalendarForGroup,this),this.viewCalendarForGroupId=a(this.viewCalendarForGroupId,this),this.viewCalendarForElement=a(this.viewCalendarForElement,this),this.showEventLinkClick=a(this.showEventLinkClick,this),this.viewCalendarLinkClick=a(this.viewCalendarLinkClick,this),this.redraw=a(this.redraw,this),this.loadData=a(this.loadData,this),this.canManageAGroup=a(this.canManageAGroup,this),this.hide=a(this.hide,this),this.show=a(this.show,this),this.eventDeleted=a(this.eventDeleted,this),this.eventSaved=a(this.eventSaved,this),this.dialogCloseCB=a(this.dialogCloseCB,this),this.createClick=a(this.createClick,this),this.div=c(b),this.contexts=this.calendar.contexts,this.listDiv=this.div.find(".appointment-list"),this.div.delegate(".single_item_done_button","click",this.doneClick),this.div.delegate(".view_calendar_link","click",this.viewCalendarLinkClick),this.listDiv.delegate(".edit_link","click",this.editLinkClick),this.listDiv.delegate(".message_link","click",this.messageLinkClick),this.listDiv.delegate(".delete_link","click",this.deleteLinkClick),this.listDiv.delegate(".show_event_link","click",this.showEventLinkClick),this.canManageAGroup()&&(this.div.addClass("can-manage"),this.rightSideAdminSection=c(g()),this.rightSideAdminSection.find(".create_link").click(this.createClick),this.appointmentGroupContexts=d.filter(this.contexts,function(a){return a.can_create_appointment_groups})),c.subscribe("CommonEvent/eventSaved",this.eventSaved),c.subscribe("CommonEvent/eventDeleted",this.eventDeleted)}return l.prototype.createClick=function(a){var b;return a.preventDefault(),b={context_codes:[],sub_context_codes:[]},this.createDialog=new h(b,this.appointmentGroupContexts,this.dialogCloseCB),this.createDialog.show()},l.prototype.dialogCloseCB=function(a){if(a)return this.calendar.dataSource.clearCache(),this.loadData()},l.prototype.eventSaved=function(a){if(this.active)return this.calendar.dataSource.clearCache(),this.loadData()},l.prototype.eventDeleted=function(a){if(this.active)return this.calendar.dataSource.clearCache(),this.loadData()},l.prototype.toggleListMode=function(a){var b;return a?(delete this.viewingGroup,this.calendar.updateFragment({appointment_group_id:null}),this.showList(),this.canManageAGroup()?(c("#right-side .rs-section").hide(),this.rightSideAdminSection.appendTo("#right-side")):c("#right-side-wrapper").hide()):(c("#right-side-wrapper").show(),c("#right-side .rs-section").not("#undated-events, #calendar-feed").show(),(b=this.rightSideAdminSection)!=null?b.detach():void 0)},l.prototype.show=function(){return c("#undated-events, #calendar-feed").hide(),this.active=!0,this.div.show(),this.loadData(),this.toggleListMode(!0)},l.prototype.hide=function(){return c("#undated-events, #calendar-feed").show(),this.active=!1,this.div.hide(),this.toggleListMode(!1),this.calendar.displayAppointmentEvents=null,c.publish("Calendar/restoreVisibleContextList")},l.prototype.canManageAGroup=function(){var a,b,c,d;d=this.contexts;for(b=0,c=d.length;b<c;b++){a=d[b];if(a.can_create_appointment_groups)return!0}return!1},l.prototype.loadData=function(){var a,b=this;if(!this.loadingDeferred||this.loadingDeferred&&!this.loadingDeferred.isResolved())this.loadingDeferred=new c.Deferred;return this.groups={},(a=this.loadingDiv)==null&&(this.loadingDiv=c('<div id="scheduler-loading" />').appendTo(this.div).spin()),this.calendar.dataSource.getAppointmentGroups(this.canManageAGroup(),function(a){var c,d,e;for(d=0,e=a.length;d<e;d++)c=a[d],b.groups[c.id]=c;return b.redraw(),b.loadingDeferred.resolve()})},l.prototype.redraw=function(){var a,e,g,h,i,j,l,m;this.loadingDiv.hide();if(this.groups){e=[],l=this.groups;for(h in l){a=l[h],m=a.reserved_times;for(j in m)i=m[j],i.formatted_time=k(i.start_at,i.end_at);a.contexts=d.filter(this.contexts,function(c){var d;return d=c.asset_string,b.call(a.context_codes,d)>=0}),a.published=a.workflow_state==="active",e.push(a)}g=f({appointment_groups:e,canManageAGroup:this.canManageAGroup()}),this.listDiv.find(".list-wrapper").html(g),this.viewingGroup&&(this.viewingGroup=this.groups[this.viewingGroup.id],this.viewingGroup?(this.listDiv.find(".appointment-group-item[data-appointment-group-id='"+this.viewingGroup.id+"']").addClass("active"),this.calendar.displayAppointmentEvents=this.viewingGroup):this.toggleListMode(!0))}return c.publish("Calendar/refetchEvents")},l.prototype.viewCalendarLinkClick=function(a){return a.preventDefault(),this.viewCalendarForElement(c(a.target))},l.prototype.showEventLinkClick=function(a){var b,d,e,f,g,h,i,j,k,l;a.preventDefault(),f=this.viewCalendarForElement(c(a.target)),e=c(a.target).data("event-id");if(e){k=f.object.appointmentEvents;for(g=0,i=k.length;g<i;g++){b=k[g],l=b.object.childEvents;for(h=0,j=l.length;h<j;h++){d=l[h];if(d.id!==e)continue;this.calendar.gotoDate(d.start);return}}}},l.prototype.viewCalendarForElement=function(a){var b,c,d,e,f;return d=a.closest(".appointment-group-item"),c=d.data("appointment-group-id"),d.addClass("active"),b=(e=this.groups)!=null?e[c]:void 0,this.viewCalendarForGroup((f=this.groups)!=null?f[c]:void 0),b},l.prototype.viewCalendarForGroupId=function(a){var b=this;return this.loadData(),this.loadingDeferred.done(function(){var c;return b.viewCalendarForGroup((c=b.groups)!=null?c[a]:void 0)})},l.prototype.viewCalendarForGroup=function(a){var b=this;return this.calendar.updateFragment({appointment_group_id:a.id}),this.toggleListMode(!1),this.viewingGroup=a,this.loadingDeferred.done(function(){return b.div.addClass("showing-single"),b.calendar.calendar.show(),b.calendar.calendar.fullCalendar("changeView","agendaWeek"),b.viewingGroup.start_at?b.calendar.gotoDate(c.parseFromISO(b.viewingGroup.start_at).time):b.calendar.gotoDate(new Date),b.calendar.displayAppointmentEvents=b.viewingGroup,c.publish("Calendar/refetchEvents"),b.redraw()})},l.prototype.doneClick=function(a){return a.preventDefault(),this.toggleListMode(!0)},l.prototype.showList=function(){return this.div.removeClass("showing-single"),this.listDiv.find(".appointment-group-item").removeClass("active"),this.calendar.calendar.hide(),this.calendar.displayAppointmentEvents=null},l.prototype.editLinkClick=function(a){var b,d,e=this;a.preventDefault(),b=(d=this.groups)!=null?d[c(a.target).closest(".appointment-group-item").data("appointment-group-id")]:void 0;if(!b)return;return this.calendar.dataSource.getEventsForAppointmentGroup(b,function(a){return e.loadData(),e.loadingDeferred.done(function(){return b=e.groups[b.id],e.createDialog=new h(b,e.appointmentGroupContexts,e.dialogCloseCB),e.createDialog.show()})})},l.prototype.deleteLinkClick=function(a){var b,d,f=this;a.preventDefault(),b=(d=this.groups)!=null?d[c(a.target).closest(".appointment-group-item").data("appointment-group-id")]:void 0;if(!b)return;return c("<div />").confirmDelete({url:b.url,message:c(j({message:e.t("confirm_appointment_group_deletion","Are you sure you want to delete this appointment group?"),details:e.t("appointment_group_deletion_details","Deleting it will also delete any appointments that have been signed up for by students.")})),dialog:{title:e.t("confirm_deletion","Confirm Deletion")},prepareData:function(a){return{cancel_reason:a.find("#cancel_reason").val()}},confirmed:function(){return c(a.target).closest(".appointment-group-item").addClass("event_pending")},success:function(){return f.calendar.dataSource.clearCache(),f.loadData()}})},l.prototype.messageLinkClick=function(a){var b,d;return a.preventDefault(),b=(d=this.groups)!=null?d[c(a.target).closest(".appointment-group-item").data("appointment-group-id")]:void 0,this.messageDialog=new i({group:b,dataSource:this.calendar.dataSource}),this.messageDialog.show()},l}()})}.call(this),define("jst/calendar/contextList",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/contextList"]=b(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n    <li data-context="',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'"\n        class="context_list_context hover-container">\n      <span class="context-list-toggle-box group_',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'"\n            aria-labelledby="group_',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'_checkbox_label"\n            tabindex="0"\n            role="checkbox"></span>\n      <label id="group_',i=c.asset_string,e=i||a.asset_string,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"asset_string",{hash:{}})),d+=o(e)+'_checkbox_label">\n        ',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"\n      </label>\n    </li>\n  ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<ul id="context-list">\n  ',i=c.contexts,g=i||b.contexts,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</ul>\n",f}),c["calendar/contextList"]}),define("jst/calendar/undatedEvents",["compiled/handlebars_helpers","i18n!calendar.undated_events"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/undatedEvents"]=b(function(a,b,c,d,e){function p(a,b){var d="",e,f,g,n;d+="\n  <b>",e="Undated Events",f="undated_events",g={},n="calendar.undated_events",g.scope=n,h=c.t,n=h||a.t,i={},i.hash=g,typeof n===k?e=n.call(a,f,e,i):n===m?e=l.call(a,"t",f,e,i):e=n;if(e||e===0)d+=e;d+="</b>\n  <ul>\n    ",h=c.events,e=h||a.events,f=c.each,i=j.program(2,q,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n  </ul>\n",d}function q(a,b){var d="",e,f,g;d+='\n      <li class="undated_event event group_',h=c.contextCode,e=h||a.contextCode,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"contextCode",{hash:{}})),d+=n(e)+" ",h=c.id,e=h||a.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"id",{hash:{}})),d+=n(e)+'" data-event-id="',h=c.id,e=h||a.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"id",{hash:{}})),d+=n(e)+"\">\n        <i class='icon-",h=c.icon,e=h||a.icon,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"icon",{hash:{}})),d+=n(e)+"' aria-hidden='true'></i>\n        <a href=\"",h=c.details_url,e=h||a.details_url,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"details_url",{hash:{}})),d+=n(e)+"\" class='undated_event_title'>",e=35,h=c.title,f=h||a.title,h=c.truncate,g=h||a.truncate,i=j.program(3,r,b),i.hash={},i.fn=i,i.inverse=j.noop,h&&typeof g===k?e=g.call(a,f,e,i):e=o.call(a,g,f,e,i);if(e||e===0)d+=e;return d+="</a>\n      </li>\n    ",d}function r(a,b){var c="";return c}function s(a,b){var d="",e,f,g,j;d+='\n  <div class="spin_holder"></div>\n  <a href="#" data-text-while-loading="',e="Loading undated events...",f="loading_undated_events",g={},j="calendar.undated_events",g.scope=j,h=c.t,j=h||a.t,i={},i.hash=g,typeof j===k?e=j.call(a,f,e,i):j===m?e=l.call(a,"t",f,e,i):e=j;if(e||e===0)d+=e;d+='" class="undated-events-link">',e="Show undated events",f="show_undated_events",g={},j="calendar.undated_events",g.scope=j,h=c.t,j=h||a.t,i={},i.hash=g,typeof j===k?e=j.call(a,f,e,i):j===m?e=l.call(a,"t",f,e,i):e=j;if(e||e===0)d+=e;return d+="</a>\n",d}c=c||a.helpers;var f,g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression,o=c.blockHelperMissing;return h=c.events,f=h||b.events,g=c["if"],i=j.program(1,p,e),i.hash={},i.fn=i,i.inverse=j.program(5,s,e),f=g.call(b,f,i),f||f===0?f:""}),c["calendar/undatedEvents"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/calendar/CommonEvent.Assignment",["i18n!calendar","compiled/calendar/CommonEvent","jquery.instructure_date_and_time","jquery.instructure_misc_helpers"],function(b,d){var e,f;return f=b.t("prompts.delete_assignment","Are you sure you want to delete this assignment?"),e=function(b){function d(b,c){this.save=a(this.save,this),this.saveDates=a(this.saveDates,this),this.copyDataFromObject=a(this.copyDataFromObject,this),d.__super__.constructor.apply(this,arguments),this.eventType="assignment",this.deleteConfirmation=f,this.deleteURL=c.assignment_url,this.addClass("assignment")}return c(d,b),d.prototype.copyDataFromObject=function(a){return a.assignment&&(a=a.assignment),this.object=this.assignment=a,a.id&&(this.id="assignment_"+a.id),this.title=a.title||a.name||"Untitled",this.lock_explanation=this.object.lock_explanation,this.addClass("group_"+this.contextCode()),this.description=a.description,this.start=this.parseStartDate(),this.start&&(this.originalStartDate=new Date(this.start)),d.__super__.copyDataFromObject.apply(this,arguments)},d.prototype.fullDetailsURL=function(){return this.assignment.html_url},d.prototype.startDate=function(){return this.originalStartDate},d.prototype.parseStartDate=function(){return this.assignment.due_at?$.parseFromISO(this.assignment.due_at,"due_date").time:null},d.prototype.displayTimeString=function(){var a,b;return this.assignment.due_at?(a=$.parseFromISO(this.assignment.due_at,"due_date"),b=""+$.dateString(a.date)+" at "+a.time_string,"Due: <time datetime='"+a.time.toISOString()+"'>"+b+"</time>"):"No Date"},d.prototype.saveDates=function(a,b){return this.save({"assignment[due_at]":$.dateToISO8601UTC($.unfudgeDateForProfileTimezone(this.start))},a,b)},d.prototype.save=function(a,b,c){return $.publish("CommonEvent/assignmentSaved",this),d.__super__.save.call(this,a,b,c)},d.prototype.methodAndURLForSave=function(){var a,b;return this.isNewEvent()?(a="POST",b=this.contextInfo.create_assignment_url):(a="PUT",b=$.replaceTags(this.contextInfo.assignment_url,"id",this.assignment.id)),[a,b]},d}(d)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/calendar/CommonEvent.AssignmentOverride",["i18n!calendar","compiled/calendar/CommonEvent","jquery.instructure_date_and_time","jquery.instructure_misc_helpers"],function(b,d){var e,f;return f=b.t("prompts.delete_override","Are you sure you want to delete this assignment override?"),e=function(b){function d(b,c){this.saveDates=a(this.saveDates,this),this.copyDataFromObject=a(this.copyDataFromObject,this),d.__super__.constructor.apply(this,arguments),this.eventType="assignment_override",this.deleteConfirmation=f,this.deleteUrl=c.assignment_url,this.addClass("assignment_override")}return c(d,b),d.prototype.copyDataFromObject=function(a){return a.assignment!=null?(this.copyDataFromAssignment(a.assignment),this.copyDataFromOverride(a.assignment_override)):this.copyDataFromOverride(a),this.title=""+this.assignment.name+" ("+this.override.title+")",this.object=this.override,this.addClass("group_"+this.contextCode()),d.__super__.copyDataFromObject.apply(this,arguments)},d.prototype.copyDataFromAssignment=function(a){this.assignment=a,this.lock_explanation=this.assignment.lock_explanation,this.description=this.assignment.description,this.start=this.parseStartDate();if(this.start)return this.originalStartDate=new Date(this.start)},d.prototype.copyDataFromOverride=function(a){return this.override=a,this.id="override_"+this.override.id,this.assignment.due_at=this.override.due_at},d.prototype.fullDetailsURL=function(){return this.assignment.html_url},d.prototype.startDate=function(){return this.originalStartDate},d.prototype.parseStartDate=function(){return this.assignment.due_at?$.parseFromISO(this.assignment.due_at,"due_date").time:null},d.prototype.displayTimeString=function(){var a,b;return this.start?(a=this.start,b=""+$.dateString(a)+" at "+$.timeString(a),"Due: <time datetime='"+a.toISOString()+"'>"+b+"</time>"):"No Date"},d.prototype.updateAssignmentTitle=function(a){var b;return this.assignment.title=a,b=this.title.match(/\(.+\)$/)[0],this.title=""+a+" "+b},d.prototype.saveDates=function(a,b){return this.save({"assignment_override[due_at]":$.dateToISO8601UTC($.unfudgeDateForProfileTimezone(this.start))},a,b)},d.prototype.methodAndURLForSave=function(){var a;return a=$.replaceTags(this.contextInfo.assignment_override_url,{assignment_id:this.assignment.id,id:this.override.id}),["PUT",a]},d}(d)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/calendar/CommonEvent.CalendarEvent",["i18n!calendar","compiled/util/semanticDateRange","compiled/calendar/CommonEvent","jquery.instructure_date_and_time","jquery.instructure_misc_helpers"],function(b,d,e){var f,g;return g=b.t("prompts.delete_event","Are you sure you want to delete this event?"),f=function(b){function e(b,c,d){this.saveDates=a(this.saveDates,this),this.copyDataFromObject=a(this.copyDataFromObject,this),e.__super__.constructor.call(this,b,c,d),this.eventType="calendar_event",this.deleteConfirmation=g,this.deleteURL=c.calendar_event_url}return c(e,b),e.prototype.copyDataFromObject=function(a){return a.calendar_event&&(a=a.calendar_event),this.object=this.calendarEvent=a,a.id&&(this.id="calendar_event_"+a.id),this.title=a.title||"Untitled",this.start=this.parseStartDate(),this.start&&(this.originalStartDate=new Date(this.start)),this.end=this.parseEndDate(),this.end&&(this.originalEndDate=new Date(this.end)),this.allDay=a.all_day,this.editable=!0,this.lockedTitle=this.object.parent_event_id!=null,this.description=a.description,this.addClass("group_"+this.contextCode()),this.isAppointmentGroupEvent()&&(this.addClass("scheduler-event"),this.object.reserved&&this.addClass("scheduler-reserved"),this.object.available_slots===0&&this.addClass("scheduler-full"),(this.object.available_slots===void 0||this.object.available_slots>0)&&this.addClass("scheduler-available"),this.editable=!1),e.__super__.copyDataFromObject.apply(this,arguments)},e.prototype.startDate=function(){return this.originalStartDate},e.prototype.endDate=function(){return this.originalEndDate},e.prototype.parseStartDate=function(){return this.calendarEvent.start_at?$.parseFromISO(this.calendarEvent.start_at).time:null},e.prototype.parseEndDate=function(){return this.calendarEvent.end_at?$.parseFromISO(this.calendarEvent.end_at).time:null},e.prototype.fullDetailsURL=function(){var a;return this.isAppointmentGroupEvent()?"/appointment_groups/"+this.object.appointment_group_id:$.replaceTags(this.contextInfo.calendar_event_url,"id",(a=this.calendarEvent.parent_event_id)!=null?a:this.calendarEvent.id)},e.prototype.displayTimeString=function(){var a;return this.calendarEvent.all_day?(a=this.startDate(),"<time datetime='"+a.toISOString()+"'>"+$.dateString(a)+"</time>"):d(this.calendarEvent.start_at,this.calendarEvent.end_at)},e.prototype.saveDates=function(a,b){return this.save({"calendar_event[start_at]":this.start?$.dateToISO8601UTC($.unfudgeDateForProfileTimezone(this.start)):"","calendar_event[end_at]":this.end?$.dateToISO8601UTC($.unfudgeDateForProfileTimezone(this.end)):"","calendar_event[all_day]":this.allDay},a,b)},e.prototype.methodAndURLForSave=function(){var a,b;return this.isNewEvent()?(a="POST",b="/api/v1/calendar_events"):(a="PUT",b=this.calendarEvent.url),[a,b]},e}(e)})}.call(this),function(){define("compiled/calendar/commonEventFactory",["jquery","compiled/calendar/CommonEvent","compiled/calendar/CommonEvent.Assignment","compiled/calendar/CommonEvent.AssignmentOverride","compiled/calendar/CommonEvent.CalendarEvent","compiled/str/splitAssetString"],function(a,b,c,d,e,f){return function(a,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(a===null)return o=new b,o.allPossibleContexts=g,o;h=a.context_code,k=a.effective_context_code||h,q=a.assignment_overrides?"assignment_override":a.assignment||a.assignment_group_id?"assignment":"calendar_event",a=a.assignment_overrides?{assignment:a.assignment,assignment_override:a.assignment_overrides[0]}:a.assignment||a.calendar_event||a;if(a.hidden)return null;h==null&&(h=a.context_code),k==null&&(k=a.effective_context_code||a.context_code),l=null;for(r=0,s=g.length;r<s;r++){j=g[r];if(j.asset_string===k){l=j;break}}return l===null?null:(h!==k&&(p=f(h)),i=p&&(n=l[p[0]])?function(){var a,b,c;c=[];for(a=0,b=n.length;a<b;a++)m=n[a],m.id===p[1]&&c.push(m);return c}()[0]:void 0,q==="assignment"?o=new c(a,l):q==="assignment_override"?o=new d(a,l):o=new e(a,l,i),o.can_edit=!1,o.can_delete=!1,l.can_create_calendar_events&&(o.can_edit=!0,o.can_delete=!0),o.object.workflow_state==="locked"&&(o.can_edit=!1),o.object.appointment_group_id&&l.can_create_calendar_events&&(o.can_edit=!0),q==="assignment"&&(o.can_edit=!0),o)}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EventDataSource",["jquery","compiled/calendar/commonEventFactory","jquery.ajaxJSON","vendor/jquery.ba-tinypubsub"],function(b,c){return function(){function d(c){this.fetchNextBatch=a(this.fetchNextBatch,this),this.startFetch=a(this.startFetch,this),this.getParticipants=a(this.getParticipants,this),this.getEvents=a(this.getEvents,this),this.getEventsForAppointmentGroup=a(this.getEventsForAppointmentGroup,this),this.processAppointmentData=a(this.processAppointmentData,this),this.getAppointmentGroups=a(this.getAppointmentGroups,this),this.getAppointmentGroupsFromCache=a(this.getAppointmentGroupsFromCache,this),this.getEventsFromCache=a(this.getEventsFromCache,this),this.processNextRequest=a(this.processNextRequest,this),this.getEventsFromCacheForContext=a(this.getEventsFromCacheForContext,this),this.addEventToCache=a(this.addEventToCache,this),this.needUndatedEventsForContexts=a(this.needUndatedEventsForContexts,this),this.requiredDateRangeForContexts=a(this.requiredDateRangeForContexts,this),this.requiredDateRangeForContext=a(this.requiredDateRangeForContext,this),this.clearCache=a(this.clearCache,this),this.eventWithId=a(this.eventWithId,this),this.eventDeleted=a(this.eventDeleted,this),this.eventSaved=a(this.eventSaved,this),this.contexts=c,this.clearCache(),this.inFlightRequest={},this.pendingRequests=[],b.subscribe("CommonEvent/eventDeleted",this.eventDeleted),b.subscribe("CommonEvent/eventSaved",this.eventSaved)}return d.prototype.eventSaved=function(a){return this.addEventToCache(a)},d.prototype.eventDeleted=function(a){var b,c;b=(c=this.cache.contexts[a.contextCode()])!=null?c.events:void 0;if(b)return delete b[a.id]},d.prototype.eventWithId=function(a){var b,c,d;d=this.cache.contexts;for(b in d){c=d[b];if(c.events[a])return c.events[a]}return null},d.prototype.clearCache=function(){var a,b,c,d,e;this.cache={contexts:{},appointmentGroups:{},participants:{},fetchedAppointmentGroups:null},d=this.contexts,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.cache.contexts[a.asset_string]={events:{},fetchedRanges:[],fetchedUndated:!1});return e},d.prototype.requiredDateRangeForContext=function(a,b,c){var d,e,f,g,h;if(!(d=this.cache.contexts[c]))return[a,b];if(!(f=d.fetchedRanges))return[a,b];for(g=0,h=f.length;g<h;g++)e=f[g],e[0]<=a&&a<=e[1]&&(a=e[1]),e[0]<=b&&b<=e[1]&&(b=e[0]);return[a,b]},d.prototype.requiredDateRangeForContexts=function(a,b,c){var d,e,f,g,h,i,j,k;f=b,g=a;for(i=0,j=c.length;i<j;i++)d=c[i],k=this.requiredDateRangeForContext(a,b,d),h=k[0],e=k[1],h<f&&(f=h),e>g&&(g=e);return[f,g]},d.prototype.needUndatedEventsForContexts=function(a){var b,c,d;for(c=0,d=a.length;c<d;c++){b=a[c];if(!this.cache.contexts[b].fetchedUndated)return!0}return!1},d.prototype.addEventToCache=function(a){var b,c;return b=a.contextCode(),c=this.cache.contexts[b],c.events[a.id]=a},d.prototype.getEventsFromCacheForContext=function(a,b,c){var d,e,f,g,h;d=this.cache.contexts[c],f=[],h=d.events;for(g in h)e=h[g],(!e.start&&!a||e.start>=a&&e.start<=b)&&f.push(e);return f},d.prototype.processNextRequest=function(a){var b,c,d,e,f,g;a==null&&(a="default"),f=this.pendingRequests;for(c in f){g=f[c],e=g[0],b=g[1],d=g[2];if(d===a){this.pendingRequests.splice(c,1),e.apply(null,b);return}}},d.prototype.getEventsFromCache=function(a,b,c){var d,e,f,g;e=[];for(f=0,g=c.length;f<g;f++)d=c[f],e=e.concat(this.getEventsFromCacheForContext(a,b,d));return e},d.prototype.getAppointmentGroupsFromCache=function(){var a,b,c,d;c=this.cache.appointmentGroups,d=[];for(b in c)a=c[b],d.push(a);return d},d.prototype.getAppointmentGroups=function(a,b){var c,d,e,f=this;if(this.inFlightRequest.appointmentGroups){this.pendingRequests.push([this.getAppointmentGroups,arguments,"appointmentGroups"]);return}if(this.cache.fetchedAppointmentGroups&&this.cache.fetchedAppointmentGroups.manageable===a){b(this.getAppointmentGroupsFromCache()),this.processNextRequest("appointmentGroups");return}return this.cache.fetchedAppointmentGroups={manageable:a},this.cache.appointmentGroups={},c=function(a,b,c){var d,e,g,h;if(a){h=[];for(e=0,g=a.length;e<g;e++)d=a[e],c.scope==="manageable"?d.is_manageable=!0:d.is_scheduleable=!0,h.push(f.processAppointmentData(d));return h}},d=function(){return b(f.getAppointmentGroupsFromCache())},e=[["/api/v1/appointment_groups",{include:["reserved_times","participant_count"]}]],a&&e.push(["/api/v1/appointment_groups",{scope:"manageable",include:["reserved_times","participant_count"],include_past_appointments:!0}]),this.startFetch(e,c,d,"appointmentGroups")},d.prototype.processAppointmentData=function(a){var b,d,e,f,g,h,i,j,k,l;g=a.id,((j=this.cache.appointmentGroups[g])!=null?j.is_manageable:void 0)?a.is_manageable=!0:a.is_scheduleable=!0,this.cache.appointmentGroups[g]=a;if(a.appointments){a.appointmentEvents=[],k=a.appointments,l=[];for(h=0,i=k.length;h<i;h++)f=k[h],e=c(f,this.contexts),e&&e.object.workflow_state!=="deleted"?(a.appointmentEvents.push(e),this.addEventToCache(e),f.child_events?(e.childEvents=[],l.push(function(){var a,g,h,i;h=f.child_events,i=[];for(a=0,g=h.length;a<g;a++)d=h[a],b=c(d,this.contexts),this.addEventToCache(e),b?i.push(e.childEvents.push(b)):i.push(void 0);return i}.call(this))):l.push(void 0)):l.push(void 0);return l}},d.prototype.getEventsForAppointmentGroup=function(a,b){var c,d,e,f,g=this;if(this.inFlightRequest["default"]){this.pendingRequests.push([this.getEventsForAppointmentGroup,arguments,"default"]);return}c=(f=this.cache.appointmentGroups[a.id])!=null?f.appointmentEvents:void 0;if(c){b(c),this.processNextRequest();return}return d=function(a){if(a)return g.processAppointmentData(a)},e={include:["reserved_times","participant_count","appointments","child_events"]},this.startFetch([[a.url,e]],d,function(){return b(g.cache.appointmentGroups[a.id].appointmentEvents)})},d.prototype.getEvents=function(a,d,e,f){var g,h,i,j,k,l,m,n,o,p=this;if(this.inFlightRequest["default"]){this.pendingRequests.push([this.getEvents,arguments,"default"]);return}l=function(a,c,d){var e,f,g;return g=p.requiredDateRangeForContexts(a,c,d),f=g[0],e=g[1],f>=e?null:{context_codes:d,start_date:b.dateToISO8601UTC(f),end_date:b.dateToISO8601UTC(e)}},m=function(a){return p.needUndatedEventsForContexts(a)?{context_codes:a,undated:"1"}:null},k=a?l(a,d,e):m(e);if(!k){f(this.getEventsFromCache(a,d,e)),this.processNextRequest();return}for(n=0,o=e.length;n<o;n++)g=e[n],h=this.cache.contexts[g],h&&(a?h.fetchedRanges.push([a,d]):h.fetchedUndated=!0);return j=function(){return f(p.getEventsFromCache(a,d,e))},i=function(a){var b,d,e,f,g;if(a){g=[];for(e=0,f=a.length;e<f;e++)b=a[e],d=c(b,p.contexts),d&&d.object.workflow_state!=="deleted"?g.push(p.addEventToCache(d)):g.push(void 0);return g}},this.startFetch([["/api/v1/calendar_events",k],["/api/v1/calendar_events",b.extend({type:"assignment"},k)]],i,j)},d.prototype.getParticipants=function(a,b,c){var d,e,f,g,h=this;if(this.inFlightRequest["default"]){this.pendingRequests.push([this.getParticipants,arguments,"default"]);return}f=""+a.id+"_"+b;if(this.cache.participants[f]){c(this.cache.participants[f]),this.processNextRequest();return}return this.cache.participants[f]=[],d=function(a,b,c){if(a)return h.cache.participants[f].push.apply(h.cache.participants[f],a)},e=function(){return c(h.cache.participants[f])},g=a.participant_type==="Group"?"groups":"users",this.startFetch([["/api/v1/appointment_groups/"+a.id+"/"+g,{registration_status:b}]],d,e)},d.prototype.startFetch=function(a,b,c,d){var e,f,g,h,i,j,k=this;d==null&&(d="default"),e=0,this.inFlightRequest[d]=!0,g=function(f,g,h,i){b(f,h,i);if(g){e+=1;if(e>=a.length)return c(),k.inFlightRequest[d]=!1,k.processNextRequest(d)}},j=[];for(h=0,i=a.length;h<i;h++)f=a[h],j.push(function(a){return k.fetchNextBatch(a[0],a[1],function(b,c){return g(b,c,a[0],a[1])})}(f));return j},d.prototype.fetchNextBatch=function(a,c,d){var e,f=this;return e=function(a){var b,c,d,e,f,g,h,i;if(!a)return null;e={},h=a.split(",");for(f=0,g=h.length;f<g;f++)b=h[f],i=b.split(";"),c=i[0],d=i[1],c=c.replace(/^</,"").replace(/>$/,""),d=d.split('"')[1],e[d]=c;return e},b.publish("EventDataSource/ajaxStarted"),!a.match(/per_page=/)&&c.per_page==null&&(c.per_page=50),b.ajaxJSON(a,"GET",c,function(a,c){var g,h;b.publish("EventDataSource/ajaxEnded"),g=typeof c.getResponseHeader=="function"?c.getResponseHeader("Link"):void 0,h=e(g);if(h!=null?h.next:void 0){d(a,!1),f.fetchNextBatch(h.next,{},d);return}return d(a,!0)})},d}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditCalendarEventDetails",["jquery","compiled/calendar/commonEventFactory","compiled/calendar/TimeBlockList","jst/calendar/editCalendarEvent","jquery.instructure_date_and_time","jquery.instructure_forms","jquery.instructure_misc_helpers","vendor/date"],function(b,c,d,e){var f;return f=function(){function d(c,d,f,g){this.event=d,this.contextChangeCB=f,this.closeCB=g,this.formSubmit=a(this.formSubmit,this),this.setupTimeAndDatePickers=a(this.setupTimeAndDatePickers,this),this.contextChange=a(this.contextChange,this),this.setContext=a(this.setContext,this),this.moreOptionsClick=a(this.moreOptionsClick,this),this.activate=a(this.activate,this),this.currentContextInfo=null,this.form=b(e({title:this.event.title,contexts:this.event.possibleContexts(),lockedTitle:this.event.lockedTitle})),b(c).append(this.form),this.setupTimeAndDatePickers(),this.form.submit(this.formSubmit),this.form.find(".more_options_link").click(this.moreOptionsClick),this.form.find("select.context_id").change(this.contextChange),this.form.find("select.context_id").triggerHandler("change",!1),this.event.isNewEvent()||this.form.find(".context_select").hide()}return d.prototype.contextInfoForCode=function(a){var b,c,d,e;e=this.event.possibleContexts();for(c=0,d=e.length;c<d;c++){b=e[c];if(b.asset_string===a)return b}return null},d.prototype.activate=function(){return this.form.find("select.context_id").change()},d.prototype.moreOptionsClick=function(a){var c,d,e;if(this.event.object.parent_event_id)return;return a.preventDefault(),e=b(a.target).attr("href").split("#"),c=b("#edit_calendar_event_form").getFormData({object_name:"calendar_event"}),d={},c.title&&(d.title=c.title),c.date&&(d.start_at=""+c.date+" "+(c.start_time||""),d.end_at=""+c.date+" "+(c.end_time||"")),d.return_to=window.location.href,e[0]+="?"+b.param(d),window.location.href=e.join("#")},d.prototype.setContext=function(a){return this.form.find("select.context_id").val(a).triggerHandler("change",!1)},d.prototype.contextChange=function(a,c){var d,e;d=b(a.target).val(),this.currentContextInfo=this.contextInfoForCode(d),this.event.contextInfo=this.currentContextInfo;if(this.currentContextInfo===null)return;return c!==!1&&this.contextChangeCB(d),e=null,this.event.isNewEvent()?e=this.currentContextInfo.new_calendar_event_url:e=this.event.fullDetailsURL()+"/edit",this.form.find(".more_options_link").attr("href",e)},d.prototype.setupTimeAndDatePickers=function(){var a,c,d=this;this.form.find(".date_field").date_field(),this.form.find(".time_field").time_field().blur(function(a){var c,e,f,g;g=d.form.find(".time_field.start_time").next(".datetime_suggest").text(),d.form.find(".time_field.start_time").next(".datetime_suggest").hasClass("invalid_datetime")&&(g=null),g==null&&(g=d.form.find(".time_field.start_time").val()),e=d.form.find(".time_field.end_time").next(".datetime_suggest").text(),d.form.find(".time_field.end_time").next(".datetime_suggest").hasClass("invalid_datetime")&&(e=null),e==null&&(e=d.form.find(".time_field.end_time").val()),f=Date.parse(g),c=Date.parse(e),f=f||c,c=c||f,b(a.target).hasClass("end_time")?f>c&&(f=c):c<f&&(c=f),f&&d.form.find(".time_field.start_time").val(f.toString("h:mmtt").toLowerCase());if(c)return d.form.find(".time_field.end_time").val(c.toString("h:mmtt").toLowerCase())}),c=this.event.startDate(),a=this.event.endDate(),this.event.allDay||(c&&this.form.find(".time_field.start_time").val(c.toString("h:mmtt")).change().blur(),a&&this.form.find(".time_field.end_time").val(a.toString("h:mmtt")).change().blur());if(c)return this.form.find(".date_field").val(c.toString("MMM d, yyyy")).change()},d.prototype.formSubmit=function(a){var d,e,f,g,h,i,j,k;return a.preventDefault(),d=this.form.getFormData({object_name:"calendar_event"}),d.date?(i=Date.parse(""+d.date+" "+d.start_time),(j=d.end_time)==null&&(d.end_time=d.start_time),e=Date.parse(""+d.date+" "+d.end_time)):(i=null,e=null),h={"calendar_event[title]":(k=d.title)!=null?k:this.event.title,"calendar_event[start_at]":i?b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(i)):"","calendar_event[end_at]":e?b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(e)):""},this.event.isNewEvent()?(h["calendar_event[context_code]"]=d.context_code,g={calendar_event:{title:h["calendar_event[title]"],start_at:i?b.dateToISO8601UTC(i):null,end_at:e?b.dateToISO8601UTC(e):null,context_code:this.form.find(".context_id").val()}},f=c(g,this.event.possibleContexts()),f.save(h)):(this.event.title=h["calendar_event[title]"],this.event.start=i,this.event.end=e,this.event.save(h)),this.closeCB()},d}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditAssignmentDetails",["jquery","compiled/calendar/commonEventFactory","jst/calendar/editAssignment","jst/calendar/editAssignmentOverride","jst/calendar/genericSelectOptions","jquery.instructure_date_and_time","jquery.instructure_forms","jquery.instructure_misc_helpers"],function(b,c,d,e,f){var g;return g=function(){function g(c,f,g,h){var i;this.event=f,this.contextChangeCB=g,this.closeCB=h,this.formSubmit=a(this.formSubmit,this),this.setupTimeAndDatePickers=a(this.setupTimeAndDatePickers,this),this.contextChange=a(this.contextChange,this),this.setContext=a(this.setContext,this),this.moreOptionsClick=a(this.moreOptionsClick,this),this.activate=a(this.activate,this),this.currentContextInfo=null,i=this.event.override?e:d,this.form=b(i({title:this.event.title,contexts:this.event.possibleContexts()})),b(c).append(this.form),this.setupTimeAndDatePickers(),this.form.submit(this.formSubmit),this.form.find(".more_options_link").click(this.moreOptionsClick),this.form.find("select.context_id").change(this.contextChange),this.form.find("select.context_id").triggerHandler("change",!1),this.event.isNewEvent()||(this.form.find(".context_select").hide(),this.form.attr("method","PUT"),this.form.attr("action",b.replaceTags(this.event.contextInfo.assignment_url,"id",this.event.object.id)))}return g.prototype.contextInfoForCode=function(a){var b,c,d,e;e=this.event.possibleContexts();for(c=0,d=e.length;c<d;c++){b=e[c];if(b.asset_string===a)return b}return null},g.prototype.activate=function(){var a;this.form.find("select.context_id").change();if((a=this.event.assignment)!=null?a.assignment_group_id:void 0)return this.form.find(".assignment_group_select .assignment_group").val(this.event.assignment.assignment_group_id)},g.prototype.moreOptionsClick=function(a){var c,d,e;return a.preventDefault(),e=b(a.target).attr("href").split("#"),c=this.form.getFormData({object_name:"assignment"}),d={},c.title&&(d.title=c.title),c.due_at&&(d.due_at=c.due_at),c.assignment_group_id&&(d.assignment_group_id=c.assignment_group_id),d.return_to=window.location.href,e[0]+="?"+b.param(d),window.location.href=e.join("#")},g.prototype.setContext=function(a){return this.form.find("select.context_id").val(a).triggerHandler("change",!1)},g.prototype.contextChange=function(a,c){var d,e,g;if(this.ignoreContextChange)return;e=b(a.target).val(),this.currentContextInfo=this.contextInfoForCode(e),this.event.contextInfo=this.currentContextInfo;if(this.currentContextInfo===null)return;return c!==!1&&this.contextChangeCB(e),d={collection:this.currentContextInfo.assignment_groups},this.form.find(".assignment_group").html(f(d)),this.form.attr("action",this.currentContextInfo.create_assignment_url),g=this.event.assignment?""+this.event.assignment.html_url+"/edit":this.currentContextInfo.new_assignment_url,this.form.find(".more_options_link").attr("href",g)},g.prototype.setupTimeAndDatePickers=function(){var a,b;this.form.find(".datetime_field").datetime_field(),b=this.event.startDate(),a=this.event.endDate();if(this.event.allDay)return this.form.find(".datetime_field").val(b.toString("MMM d, yyyy")).change();if(b)return this.form.find(".datetime_field").val(b.toString("MMM d, yyyy h:mmtt")).change()},g.prototype.formSubmit=function(a){var b;return a.preventDefault(),b=this.form.getFormData(),b["assignment[due_at]"]!=null?this.submitAssignment(b):this.submitOverride(b)},g.prototype.submitAssignment=function(a){var d,e,f,g,h;return e=a["assignment[due_at]"],e===""?d=null:d=this.form.find("#assignment_due_at").data("date"),h={"assignment[name]":this.form.find("#assignment_title").val(),"assignment[due_at]":d?b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(d)):"","assignment[assignment_group_id]":this.form.find(".assignment_group").val()},this.event.isNewEvent()?(g={assignment:{title:h["assignment[name]"],due_at:d?b.dateToISO8601UTC(d):null,context_code:this.form.find(".context_id").val()}},f=c(g,this.event.possibleContexts()),f.save(h)):(this.event.title=h["assignment[name]"],this.event.start=d,this.event.save(h)),this.closeCB()},g.prototype.submitOverride=function(a){var c,d;return c=a["assignment_override[due_at]"],c=c===""?null:this.form.find("#assignment_override_due_at").data("date"),d={"assignment_override[due_at]":c?b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(c)):""},this.event.start=c,this.event.save(d),this.closeCB()},g}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditEventDetailsDialog",["jquery","i18n!calendar","underscore","compiled/calendar/CommonEvent","compiled/calendar/EditCalendarEventDetails","compiled/calendar/EditAssignmentDetails","compiled/calendar/EditApptCalendarEventDialog","compiled/calendar/EditAppointmentGroupDetails","jst/calendar/editEvent","jqueryui/dialog","jqueryui/tabs"],function(b,c,d,e,f,g,h,i,j){var k;return k=b('<div id="edit_event"><div /></div>').appendTo("body").dialog({autoOpen:!1,width:"auto",resizable:!1,title:c.t("titles.edit_event","Edit Event")}),function(){function c(b){this.event=b,this.show=a(this.show,this),this.closeCB=a(this.closeCB,this),this.contextChange=a(this.contextChange,this),this.setupTabs=a(this.setupTabs,this),this.currentContextInfo=null}return c.prototype.contextInfoForCode=function(a){var b,c,d,e;e=this.event.possibleContexts();for(c=0,d=e.length;c<d;c++){b=e[c];if(b.asset_string===a)return b}return null},c.prototype.setupTabs=function(){var a,c;return c=k.find("#edit_event_tabs"),c.tabs().bind("tabsselect",function(a,c){return b(c.panel).closest(".tab_holder").data("form-widget").activate()}),this.event.eventType==="calendar_event"?(c.tabs("select",0),c.tabs("remove",1),this.calendarEventForm.activate()):this.event.eventType.match(/assignment/)?(c.tabs("select",1),c.tabs("remove",0),this.assignmentDetailsForm.activate()):(a=d.any(this.event.allPossibleContexts,function(a){return a.can_create_assignments}),a||c.tabs("remove",1),this.calendarEventForm.activate())},c.prototype.contextChange=function(a){k.removeClass(k.data("group_class")),k.addClass("group_"+a).data("group_class","group_"+a),this.calendarEventForm&&this.calendarEventForm.setContext(a);if(this.assignmentDetailsForm)return this.assignmentDetailsForm.setContext(a)},c.prototype.closeCB=function(){return k.dialog("close")},c.prototype.show=function(){var a,c;if(this.event.isAppointmentGroupEvent())return(new h(this.event)).show();c=j(),k.children().replaceWith(c);if(this.event.isNewEvent()||this.event.eventType==="calendar_event")a=k.find("#edit_calendar_event_form_holder"),this.calendarEventForm=new f(a,this.event,this.contextChange,this.closeCB),a.data("form-widget",this.calendarEventForm);if(this.event.isNewEvent()||this.event.eventType.match(/assignment/))this.assignmentDetailsForm=new g(b("#edit_assignment_form_holder"),this.event,this.contextChange,this.closeCB),k.find("#edit_assignment_form_holder").data("form-widget",this.assignmentDetailsForm);return this.setupTabs(),k.dialog("open")},c}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/ShowEventDetailsDialog",["jquery","i18n!calendar","compiled/util/Popover","compiled/calendar/CommonEvent","compiled/calendar/EditEventDetailsDialog","jst/calendar/eventDetails","jst/calendar/deleteItem","jst/calendar/reservationOverLimitDialog","compiled/calendar/MessageParticipantsDialog","compiled/fn/preventDefault","underscore","vendor/jquery.ba-tinypubsub","jquery.ajaxJSON","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins"],function(b,c,d,e,f,g,h,i,j,k,l,m){var n,o,p,q=this;return p=m.publish,o=function(a){return function(){return a.apply(this,[])}},n=function(){function e(b,c){this.dataSource=c,this.openShowPage=a(this.openShowPage,this),this.close=a(this.close,this),this.show=a(this.show,this),this.cancelAppointment=a(this.cancelAppointment,this),this.unreserveEvent=a(this.unreserveEvent,this),this.reserveEvent=a(this.reserveEvent,this),this.reserveSuccessCB=a(this.reserveSuccessCB,this),this.reserveErrorCB=a(this.reserveErrorCB,this),this.deleteEvent=a(this.deleteEvent,this),this.showEditDialog=a(this.showEditDialog,this),this.event=b,this.contexts=b.contexts}return e.prototype.showEditDialog=function(){return this.popover.hide(),(new f(this.event)).show()},e.prototype.deleteEvent=function(a,d){var e,f=this;d==null&&(d={}),a==null&&(a=this.event);if(this.event.isNewEvent())return;return e=a.object.url,a.assignment&&(e=b.replaceTags(this.event.deleteURL,"id",this.event.object.id)),b("<div />").confirmDelete({url:e,message:b(h({message:d.message||a.deleteConfirmation,hide_reason:a.object.workflow_state!=="locked"})),dialog:{title:d.dialogTitle||c.t("confirm_deletion","Confirm Deletion")},prepareData:function(a){return{cancel_reason:a.find("#cancel_reason").val()}},confirmed:function(){return f.popover.hide(),b.publish("CommonEvent/eventDeleting",a)},success:function(){return b.publish("CommonEvent/eventDeleted",a)}})},e.prototype.reserveErrorCB=function(a){var d,e,f,g,h,j=this;for(g=0,h=a.length;g<h;g++){e=a[g];if(e.message!=="participant has met per-participant limit")continue;f=!0,e.reschedulable=e.reservations.length===1,d=b(i(e)).dialog({resizable:!1,width:450,buttons:e.reschedulable?[{text:c.t("do_nothing","Do Nothing"),click:function(){return d.dialog("close")}},{text:c.t("reschedule","Reschedule"),"class":"btn-primary",click:function(){return d.disableWhileLoading(j.reserveEvent({cancel_existing:!0}).always(function(){return d.dialog("close")}))}}]:[{text:c.t("ok","OK"),click:function(){return d.dialog("close")}}]})}if(!f)return alert("Could not reserve event: "+a),b.publish("CommonEvent/eventSaveFailed",this.event)},e.prototype.reserveSuccessCB=function(a){return this.popover.hide(),b.publish("CommonEvent/eventSaved",this.event)},e.prototype.reserveEvent=function(a){return a==null&&(a={}),b.publish("CommonEvent/eventSaving",this.event),b.ajaxJSON(this.event.object.reserve_url,"POST",a,this.reserveSuccessCB,this.reserveErrorCB)},e.prototype.unreserveEvent=function(){var a,b,d,e,f;e=this.event.childEvents;for(b=0,d=e.length;b<d;b++){a=e[b];if((f=a.object)!=null?f.own_reservation:void 0){this.deleteEvent(a,{dialogTitle:c.t("confirm_unreserve","Confirm Reservation Removal"),message:c.t("prompts.unreserve_event","Are you sure you want to delete your reservation to this event?")});return}}},e.prototype.cancelAppointment=function(a){var d,e,f,g=this;return e=a.data("url"),d=l.detect(this.event.calendarEvent.child_events,function(a){return a.url===e}),b("<div/>").confirmDelete({url:e,message:b(h({message:c.t("cancel_appointment","Are you sure you want to cancel your appointment with %{name}?",{name:((f=d.user)!=null?f.short_name:void 0)||d.group.name})})),dialog:{title:c.t("confirm_removal","Confirm Removal"),width:"400px",resizable:!1},prepareData:function(a){return{cancel_reason:a.find("#cancel_reason").val()}},success:function(){var c,d;g.event.object.child_events=l(g.event.object.child_events).reject(function(b){return b.url===a.data("url")}),a.remove(),d=b("#scheduler").prop("checked"),c=g.event.calendarEvent.child_events;if(!d&&c.length===0)return b.publish("CommonEvent/eventDeleted",g.event),g.popover.hide()}})},e.prototype.show=function(a){var c,e,f,h,i,l,m,n,q,r,s,t,u,v,w,x=this;e=b.extend(!0,{},this.event,{can_reserve:(l=this.event.object)!=null?l.reserve_url:void 0}),this.event.contextInfo.can_create_appointment_groups&&(e.can_reserve=!1);if((m=this.event.object)!=null?m.child_events:void 0){this.event.object.reserved&&(e.can_unreserve=!0,e.can_reserve=!1),n=this.event.object.child_events;for(h=0,i=n.length;h<i;h++)c=n[h],f={id:((q=c.user)!=null?q.id:void 0)||c.group.id,name:((r=c.user)!=null?r.short_name:void 0)||c.group.name,event_url:c.url},((s=e.reservations)!=null?s:e.reservations=[]).push(f),c.user&&((t=e.reserved_users)!=null?t:e.reserved_users=[]).push(f),c.group&&((u=e.reserved_groups)!=null?u:e.reserved_groups=[]).push(f)}return((v=this.event.object)!=null?v.available_slots:void 0)===0?(e.can_reserve=!1,e.availableSlotsText="None"):((w=this.event.object)!=null?w.available_slots:void 0)>0&&(e.availableSlotsText=this.event.object.available_slots),e.showEventLink=e.fullDetailsURL(),e.showEventLink||(e.showEventLink=e.isAppointmentGroupEvent()),this.popover=new d(a,g(e)),this.popover.el.data("showEventDetailsDialog",this),this.popover.el.find(".view_event_link").click(k(this.openShowPage)),this.popover.el.find(".edit_event_link").click(k(this.showEditDialog)),this.popover.el.find(".delete_event_link").click(k(o(this.deleteEvent))),this.popover.el.find(".reserve_event_link").click(k(o(this.reserveEvent))),this.popover.el.find(".unreserve_event_link").click(k(this.unreserveEvent)),this.popover.el.find(".cancel_appointment_link").click(k(function(a){var c;return c=b(a.target).closest("li"),x.cancelAppointment(c)})),this.popover.el.find(".message_students").click(k(function(){return(new j({timeslot:x.event.calendarEvent})).show()})),p("userContent/change")},e.prototype.close=function(){if(this.popover)return this.popover.el.removeData("showEventDetailsDialog"),this.popover.hide()},e.prototype.openShowPage=function(a){var c;return c=b(a.target).attr("href").split("#"),c[0]+="?"+b.param({return_to:window.location.href}),window.location.href=c.join("#")},e}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/Calendar",["i18n!calendar","jquery","underscore","compiled/userSettings","compiled/util/hsvToRgb","jst/calendar/calendarApp","compiled/calendar/EventDataSource","compiled/calendar/commonEventFactory","compiled/calendar/ShowEventDetailsDialog","compiled/calendar/EditEventDetailsDialog","compiled/calendar/Scheduler","compiled/calendar/CalendarDefaults","vendor/fullcalendar","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","vendor/jquery.ba-tinypubsub","jqueryui/button"],function(b,c,d,e,f,g,h,i,j,k,l,m){var n;return n=function(){function p(e,f,h,i,j){var k,n,o,p,q,r,s,t,u=this;this.contexts=f,this.manageContexts=h,this.dataSource=i,this.options=j,this.dataFromDocumentHash=a(this.dataFromDocumentHash,this),this.loadView=a(this.loadView,this),this.refetchEvents=a(this.refetchEvents,this),this.ajaxEnded=a(this.ajaxEnded,this),this.ajaxStarted=a(this.ajaxStarted,this),this.visibleContextListChanged=a(this.visibleContextListChanged,this),this.updateOverrides=a(this.updateOverrides,this),this.eventSaveFailed=a(this.eventSaveFailed,this),this.eventSaved=a(this.eventSaved,this),this.eventSaving=a(this.eventSaving,this),this.eventDeleted=a(this.eventDeleted,this),this.eventDeleting=a(this.eventDeleting,this),this.reloadClick=a(this.reloadClick,this),this.fragmentChange=a(this.fragmentChange,this),this.drop=a(this.drop,this),this.viewDisplay=a(this.viewDisplay,this),this.dayClick=a(this.dayClick,this),this.eventClick=a(this.eventClick,this),this.addEventClick=a(this.addEventClick,this),this.eventResize=a(this.eventResize,this),this.eventDrop=a(this.eventDrop,this),this.eventResizeStart=a(this.eventResizeStart,this),this.eventDragStart=a(this.eventDragStart,this),this.eventAfterRender=a(this.eventAfterRender,this),this.eventRender=a(this.eventRender,this),this.windowResize=a(this.windowResize,this),this.getEvents=a(this.getEvents,this),this.contextCodes=function(){var a,b,c;c=[];for(a=0,b=f.length;a<b;a++)k=f[a],c.push(k.asset_string);return c}(),this.visibleContextList=[],this.displayAppointmentEvents=null,this.activateEvent=(s=this.options)!=null?s.activateEvent:void 0,this.activeAjax=0,c.subscribe({"CommonEvent/eventDeleting":this.eventDeleting,"CommonEvent/eventDeleted":this.eventDeleted,"CommonEvent/eventSaving":this.eventSaving,"CommonEvent/eventSaved":this.eventSaved,"CommonEvent/eventSaveError":this.eventSaveFailed,"Calendar/visibleContextListChanged":this.visibleContextListChanged,"EventDataSource/ajaxStarted":this.ajaxStarted,"EventDataSource/ajaxEnded":this.ajaxEnded,"Calendar/refetchEvents":this.refetchEvents,"CommonEvent/assignmentSaved":this.updateOverrides}),r='\'<span class="agenda-col-wrapper">\n  <span class="day-num">\'d\'</span>\n  <span class="day-and-month">\n    <span class="day-name">\'dddd\'</span><br />\n    <span class="month-name">\'MMM\'</span>\n  </span>\n</span>\'',p=d.defaults({header:{left:"prev,today,next,title",center:"",right:""},editable:!0,columnFormat:{month:"dddd",week:r},buttonText:{today:b.t("today","Today")},defaultEventMinutes:60,slotMinutes:30,firstHour:7,droppable:!0,dropAccept:".undated_event",events:this.getEvents,eventRender:this.eventRender,eventAfterRender:this.eventAfterRender,eventDragStart:this.eventDragStart,eventDrop:this.eventDrop,eventClick:this.eventClick,eventResize:this.eventResize,eventResizeStart:this.eventResizeStart,dayClick:this.dayClick,addEventClick:this.addEventClick,titleFormat:{week:"MMM d[ yyyy]{ '&ndash;'[ MMM] d, yyyy}"},viewDisplay:this.viewDisplay,windowResize:this.windowResize,drop:this.drop},m),n=this.dataFromDocumentHash(),!n.view_start&&((t=this.options)!=null?t.viewStart:void 0)&&(n.view_start=this.options.viewStart,location.hash=c.encodeToHex(JSON.stringify(n))),n.view_start&&(o=c.fullCalendar.parseISO8601(n.view_start),o&&(p.year=o.getFullYear(),p.month=o.getMonth(),p.date=o.getDate())),this.el=c(e).html(g({calendar2Only:this.options.calendar2Only,showScheduler:this.options.showScheduler})),n.view_name==="week"&&(n.view_name="agendaWeek");if(n.view_name==="month"||n.view_name==="agendaWeek")q=n.view_name==="agendaWeek"?"week":"month",c("#"+q).click(),p.defaultView=n.view_name;n.show&&n.show!==""&&(this.visibleContextList=n.show.split(",")),this.calendar=this.el.find("div.calendar").fullCalendar(p),c(document).fragmentChange(this.fragmentChange),this.el.find("#calendar_views").buttonset().find("input").change(function(a){return u.loadView(c(a.target).attr("id"))}),this.$refresh_calendar_link=this.el.find("#refresh_calendar_link").click(this.reloadClick),this.$create_new_event_link=this.el.find("#create_new_event_link").click(this.addEventClick),this.colorizeContexts(),this.scheduler=new l(".scheduler-wrapper",this),this.options.showScheduler&&this.dataSource.getAppointmentGroups(!1,function(a){var b,c,d,e;c=0;for(d=0,e=a.length;d<e;d++)b=a[d],b.requiring_action&&(c+=1);return u.el.find("#calendar-header .counter-badge").toggle(c>0).text(c)}),window.setTimeout(function(){if(n.view_name==="scheduler"){c("#scheduler").click();if(n.appointment_group_id)return u.scheduler.viewCalendarForGroupId(n.appointment_group_id)}})}var h,n,o;return p.prototype.getEvents=function(a,b,d){var e,f=this;return e=function(a){var b,c,d,e,g,h,i;c={};if(a.length>0){for(d=g=h=a.length-1;h<=0?g<=0:g>=0;d=h<=0?++g:--g)b=a[d],e=!0,c[b.id]?e=!1:b.isAppointmentGroupEvent()&&(f.displayAppointmentEvents?f.displayAppointmentEvents.id===((i=b.calendarEvent)!=null?i.appointment_group_id:void 0)?e=!!b.calendarEvent.reserve_url:e=!b.calendarEvent.reserve_url:b.calendarEvent.reserve_url?b.calendarEvent.child_events_count>0&&!b.calendarEvent.reserved&&b.can_edit?e=!0:e=!1:e=!0),e||a.splice(d,1),c[b.id]=!0;return a}return a},this.dataSource.getEvents(c.unfudgeDateForProfileTimezone(a),c.unfudgeDateForProfileTimezone(b),this.visibleContextList,function(a){return f.displayAppointmentEvents?f.dataSource.getEventsForAppointmentGroup(f.displayAppointmentEvents,function(b){var c,f,g,h,i;for(f=0,h=a.length;f<h;f++)c=a[f],c.removeClass("current-appointment-group");for(g=0,i=b.length;g<i;g++)c=b[g],c.addClass("current-appointment-group");return d(e(a.concat(b)))}):d(e(a))})},p.prototype.closeEventPopups=function(){return c(".event-details").each(function(){var a;a=c(this).data("showEventDetailsDialog");if(a)return a.close()})},p.prototype.windowResize=function(a){return this.closeEventPopups()},p.prototype.eventRender=function(a,d,e){var f,g,h,i;return f=c(d),a.isAppointmentGroupEvent()&&this.displayAppointmentEvents&&this.displayAppointmentEvents.id===a.calendarEvent.appointment_group_id&&(h="Available",a.calendarEvent.available_slots>0&&(h=""+a.calendarEvent.available_slots+" Available"),a.calendarEvent.available_slots===0&&(h="Filled"),a.calendarEvent.reserved===!0&&(h="Reserved"),f.find(".fc-event-title").text(h)),i=!a.endDate()||a.startDate().getTime()===a.endDate().getTime()?this.calendar.fullCalendar("formatDate",a.startDate(),"h:mmtt"):this.calendar.fullCalendar("formatDates",a.startDate(),a.endDate(),"h:mmtt{ – h:mmtt}"),g=a.eventType.match(/assignment/)?b.t("event_assignment_title","Assignment Title: "):b.t("event_event_title","Event Title: "),f.attr("title",c.trim(""+i+"\n"+f.find(".fc-event-title").text()+"\n\n"+b.t("calendar_title","Calendar:")+" "+a.contextInfo.name)),f.find(".fc-event-inner").prepend(c("<span class='screenreader-only'>"+b.t("calendar_title","Calendar:")+" "+a.contextInfo.name+"</span>")),f.find(".fc-event-title").prepend(c("<span class='screenreader-only'>"+g+"</span>")),!0},p.prototype.eventAfterRender=function(a,c,d){var e,f;a.isDueAtMidnight()&&c.find(".fc-event-time").html(this.calendar.fullCalendar("formatDate",a.startDate(),"h(:mm)t")),a.eventType.match(/assignment/)&&d.name==="agendaWeek"&&c.height("").find(".ui-resizable-handle").remove(),a.eventType.match(/assignment/)&&c.find(".fc-event-time").html(b.t("labels.due","due"));if(a.eventType==="calendar_event"&&((e=this.options)!=null?e.activateEvent:void 0)&&a.id==="calendar_event_"+((f=this.options)!=null?f.activateEvent:void 0))return this.options.activateEvent=null,this.eventClick(a,{currentTarget:c,pageX:c.offset().left+parseInt(c.width()/2)},d)},p.prototype.eventDragStart=function(a,b,c,d){return this.closeEventPopups()},p.prototype.eventResizeStart=function(a,b,c,d){return this.closeEventPopups()},p.prototype.eventDrop=function(a,b,c,d,e,f,g,h){var i;if(a.eventType==="assignment"&&d){e();return}return a.eventType==="assignment"&&a.isDueAtMidnight()&&c===0&&a.start.setMinutes(59),a.eventType==="calendar_event"&&d&&(a.allDay=!0),a.end&&a.endDate()&&(i=a.endDate().getTime()-a.startDate().getTime(),a.end=new Date(a.start.getTime()+i)),a.saveDates(null,e)},p.prototype.eventResize=function(a,b,c,d,e,f,g){return a.saveDates(null,d)},p.prototype.addEventClick=function(a,b,c){var f,g;if(this.displayAppointmentEvents)return;return g=e.get("checked_calendar_codes")||d.pluck(this.contexts,"asset_string"),f=d.filter(this.contexts,function(a){return d.contains(g,a.asset_string)}),a=i(null,f),(new k(a)).show()},p.prototype.eventClick=function(a,b,d){var e,f;e=c(b.currentTarget);if(!e.hasClass("event_pending"))return f=new j(a),e.data("showEventDetailsDialog",f),f.show(b)},p.prototype.dayClick=function(a,b,c,f){var g,h,j;if(this.displayAppointmentEvents)return;return h=e.get("checked_calendar_codes")||d.pluck(this.contexts,"asset_string"),g=d.filter(this.contexts,function(a){return d.contains(h,a.asset_string)}),j=i(null,g),j.allDay=b,j.date=a,(new k(j)).show()},p.prototype.updateFragment=function(a){var b,d,e;b=this.dataFromDocumentHash();for(d in a)e=a[d],b[d]=e;return location.replace("#"+c.encodeToHex(JSON.stringify(b)))},p.prototype.viewDisplay=function(a){return this.updateFragment({view_start:c.dateToISO8601UTC(a.start)})},p.prototype.drop=function(a,b,d,e){var f,g,h,i;g=c(e.helper).data("event-id"),f=c("[data-event-id="+g+"]").data("calendarEvent"),i=function(){return console.log("could not save date on undated event")};if(f){f.start=a,f.addClass("event_pending");if(f.eventType==="assignment"&&b){i();return}return f.eventType==="assignment"&&f.isDueAtMidnight()&&minuteDelta===0&&f.start.setMinutes(59),f.eventType==="calendar_event"&&b&&(f.allDay=!0),f.end&&f.endDate()&&(h=f.endDate().getTime()-f.startDate().getTime(),f.end=new Date(f.start.getTime()+h)),this.calendar.fullCalendar("renderEvent",f),f.saveDates(null,i)}},p.prototype.fragmentChange=function(a,b){var d,e,f,g;d=this.dataFromDocumentHash(),f=(g=this.calendar)!=null?g.fullCalendar("getView"):void 0;if(!f||!!c.isEmptyObject(d))return;(d.view_name==="month"||d.view_name==="agendaWeek")&&d.view_name!==f.name&&this.calendar.fullCalendar("changeView",d.view_name);if(d.view_start&&d.view_start!==c.dateToISO8601UTC(f.start)){e=c.fullCalendar.parseISO8601(d.view_start);if(e)return this.calendar.fullCalendar("gotoDate",e)}},p.prototype.reloadClick=function(a){a.preventDefault();if(this.activeAjax===0)return this.dataSource.clearCache(),this.currentView==="scheduler"&&this.scheduler.loadData(),this.calendar.fullCalendar("refetchEvents")},p.prototype.eventDeleting=function(a){return a.addClass("event_pending"),this.calendar.fullCalendar("updateEvent",a)},p.prototype.eventDeleted=function(a){return this.calendar.fullCalendar("removeEvents",a.id)},p.prototype.eventSaving=function(a){if(!a.start)return;return a.addClass("event_pending"),a.isNewEvent()?this.calendar.fullCalendar("renderEvent",a):this.calendar.fullCalendar("updateEvent",a)},p.prototype.eventSaved=function(a){return a.removeClass("event_pending"),delete a._id,this.calendar.fullCalendar("refetchEvents"),this.closeEventPopups()},p.prototype.eventSaveFailed=function(a){return a.removeClass("event_pending"),a.isNewEvent()?this.calendar.fullCalendar("removeEvents",a.id):this.calendar.fullCalendar("updateEvent",a)},p.prototype.updateOverrides=function(a){return d.each(this.dataSource.cache.contexts[a.contextCode()].events,function(b,c){if(c.match(/override/)&&a.assignment.id===b.assignment.id)return b.updateAssignmentTitle(a.title)})},p.prototype.visibleContextListChanged=function(a){return this.visibleContextList=a,this.calendar.fullCalendar("refetchEvents")},p.prototype.ajaxStarted=function(){return this.activeAjax+=1,this.$refresh_calendar_link.addClass("loading")},p.prototype.ajaxEnded=function(){this.activeAjax-=1;if(!this.activeAjax)return this.$refresh_calendar_link.removeClass("loading")},p.prototype.refetchEvents=function(){return this.calendar.fullCalendar("refetchEvents")},p.prototype.gotoDate=function(a){return this.calendar.fullCalendar("gotoDate",a)},p.prototype.loadView=function(a){return this.updateFragment({view_name:a}),a!=="scheduler"?(this.currentView=a,this.calendar.removeClass("scheduler-mode"),this.displayAppointmentEvents=null,this.scheduler.hide(),this.$create_new_event_link.show(),this.calendar.show(),this.calendar.fullCalendar("refetchEvents"),this.calendar.fullCalendar("changeView",a==="week"?"agendaWeek":"month")):(this.currentView="scheduler",this.calendar.addClass("scheduler-mode"),this.$create_new_event_link.hide(),this.calendar.hide(),this.scheduler.show())},h=c("<div />").appendTo("body"),o=[43,5,205,85,289,63,230,186,115,330],n=function(a,b,c){var d;return d=f(a,b,c),"rgb("+d.join(" ,")+")"},p.prototype.colorizeContexts=function(){var a,b,c,d,e,f,g,i,j,k,l,m,p;return l=[30,96],b=l[0],a=l[1],m=[60,40],k=m[0],j=m[1],p=[70,70],i=p[0],g=p[1],d=function(){var d,h,l,m;l=this.contextCodes,m=[];for(f=d=0,h=l.length;d<h;f=++d)c=l[f],e=o[f%o.length],m.push(".group_"+c+"{           color: "+n(e,k,j)+";           border-color: "+n(e,i,g)+";           background-color: "+n(e,b,a)+";        }");return m}.call(this),h.html("<style>"+d.join("")+"</style>")},p.prototype.dataFromDocumentHash=function(){var a,b;a={};try{a=c.parseJSON(c.decodeFromHex(location.hash.substring(1)))||{}}catch(d){b=d,a={}}return a},p}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/UndatedEventsList",["jquery","jst/calendar/undatedEvents","compiled/calendar/EventDataSource","compiled/calendar/ShowEventDetailsDialog","jqueryui/draggable","jquery.disableWhileLoading","vendor/jquery.ba-tinypubsub"],function(b,c,d,e){var f;return f=function(){function d(d,e,f){this.dataSource=e,this.calendar=f,this.eventSaved=a(this.eventSaved,this),this.eventSaving=a(this.eventSaving,this),this.visibleContextListChanged=a(this.visibleContextListChanged,this),this.clickEvent=a(this.clickEvent,this),this.show=a(this.show,this),this.load=a(this.load,this),this.div=b(d).html(c({})),this.hidden=!0,this.visibleContextList=[],b.subscribe({"CommonEvent/eventDeleting":this.eventSaving,"CommonEvent/eventDeleted":this.eventSaved,"CommonEvent/eventSaving":this.eventSaving,"CommonEvent/eventSaved":this.eventSaved,"Calendar/visibleContextListChanged":this.visibleContextListChanged}),this.div.on("click",".event",this.clickEvent).on("click",".undated_event_title",this.clickEvent).on("click",".undated-events-link",this.show)}return d.prototype.load=function(){var a,d=this;if(this.hidden)return;return a=new b.Deferred,this.div.disableWhileLoading(a,{buttons:[".undated-events-link"],opacity:1,lines:8,length:2,width:2,radius:3}),this.dataSource.getEvents(null,null,this.visibleContextList,function(e){var f,g,h,i,j;a.resolve();for(g=0,i=e.length;g<i;g++)f=e[g],f.details_url=f.fullDetailsURL(),f.icon=f.calendarEvent?"calendar-day":"assignment";d.div.html(c({events:e}));for(h=0,j=e.length;h<j;h++)f=e[h],d.div.find("."+f.id).data("calendarEvent",f);return d.div.find(".event").draggable({revert:"invalid",revertDuration:0,helper:"clone",start:function(){return d.calendar.closeEventPopups(),b(d).hide()},stop:function(a,c){if(!b(this).data("calendarEvent").start)return b(this).show()}})})},d.prototype.show=function(a){return a.preventDefault(),this.hidden=!1,this.load()},d.prototype.clickEvent=function(a){var c,d;a.preventDefault(),d=b(a.target).data("event-id"),d||(d=b(a.target).closest(".event").data("event-id")),c=this.dataSource.eventWithId(d);if(c)return(new e(c,this.dataSource)).show(a)},d.prototype.visibleContextListChanged=function(a){this.visibleContextList=a;if(!this.hidden)return this.load()},d.prototype.eventSaving=function(a){return this.div.find("."+a.id).addClass("event_pending")},d.prototype.eventSaved=function(){return this.load()},d}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("compiled/calendar/sidebar",["jquery","underscore","compiled/userSettings","jst/calendar/contextList","jst/calendar/undatedEvents","compiled/calendar/commonEventFactory","compiled/calendar/EditEventDetailsDialog","compiled/calendar/EventDataSource","compiled/jquery.kylemenu","jquery.instructure_misc_helpers","vendor/jquery.ba-tinypubsub"],function(c,d,e,f,g,h,i,j){var k,l,m;return l=d.map,k=function(){function d(b,d,f){var g,h,i;this.$holder=f,this.restoreList=a(this.restoreList,this),this.saveAndClear=a(this.saveAndClear,this),i=function(){try{return c.parseJSON(c.decodeFromHex(location.hash.substring(1)))||{}}catch(a){return h=a,{}}}(),i.show&&(this.contexts=i.show.split(",")),this.contexts||(this.contexts=d),this.contexts||(this.contexts=e.get("checked_calendar_codes")),this.contexts||(this.contexts=function(){var a,c,d,e;d=b.slice(0,10),e=[];for(a=0,c=d.length;a<c;a++)g=d[a],e.push(g.asset_string);return e}()),this.notify(),c.subscribe("Calendar/saveVisibleContextListAndClear",this.saveAndClear),c.subscribe("Calendar/restoreVisibleContextList",this.restoreList)}return d.prototype.saveAndClear=function(){if(!this.savedContexts)return this.savedContexts=this.contexts,this.contexts=[],this.notify()},d.prototype.restoreList=function(){if(this.savedContexts)return this.contexts=this.savedContexts,this.savedContexts=null,this.notify()},d.prototype.toggle=function(a){var b;return b=c.inArray(a,this.contexts),b>=0?this.contexts.splice(b,1):(this.contexts.push(a),this.contexts.length>10&&this.contexts.shift),this.notify()},d.prototype.notify=function(){var a=this;return c.publish("Calendar/visibleContextListChanged",[this.contexts]),this.$holder.find(".context_list_context").each(function(d,e){var f,g,h;return f=c(e),g=(h=f.data("context"),b.call(a.contexts,h)>=0),f.toggleClass("checked",g).toggleClass("not-checked",!g).find(".context-list-toggle-box").attr("aria-checked",g)})},d}(),m=function(a,b,d){var g,h;return g=c("#context-list-holder"),g.html(f({contexts:a})),h=new k(a,b,g),g.delegate(".context_list_context","click",function(a){return h.toggle(c(this).data("context")),e.set("checked_calendar_codes",l(c(this).parent().children(".checked"),function(a){return c(a).data("context")}))})}})}.call(this),function(){require(["jquery","compiled/calendar/Calendar","compiled/calendar/MiniCalendar","compiled/calendar/sidebar","compiled/calendar/EventDataSource","compiled/calendar/UndatedEventsList","compiled/bundles/jquery_ui_menu"],function(a,b,c,d,e,f){return this.eventDataSource=new e(ENV.CALENDAR.CONTEXTS),this.calendar=new b("#calendar-app",ENV.CALENDAR.CONTEXTS,ENV.CALENDAR.MANAGE_CONTEXTS,this.eventDataSource,{activateEvent:ENV.CALENDAR.ACTIVE_EVENT,viewStart:ENV.CALENDAR.VIEW_START,calendar2Only:ENV.CALENDAR.CAL2_ONLY,showScheduler:ENV.CALENDAR.SHOW_SCHEDULER}),new c("#minical",this.calendar),new f("#undated-events",this.eventDataSource,this.calendar),d(ENV.CALENDAR.CONTEXTS,ENV.CALENDAR.SELECTED_CONTEXTS,this.eventDataSource)})}.call(this),define("compiled/bundles/calendar2",function(){})