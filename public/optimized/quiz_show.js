define(["i18n!quizzes.show","jquery","compiled/views/MessageStudentsDialog","quiz_arrows","quiz_inputs","jquery.instructure_date_and_time","jqueryui/dialog","compiled/jquery/fixDialogButtons","compiled/jquery.rails_flash_notifications","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.disableWhileLoading","message_students"],function(a,b,c,d,e){b(document).ready(function(){function f(a){return b("#quiz_details").length?a():b.get(b("#quiz_details_wrapper").data("url"),function(c){b("#quiz_details_wrapper").html(c),a()})}d(),e.disableInputs("[type=radio], [type=checkbox]"),e.setWidths(),b(".delete_quiz_link").click(function(c){c.preventDefault();var d=a.t("confirms.delete_quiz","Are you sure you want to delete this quiz?");submittedCount=parseInt(b("#quiz_details_wrapper").data("submitted-count")),submittedCount>0&&(d+="\n\n"+a.t("confirms.delete_quiz_submissions_warning",{one:"Warning: 1 student has already taken this quiz. If you delete it, any completed submissions will be deleted and no longer appear in the gradebook.",other:"Warning: %{count} students have already taken this quiz. If you delete it, any completed submissions will be deleted and no longer appear in the gradebook."},{count:submittedCount})),b("nothing").confirmDelete({url:b(this).attr("href"),message:d,success:function(){window.location.href=ENV.QUIZZES_URL}})});var g=!1;b(".quiz_details_link").click(function(c){c.preventDefault(),b("#quiz_details_wrapper").disableWhileLoading(f(function(){var c=b("#quiz_details_text");b("#quiz_details").slideToggle(),g?ENV.IS_SURVEY?c.text(a.t("links.show_student_survey_results","Show Student Survey Results")):c.text(a.t("links.show_student_quiz_results","Show Student Quiz Results")):ENV.IS_SURVEY?c.text(a.t("links.hide_student_survey_results","Hide Student Survey Results")):c.text(a.t("links.hide_student_quiz_results","Hide Student Quiz Results")),g=!g}))}),b(".message_students_link").click(function(b){b.preventDefault(),f(function(){var b=ENV.QUIZ_SUBMISSION_LIST,d=b.UNSUBMITTED_STUDENTS,e=b.SUBMITTED_STUDENTS,f=a.t("students_who_have_taken_the_quiz","Students who have taken the quiz"),g=a.t("students_who_have_not_taken_the_quiz","Students who have NOT taken the quiz"),h=new c({context:ENV.QUIZ.title,recipientGroups:[{name:f,recipients:e},{name:g,recipients:d}]});h.open()})}),b.scrollSidebar(),b("#let_students_take_this_quiz_button").ifExists(function(a){var c=b("#unlock_for_how_long_dialog");a.click(function(){return c.dialog("open"),!1}),c.dialog({autoOpen:!1,modal:!0,resizable:!1,width:400,buttons:{Unlock:function(){var a=b(this).find(".datetime_suggest").text();b("#quiz_unlock_form").append(b(this).dialog("destroy")).find("#quiz_lock_at").val(a).end().submit()}}}).find(".datetime_field").datetime_field()}),b("#lock_this_quiz_now_link").ifExists(function(a){a.click(function(a){a.preventDefault(),b("#quiz_lock_form").submit()})}),b("ul.page-action-list").find("li").length>0&&b("ul.page-action-list").show(),b("#publish_quiz_form").formSubmit({beforeSubmit:function(c){b(this).find("button").attr("disabled",!0).text(a.t("buttons.publishing","Publishing..."))},success:function(c){b(this).find("button").text(a.t("buttons.published","Published!")),location.reload()}})})})