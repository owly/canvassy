/*!
 * jQuery UI Position @VERSION
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
define(["jquery"],function(a){function l(a,b,c){return[parseInt(a[0],10)*(j.test(a[0])?b/100:1),parseInt(a[1],10)*(j.test(a[1])?c/100:1)]}function m(b,c){return parseInt(a.css(b,c),10)||0}a.ui=a.ui||{};var b,c=Math.max,d=Math.abs,e=Math.round,f=/left|center|right/,g=/top|center|bottom/,h=/[\+\-]\d+%?/,i=/^\w+/,j=/%$/,k=a.fn.position;a.position={scrollbarWidth:function(){if(b!==undefined)return b;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=e.children()[0];return a("body").append(e),c=f.offsetWidth,e.css("overflow","scroll"),d=f.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),b=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e=c==="scroll"||c==="auto"&&b.width<b.element[0].scrollWidth,f=d==="scroll"||d==="auto"&&b.height<b.element[0].scrollHeight;return{width:e?a.position.scrollbarWidth():0,height:f?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return k.apply(this,arguments);b=a.extend({},b);var c,j,n,o,p,q=a(b.of),r=a.position.getWithinInfo(b.within),s=a.position.getScrollInfo(r),t=q[0],u=(b.collision||"flip").split(" "),v={};return t.nodeType===9?(j=q.width(),n=q.height(),o={top:0,left:0}):a.isWindow(t)?(j=q.width(),n=q.height(),o={top:q.scrollTop(),left:q.scrollLeft()}):t.preventDefault?(b.at="left top",j=n=0,o={top:t.pageY,left:t.pageX}):(j=q.outerWidth(),n=q.outerHeight(),o=q.offset()),p=a.extend({},o),a.each(["my","at"],function(){var a=(b[this]||"").split(" "),c,d;a.length===1&&(a=f.test(a[0])?a.concat(["center"]):g.test(a[0])?["center"].concat(a):["center","center"]),a[0]=f.test(a[0])?a[0]:"center",a[1]=g.test(a[1])?a[1]:"center",c=h.exec(a[0]),d=h.exec(a[1]),v[this]=[c?c[0]:0,d?d[0]:0],b[this]=[i.exec(a[0])[0],i.exec(a[1])[0]]}),u.length===1&&(u[1]=u[0]),b.at[0]==="right"?p.left+=j:b.at[0]==="center"&&(p.left+=j/2),b.at[1]==="bottom"?p.top+=n:b.at[1]==="center"&&(p.top+=n/2),c=l(v.at,j,n),p.left+=c[0],p.top+=c[1],this.each(function(){var f,g,h=a(this),i=h.outerWidth(),k=h.outerHeight(),t=m(this,"marginLeft"),w=m(this,"marginTop"),x=i+t+m(this,"marginRight")+s.width,y=k+w+m(this,"marginBottom")+s.height,z=a.extend({},p),A=l(v.my,h.outerWidth(),h.outerHeight());b.my[0]==="right"?z.left-=i:b.my[0]==="center"&&(z.left-=i/2),b.my[1]==="bottom"?z.top-=k:b.my[1]==="center"&&(z.top-=k/2),z.left+=A[0],z.top+=A[1],a.support.offsetFractions||(z.left=e(z.left),z.top=e(z.top)),f={marginLeft:t,marginTop:w},a.each(["left","top"],function(d,e){a.ui.position[u[d]]&&a.ui.position[u[d]][e](z,{targetWidth:j,targetHeight:n,elemWidth:i,elemHeight:k,collisionPosition:f,collisionWidth:x,collisionHeight:y,offset:[c[0]+A[0],c[1]+A[1]],my:b.my,at:b.at,within:r,elem:h})}),a.fn.bgiframe&&h.bgiframe(),b.using&&(g=function(a){var c=o.left-z.left,e=c+j-i,f=o.top-z.top,g=f+n-k,l={target:{element:q,left:o.left,top:o.top,width:j,height:n},element:{element:h,left:z.left,top:z.top,width:i,height:k},horizontal:e<0?"left":c>0?"right":"center",vertical:g<0?"top":f>0?"bottom":"middle"};j<i&&d(c+e)<j&&(l.horizontal="center"),n<k&&d(f+g)<n&&(l.vertical="middle"),d(c+e)/2>d(f+g)/2?l.important="horizontal":l.important="vertical",b.using.call(this,a,l)}),h.offset(a.extend(z,{using:g}))})},a.ui.position={fit:{left:function(a,b){var d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e,j;b.collisionWidth>f?h>0&&i<=0?(j=a.left+h+b.collisionWidth-f-e,a.left+=h-j):i>0&&h<=0?a.left=e:h>i?a.left=e+f-b.collisionWidth:a.left=e:h>0?a.left+=h:i>0?a.left-=i:a.left=c(a.left-g,a.left)},top:function(a,b){var d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e,j;b.collisionHeight>f?h>0&&i<=0?(j=a.top+h+b.collisionHeight-f-e,a.top+=h-j):i>0&&h<=0?a.top=e:h>i?a.top=e+f-b.collisionHeight:a.top=e:h>0?a.top+=h:i>0?a.top-=i:a.top=c(a.top-g,a.top)}},flip:{left:function(a,b){var c=b.within,e=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?0:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k=b.my[0]==="left"?-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,l=b.at[0]==="left"?b.targetWidth:b.at[0]==="right"?-b.targetWidth:0,m=-2*b.offset[0],n,o;if(i<0){n=a.left+k+l+m+b.collisionWidth-f-e;if(n<0||n<d(i))a.left+=k+l+m}else if(j>0){o=a.left-b.collisionPosition.marginLeft+k+l+m-g;if(o>0||d(o)<j)a.left+=k+l+m}},top:function(a,b){var c=b.within,e=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?0:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k=b.my[1]==="top",l=k?-b.elemHeight:b.my[1]==="bottom"?b.elemHeight:0,m=b.at[1]==="top"?b.targetHeight:b.at[1]==="bottom"?-b.targetHeight:0,n=-2*b.offset[1],o,p;i<0?(p=a.top+l+m+n+b.collisionHeight-f-e,a.top+l+m+n>i&&(p<0||p<d(i))&&(a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-g,a.top+l+m+n>j&&(o>0||d(o)<j)&&(a.top+=l+m+n))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&e<11,b.innerHTML="",c.removeChild(b)}(),a.uiBackCompat!==!1&&function(a){var b=a.fn.position;a.fn.position=function(c){if(!c||!c.offset)return b.call(this,c);var d=c.offset.split(" "),e=c.at.split(" ");return d.length===1&&(d[1]=d[0]),/^\d/.test(d[0])&&(d[0]="+"+d[0]),/^\d/.test(d[1])&&(d[1]="+"+d[1]),e.length===1&&(/left|center|right/.test(e[0])?e[1]="center":(e[1]=e[0],e[0]="center")),b.call(this,a.extend(c,{at:e[0]+d[0]+" "+e[1]+d[1],offset:undefined}))}}(jQuery)})