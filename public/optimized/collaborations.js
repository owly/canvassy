define(["i18n!collaborations","jquery","jquery.ajaxJSON","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","jquery.templateData","vendor/jquery.scrollTo"],function(a,b){var c={};c.Util={removeCollaboration:function(a){var c=b("#collaborations .collaboration:visible");c.length<=1&&(b("#no_collaborations_message").slideDown(),b(".add_collaboration_link").click()),a.slideUp(function(){a.remove()})}},c.Events={init:function(){b("#delete_collaboration_dialog .cancel_button").on("click",this.onClose),b("#delete_collaboration_dialog .delete_button").on("click",this.onDelete),b(document).fragmentChange(this.onFragmentChange),b("#collaboration_collaboration_type").on("change",this.onTypeChange).change()},onClose:function(a){b("#delete_collaboration_dialog").dialog("close")},onDelete:function(a){var d=b(this).hasClass("delete_document_button"),e={delete_doc:d},f=b("#delete_collaboration_dialog").data("collaboration"),g=f.find(".delete_collaboration_link").attr("href");f.dim(),b("#delete_collaboration_dialog").dialog("close"),b.ajaxJSON(g,"DELETE",e,function(a){c.Util.removeCollaboration(f)},b.noop)},onFragmentChange:function(a,c){if(c!=="#add_collaboration")return;b("#collaborations .collaboration").length==0&&b(".add_collaboration_link").click()},onTypeChange:function(a){var c=b(this).val(),d=c,e;if(INST.collaboration_types)for(var f in INST.collaboration_types){var g=INST.collaboration_types[f];g.name===c&&(d=g.type)}b(".collaboration_type").hide(),e=b("#new_collaboration #"+d+"_description"),e.show(),b(".collaborate_data").showIf(!e.hasClass("unauthorized")),b(".collaboration_authorization").hide(),b("#collaborate_authorize_"+d).showIf(e.hasClass("unauthorized"))}},b(document).ready(c.Events.init.bind(c.Events))})